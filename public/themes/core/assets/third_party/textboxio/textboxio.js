/*
 Textbox.io JavaScript Library
 Copyright (c) 2013-2017 Ephox Corp. All rights reserved.
 This software is provided "AS IS," without a warranty of any kind.

 Version: 2.2.0.125
 Client Build: 2.2.0.148
*/
(function(){var ma,oa={},l=function(c,d,b){if("string"!==typeof c)throw"module id must be a string";if(void 0===d)throw"no dependencies for "+c;if(void 0===b)throw"no definition function for "+c;oa[c]={deps:d,defn:b,instance:void 0}},ja=function(c){var d=oa[c];if(void 0===d)throw"module ["+c+"] was undefined";if(void 0===d.instance){for(var b=oa[c],a=b.deps,e=b.defn,f=a.length,g=Array(f),h=0;h<f;++h)g[h]=ja(a[h]);a=e.apply(null,g);if(void 0===a)throw"module ["+c+"] returned undefined";b.instance=
a}return d.instance};ma={define:l,require:function(c,d){for(var b=c.length,a=Array(b),e=0;e<b;++e)a.push(ja(c[e]));d.apply(null,d)},demand:ja};var Ca=ja,ca=function(c,d){l(c,[],function(){return d})};l("1",[],function(){return Function("return this;")()});l("8",[],function(){return function(){return{major:"2",minor:"2",full:"2.2.0.125"}}});ca("9",Array);l("7",["9"],function(c){return{noop:function(){},compose:function(c,b){return function(){return c(b.apply(null,arguments))}},constant:function(c){return function(){return c}},
identity:function(c){return c},tripleEquals:function(c,b){return c===b},curry:function(d){for(var b=new c(arguments.length-1),a=1;a<arguments.length;a++)b[a-1]=arguments[a];return function(){for(var a=new c(arguments.length),f=0;f<a.length;f++)a[f]=arguments[f];a=b.concat(a);return d.apply(null,a)}},not:function(c){return function(){return!c.apply(null,arguments)}},die:function(c){return function(){throw c;}},apply:function(c){return c()},call:function(c){c()}}});l("2",["8","7"],function(c,d){return function(b){b=
d.die(b);return{replace:b,replaceAll:b,inline:b,inlineAll:b,get:b,getActiveEditor:b,definePlugin:b,version:c,isSupported:d.constant(!1)}}});ca("w",String);l("a",["9","w"],function(c,d){var b=function(a){return function(b){if(null===b)b="null";else{var f=typeof b;b="object"===f&&c.prototype.isPrototypeOf(b)?"array":"object"===f&&d.prototype.isPrototypeOf(b)?"string":f}return b===a}};return{isString:b("string"),isObject:b("object"),isArray:b("array"),isNull:b("null"),isBoolean:b("boolean"),isUndefined:b("undefined"),
isFunction:b("function"),isNumber:b("number")}});l("b",["9","w"],function(c,d){var b=function(a){return function(b){return a===b}},a=function(){var a=c.prototype.indexOf,e=function(b,e){return a.call(b,e)},d=function(a,e){return n(a,b(e))};return void 0===a?d:e}(),e=function(b,e){return-1<a(b,e)},f=function(a,b){for(var e=a.length,d=new c(e),f=0;f<e;f++)d[f]=b(a[f],f,a);return d},g=function(a,b){for(var e=0,c=a.length;e<c;e++)b(a[e],e,a)},h=function(a,b){for(var e=[],c=0,d=a.length;c<d;c++){var f=
a[c];b(f,c,a)&&e.push(f)}return e},k=function(a,b,e){g(a,function(a){e=b(e,a)});return e},m=function(a,b){for(var e=0,c=a.length;e<c;e++){var d=a[e];if(b(d,e,a))return d}},n=function(a,b){for(var e=b||r,c=0,d=a.length;c<d;++c)if(!0===e(a[c]))return c;return-1},p=c.prototype.push,q=function(a){for(var b=[],e=0,c=a.length;e<c;++e)p.apply(b,a[e]);return b},r=b(!0),s=function(a,b){for(var e=b||r,c=0,d=a.length;c<d;++c)if(!0!==e(a[c],c))return!1;return!0},t=c.prototype.slice,u=function(a){a=t.call(a,0);
a.reverse();return a};return{map:f,each:g,partition:function(a,b){for(var e=[],c=[],d=0,f=a.length;d<f;d++){var g=a[d];(b(g,d,a)?e:c).push(g)}return{pass:e,fail:c}},filter:h,groupBy:function(a,b){if(0===a.length)return[];for(var e=b(a[0]),c=[],d=[],f=0,g=a.length;f<g;f++){var h=a[f],k=b(h);k!==e&&(c.push(d),d=[]);e=k;d.push(h)}0!==d.length&&c.push(d);return c},indexOf:a,foldr:function(a,b,e){return k(u(a),b,e)},foldl:k,find:m,findIndex:n,findOr:function(a,b,e){a=m(a,b);return void 0!==a?a:e},findOrDie:function(a,
b,e){b=m(a,b);if(void 0===b)throw e||"Could not find element in array: "+d(a);return b},flatten:q,bind:function(a,b){var e=f(a,b);return q(e)},forall:s,exists:function(a,b){return-1<n(a,b)},contains:e,equal:function(a,b){return a.length===b.length&&s(a,function(a,e){return a===b[e]})},reverse:u,chunk:function(a,b){for(var e=[],c=0;c<a.length;c+=b){var d=a.slice(c,c+b);e.push(d)}return e},difference:function(a,b){return h(a,function(a){return!e(b,a)})},mapToObject:function(a,b){for(var e={},c=0,f=
a.length;c<f;c++){var g=a[c];e[d(g)]=b(g,c)}return e},pure:function(a){return[a]}}});l("x",["7"],function(c){return function(d,b,a){var e=d.isiOS()&&!0===/ipad/i.test(a),f=d.isiOS()&&!e,g=d.isAndroid()&&3===d.version.major,h=d.isAndroid()&&4===d.version.major,g=e||g||h&&!0===/mobile/i.test(a),k=(h=d.isiOS()||d.isAndroid())&&!g;b=b.isSafari()&&d.isiOS()&&!1===/safari/i.test(a);return{isiPad:c.constant(e),isiPhone:c.constant(f),isTablet:c.constant(g),isPhone:c.constant(k),isTouch:c.constant(h),isAndroid:d.isAndroid,
isiOS:d.isiOS,isWebView:c.constant(b)}}});l("y",[],function(){return{create:function(c,d,b){return{browser:{current:c,version:d},os:{current:b}}}}});l("1r",[],function(){var c=function(c){return function(){return c}};return{getter:c,attachGetters:function(d,b,a){for(var e=0;e<a.length;e++)d["is"+a[e].name]=c(a[e].name===b)}}});l("z",["1r"],function(c){return{create:function(d,b,a){var e=c.attachGetters,f={};f.current=b;f.version=a;e(f,f.current,d);return f}}});ca("1s",Math);ca("1t",isFinite);ca("1u",
isNaN);ca("1v",parseFloat);l("1k",["1s","1t","1u","1v"],function(c,d,b,a){var e=function(a){return function(b,e){var c=typeof e;if(c!==a)throw b+" was not a "+a+". Was: "+e+" ("+c+")";}},f=e("string"),g=e("number"),h=function(a,b){g(a,b);if(b!==c.abs(b))throw a+" was not an integer. Was: "+b;};return{vString:f,vChar:function(a,b){f(a,b);if(1!==b.length)throw a+" was not a single char. Was: "+b;},vInt:h,vNat:function(a,b){h(a,b);if(0>b)throw a+" was not a natural number. Was: "+b;},pNum:function(e){return!b(a(e))&&
d(e)}}});l("v",["1k"],function(c){var d=function(a,b,e){return""===b?!0:a.length<b.length?!1:a.substr(e,e+b.length)===b},b=function(a){var b=function(a,b){for(var e=[],c=0;c<a.length;c++)e.push(b(a[c]));return e};return function(){var e=b(arguments,function(a){return"string"===typeof a?a.toLowerCase():a});return a.apply(this,e)}},a=function(a,b){return d(a,b,0)},e=b(a),f=function(a,b){return d(a,b,a.length-b.length)},g=b(f),h=function(a,b){return a.substr(0,b)},k=function(a,b){return a.substr(a.length-
b,a.length)},m=function(a,b){return function(e,c){return a(e,c)?b(e,e.length-c.length):e}},n=m(a,k),m=m(f,h),p=function(a,b){return function(e,c){return a(e,c)?e:b(e,c)}},q=p(a,function(a,b){return b+a}),p=p(f,function(a,b){return a+b}),r=function(a,b){return-1!=a.indexOf(b)},s=b(r),t=function(a,b){return a===b},b=b(t),u=function(a){if(""===a)throw"head on empty string";return a.substr(0,1)},v=function(a){if(""===a)throw"tail on empty string";return a.substr(1,a.length-1)},w=function(a,b){c.vString("str",
a);c.vNat("num",b);for(var e="",d=0;d<b;d++)e+=a;return e},x=function(a){return function(b,e,d){c.vString("str",b);c.vChar("c",e);c.vNat("width",d);var f=b.length;return f>=d?b:a(b,w(e,d-f))}},y=x(function(a,b){return b+a}),x=x(function(a,b){return a+b});return{supplant:function(a,b){return a.replace(/\${([^{}]*)}/g,function(a,e){var c=b[e],d=typeof c;return"string"===d||"number"===d?c:a})},startsWith:a,startsWithIgnoringCase:e,endsWith:f,endsWithIgnoringCase:g,first:h,last:k,removeLeading:n,removeTrailing:m,
ensureLeading:q,ensureTrailing:p,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},lTrim:function(a){return a.replace(/^\s+/g,"")},rTrim:function(a){return a.replace(/\s+$/g,"")},contains:r,containsIgnoringCase:s,htmlEncodeDoubleQuotes:function(a){return a.replace(/\"/gm,"&quot;")},equals:t,equalsIgnoringCase:b,head:u,repead:w,padLeft:y,padRight:x,toe:function(a){if(""===a)throw"toe on empty string";return a.substr(a.length-1,a.length)},tail:v,torso:function(a){if(""===a)throw"torso on empty string";
return a.substr(0,a.length-1)},capitalize:function(a){return""===a?a:u(a).toUpperCase()+v(a)}}});l("10",["v"],function(c){var d=c.contains,b=function(a){return function(b){return d(b,a)}},a=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;return{create:function(e){var c=[{name:"Spartan",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){return d(a,"edge/")&&d(a,"chrome")&&d(a,"safari")&&d(a,"applewebkit")}},{name:"ChromeFrame",versionRegexes:[/.*?chromeframe\/([0-9]+)\.([0-9]+).*/,a],search:function(a){return d(a,
"chromeframe")?e():!1}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,a],search:function(a){return d(a,"chrome")&&!d(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){var b=d(a,"msie")||d(a,"trident");return d(a,"chromeframe")?b&&!e():b}},{name:"Opera",versionRegexes:[a,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:b("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:b("firefox")},
{name:"Safari",versionRegexes:[a,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(d(a,"safari")||d(a,"mobile/"))&&d(a,"applewebkit")}},{name:"Envjs",versionRegexes:[/.*?envjs\/\ ?([0-9]+)\.([0-9]+).*/],search:b("envjs")}],g=[{name:"Windows",search:b("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return d(a,"iphone")||d(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},
{name:"Android",search:b("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:b("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:b("linux")},{name:"Solaris",search:b("sunos")},{name:"FreeBSD",search:b("freebsd")}];return{browsers:c,oses:g}},chromeFrameChecker:function(){try{return!!new ActiveXObject("ChromeTab.ChromeFrame")}catch(a){return!1}}}});l("11",[],function(){return{meetsSpec:function(c,d){var b=typeof c;if("boolean"===b)return!!c;
if("object"===b)return b=c.minimum,d.major>b.major||d.major===b.major&&d.minor>=b.minor;throw"invalid spec";}}});l("1w",[],function(){return{findOneInArrayOr:function(c,d,b){for(var a=0;a<c.length;a++){var e=c[a];if(b(e,a,c))return e}return d}}});l("12",["1w"],function(c){return{detect:function(d,b){var a=c.findOneInArrayOr,e=String(b).toLowerCase();return a(d,{name:void 0},function(a){return a.search(e)})}}});l("13",[],function(){return{detectVersion:function(c,d){var b=String(d).toLowerCase(),a=
c.versionRegexes;if(a){a:{for(var e=0;e<a.length;e++){var f=a[e];if(f.test(b)){a=f;break a}}a=void 0}b=a?{major:Number(b.replace(a,"$1")),minor:Number(b.replace(a,"$2"))}:{major:0,minor:0}}else b={major:0,minor:0};return b}}});l("c","x y z 10 11 12 13".split(" "),function(c,d,b,a,e,f,g){var h=g.detectVersion,k=b.create,m=e.meetsSpec,n=f.detect,p=function(a,b,e,c){return a[b]?a[b][e]?m(a[b][e],c):!!a[b].All:!1},q=function(b,e){var d=a.create(e),f=d.browsers,d=d.oses,g=n(d,b),m=g.name,g=h(g,b),q=n(f,
b),y=q.name,z=h(q,b),d=k(d,m,g),f=k(f,y,z),g=c(d,f,b);return{browser:f,os:d,deviceType:g,isSupported:function(a){return p(a,m,y,z)}}};return{Platform:d,detect:function(){return q(navigator.userAgent,a.chromeFrameChecker)},doDetect:q,isSupported:p,isSupportedPlatform:function(a,b){var e=b.browser;return p(a,b.os.current,e.current,e.version)}}});l("4g",["b"],function(c){var d=function(b){return b.replace(/\./g,"-")};return{create:function(b){var a=d(b);return{resolve:function(b){b=b.split(" ");return c.map(b,
function(b){return a+"-"+b}).join(" ")}}},cssNamespace:d,cssClass:function(b,a){return b+"-"+a}}});l("33",["4g"],function(c){return{resolve:c.create("ephox-polish").resolve}});l("1x",["33"],function(c){return c});ca("19",Object);l("s",["7","19"],function(c,d){var b=c.constant(!1),a=c.constant(!0),e=function(){return f},f=function(){var f=function(a){return a.isNone()},g=function(a){return a()},m=function(a){return a},f={fold:function(a,b){return a()},is:b,isSome:b,isNone:a,getOr:m,getOrThunk:g,getOrDie:function(a){throw a||
"error: getOrDie called on none.";},or:m,orThunk:g,map:e,ap:e,each:e,bind:e,flatten:e,exists:b,forall:a,filter:e,equals:f,equals_:f,toArray:function(){return[]},toString:c.constant("none()")};d.freeze&&d.freeze(f);return f}(),g=function(c){var d=function(){return c},m=function(){return q},n=function(a){return g(a(c))},p=function(a){return a(c)},q={fold:function(a,b){return b(c)},is:function(a){return c===a},isSome:a,isNone:b,getOr:d,getOrThunk:d,getOrDie:d,or:m,orThunk:m,map:n,ap:function(a){return a.fold(e,
function(a){return g(a(c))})},each:n,bind:p,flatten:d,exists:p,forall:p,filter:function(a){return a(c)?q:f},equals:function(a){return a.is(c)},equals_:function(a,e){return a.fold(b,function(a){return e(c,a)})},toArray:function(){return[c]},toString:function(){return"some("+c+")"}};return q};return{some:g,none:e,from:function(a){return null===a||void 0===a?f:g(a)},equals:function(a,b){return a.equals(b)},equals_:function(a,b,e){return a.equals_(b,e)}}});l("2x",[],function(){return function(c,d,b){var a=
b||!1,e=function(){d();a=!0},f=function(){c();a=!1};return{on:e,off:f,toggle:function(){(a?f:e)()},isOn:function(){return a}}}});l("1o",["19"],function(c){var d=function(){var a=c.keys,b=function(a){var b=[],e;for(e in a)a.hasOwnProperty(e)&&b.push(e);return b};return void 0===a?b:a}(),b=function(a,b){for(var e=d(a),c=0,f=e.length;c<f;c++){var p=e[c];b(a[p],p,a)}},a=function(a,e){var c={};b(a,function(b,d){var f=e(b,d,a);c[f.k]=f.v});return c},e=function(a,e){var c=[];b(a,function(a,b){c.push(e(a,
b))});return c},f=function(a){return e(a,function(a){return a})};return{bifilter:function(a,e){var c={},d={};b(a,function(a,b){(e(a,b)?c:d)[b]=a});return{t:c,f:d}},each:b,map:function(b,e){return a(b,function(a,b,c){return{k:b,v:e(a,b,c)}})},mapToArray:e,tupleMap:a,find:function(a,b){for(var e=d(a),c=0,f=e.length;c<f;c++){var p=e[c],q=a[p];if(b(q,p,a))return q}},keys:d,values:f,size:function(a){return f(a).length}}});l("1q",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,
DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});l("21",["1q"],function(c){var d=function(a){return a.dom().nodeName.toLowerCase()},b=function(a){return a.dom().nodeType},a=function(a){return function(e){return b(e)===a}},e=a(c.ELEMENT),f=a(c.TEXT),a=a(c.DOCUMENT);return{name:d,type:b,value:function(a){return a.dom().nodeValue},isElement:e,isText:f,isDocument:a,isComment:function(a){return b(a)===c.COMMENT||"#comment"===d(a)}}});ca("n",Error);
l("o",[],function(){"undefined"===typeof console&&(console={log:function(){}});return console});l("1a","a b 1o 21 n o".split(" "),function(c,d,b,a,e,f){var g=function(a,b,d){if(c.isString(d)||c.isBoolean(d)||c.isNumber(d))a.setAttribute(b,d+"");else throw f.error("Invalid call to Attr.set. Key ",b,":: Value ",d,":: Element ",a),new e("Attribute value was not simple");},h=function(a,b,e){g(a.dom(),b,e)},k=function(a,b){var e=a.dom().getAttribute(b);return null===e?void 0:e},m=function(a,b){var e=a.dom();
return e&&e.hasAttribute?e.hasAttribute(b):!1};return{clone:function(a){return d.foldl(a.dom().attributes,function(a,b){a[b.name]=b.value;return a},{})},set:h,setAll:function(a,e){var c=a.dom();b.each(e,function(a,b){g(c,b,a)})},get:k,has:m,remove:function(a,b){a.dom().removeAttribute(b)},hasNone:function(a){a=a.dom().attributes;return void 0===a||null===a||0===a.length},transfer:function(b,e,c){a.isElement(b)&&a.isElement(e)&&d.each(c,function(a){m(b,a)&&!m(e,a)&&h(e,a,k(b,a))})}}});l("4h",["b",
"1a"],function(c,d){var b=function(a,b){var c=d.get(a,b);return void 0===c||""===c?[]:c.split(" ")};return{read:b,add:function(a,e,c){c=b(a,e).concat([c]);d.set(a,e,c.join(" "))},remove:function(a,e,f){var g=c.filter(b(a,e),function(a){return a!==f});0<g.length?d.set(a,e,g.join(" ")):d.remove(a,e)}}});l("34",["b","4h"],function(c,d){var b=function(a){return d.read(a,"class")},a=function(a,b){return d.add(a,"class",b)},e=function(a,b){return d.remove(a,"class",b)};return{get:b,add:a,remove:e,toggle:function(d,
g){c.contains(b(d),g)?e(d,g):a(d,g)},supports:function(a){return void 0!==a.dom().classList}}});l("1y",["2x","1a","34"],function(c,d,b){var a=function(a,c){return b.supports(a)&&a.dom().classList.contains(c)};return{add:function(a,c){b.supports(a)?a.dom().classList.add(c):b.add(a,c)},remove:function(a,c){b.supports(a)?a.dom().classList.remove(c):b.remove(a,c);0===(b.supports(a)?a.dom().classList:b.get(a)).length&&d.remove(a,"class")},toggle:function(a,c){return b.supports(a)?a.dom().classList.toggle(c):
b.toggle(a,c)},toggler:function(e,d){var g=b.supports(e),h=e.dom().classList;return c(function(){g?h.remove(d):b.remove(e,d)},function(){g?h.add(d):b.add(e,d)},a(e,d))},has:a}});ca("q",document);l("l",["7","n","o","q"],function(c,d,b,a){var e=function(a){if(null===a||void 0===a)throw new d("Node cannot be null or undefined");return{dom:c.constant(a)}};return{fromHtml:function(c,d){var h=(d||a).createElement("div");h.innerHTML=c;if(!h.hasChildNodes()||1<h.childNodes.length)throw b.error("HTML does not have a single root node",
c),"HTML must have a single root node";return e(h.childNodes[0])},fromTag:function(b,c){var d=(c||a).createElement(b);return e(d)},fromText:function(b,c){var d=(c||a).createTextNode(b);return e(d)},fromDom:e}});l("14",["1x","7","s","1y","l"],function(c,d,b,a,e){return function(){var f=b.none(),g=c.resolve("layer-editor-active"),h=function(b){a.remove(e.fromDom(b.element()),g)},k=function(c){f.filter(function(a){return a!==c.api}).each(h);a.add(e.fromDom(c.api.element()),g);f=b.some(c.api)};return{add:function(a){var e=
d.curry(k,a);f=f.orThunk(function(){a.api.events.loaded.addListener(e);return b.some(a.api)});a.api.events.focus.addListener(e)},get:function(){return f},remove:function(a){f.is(a.api)&&(f=b.none())}}}});l("2h",["1"],function(c){var d=function(b,a){for(var e=a||c,d=0;d<b.length&&void 0!==e&&null!==e;++d)e=e[b[d]];return e};return{path:d,resolve:function(b,a){var e=b.split(".");return d(e,a)}}});l("2i",["2h"],function(c){return{getOrDie:function(d,b){var a=c.resolve(d,b);if(void 0===a)throw d+" not available on this browser";
return a}}});l("1p",["2h","2i"],function(c,d){return{isPrototypeOf:function(b){var a=c.resolve("ownerDocument.defaultView",b);return d.getOrDie("HTMLElement",a).prototype.isPrototypeOf(b)}}});l("i",["a","b","1p","7","n"],function(c,d,b,a,e){var f=function(b,c,d,f,g,h){return{name:a.constant(b),output:a.constant(h||b),required:a.constant(f),validate:function(a){if(!d(a))throw a=g(b,c),new e(a);}}},g=function(a,b){return'value of "'+a+'" is not a '+b},h=function(a,b){return'value of "'+a+'" is not an '+
b},k=function(a,b,e){return function(c,d){return f(c,a,b,!0,e,d)}},m=function(a){return b.isPrototypeOf(a)},n=function(a){return c.isString(a)||c.isArray(a)||c.isObject(a)},p=k("array",c.isArray,h),q=k("boolean",c.isBoolean,g),r=k("function",c.isFunction,g),s=k("number",c.isNumber,g),t=k("object",c.isObject,h),u=k("string",c.isString,g),g=k("DOM element",m,g),v=k("string or an array",function(a){return c.isString(a)||c.isArray(a)},h),k=k("string or a DOM element",function(a){return c.isString(a)||
m(a)},h);return{arrayOfStrings:function(a){return f(a,"array of strings",function(b){p(a).validate(b);return d.forall(b,c.isString)},!0,h)},arrayOfObjects:function(a){return f(a,"array of objects",function(b){p(a).validate(b);return d.forall(b,c.isObject)},!0,h)},arrayOfToolbarGroups:function(a){return f(a,"array of toolbar groups",function(b){p(a).validate(b);return d.forall(b,n)},!0,h)},bool:q,domElement:g,func:r,number:s,object:t,string:u,stringOrArray:v,stringOrDom:k,param:f}});l("2g",["i"],function(c){return{paramList:function(){return[c.object("aria"),
c.func("fetch"),c.func("menuComplete"),c.func("menuExtra"),c.func("menuHover"),c.string("hoverSelector"),c.func("hover")]},encodeWithEditorApi:function(){return["menuComplete"]}}});l("6",["a","9"],function(c,d){var b=function(a){return function(){for(var b=new d(arguments.length),c=0;c<b.length;c++)b[c]=arguments[c];if(0===b.length)throw"Can't merge zero objects";for(var c={},h=0;h<b.length;h++){var k=b[h],m;for(m in k)k.hasOwnProperty(m)&&(c[m]=a(c[m],k[m]))}return c}},a=b(function(b,d){return c.isObject(b)&&
c.isObject(d)?a(b,d):d}),b=b(function(a,b){return b});return{deepMerge:a,merge:b}});l("1z","a b 1o 2g 6 7".split(" "),function(c,d,b,a,e,f){var g=function(a,b,e){return d.map(a,function(a){return b(a,e)})},h=function(a,b){if(c.isString(a))return a;if(c.isArray(a))return g(a,h,b);if(c.isObject(a)&&void 0!==a.action){var d=f.compose(a.action,b);return e.merge(a,{action:d})}d=g(a.items,h,b);return e.deepMerge(a,{items:d})};return{mentions:function(e,c){var f=a.encodeWithEditorApi();return b.map(e,function(a,
b){return d.contains(f,b)?function(b){return a(c(),b)}:a})},toolbar:function(a,b){return void 0===a.items?a:{items:g(a.items,h,b)}}}});l("p",["7","s"],function(c,d){var b=function(a){return e(function(b,e){return e(a)})},a=function(a){return e(function(b,e){return b(a)})},e=function(e){var g=function(){return e(c.constant(!1),c.constant(!0))},h=c.not(g),k=function(a){return m(function(e){return b(a(e))})},m=function(b){return e(a,b)};return{is:function(a){return e(c.constant(!1),function(b){return b===
a})},isValue:g,isError:h,getOr:function(a){return e(c.constant(a),c.identity)},getOrThunk:function(a){return e(a,c.identity)},getOrDie:function(){return e(function(a){c.die(a)()},c.identity)},or:function(a){return e(c.constant(a),b)},orThunk:function(a){return e(a,b)},fold:e,map:k,each:k,bind:m,exists:function(a){return e(c.constant(!1),a)},forall:function(a){return e(c.constant(!0),a)},toOption:function(){return e(d.none,d.some)}}};return{value:b,error:a}});ca("20",Date);l("15","1z 6 s p 20 w".split(" "),
function(c,d,b,a,e,f){var g=function(){var a=(new e).getTime();return f(a).slice(-6)};return function(e,f,m){var n=b.from(e.ui.editorName).map(a.error);m=m.map(a.value);n=n.or(m).getOrThunk(function(){return a.value(g())});m=c.toolbar(e.platform.toolbar,f);f=c.mentions(e.mentions,f);return d.deepMerge(e,{ui:{editorName:n},platform:{toolbar:m},mentions:f})}});l("m","1q b s l n q".split(" "),function(c,d,b,a,e,f){var g=function(){var a=f.createElement("span");return void 0!==a.matches?0:void 0!==a.msMatchesSelector?
1:void 0!==a.webkitMatchesSelector?2:void 0!==a.mozMatchesSelector?3:-1}(),h=c.ELEMENT,k=c.DOCUMENT;return{all:function(b,e){var c=void 0===e?f:e.dom();return c.nodeType!==h&&c.nodeType!==k||0===c.childElementCount?[]:d.map(c.querySelectorAll(b),a.fromDom)},is:function(a,b){var c=a.dom();if(c.nodeType!==h)return!1;if(0===g)return c.matches(b);if(1===g)return c.msMatchesSelector(b);if(2===g)return c.webkitMatchesSelector(b);if(3===g)return c.mozMatchesSelector(b);throw new e("Browser lacks native selectors");
},one:function(e,c){var d=void 0===c?f:c.dom();return d.nodeType!==h&&d.nodeType!==k||0===d.childElementCount?b.none():b.from(d.querySelector(e)).map(a.fromDom)}}});l("16",["b","s","m"],function(c,d,b){return function(){var a=[];return{get:function(b){return d.from(c.find(a,function(a){return a.is(b)}))},findAll:function(e){var d=b.all(e);return c.filter(a,function(a){return c.exists(d,a.is)})},add:function(b){a.push(b)},remove:function(b){b=c.indexOf(a,b);a.splice(b,1)}}}});l("17",["s","21"],function(c,
d){return{one:function(b,a,e){var f=d.name(b);return c.from(a[f]).map(function(a){return a.replace(b,e)})}}});l("r",[],function(){return{cached:function(c){var d=!1,b;return function(){d||(d=!0,b=c.apply(null,arguments));return b}}}});l("2m",["r","l","21","q"],function(c,d,b,a){var e=function(a){a=a.dom().body;if(null===a||void 0===a)throw"Body is not available yet";return d.fromDom(a)};return{body:c.cached(function(){return e(d.fromDom(a))}),getBody:e,inBody:function(a){a=b.isText(a)?a.dom().parentNode:
a.dom();return void 0!==a&&null!==a&&a.ownerDocument.body.contains(a)}}});l("35",[],function(){return{isSupported:function(c){return void 0!==c.style}}});ca("36",window);l("2n","a b 1o s 1a 2m l 21 35 v n o 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=function(a,b,e){if(!c.isString(e))throw p.error("Invalid call to CSS.set. Property ",b,":: Value ",e,":: Element ",a),new n("CSS value must be a string: "+e);k.isSupported(a)&&a.style.setProperty(b,e)},s=function(a,b,e){a=a.dom();r(a,b,e)},
t=function(a,b){return k.isSupported(a)?a.style.getPropertyValue(b):""},u=function(b,e){var c=b.dom(),c=t(c,e);return a.from(c).filter(function(a){return 0<a.length})},v=function(a,b,e){u(a,e).each(function(a){u(b,e).isNone()&&s(b,e,a)})};return{copy:function(a,b){var e=a.dom(),c=b.dom();k.isSupported(e)&&k.isSupported(c)&&(c.style.cssText=e.style.cssText)},set:s,preserve:function(a,b){var c=e.get(a,"style"),d=b(a);(void 0===c?e.remove:e.set)(a,"style",c);return d},setAll:function(a,e){var c=a.dom();
b.each(e,function(a,b){r(c,b,a)})},setOptions:function(a,e){var c=a.dom();b.each(e,function(a,b){a.fold(function(){k.isSupported(c)&&c.style.removeProperty(b)},function(a){r(c,b,a)})})},remove:function(a,b){var c=a.dom();k.isSupported(c)&&c.style.removeProperty(b);e.has(a,"style")&&""===m.trim(e.get(a,"style"))&&e.remove(a,"style")},get:function(a,b){var e=a.dom(),c=q.getComputedStyle(e).getPropertyValue(b),e=""!==c||f.inBody(a)?c:t(e,b);return null===e?void 0:e},getRaw:u,isValidValue:function(a,
b,e){a=g.fromTag(a);s(a,b,e);return u(a,b).isSome()},reflow:function(a){return a.dom().offsetWidth},transfer:function(a,b,e){h.isElement(a)&&h.isElement(b)&&d.each(e,function(e){v(a,b,e)})}}});l("2b",["2i"],function(c){return{documentPositionPreceding:function(d,b){var a=c.getOrDie("Node").DOCUMENT_POSITION_PRECEDING;return 0!==(d.compareDocumentPosition(b)&a)},documentPositionContainedBy:function(d,b){var a=c.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY;return 0!==(d.compareDocumentPosition(b)&
a)}}});l("1b",["b","c","2b","7","m"],function(c,d,b,a,e){var f=function(a,b){return a.dom()===b.dom()},g=function(a,b){var e=a.dom(),c=b.dom();return e===c?!1:e.contains(c)},h=function(a,e){return b.documentPositionContainedBy(a.dom(),e.dom())};d=d.detect().browser.isIE()?h:g;return{eq:f,isEqualNode:function(a,b){return a.dom().isEqualNode(b.dom())},member:function(b,e){return c.exists(e,a.curry(f,b))},contains:d,is:e.is}});l("4f",["a","s"],function(c,d){return function(b,a,e,f,g){return b(e,f)?d.some(e):
c.isFunction(g)&&g(e)?d.none():a(e,f,g)}});l("4i","a b 7 s 2m 1b l 4f".split(" "),function(c,d,b,a,e,f,g,h){var k=function(e,d,f){e=e.dom();for(f=c.isFunction(f)?f:b.constant(!1);e.parentNode;){e=e.parentNode;var h=g.fromDom(e);if(d(h))return a.some(h);if(f(h))break}return a.none()},m=function(e,c){var f=d.find(e.dom().childNodes,b.compose(c,g.fromDom));return a.from(f).map(g.fromDom)},n=function(b,e){var c=function(b){for(var d=0;d<b.childNodes.length;d++){if(e(g.fromDom(b.childNodes[d])))return a.some(g.fromDom(b.childNodes[d]));
var f=c(b.childNodes[d]);if(f.isSome())return f}return a.none()};return c(b.dom())};return{first:function(a){return n(e.body(),a)},ancestor:k,closest:function(a,b,e){return h(function(a){return b(a)},k,a,b,e)},sibling:function(b,e){var c=b.dom();return c.parentNode?m(g.fromDom(c.parentNode),function(a){return!f.eq(b,a)&&e(a)}):a.none()},child:m,descendant:n}});l("37",["4i"],function(c){return{any:function(d){return c.first(d).isSome()},ancestor:function(d,b,a){return c.ancestor(d,b,a).isSome()},closest:function(d,
b,a){return c.closest(d,b,a).isSome()},sibling:function(d,b){return c.sibling(d,b).isSome()},child:function(d,b){return c.child(d,b).isSome()},descendant:function(d,b){return c.descendant(d,b).isSome()}}});l("39",["b","1o","7","9"],function(c,d,b,a){return{product:function(e,f){return{nu:function(){for(var d=new a(arguments.length),f=0;f<d.length;f++)d[f]=arguments[f];if(e.length!==d.length)throw'Wrong number of arguments to struct. Expected "['+e.length+']", got '+d.length+" arguments";var k={};
c.each(e,function(a,e){k[a]=b.constant(d[e])});return k},eq:function(a,c){for(var d=0;d<e.length;d++){var m=e[d];if(!(f&&f[d]||b.tripleEquals)(a[m](),c[m]()))return!1}return!0},evaluate:function(a){return d.map(a,function(a){return a()})}}}}});l("38",["39"],function(c){return function(){return c.product(arguments).nu}});l("4j",["a","b"],function(c,d){var b=function(a){return a.slice(0).sort()};return{sort:b,reqMessage:function(a,e){throw"All required keys ("+b(a).join(", ")+") were not specified. Specified keys were: "+
b(e).join(", ")+".";},unsuppMessage:function(a){throw"Unsupported keys for object: "+b(a).join(", ");},validateStrArr:function(a,b){if(!c.isArray(b))throw"The "+a+" fields must be an array. Was: "+b+".";d.each(b,function(b){if(!c.isString(b))throw"The value "+b+" in the "+a+" fields was not a string.";})},invalidTypeMessage:function(a,e){throw"All values need to be of type: "+e+". Keys ("+b(a).join(", ")+") were not.";},checkDupes:function(a){var e=b(a);a=d.find(e,function(a,b){return b<e.length-
1&&a===e[b+1]});if(void 0!==a&&null!==a)throw"The field: "+a+" occurs more than once in the combined fields: ["+e.join(", ")+"].";}}});l("3a","b 1o 7 s 4j 19".split(" "),function(c,d,b,a,e,f){return function(g,h){var k=g.concat(h);if(0===k.length)throw"You must specify at least one required or optional field.";e.validateStrArr("required",g);e.validateStrArr("optional",h);e.checkDupes(k);return function(m){var n=d.keys(m);c.forall(g,function(a){return c.contains(n,a)})||e.reqMessage(g,n);var p=c.filter(n,
function(a){return!c.contains(k,a)});0<p.length&&e.unsuppMessage(p);var q={};c.each(g,function(a){q[a]=b.constant(m[a])});c.each(h,function(e){q[e]=b.constant(f.prototype.hasOwnProperty.call(m,e)?a.some(m[e]):a.none())});return q}}});l("2u",["38","39","3a"],function(c,d,b){return{immutable:c,immutable2:d,immutableBag:b}});l("3b",[],function(){return{toArray:function(c,d){var b=[],a=function(a){b.push(a);return d(a)},e=d(c);do e=e.bind(a);while(e.isSome());return b}}});l("2a","a b 7 s 2u 3b 1b l".split(" "),
function(c,d,b,a,e,f,g,h){var k=function(a){return h.fromDom(a.dom().ownerDocument)},m=function(b){b=b.dom();return a.from(b.parentNode).map(h.fromDom)},n=function(b){b=b.dom();return a.from(b.previousSibling).map(h.fromDom)},p=function(b){b=b.dom();return a.from(b.nextSibling).map(h.fromDom)},q=function(a){a=a.dom();return d.map(a.childNodes,h.fromDom)},r=function(b,e){var c=b.dom().childNodes;return a.from(c[e]).map(h.fromDom)},s=e.immutable("element","offset");return{owner:k,defaultView:function(a){a=
a.dom().ownerDocument.defaultView;return h.fromDom(a)},documentElement:function(a){a=k(a);return h.fromDom(a.dom().documentElement)},parent:m,findIndex:function(b){return m(b).bind(function(e){e=q(e);e=d.findIndex(e,function(a){return g.eq(b,a)});return-1<e?a.some(e):a.none()})},parents:function(a,e){for(var d=c.isFunction(e)?e:b.constant(!1),f=a.dom(),g=[];null!==f.parentNode&&void 0!==f.parentNode;){var f=f.parentNode,k=h.fromDom(f);g.push(k);if(!0===d(k))break}return g},siblings:function(a){return m(a).map(q).map(function(b){return d.filter(b,
function(b){return!g.eq(a,b)})}).getOr([])},prevSibling:n,offsetParent:function(b){b=b.dom();return a.from(b.offsetParent).map(h.fromDom)},prevSiblings:function(a){return d.reverse(f.toArray(a,n))},nextSibling:p,nextSiblings:function(a){return f.toArray(a,p)},children:q,child:r,firstChild:function(a){return r(a,0)},lastChild:function(a){return r(a,a.dom().childNodes.length-1)},leaf:function(a,b){var e=q(a);return 0<e.length&&b<e.length?s(e[b],0):s(a,b)}}});l("2y","7 s 1b l 37 2a q".split(" "),function(c,
d,b,a,e,f,g){var h=function(a){a.dom().focus()},k=function(b){b=void 0!==b?b.dom():g;return d.from(b.activeElement).map(a.fromDom)};return{hasFocus:function(a){var b=f.owner(a).dom();return a.dom()===b.activeElement},focus:h,blur:function(a){a.dom().blur()},active:k,search:function(a){return k(f.owner(a)).filter(function(b){return a.dom().contains(b.dom())})},focusInside:function(a){var d=f.owner(a);k(d).filter(function(d){return e.closest(d,c.curry(b.eq,a))}).fold(function(){h(a)},c.noop)}}});l("2o",
["2a"],function(c){var d=function(a,b){c.parent(a).each(function(c){c.dom().insertBefore(b.dom(),a.dom())})},b=function(a,b){a.dom().appendChild(b.dom())};return{before:d,after:function(a,e){c.nextSibling(a).fold(function(){c.parent(a).each(function(a){b(a,e)})},function(a){d(a,e)})},prepend:function(a,e){c.firstChild(a).fold(function(){b(a,e)},function(b){a.dom().insertBefore(e.dom(),b.dom())})},append:b,appendAt:function(a,e,f){c.child(a,f).fold(function(){b(a,e)},function(a){d(a,e)})},wrap:function(a,
e){d(a,e);b(e,a)}}});l("3c",["b","2o"],function(c,d){return{before:function(b,a){c.each(a,function(a){d.before(b,a)})},after:function(b,a){c.each(a,function(e,c){d.after(0===c?b:a[c-1],e)})},prepend:function(b,a){c.each(a.slice().reverse(),function(a){d.prepend(b,a)})},append:function(b,a){c.each(a,function(a){d.append(b,a)})}}});l("2q",["b","3c","2a"],function(c,d,b){var a=function(a){a=a.dom();null!==a.parentNode&&a.parentNode.removeChild(a)};return{empty:function(e){e.dom().textContent="";c.each(b.children(e),
function(b){a(b)})},remove:a,unwrap:function(e){var c=b.children(e);0<c.length&&d.before(e,c);a(e)}}});l("22","2n l 2y 2o 2q q 36".split(" "),function(c,d,b,a,e,f,g){return{blur:function(){var g=d.fromHtml('<input type="text" />');c.setAll(g,{"z-index":"-666",background:"transparent",border:"0px",height:"50px",position:"absolute",top:"25%",left:"50%"});a.append(d.fromDom(f.body),g);b.focus(g);e.remove(g)}}});l("j",["b","n"],function(c,d){return function(b,a){c.each(a,function(a,c){if(c>b.length-1){if(a.required())throw new d('missing parameter "'+
a.name()+'"');}else a.validate(b[c])})}});l("3d",["b","1o","i","j"],function(c,d,b,a){var e=function(a){return[d.map(a,function(a){return a()})]};return{create:function(){var d=[];return{eventRegistry:{addListener:function(e){a(arguments,[b.func("handler")]);d.push(e)},removeListener:function(a){a=c.indexOf(d,a);-1!==a&&d.splice(a,1)}},eventTrigger:function(a){c.each(d,function(b){var c=e(a);b.apply(null,c)})}}}}});l("4k",["b","7"],function(c,d){return function(){var b=[],a=[],e=function(a){return a.slice(0)},
f=function(a){return-1!==c.indexOf(b,a)};return{get:function(e){return a[c.indexOf(b,e)]},put:function(e,c){if(void 0===e||null===e)throw"Invalid key, no undefined or null.";if(f(e))throw"Invalid key, key already exists.";b.push(e);a.push(c)},contains:f,remove:function(e,d){var f=c.indexOf(b,e);if(-1===f)throw"Invalid key, does not exist.";b.splice(f,1);return a.splice(f,1)[0]},each:function(e){c.each(b,function(b,c){e(a[c],b,c)})},keys:d.curry(e,b),values:d.curry(e,a),reset:function(){b.splice(0,
b.length);a.splice(0,a.length)}}}});l("3e",["4k"],function(c){return{create:function(){var d=c();return{bind:function(b,a){d.put(b,a);b.bind(a)},unbind:function(b){var a=d.remove(b);b.unbind(a)},unbindAll:function(){d.each(function(b,a){a.unbind(b)});d.reset()}}}}});l("23",["1o","3d","3e"],function(c,d,b){return function(a){var e=b.create(),f=c.map(a,function(a){var b=d.create();e.bind(a,b.eventTrigger);return b});a=c.map(f,function(a){return a.eventRegistry});f=c.map(f,function(a){return a.eventTrigger});
return{registry:a,trigger:f,destroy:function(){e.unbindAll()}}}});l("f",["a","1o","19"],function(c,d,b){var a=function(e){b.freeze(e);d.each(e,function(b){c.isObject(b)&&a(b)});return e};return{makeReadOnly:a}});l("4v",["9"],function(c){return{bounce:function(d){return function(){var b=c.prototype.slice.call(arguments),a=this;setTimeout(function(){d.apply(a,b)},0)}}}});l("3q",[],function(){return function(c,d){return{get:d,map:function(b){return c(function(a){d(function(e){e=b(e);a(e)})})},bind:function(b){return c(function(a){d(function(e){b(e).get(a)})})},
anonBind:function(b){return c(function(a){d(function(e){b.get(a)})})}}}});l("3r",["b"],function(c){return function(d){var b=function(a){return d(function(b){var d=[],g=0,h=function(c){return function(h){d[c]=h;g++;g>=a.length&&b(d)}};0===a.length?b([]):c.each(a,function(a,b){a.get(h(b))})})};return{nu:d,pure:function(a){return d(function(b){b(a)})},par:b,mapM:function(a,e){return b(c.map(a,e))},lift2:function(a,b,c){return d(function(d){var h=!1,k=!1,m=void 0,n=void 0,p=function(){if(h&&k){var a=
c(m,n);d(a)}};a.get(function(a){m=a;h=!0;p()});b.get(function(a){n=a;k=!0;p()})})},compose:function(a,b){return function(c){return b(c).bind(a)}}}}});l("3s",["4v","3q","3r"],function(c,d,b){var a=function(b){return d(a,function(a){b(c.bounce(a))})};return b(a)});l("3n",["1o","3s"],function(c,d){return function(){var b={};return{getOrSetIndexed:function(a,e){if(void 0!==b[a])return b[a];var c=e();return b[a]=c},waitForLoad:function(){var a=c.values(b);return d.par(a)}}}});ca("3t",setTimeout);l("2l",
"b 6 3q 3r 3s s 3t".split(" "),function(c,d,b,a,e,f,g){var h=function(a){var m=f.none(),n=[],p=function(){return m.isSome()},q=function(a){m.each(function(b){g(function(){a(b)},0)})};e.nu(a).get(function(a){m=f.some(a);c.each(n,q);n=[]});a=b(h,function(a){p()?q(a):n.push(a)});return d.merge(a,{isSet:p})};return a(h)});l("6k",["1"],function(c){return{namespace:function(d,b){for(var a=b||c,e=d.split("."),f=0;f<e.length;++f){var g=e[f];if(void 0===a[g]||null===a[g])a[g]={};a=a[g]}return a}}});l("4w",
["6k"],function(c){return{install:function(d){var b=c.namespace(d);b.callbacks={};var a=0,e=function(){var b="callback_"+a;a++;return b},f=function(a,c){var f=e();b.callbacks[f]=function(){c||g(f);a.apply(null,arguments)};return d+".callbacks."+f},g=function(a){a=a.substring(a.lastIndexOf(".")+1);void 0!==b.callbacks[a]&&delete b.callbacks[a]};b.ephemeral=function(a){return f(a,!1)};b.permanent=function(a){return f(a,!0)};b.unregister=g;return b}}});l("4x",["7","l"],function(c,d){var b=function(a,
b,e,d,f,p,q){return{target:c.constant(a),x:c.constant(b),y:c.constant(e),stop:d,prevent:f,kill:p,raw:c.constant(q)}},a=function(a,e){return function(f){if(a(f)){var m=d.fromDom(f.target),n=function(){f.stopPropagation()},p=function(){f.preventDefault()},q=c.compose(p,n),m=b(m,f.clientX,f.clientY,n,p,q,f);e(m)}}},e=function(b,e,d,m,n){d=a(d,m);b.dom().addEventListener(e,d,n);return{unbind:c.curry(f,b,e,d,n)}},f=function(a,b,e,c){a.dom().removeEventListener(b,e,c)};return{bind:function(a,b,c,d){return e(a,
b,c,d,!1)},capture:function(a,b,c,d){return e(a,b,c,d,!0)}}});l("3u",["7","4x"],function(c,d){var b=c.constant(!0);return{bind:function(a,e,c){return d.bind(a,e,b,c)},capture:function(a,e,c){return d.capture(a,e,b,c)}}});l("3o","2l 4w p 1a 3u l 2o q".split(" "),function(c,d,b,a,e,f,g,h){var k=d.install("ephox.henchman.features");return{download:function(d){return c.nu(function(c){var p=function(){r.unbind();s.unbind()},q=f.fromTag("script");a.set(q,"src",d);a.set(q,"type","text/javascript");a.set(q,
"async","async");a.set(q,"data-main",k.ephemeral(function(a){c(b.value(a))}));var r=e.bind(q,"error",function(){p();c(b.error("Error loading external script tag "+d))}),s=e.bind(q,"load",p);g.append(f.fromDom(h.head),q)})}}});l("4y",["1a","l","2o","q"],function(c,d,b,a){return{addStylesheet:function(e,f){var g=f||d.fromDom(a),h=d.fromTag("link",g.dom());c.setAll(h,{rel:"stylesheet",type:"text/css",href:e});g=d.fromDom(g.dom().head);b.append(g,h);return h}}});l("3p","a b 2l 7 p 3u 4y".split(" "),function(c,
d,b,a,e,f,g){return{download:function(h,k){return b.nu(function(b){var n=function(a){d.each(q,function(a){a.unbind()});b(a.orThunk(function(a){return e.error(a+'Unable to download editor stylesheets from "'+h+'"')}))},p=g.addStylesheet(h),q=[f.bind(p,"load",function(a){var b;a:{try{var d=a.target().dom().sheet.cssRules;b=c.isObject(d)&&0===d.length;break a}catch(f){}b=!1}b?n(e.error("")):k(n)}),f.bind(p,"error",a.curry(n,e.error("")))]})}}});l("2j",["3n","3o","3p","7"],function(c,d,b,a){return function(){var e=
c(),f=function(){return e.waitForLoad()};return{preload:function(){f().get(a.identity)},addStylesheet:function(a,c){return e.getOrSetIndexed(a,function(){return b.download(a,c)})},addScript:function(a,b){return e.getOrSetIndexed(a,function(){return d.download(a).map(b)})},waitForLoad:f}}});l("4l",["2j"],function(c){var d=c();return{addStylesheet:function(b,a){return d.addStylesheet(b,a)},addScript:function(b,a){return d.addScript(b,a)}}});l("1j",["b","7","s","2u"],function(c,d,b,a){var e=a.immutable("str",
"replace"),f=function(a,e){return"2.2.0"!==a?b.some(e+(void 0===a?"":" version "+a)+" appears to be cached, as it does not match editor version 2.2.0."):b.none()};return{aboutTags:function(a,b){var d=[e("@@FULL_VERSION@@","2.2.0.125"),e("@@CLIENT_VERSION@@","2.2.0.148")],f=a?[e("@@INTEGRATION_TYPE@@",b.type),e("@@INTEGRATION_VERSION@@",b.version)]:[];return c.flatten([d,f])},strictMatch:f,weakMatch:function(a,b){return f(a,b).map(function(a){return a+" This may produce unexpected results."})},resourceParam:d.constant("version=2.2.0"),
fullParam:d.constant("version=2.2.0.125")}});l("4m",[],function(){var c=function(d){var b=d;return{get:function(){return b},set:function(a){b=a},clone:function(){return c(b)}}};return c});l("3g",["4l","1j","4m","o","q"],function(c,d,b,a,e){var f=function(b){b.each(function(b){d.weakMatch(b.version,"Code view").each(function(b){a.warn(b)});g.set(b.codemirror());h.set(b.jsbeautify())});return b},g=b(null),h=b(null);return{use:{codemirror:g.get,jsbeautify:h.get},load:{codeview:function(a){a=a+"/codeview.js?"+
d.resourceParam();return c.addScript(a,f)}}}});l("3f",["3g"],function(c){return{beautify:function(d){return c.use.jsbeautify().html(d,{indent_size:"2",indent_char:" ",max_preserve_newlines:"5",preserve_newlines:!0,keep_array_indentation:!1,break_chained_methods:!1,indent_scripts:"normal",brace_style:"collapse",space_before_conditional:!0,unescape_strings:!1,jslint_happy:!1,end_with_newline:!1,wrap_line_length:0,indent_inner_html:!1,comma_first:!1,e4x:!1})}}});l("24",["i","j","3f","3g","n"],function(c,
d,b,a,e){var f=function(a){return a.map(function(a){return a.dom()}).getOr(null)};return{documentElement:function(a){if(a.content().isInline())throw new e("documentElement called on inline mode");return f(a.content().doc())},insertHtmlAtCursor:function(a,b){d(arguments,[c.object("polish"),c.string("html")]);a.content().focus();a.insertHtmlAtCursor(b)},getSelectedText:function(a){return a.content().getSelectedText().getOr("")},uploadImages:function(a,b){d(arguments,[c.object("polish"),c.func("callback")]);
return a.uploadImages(b)},get:function(e){var c=null!==a.use.jsbeautify()&&e.isPrettyPrinting();e=e.getContent();return c?b.beautify(e):e},set:function(a,b){d(arguments,[c.object("polish"),c.string("html")]);a.setContent(b)},isDirty:function(a){d(arguments,[c.object("polish")]);return a.isDirty()},setDirty:function(a,b){d(arguments,[c.object("polish"),c.bool("state")]);a.setDirty(b)}}});l("4n",["a","b","1o","9"],function(c,d,b,a){return{generate:function(e){if(!c.isArray(e))throw"cases must be an array";
if(0===e.length)throw"there must be at least one case";var f={};d.each(e,function(d,h){var k=b.keys(d);if(1!==k.length)throw"one and only one name per case";var m=k[0],n=d[m];if(void 0!==f[m])throw"duplicate key detected:"+m;if("cata"===m)throw"cannot have a case named cata (sorry)";if(!c.isArray(n))throw"case arguments must be an array";f[m]=function(){var b=arguments.length;if(b!==n.length)throw"Wrong number of arguments to case "+m+". Expected "+n.length+" ("+n+"), got "+b;for(var c=new a(b),b=
0;b<c.length;b++)c[b]=arguments[b];return{fold:function(){if(arguments.length!==e.length)throw"Wrong number of arguments to fold. Expected "+e.length+", got "+arguments.length;return arguments[h].apply(null,c)}}}});return f}}});l("3h",["6","4n"],function(c,d){var b=d.generate([{inputSelector:["selector","callback"]},{outputSelector:["selector","callback"]},{inputPredicate:["predicate","callback"]},{outputPredicate:["predicate","callback"]}]);return c.merge(b,{cata:function(a,b,c,d,h){return a.fold(b,
c,d,h)}})});l("25",["b","i","j","7","3h"],function(c,d,b,a,e){var f=function(a){return function(b){b=c.map(b,function(a){return a.dom()});a(b)}},g=function(a){return function(b){return a(b.dom())}};return function(c){var k=function(a,e,g){b(arguments,[d.func("filter"),d.string("selector"),d.func("callback")]);var k=a(e,f(g));c.filter().customFilters().addFilter(k)},m=function(a,e,k){b(arguments,[d.func("filter"),d.func("predicate"),d.func("callback")]);var m=a(g(e),f(k));c.filter().customFilters().addFilter(m)};
return{selector:{addInput:a.curry(k,e.inputSelector),addOutput:a.curry(k,e.outputSelector)},predicate:{addInput:a.curry(m,e.inputPredicate),addOutput:a.curry(m,e.outputPredicate)}}}});l("58",[],function(){return{zeroWidth:function(){return"\ufeff"}}});l("bu",["58","7"],function(c,d){var b="\\w'\\-\\u0100-\\u017F\\u00C0-\\u00FF"+c.zeroWidth()+"\\u2018\\u2019",a="[^"+b+"]",e="["+b+"]";return{chars:d.constant(b),wordbreak:d.constant(a),wordchar:d.constant(e)}});ca("66",RegExp);l("bv",["66"],function(c){return function(d,
b,a,e){return{term:function(){return new c(d,e.getOr("g"))},prefix:b,suffix:a}}});l("bx",["7","s","bu","bv"],function(c,d,b,a){return{token:function(b){return a(b,c.constant(0),c.constant(0),d.none())},word:function(e){e="((?:^'?)|(?:"+b.wordbreak()+"+'?))"+e+"((?:'?$)|(?:'?"+b.wordbreak()+"+))";return a(e,function(a){return 1<a.length?a[1].length:0},function(a){return 2<a.length?a[2].length:0},d.none())}}});l("bw",["bx"],function(c){var d=function(b){return b.replace(/[-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")};return{sanitise:d,word:function(b){b=d(b);return c.word(b)},token:function(b){b=d(b);return c.token(b)}}});l("6l",["bu","bv","bw","bx"],function(c,d,b,a){return{safeword:function(a){return b.word(a)},safetoken:function(a){return b.token(a)},custom:function(a,b,c,h){return d(a,b,c,h)},unsafeword:function(b){return a.word(b)},unsafetoken:function(b){return a.token(b)},sanitise:function(a){return b.sanitise(a)},chars:function(){return c.chars()},wordbreak:function(){return c.wordbreak()},wordchar:function(){return c.wordchar()}}});
l("4o",["7","6l","66"],function(c,d,b){return function(a,e,f){var g=d.sanitise(a),h=d.sanitise(e);return{patterns:function(){return[new b(g+"(.*?)"+h,"gi")]},useCursor:c.constant(!0),generate:function(a,b){return f.generate(a,b.key(),b.value())},derive:function(a){var b=a[1];return f.get(b).map(function(e){return{startIndex:c.constant(a.index),finishIndex:c.constant(a.index+a[0].length),key:c.constant(b),value:c.constant(e)}})}}}});l("53",["a","b","1o","7","4j"],function(c,d,b,a,e){var f=function(a,
b){return g(a,b,{validate:c.isFunction,label:"function"})},g=function(a,c,f){if(0===c.length)throw"You must specify at least one required field.";e.validateStrArr("required",c);e.checkDupes(c);return function(g){var h=b.keys(g);d.forall(c,function(a){return d.contains(h,a)})||e.reqMessage(c,h);a(c,h);var r=d.filter(c,function(a){return!f.validate(g[a],a)});0<r.length&&e.invalidTypeMessage(r,f.label);return g}},h=a.noop;return{exactly:a.curry(f,function(a,b){var c=d.filter(b,function(b){return!d.contains(a,
b)});0<c.length&&e.unsuppMessage(c)}),ensure:a.curry(f,h),ensureWith:a.curry(g,h)}});l("4p",["53"],function(c){var d=c.ensure(["elements","cursor","dictation","notify"]);c=c.ensure(["elements","cursor","dictation","range","notify"]);return{species:d,applicator:c}});l("48",["b","l","2a","q"],function(c,d,b,a){return{fromHtml:function(c,f){var g=(f||a).createElement("div");g.innerHTML=c;return b.children(d.fromDom(g))},fromTags:function(a,b){return c.map(a,function(a){return d.fromTag(a,b)})},fromText:function(a,
b){return c.map(a,function(a){return d.fromText(a,b)})},fromDom:function(a){return c.map(a,d.fromDom)}}});l("3i",["4o","4p","7","s","48"],function(c,d,b,a,e){return function(f,g,h){return c(f,g,{get:function(b){b=h(b);return a.some(b)},generate:function(c,f,g){c=e.fromHtml(g,c.dom());return d.species({elements:b.constant(c),cursor:a.none,dictation:a.none,notify:a.none})}})}});l("26",["i","j","3i"],function(c,d,b){return{addSimpleMacro:function(a,e,f,g){d(arguments,[c.object("polish"),c.string("startString"),
c.string("endString"),c.func("callback")]);var h=b(e,f,g);return a.macros().customMacros().add(h)},removeMacro:function(a,b){a.macros().customMacros().remove(b)}}});l("27",["b","i","j"],function(c,d,b){var a=["error","info","warning"];return{message:function(e,f,g,h){if(!c.contains(a,f))throw'Message level: "'+f+'" is not supported. Supported levels are: ['+a.join(", ")+"].";b(arguments,[d.object("polish"),d.string("level"),d.number("timeout"),d.string("msg")]);var k=e.ui().showMessage(f,g,h);return{hide:function(){k()}}}}});
l("3j",["7"],function(c){var d=c.constant("pencil"),b=c.constant("code"),a=c.constant("spin");c=c.constant("none");return{pencil:d,code:b,wait:a,none:c}});l("28",["i","j","3j","n"],function(c,d,b,a){return{get:function(a){return a.getMode()===b.pencil()?"design":"code"},set:function(e,f){d(arguments,[c.object("polish"),c.string("mode")]);var g=f.toLowerCase();if("code"!==g&&"design"!==g)throw new a('Editor mode "'+f+'" not supported. Must be either design or code.');e.setMode("design"===g?b.pencil():
b.code())}}});l("g",["s","o"],function(c,d){var b=function(a){try{var b=Ca(a);return c.some(b)}catch(d){return c.none()}};return{get:b,register:function(a,b){return l(a,[],function(){return b})},hookup:function(a,c){b(c).fold(function(){d&&d.error&&d.error('textbox.io Could not find plugin "'+c+'". Have you declared it?')},function(b){a.events.loaded.addListener(function(){b.initialize(a)})})}}});l("3k",["7"],function(c){var d=function(b,a){return{left:c.constant(b),top:c.constant(a),translate:function(c,
f){return d(b+c,a+f)}}};return d});l("4q","7 1b l 21 4i q".split(" "),function(c,d,b,a,e,f){return{attached:function(a,h){var k=h||b.fromDom(f.documentElement);return e.ancestor(a,c.curry(d.eq,k)).isSome()},windowOf:function(b){var c=b.dom();return c===c.window?b:a.isDocument(b)?c.defaultView||c.parentWindow:null}}});l("3l",["3k","4q","l"],function(c,d,b){var a=function(a,b){return void 0!==a?a:void 0!==b?b:0},e=function(a){var e=a.dom(),h=e.ownerDocument,k=h.body,h=b.fromDom(h.documentElement);if(k===
e)return c(k.offsetLeft,k.offsetTop);if(!d.attached(a,h))return c(0,0);a=e.getBoundingClientRect();return c(a.left,a.top)};return{absolute:function(c){var g=c.dom().ownerDocument,h=g.body,k=d.windowOf(b.fromDom(g)),m=g.documentElement,g=a(k.pageYOffset,m.scrollTop),k=a(k.pageXOffset,m.scrollLeft),n=a(m.clientTop,h.clientTop),h=a(m.clientLeft,h.clientLeft);return e(c).translate(k-h,g-n)},relative:function(a){a=a.dom();return c(a.offsetLeft,a.offsetTop)},viewport:e}});l("29",["3k","3l","q"],function(c,
d,b){return{get:function(a){a=void 0!==a?a.dom():b;return c(a.body.scrollLeft||a.documentElement.scrollLeft,a.body.scrollTop||a.documentElement.scrollTop)},setToElement:function(a,b){var c=d.absolute(b);a.scrollTo(c.left(),c.top())}}});l("18","b 22 23 f 24 25 26 27 28 g 7 r 29 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){return function(s,t,u){var v=b({loaded:s.events.loaded,focus:s.events.focus,dirty:s.events.dirty,internal:s.events.internal}),w=function(a,b){var c=r.owner(a),e=r.defaultView(a),
c=q.get(c),d=b();e.dom().scrollTo(c.left(),c.top());return d},x=a.makeReadOnly({content:{documentElement:n.curry(e.documentElement,s),insertHtmlAtCursor:n.curry(e.insertHtmlAtCursor,s),getSelectedText:n.curry(e.getSelectedText,s),uploadImages:n.curry(e.uploadImages,s),get:n.curry(e.get,s),set:n.curry(e.set,s),isDirty:n.curry(e.isDirty,s),setDirty:n.curry(e.setDirty,s)},mode:{set:n.curry(k.set,s),get:n.curry(k.get,s)},filters:f(s),macros:{addSimpleMacro:n.curry(g.addSimpleMacro,s),removeMacro:n.curry(g.removeMacro,
s)},message:n.curry(h.message,s),events:v.registry,element:function(){return s.element().dom()},focus:s.focus,restore:p.cached(function(){return w(s.element(),function(){d.blur();var a=e.get(s);v.destroy();s.destroy();return u.restore(a)})})});c.each(t,function(a){m.hookup(x,a)});return x}});l("d","b 14 15 16 17 18 s 1a 1b".split(" "),function(c,d,b,a,e,f,g,h,k){return function(){var m=d(),n=a(),p=function(a){return a.api},q=function(a,c){var d=b(c.options(),function(){return p.getOrDie("Internal Error")},
g.from(h.get(a,"id"))),p=e.one(a,c.constructors(),d).map(function(b){var c=f(b.polish,d&&d.plugins?d.plugins:[],{restore:function(a){n.remove(e);m.remove(e);return b.restore(a).dom()}}),e={is:function(b){return k.eq(a,b)},api:c};n.add(e);m.add(e);return c});return p};return{getOrCreate:function(a,b){return n.get(a).map(p).orThunk(function(){return q(a,b)})},get:function(a){a=n.findAll(a);return c.map(a,p)},getActiveEditor:m.get}}});l("2c",["6","1a"],function(c,d){return{withOptions:function(b,a){return d.has(b,
"tabindex")?c.deepMerge(a,{content:{tabindex:d.get(b,"tabindex")}}):a}}});l("2d",["1o","c","s","2n"],function(c,d,b,a){d=d.detect();var e=d.browser.isIE()&&10===d.browser.version.major,f=function(b,c){var d=a.getRaw(b,c).getOrThunk(function(){return a.get(b,c)});return e&&"0px"===d?"auto":d},g=function(a,c,e){a=f(a,c);return void 0===a?e:b.some(a)},h=function(a){return{width:g(a,"width",b.none()),"max-width":g(a,"max-width",b.some("none")),"min-width":g(a,"min-width",b.some("none")),"max-height":g(a,
"max-height",b.some("none")),"min-height":g(a,"min-height",b.some("none"))}},k=function(b,e){var d=a.getRaw(b,"display"),g=f(b,"height");a.set(b,"display","none");var k=f(b,"height"),g="auto"===k?g:k,k=h(b);d.fold(function(){a.remove(b,"display")},function(c){a.set(b,"display",c)});void 0!==g&&a.set(e,"height",g);c.each(k,function(b,c){b.each(function(b){a.set(e,c,b)})})};return{copyFrom:k,explicit:function(a){k(a,a)}}});l("4u",["4g","7"],function(c,d){var b=c.create("ephox-elder");return{resolve:b.resolve,
scrollable:d.curry(b.resolve,"scrollable")}});l("4b",["b","1y","34","9"],function(c,d,b,a){return{add:function(a,b){c.each(b,function(b){d.add(a,b)})},remove:function(a,b){c.each(b,function(b){d.remove(a,b)})},toggle:function(a,b){c.each(b,function(b){d.toggle(a,b)})},hasAll:function(a,b){return c.forall(b,function(b){return d.has(a,b)})},hasAny:function(a,b){return c.exists(b,function(b){return d.has(a,b)})},get:function(c){if(b.supports(c)){c=c.dom().classList;for(var d=new a(c.length),g=0;g<c.length;g++)d[g]=
c.item(g);c=d}else c=b.get(c);return c}}});l("6m",["1y","4b"],function(c,d){return{addClass:function(b){return function(a){c.add(a,b)}},removeClass:function(b){return function(a){c.remove(a,b)}},removeClasses:function(b){return function(a){d.remove(a,b)}},hasClass:function(b){return function(a){return c.has(a,b)}}}});l("4r","b 4u 7 s 3u l 6m 29 3t 36".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=a.none();d=d.resolve("modal-scroll-lock");var p=function(a,b){c.each(b,function(b){a(b)})};return{block:function(){if(n.isNone()){var b=
h.get(),c=e.bind(f.fromDom(m),"scroll",function(a){a=h.get();a.left()===b.left()&&a.top()===b.top()||m.scrollTo(b.left(),b.top())});n=a.some(c)}},unblock:function(){n.each(function(b){n=a.none();k(function(){b.unbind()},250)})},lock:b.curry(p,g.addClass(d)),unlock:b.curry(p,g.removeClass(d))}});ca("6b",clearTimeout);l("6n",["6b","3t"],function(c,d){return function(b,a){var e=null;return{cancel:function(){null!==e&&(c(e),e=null)},schedule:function(){var c=arguments;e=d(function(){b.apply(null,c);e=
null},a)}}}});l("55",["b","2u"],function(c,d){return function(b){var a=d.immutable.apply(null,b),e=[];return{bind:function(a){if(void 0===a)throw"Event bind error: undefined handler";e.push(a)},unbind:function(a){e=c.filter(e,function(b){return b!==a})},trigger:function(){var b=a.apply(null,arguments);c.each(e,function(a){a(b)})}}}});l("46",["1o"],function(c){return{create:function(d){var b=c.map(d,function(a){return{bind:a.bind,unbind:a.unbind}});d=c.map(d,function(a){return a.trigger});return{registry:b,
trigger:d}}}});l("4s",["6n","55","46","3u"],function(c,d,b,a){return function(e){var f=!1,g=b.create({started:d([]),stopped:d([])}),h=c(function(){!0===f&&(f=!1,g.trigger.stopped())},250),k=a.bind(e,"scroll",function(){h.cancel();!1===f&&g.trigger.started();f=!0;h.schedule()});return{events:g.registry,destroy:function(){k.unbind()},isScrolling:function(){return f}}}});l("4t",["s","29"],function(c,d){return{capture:function(b,a){var e=c.none();return{save:function(){e=c.some(d.get(b))},restore:function(){e.each(function(b){a.scrollTo(b.left(),
b.top())})}}},preserve:function(b,a){var c=d.get(b);a();var f=d.get(b);c.top()===f.top()&&c.left()===f.left()||b.dom().defaultView.scrollTo(c.left(),c.top())}}});l("3m",["4r","4s","4t","4u","1y"],function(c,d,b,a,e){return{register:function(b){e.add(b,a.scrollable())},deregister:function(b){e.remove(b,a.scrollable())},scrollable:a.scrollable,preserve:b.preserve,capture:b.capture,block:c.block,unblock:c.unblock,lock:c.lock,unlock:c.unlock,event:d}});l("1e",["2j"],function(c){var d=c();return{preload:function(){d.preload()},
addStylesheet:function(b,a){return d.addStylesheet(b,a)},addScript:function(b,a){return d.addScript(b,a)},waitForLoad:function(){return d.waitForLoad()}}});l("2k",["b","v"],function(c,d){var b=function(){return{zh_hk:"zh_tw",iw:"he",no:"nb",nn:"nb",en:"en",ar:"ar",ca:"ca",cs:"cs",da:"da",de:"de",el:"el",es:"es",fa:"fa",fi:"fi",fr:"fr",he:"he",hr:"hr",hu:"hu",it:"it",ja:"ja",kk:"kk",ko:"ko",nl:"nl",nb:"nb",pl:"pl",pt:"pt",pt_pt:"pt_pt",ro:"ro",ru:"ru",sl:"sl",sk:"sk",sv:"sv",th:"th",tr:"tr",uk:"uk",
zh:"zh",zh_tw:"zh_tw"}},a=function(a){a=a.toLowerCase().replace("-","_");var b=a.indexOf(";");a=-1<b?a.substring(0,b):a;a=d.trim(a);b=a.indexOf("_");b=-1<b?a.substring(0,b):a;return{full:a,languageCode:b}},e=function(b,e){var d=b.split(","),d=c.map(d,function(b){b=a(b);return e[b.full]||e[b.languageCode]||""});return c.find(d,function(a){return""!==a})};return{extract:a,determine:function(a){var c=b();return e(a,c)},determineFrom:e,localeList:b}});l("k",["s"],function(c){return{cat:function(c){for(var b=
[],a=function(a){b.push(a)},e=0;e<c.length;e++)c[e].each(a);return b},findMap:function(d,b){for(var a=0;a<d.length;a++){var e=b(d[a],a);if(e.isSome())return e}return c.none()},liftN:function(d,b){for(var a=[],e=0;e<d.length;e++){var f=d[e];if(f.isSome())a.push(f.getOrDie());else return c.none()}return c.some(b.apply(null,a))}}});l("1f","2h 2k 7 s k o".split(" "),function(c,d,b,a,e,f){var g=function(){var a=c.resolve("navigator")||{};return a.userLanguage||a.language||"en"}(),h=a.none();return{determine:function(c){var h=
void 0!==c?[c,g]:[g];return e.findMap(h,function(b){return a.from(d.determine(b))}).fold(function(){f.warn("WARNING: locales not supported: "+h.join(", "));return"en"},b.identity)},get:function(){return h.getOrDie("locale used before it has been set")},set:function(b){h=a.from(b)}}});l("1g","a 1o 2h 7 1f n o".split(" "),function(c,d,b,a,e,f,g){var h={font:{arial:"Arial",courier:"Courier New",comicsans:"Comic Sans MS",consolas:"Consolas",georgia:"Georgia",impact:"Impact",tahoma:"Tahoma",timesnr:"Times New Roman",
trebuchet:"Trebuchet MS",verdana:"Verdana"},error:{duplicate:{code:"That snippet code is already taken.",uuid:"That snippet uuid is already taken."},unknown:{uuid:"The snippet uuid cannot be found"},code:{duplicate:"That snippet code is already taken."}},cog:{login:"Log in",logout:"Log out","not-logged-in":"Not logged in",user:"User: {0}"},banner:{"logged-in":"Logged in as: {0}"}},k={},m="",n={},p=function(a){return b.resolve(a,n)||b.resolve(a,k)||b.resolve(a,h)};return{loadEnglish:function(a){k=
a},load:function(a,b){m=a;n=b;e.set(a)},isLoaded:function(a){return m===a&&0<d.keys(n).length},get:function(a){var b=p(a);if(c.isString(b))return b;throw new f("key "+a+" does not exist");},has:function(b){if(!c.isString(b))throw b.fold?g.error("object details were",b.fold(a.identity,a.identity,a.identity)):g.error("object key was",b),"key was an object";return c.isString(p(b))}}});l("1h",["s","o"],function(c,d){var b=c.none();return{set:function(a){b.fold(function(){b=c.some(a)},function(b){b!==
a&&d.error('Only one base URL supported per page. Requested value "'+a+'", already using "'+b+'"')})},get:function(){return b.getOrDie("Must begin loading with a base URL")}}});l("2p",["3u","l","q"],function(c,d,b){return{execute:function(a){if("complete"===b.readyState||"interactive"===b.readyState)a();else var e=c.bind(d.fromDom(b),"DOMContentLoaded",function(){a();e.unbind()})}}});l("3v",["a","b","2n","35"],function(c,d,b,a){return function(e,f){var g=function(a){var c=f(a);return 0>=c||null===
c?(a=b.get(a,e),parseFloat(a)||0):c},h=function(a,c){return d.foldl(c,function(c,e){var d=b.get(a,e),d=void 0===d?0:parseInt(d,10);return isNaN(d)?c:c+d},0)};return{set:function(b,d){if(!c.isNumber(d)&&!d.match(/^[0-9]+$/))throw e+".set accepts only positive integer values. Value was "+d;var f=b.dom();a.isSupported(f)&&(f.style[e]=d+"px")},get:g,getOuter:g,aggregate:h,max:function(a,b,c){a=h(a,c);return b>a?b-a:0}}}});l("2r",["2n","3v"],function(c,d){var b=d("width",function(a){return a.dom().offsetWidth});
return{set:function(a,c){b.set(a,c)},get:function(a){return b.get(a)},getOuter:function(a){return b.getOuter(a)},setMax:function(a,e){var d=b.max(a,e,"margin-left border-left-width padding-left padding-right border-right-width margin-right".split(" "));c.set(a,"max-width",d+"px")}}});ca("2s",clearInterval);ca("2t",setInterval);l("1i","2l r 2m 1y 2n l 2o 2p 2q 2r v 2s 2t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=function(){var c=f.fromTag("div");a.add(c,"ephox-textbox-font");var d=f.fromTag("span");
a.add(d,"ephox-chameleon-icon");g.append(c,d);g.append(b.body(),c);var h=m.get(d),d=e.get(d,"font-family");k.remove(c);return 0<h&&void 0!==d&&n.contains(d,"Textbox Icons")},s=function(a){var b=0,c=q(function(){b+=250;r()?(p(c),a(!0)):2E3<b&&(p(c),a(!1))},250)};return{wait:d.cached(function(){return c.nu(function(a){h.execute(function(){r()?a(!0):s(a)})})})}});l("t","b 1e 7 p 1f 1g 1h 1i 1j o".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(b){h.wait().get(function(c){b(c?a.value(!0):a.error("Stylesheet loaded, but did not contain Textbox.io styles"))})},
p=function(b,c){var e=b+"/i18n/tbio_"+c+".js?"+k.resourceParam();return d.addScript(e,function(b){return b.bind(function(b){return k.strictMatch(b.version,"Language strings").fold(function(){return a.value(b.strings())},a.error)})})},q=function(a){var b="/textboxio.css?"+k.fullParam();d.addStylesheet(a+b,n)};return{load:function(a){g.set(a);a=g.get();q(a+"/css");p(a,"en").get(function(a){a.each(f.loadEnglish)});return a},devLoad:q,setLanguage:function(a){var b=e.determine(a);f.isLoaded(b)||(a=g.get(),
p(a,b).get(function(a){a.each(function(a){f.load(b,a)})}))},waitForLoad:function(){return d.waitForLoad()},getFailures:function(a){return c.bind(a,function(a){return a.fold(function(a){return[a]},b.constant([]))})}}});l("4z",["1a","l"],function(c,d){return{span:function(b){b=d.fromTag("span",b);c.set(b,"role","presentation");return b},div:function(b){b=d.fromTag("div",b);c.set(b,"role","presentation");return b},tag:function(b,a){var e=d.fromTag(b,a);c.set(e,"role","presentation");return e}}});l("6j",
["b","2m","2a"],function(c,d,b){var a=function(e,d){var g=[];c.each(b.children(e),function(b){d(b)&&(g=g.concat([b]));g=g.concat(a(b,d))});return g};return{all:function(b){return a(d.body(),b)},ancestors:function(a,d,g){return c.filter(b.parents(a,g),d)},siblings:function(a,d){return c.filter(b.siblings(a),d)},children:function(a,d){return c.filter(b.children(a),d)},descendants:a}});l("4e",["6j","m"],function(c,d){return{all:function(b){return d.all(b)},ancestors:function(b,a,e){return c.ancestors(b,
function(b){return d.is(b,a)},e)},siblings:function(b,a){return c.siblings(b,function(b){return d.is(b,a)})},children:function(b,a){return c.children(b,function(b){return d.is(b,a)})},descendants:function(b,a){return d.all(a,b)}}});l("31",["s","4e","m","4f"],function(c,d,b,a){var e=function(a,b,e){return c.from(d.ancestors(a,b,e)[0])};return{first:function(a){return c.from(d.all(a)[0])},ancestor:e,sibling:function(a,b){return c.from(d.siblings(a,b)[0])},child:function(a,b){return c.from(d.children(a,
b)[0])},descendant:function(a,b){return c.from(d.descendants(a,b)[0])},closest:function(c,d,h){return a(b.is,e,c,d,h)}}});l("6o",["31"],function(c){return{any:function(d){return c.first(d).isSome()},ancestor:function(d,b,a){return c.ancestor(d,b,a).isSome()},sibling:function(d,b){return c.sibling(d,b).isSome()},child:function(d,b){return c.child(d,b).isSome()},descendant:function(d,b){return c.descendant(d,b).isSome()},closest:function(d,b,a){return c.closest(d,b,a).isSome()}}});l("50","c 7 33 1a 1y 2n l 2o 2q 6o q".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n){var p=b.resolve("highcontrast-mode"),q=function(a){var c=g.fromTag("div");e.add(c,b.resolve("highcontrast-detect"));h.append(a,c);f.reflow(c);(!0===("none"===f.get(c,"background-image")?!0:!1)?e.add:e.remove)(a,p);k.remove(c)},r=function(b){var c=g.fromDom(n.documentElement);(!0===(a.has(c,"hc")&&a.has(c,"hcx"))?e.add:e.remove)(b,p)},s=d.noop;return{detect:function(a){var b=c.detect();b.os.isWindows()&&(b.browser.isIE()||b.browser.isSpartan()||b.browser.isFirefox()?
q:b.browser.isChrome()?r:s)(a)},isHighContrast:function(a){return m.ancestor(a.uiContainer(),"."+p)}}});l("51",["2u"],function(c){return c.immutableBag(["width","docWidth","height","docHeight"],[])});l("52",["4n"],function(c){c=c.generate([{unchanged:["html"]},{changed:["html"]}]);return{unchanged:c.unchanged,changed:c.changed,cata:function(c,b,a){return c.fold(b,a)}}});l("42",["a","53"],function(c,d){var b=function(){return{validate:function(a,b){return c.isFunction(a)||"events"===b&&c.isObject(a)},
label:"Function (or events)"}}(),a="activateInline communication connect content deactivateInline element events filter focus getContent getMode insertHtmlAtCursor isDirty isPrettyPrinting keyboard macros operations setContent setDirty smartview state ui undo".split(" "),e=d.ensureWith(a.concat([]),b),b=d.ensureWith(a.concat("blur destroy fromTransfer fullscreen uploader toTransfer viewport".split(" ")),b);return{external:e,internal:b}});l("6p",["b","7"],function(c,d){return function(b){return c.mapToObject(b,
function(){return{bind:d.noop,unbind:d.noop}})}});l("6q",["55","46","4m"],function(c,d,b){return function(a){a=b(a.dirty);var e=a.get,f=a.set,g=d.create({dirty:c([])});return{events:g.registry,isDirty:e,setDirty:function(a){var b=e();a!==b&&(f(a),!0===a&&g.trigger.dirty())},state:function(){return{dirty:e()}}}}});l("6r",["b","7","3h"],function(c,d,b){return function(a,e,f){var g=[],h=d.curry(e,"input"),k=d.curry(e,"output"),m=d.curry(f,"input"),n=d.curry(f,"output");e=function(a){b.cata(a,h,k,m,n);
g.push(a)};c.each(a.customs,e);return{state:function(){return{customs:g.slice(0)}},addFilter:e}}});l("2z",[],function(){var c=0;return{generate:function(d){var b=(new Date).getTime(),a=Math.floor(1E9*Math.random());c++;return d+"_"+a+c+String(b)}}});l("6s",["1o","2z","6"],function(c,d,b){return function(a){var e={};c.each(a,function(a,b){e[b]=a});return{get:function(){return c.values(e)},add:function(a){var b=d.generate("macro");e[b]=a;return b},remove:function(a){delete e[a]},state:function(){return b.merge({},
e)}}}});l("h9",["a","b","1o"],function(c,d,b){return{isFunctionOrEvents:function(a){var b=function(b){return!0===d.forall(a,function(a){return void 0!==b[a]&&void 0!==b[a].bind&&c.isFunction(b[a].bind)})?!0:!1};return{validate:function(a,d){return c.isFunction(a)||"events"===d&&c.isObject(a)&&b(a)},label:"Function (or events)"}}}});l("by",["h9","53"],function(c,d){return d.ensureWith("events init ui check scanView situation hasDropdown hasAutocorrect handle assign lock destroy state lookup name".split(" "),
c.isFunctionOrEvents(["analytics"]))});l("6u",["7","s","6p"],function(c,d,b){return{noSituation:function(){return{primary:c.constant([]),secondary:c.constant([]),submenus:c.constant({})}},basic:function(){return{destroy:c.noop,ui:d.none,state:c.constant({}),events:b(["analytics"])}}}});l("6t","7 s 6p by 6u 1a".split(" "),function(c,d,b,a,e,f){return function(){var g=c.noop;return a({setAutocorrect:c.noop,setSpelling:c.noop,events:b(["analytics"]),init:function(a){a.body().each(function(a){f.set(a,
"spellcheck","false");g=function(){f.remove(a,"spellcheck")}})},ui:d.none,check:c.noop,scanView:c.noop,situation:e.noSituation,hasDropdown:c.constant(!1),hasAutocorrect:c.constant(!1),handle:c.noop,assign:c.noop,lock:c.apply,destroy:function(){g()},state:c.constant({}),lookup:c.constant(d.none()),name:c.constant("spelling-disabled")})}});l("6v",["b","1o","6k","7","s"],function(c,d,b,a,e){var f=function(e,f){var k={};d.each(e,function(a,c){var e=c.split(".");if(1>=e.length)k[c]={finalvalue:a};else{var d=
k;b.namespace(c,k);for(var f=0;f<e.length-1;f++)d=d[e[f]];d[e[e.length-1]]={finalvalue:a}}});var m=function(b){var e={},g=d.keys(b);c.each(g,function(c){e[c]=void 0!==b[c].finalvalue?f(b[c].finalvalue):a.constant(m(b[c]))});return e};return m(k)};return{ui:function(b,c){var d=f(b,void 0!==c?c:a.constant);return a.constant(e.some(d))},actions:function(b){b=f(b,a.identity);return a.constant(b)}}});l("54","b 6 3s 7 s p 6p 6q 6r 6s 6t 6u 6v 55 46".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){return{basic:p.basic,
draganddrop:function(){return{events:g(["insertAssets","insertHtml"]),destroy:a.noop}},communication:function(){return{headers:a.constant({}),destroy:a.noop}},fullscreen:function(){return{ui:e.none,actions:q.actions({maximize:a.noop,restore:a.noop}),select:a.noop,deselect:a.noop,destroy:a.noop,events:g(["analytics","maximize","restore"])}},dialog:function(){return{destroy:a.noop,ui:e.none,events:g(["analytics"]),actions:q.actions({show:a.noop})}},spelling:function(){return n()},editorcontext:function(){return{events:g(["blockChanged",
"enterDown","enterUp"]),destroy:a.noop}},highlighter:function(){return{destroy:a.noop,run:a.noop}},linkvalidator:function(){return{destroy:a.noop,refresh:a.noop,ignore:a.noop,state:a.constant({ignore:[],cache:{}})}},macros:function(){return{events:g(["analytics"]),state:a.constant({}),customMacros:a.constant(m({})),destroy:a.noop}},table:function(){return{ui:e.none,state:a.constant({}),events:g(["analytics"]),situation:p.noSituation,handle:a.noop,assign:a.noop,destroy:a.noop,name:a.constant("table-disabled")}},
image:function(){return{events:g(["changed","contextmenu"]),situation:p.noSituation,handle:a.noop,assign:a.noop,destroy:a.noop,name:a.constant("image-disabled")}},imageEdit:function(){var d=function(e,d){return b.pure(c.map(d,a.compose(f.value,e)))},g=a.curry(d,a.identity),d=a.curry(d,function(a){return a.asset()});return{situation:p.noSituation,handle:a.noop,assign:a.noop,ui:e.none,destroy:a.noop,insertResample:a.constant({assets:g,correlated:d,destroy:a.noop}),name:a.constant("imageEdit-disabled")}},
mobile:function(){return{ui:e.none,events:g(["fullscreen"]),destroy:a.noop}},noAnalytics:function(){return{log:a.noop,register:a.noop}},state:function(b){var c=h(b.laundry),e=k(b.filters,a.noop,a.noop),f=m(b.macros.customs);return{filter:a.constant({customFilters:a.constant(e)}),macros:a.constant({customMacros:a.constant(f)}),laundry:c,getState:function(a){return d.merge(b,void 0===a?{}:a,{laundry:c.state(),filters:e.state(),macros:{customs:f.state()}})}}},uploader:function(){var b=s.create({reconstitute:r([]),
uploadAssets:r(["assets"])});return{destroy:a.noop,events:b.registry,reconstitute:a.noop,uploadAssets:a.noop}},undo:function(){return{reset:a.noop,disable:a.apply,save:a.noop}}}});l("45",["7","54","55","46"],function(c,d,b,a){return{activateInline:c.noop,deactivateInline:c.noop,communication:d.communication,events:function(){return a.create({loaded:b([]),focus:b([]),dirty:b([]),internal:b(["command","data"]),paint:b([])}).registry},keyboard:c.die("the keyboard feature is not implemented in this mode"),
operations:c.die("the operations feature is not implemented in this mode"),smartview:c.die("the smartview feature is not implemented in this mode"),ui:c.die("the ui feature is not implemented in this mode")}});l("47",["b","7","55"],function(c,d,b){return function(a,e){var f=b(a),g=0,h=function(b){var e=c.map(a,function(a){return b[a]()});f.trigger.apply(null,e)};return{bind:function(a){f.bind(a);g++;1===g&&e.bind(h)},unbind:function(a){f.unbind(a);g--;0===g&&e.unbind(h)},trigger:d.die("Cannot trigger a source event.")}}});
l("3w","4z 7 s 50 3f 51 52 3j 42 54 3g 45 33 55 46 47 4b l 2o 2q 2r".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w,x,y){return function(z,A,l){var B=m.state(l),C=b.none(),F=b.none(),E=s.create({loaded:r([]),focus:r([]),dirty:t([],B.laundry.events.dirty),internal:r(["command","data"]),paint:r(["dimensions"])}),G=c.div();u.add(G,[q.resolve("source-container"),"ephox-textbox-font",q.resolve("layer-editor")]);l=function(){return G};var H=function(){return F.getOrDie("CodeMirror not added to DOM")},
I=function(a){return O()?e.beautify(a):a},K=function(a){var b=H().doc;a=I(a);b.setValue(a);b.clearHistory()},J=function(a){var b=v.fromDom(a.getWrapperElement()),c=a.doc.lineCount();a.on("changes",function(){var e=a.doc.lineCount();e!=c&&(c=e,e=a.getScrollInfo(),e=f({width:y.get(b),docWidth:e.width,height:e.height,docHeight:e.height}),E.trigger.paint(e))})},M=function(){H().focus()},O=function(){return!0===z.content.prettyprint};return k.internal({activateInline:p.activateInline,blur:d.die("blur is not supported in the API."),
communication:m.communication,connect:function(c){w.append(c,G);A.updateUi(G);a.detect(G);c=n.use.codemirror()(G.dom(),{mode:"text/html",extraKeys:{"Ctrl-Space":"autocomplete"},lineWrapping:!0});c.on("focus",function(){E.trigger.focus()});F=b.some(c);E.trigger.loaded();J(c);return!0},content:d.constant({body:d.constant(b.none()),doc:d.die("content.doc is not supported in code view"),execCommand:d.die("content.execCommand is not supported in code view"),getSelectedText:function(){var a=H().getSelection();
return void 0!==a&&null!==a&&0<a.length?b.some(a):b.none()},focus:M,isInline:d.constant(!1)}),deactivateInline:p.deactivateInline,destroy:function(){x.remove(G);x.empty(G);F=b.none()},element:l,events:E.registry,filter:B.filter,focus:M,fromTransfer:function(a){var c=function(a){K(a);C=b.some(a);F.bind(function(a){a.on("changes",function(a,b){B.laundry.setDirty(!0)})})};g.cata(a,c,c)},fullscreen:m.fullscreen,getContent:function(){return H().doc.getValue()},getMode:h.code,insertHtmlAtCursor:function(a){H().replaceSelection(a)},
isDirty:B.laundry.isDirty,isPrettyPrinting:O,keyboard:p.keyboard,macros:B.macros,operations:p.operations,setContent:function(a){K(a);B.laundry.setDirty(!1)},setDirty:B.laundry.setDirty,smartview:p.smartview,state:function(){return B.getState({content:{}})},toTransfer:function(){var a=H().doc.getValue();return C.filter(function(b){return I(b)===a}).fold(function(){return g.changed(a)},g.unchanged)},ui:p.ui,undo:d.constant(m.undo()),uploader:d.constant(m.uploader()),viewport:l})}});l("56",[],function(){return"undo insert style emphasis align listindent format tools".split(" ")});
l("6z",["2u"],function(c){return c.immutable("x","y","width","height")});l("6w",["6z","1s"],function(c,d){return{intersect:function(b,a){var e=d.max(b.x(),a.x()),f=d.max(b.y(),a.y()),g=d.min(b.x()+b.width(),a.x()+a.width()),g=d.max(0,g-e),h=d.min(b.y()+b.height(),a.y()+a.height()),h=d.max(0,h-f);return c(e,f,g,h)}}});l("s5",["b","4n"],function(c,d){var b=d.generate([{unbundled:[]},{unsupported:["message"]},{item:["info","blueprint"]},{customMenu:["info","groups","blueprint"]},{textboxMenu:["info",
"blueprint"]},{palette:["info","children","blueprint"]}]);return{create:function(a){var e=function(a,c){return a.feature.fold(function(){return void 0!==a.unsupported?[b.unsupported(a.unsupported)]:[b.unbundled()]},function(b){if(void 0===b[a.command])return console.warn("unknown command: "+a.command),[];b=b[a.command]();return[c(b)]})},d=function(a,d){return e(d,function(e){return c.contains(["widget","inline-widget","split-widget"],d.type)?b.item({instance:e.widget},a[d.type]):b.item(e[d.type](),
a[d.type])})},g={dropdown:d,general:d,widget:d,"split-widget":d,"inline-widget":d,palette:function(a,d){return e(d,function(e){e=e.palette();var d=c.map(e.items,function(e){return c.contains(["widget","inline-widget","split-widget"],e.type)?b.item({instance:e.build},a[e.type]):b.item(e.spec,a[e.type])});return b.palette(e,d,a.palette)})},submenu:function(e,d){var f=c.map(d.commands,a);return[b.customMenu(d,f,e.menu)]},menu:function(a,c){return e(c,function(e){return b.textboxMenu(e[c.type](),a[c.type])})}};
return{classify:function(a,b){var c=g[b.type];return void 0!==c?c(a,b):[]}}},cata:function(a,b,c,d,h,k,m){return a.fold(b,c,d,h,k,m)}}});l("jw",["s5","b","7"],function(c,d,b){return{fromConfig:function(a,e,f){var g=function(a,c){var e=b.curry(h.classify,a),e=d.bind(c.items,e);return{category:c.category,books:e}};a=b.curry(g,a);e=b.curry(g,e);var h=c.create(e);return d.map(f,a)}}});l("77",["4g"],function(c){return{resolve:c.create("ephox-chameleon").resolve}});l("yd",["2n"],function(c){return{show:function(d){c.remove(d,
"display")},hide:function(d){c.set(d,"display","none")},isShowing:function(d){return c.getRaw(d,"display").isNone()},isHiding:function(d){return c.getRaw(d,"display").is("none")}}});l("s7",["53"],function(c){return{group:c.ensure(["component","isVisible","refreshUi","destroy"])}});l("s6","77 yd s7 b 4z 1y 3c".split(" "),function(c,d,b,a,e,f,g){return function(h){var k=e.span();f.add(k,c.resolve("toolbar-group"));var m=a.map(h,function(a){return a.component()});g.append(k,m);return b.group({component:function(){return k},
isVisible:function(){return a.exists(m,d.isShowing)},refreshUi:function(){a.each(h,function(a){a.refreshUi()})},destroy:function(){a.each(h,function(a){a.destroy()})}})}});l("jx","s6 s7 b 6 7 55 46".split(" "),function(c,d,b,a,e,f,g){return{menu:function(c,d){var m=g.create({done:f([]),abort:f(["item"])}),n=function(b){b.done.bind(function(){m.trigger.done()});b.abort.bind(function(a){m.trigger.abort(a.item())});return a.merge(b,{done:m.registry.done,abort:m.registry.abort})},p=b.foldr(d,function(b,
c){var e=a.merge(c.structure(),b.structures),d=c.submenus().concat(b.submenus),f=a.merge(c.handlers(),b.actions),g=[c.refreshMenu].concat(b.refreshMenu),h=[c.destroyer].concat(b.destroyers),k=n(c.events);return{structures:e,submenus:d,refreshMenu:g,actions:f,destroyers:h,events:k}},{structures:{},submenus:[],actions:{},refreshMenu:[],destroyers:[]});return{structure:e.constant(p.structures),init:function(a){b.each(p.refreshMenu,e.apply)},name:e.constant(c),handlers:e.constant(p.actions),submenus:e.constant(p.submenus),
events:p.events,destroy:function(){b.each(p.destroyers,e.apply)}}},toolbar:function(a){a=c(a);var b=g.create({escaped:f([]),executed:f([])});return d.group({component:a.component,isVisible:a.isVisible,refreshUi:a.refreshUi,destroy:a.destroy,events:b.registry})}}});l("k6",["77","1y","2n","31"],function(c,d,b,a){var e=function(a,e){d.add(a,c.resolve("user-icon"));b.setAll(a,{"background-image":"url("+e+")"})};return{setUrl:e,findAndSetUrl:function(b,c){a.descendant(b,".ephox-pastry-icon-content").each(function(a){e(a,
c)})}}});l("f8",["b","1a","w"],function(c,d,b){var a=function(a,b){d.set(a,"aria-pressed",b?"true":"false")};return{expanded:function(a){d.set(a,"aria-expanded","true")},collapsed:function(a){d.set(a,"aria-expanded","false")},checked:function(a,c){d.set(a,"aria-checked",b(c))},setPressed:a,press:function(b){a(b,!0)},release:function(b){a(b,!1)},pressed:function(b){a(b.element(),b.selected())},enable:function(a){d.set(a,"aria-disabled","false")},disable:function(a){d.set(a,"aria-disabled","true")},
tabSelected:function(a,b){d.setAll(a,{"aria-selected":"true","aria-pressed":"true"});c.each(b,function(a){d.setAll(a,{"aria-selected":"false","aria-pressed":"false"})})},showPanel:function(a){d.set(a,"aria-selected","true");d.set(a,"aria-hidden","false")},hidePanel:function(a){d.set(a,"aria-selected","false");d.set(a,"aria-hidden","true")}}});l("s8",["f8","7"],function(c,d){var b=function(a){a.enable();c.enable(a.element())},a=function(a){a.disable();c.disable(a.element())};return{control:function(c){return{enable:d.curry(b,
c),disable:d.curry(a,c)}},ariaPressed:function(a){return{press:d.curry(c.press,a.element()),release:d.curry(c.release,a.element())}}}});l("cq",["4g"],function(c){return{resolve:c.create("ephox-echo").resolve}});l("85","a b cq 2z 6 7 s 1a 1y l 2o 3c".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=b.resolve("aria-help"),r=b.resolve("aria-help-visible"),s=function(a){h.set(a,"role","presentation")},t=function(a,b){h.setAll(a,{role:"application","aria-label":b})},u=function(a){h.set(a,"role","button")},
v=function(a,b){h.set(a,"aria-owns",b)},w=function(a,b){h.set(a,"aria-controls",b)},x=function(b,c){var e=a.generate("ephox-aria");h.set(c,"id",e);w(b,e)},y=function(a,b){h.set(a,"aria-describedby",b)},z=function(a,b){h.set(a,"aria-labelledby",b)},A=function(a,b){h.set(a,"aria-label",b)};return{document:function(a){h.set(a,"role","document")},presentation:s,region:function(a){h.set(a,"role","region")},controls:w,owns:v,disown:function(a){h.remove(a,"aria-owns")},editor:function(b,c,e,d,f){t(b,e);
d.each(function(e){var d=m.fromTag("span");s(d);n.append(d,m.fromText(e));e=a.generate("ephox-aria");h.set(d,"id",e);y(c,e);k.add(d,q);!0===f&&k.add(d,r);n.append(b,d)});return{destroy:function(){h.remove(c,"aria-describedby")}}},inline:function(b,c,e,g,k){t(b,e);var n=[];h.has(c,"id")?v(b,h.get(c,"id")):(e=a.generate("ephox-aria-content"),h.set(c,"id",e),v(b,e),n.push(function(){h.remove(c,"id")}));g.each(function(a){if(h.has(c,"aria-label")){var b=h.get(c,"aria-label");A(c,a);n.push(function(){A(c,
b)})}else A(c,a),n.push(function(){h.remove(c,"aria-label")})});return{destroy:function(){d.each(n,f.apply)}}},group:function(a){h.set(a,"role","group")},toolbar:function(a,b){h.setAll(a,{role:"group","aria-label":b})},toolbarGroup:function(a,b){h.set(a,"role","toolbar");null===b||void 0===b||""===b||c.isArray(b)&&0===b.length||h.set(a,"aria-label",b)},toolbarButton:function(a,b,c,e){h.setAll(a,{role:"button","aria-label":b,"aria-haspopup":""+c});e&&h.set(a,"aria-pressed","false");c&&h.set(a,"aria-expanded",
"false")},textButton:function(a,b){u(a);s(b)},menu:function(a,b){h.setAll(a,{"aria-label":b,role:"menu"})},menuItem:function(a,b,c){b=b.map(function(a){return{"aria-label":a}}).getOr({});h.setAll(a,e.merge(b,{role:"menuitem","aria-haspopup":c.getOr(!1)}))},menuItemCheckbox:function(a){h.setAll(a,{role:"menuitemcheckbox","aria-checked":!1})},checkbox:function(a,b){h.setAll(a,{role:"checkbox","aria-label":b,"aria-checked":!1})},dialog:function(a,b){h.setAll(a,{role:"dialog","aria-label":b})},buttonRole:u,
button:function(a,b){h.setAll(a,{"aria-label":b,role:"button"})},labelledField:function(b,c,e){var d=m.fromTag("div");s(d);c+=a.generate("");var g=a.generate("label");e=m.fromHtml("<label>"+e+"</label>");h.set(e,"for",c);h.set(e,"id",g);h.set(b,"id",c);z(b,g);p.append(d,[e,b]);return{element:f.constant(d),field:f.constant(b)}},multiline:function(a){h.set(a,"aria-multiline","true")},textarea:function(a){h.setAll(a,{"aria-multiline":"true",role:"textbox"})},label:A,widget:function(a){h.set(a,"role",
"widget")},option:function(a){h.set(a,"role","option")},listBox:function(a){h.set(a,"role","listbox")},live:function(a,b,c){h.setAll(a,{"aria-live":c?c:"polite",id:b})},tabList:function(a){h.set(a,"role","tablist")},tabButton:function(a,b){h.setAll(a,{"aria-label":b,role:"tab"})},tabPanel:function(a){h.setAll(a,{role:"tabpanel"})},linkElements:x,linkTabToPanel:function(a,b){x(a,b)},describedBy:y,labelledBy:z,required:function(a){h.set(a,"aria-required","true")},hidden:function(a,b){b?h.set(a,"aria-hidden",
b):h.remove(a,"aria-hidden")},invalid:function(a,b){!0===b?h.set(a,"aria-invalid","true"):h.remove(a,"aria-invalid")}}});l("s9",["1a","2n","3u"],function(c,d,b){return{disable:function(a){c.set(a,"unselectable","on");d.setAll(a,{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none"});a.dom().style.setProperty("-moz-user-select","-moz-none");return b.bind(a,"onselectstart",function(){return!1})}}});l("la",["4g"],function(c){return{resolve:c.create("ephox-pastry").resolve}});l("l9",
"s9 la 55 46 1y 3u 2o 2q".split(" "),function(c,d,b,a,e,f,g,h){return function(k,m,n){e.add(k,d.resolve("button"));var p=c.disable(k);m=m.getOr(k);var q=null,r=e.toggler(k,d.resolve("button-disabled")),s=function(){r.isOn()||u.trigger.click()},t=f.bind(m,"click",s),u=a.create({click:b([])});return{element:function(){return k},name:function(){return n},destroy:function(){t.unbind();p.unbind();h.remove(k)},content:function(a){null!==q&&h.remove(q.element());g.append(k,a.element());q=a},enable:r.off,
disable:r.on,disabled:r.isOn,click:s,events:u.registry}}});l("h7",["l9","la","s","1y","l"],function(c,d,b,a,e){return function(f){var g=e.fromTag("span");a.add(g,d.resolve("independent-button"));return c(g,b.none(),f)}});l("h8",["4z","la","1a","4b","2q"],function(c,d,b,a,e){return function(f){var g=c.span();b.set(g,"aria-hidden",!0);a.add(g,[d.resolve("icon-content")].concat(f));return{element:function(){return g},destroy:function(){e.remove(g)}}}});l("oq","4z l9 la s 1y l 2o 2q".split(" "),function(c,
d,b,a,e,f,g,h){return function(f){var m=c.span();e.add(m,b.resolve("statebutton"));var n=d(c.span(),a.some(m),f);e.add(n.element(),b.resolve("dependent-button"));g.append(m,n.element());f=e.toggler(m,b.resolve("statebutton-selected"));var p=e.toggler(m,b.resolve("statebutton-disabled"));return{element:function(){return m},destroy:function(){n.destroy();h.remove(m)},name:n.name,content:n.content,enable:function(){p.off();n.enable()},disable:function(){p.on();n.disable()},disabled:function(){return p.isOn()&&
n.disabled()},click:n.click,events:n.events,select:f.on,deselect:f.off,selected:f.isOn}}});l("lb",["oq","55","46"],function(c,d,b){return function(a){var e=c(a),f=b.create({click:d([])}),g=function(){e.selected()?e.deselect():e.select();f.trigger.click()};e.events.click.bind(g);return{element:e.element,name:e.name,content:e.content,destroy:function(){e.events.click.unbind(g);e.destroy()},enable:e.enable,disable:e.disable,disabled:e.disabled,click:e.click,events:f.registry,select:e.select,deselect:e.deselect,
selected:e.selected}}});l("sa","4z h7 h8 lb la 55 46 1y 2o 3c 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return function(p){var q=c.span();h.add(q,e.resolve("dropbutton"));var r=c.span();h.add(r,e.resolve("dropbutton-button"));var s=c.span();h.add(s,e.resolve("dropbutton-arrow"));m.append(q,[r,s]);var t=d(),u=a();u.content(b(["ephox-pastry-arrow-icon"]));k.append(r,t.element());k.append(s,u.element());var v=g.create({click:f([]),open:f([]),close:f([])}),w=function(){v.trigger.click()},x=function(){(u.selected()?
v.trigger.open:v.trigger.close)()};t.events.click.bind(w);u.events.click.bind(x);return{element:function(){return q},name:function(){return p},content:t.content,events:v.registry,open:function(){u.select();v.trigger.open()},close:function(){u.deselect();v.trigger.close()},destroy:function(){t.events.click.unbind(w);u.events.click.unbind(x);t.destroy();u.destroy();n.remove(q)},isOpen:function(){return u.selected()}}}});l("sb","4z h8 lb la 7 55 46 1y 2o 3c 2q".split(" "),function(c,d,b,a,e,f,g,h,k,
m,n){return function(p){var q=c.span();h.add(q,a.resolve("dropbutton"));var r=c.span();h.add(r,a.resolve("dropbutton-button"));var s=c.span();h.add(s,a.resolve("dropbutton-arrow"));m.append(q,[r,s]);var t=b(),u=b();u.content(d(["ephox-pastry-arrow-icon"]));k.append(r,t.element());k.append(s,u.element());var v=g.create({click:f([]),open:f([]),close:f([])}),w=function(){v.trigger.click()},x=function(){(u.selected()?v.trigger.open:v.trigger.close)()};t.events.click.bind(w);u.events.click.bind(x);return{element:e.constant(q),
name:e.constant(p),content:t.content,events:v.registry,open:function(){u.select();v.trigger.open()},close:function(){u.deselect();v.trigger.close()},destroy:function(){t.events.click.unbind(w);u.events.click.unbind(x);t.destroy();u.destroy();n.remove(q)},isOpen:function(){return u.selected()},click:t.click,enable:t.enable,disable:t.disable,disabled:t.disabled,select:t.select,deselect:t.deselect,selected:t.selected}}});l("e4","4z la 1y l 2o 2q".split(" "),function(c,d,b,a,e,f){return function(g){var h=
c.span();b.add(h,d.resolve("text-content"));e.append(h,a.fromText(g));return{element:function(){return h},destroy:function(){f.remove(h)}}}});l("k7","s8 77 85 h7 sa sb h8 e4 lb s 1a 1y 3c 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=function(a,e,d,f){b.toolbarButton(a.element(),e,d,f);e=c.control(a);d=c.ariaPressed(a);return{enable:e.enable,disable:e.disable,press:d.press,release:d.release,destroy:function(){a.destroy()}}},t=function(a,b,c,e,f,k,p,r){p=m.from(p).fold(function(){return r(f)},
function(a){return a(f,b)});k=m.from(k).getOr(!1);a=a(b);c=g([d.resolve("icon"),d.resolve(c)]);k=!0===k?[h(r(f)).element()]:[];q.append(c.element(),k);a.content(c);a.events.click.bind(function(){e()});n.set(a.element(),"title",p);a.initAria=s;return a},u=function(a,c){r.descendant(a,c).bind(function(a){b.hidden(a,"true")})},v=function(a,b,c,e,f,g,h,k){a=t(a,b,c,e,f,g,h,k);p.add(a.element(),d.resolve("split-"+b));u(a.element(),".ephox-pastry-dropbutton-arrow");u(a.element(),".ephox-pastry-dropbutton-button");
r.descendant(a.element(),".ephox-pastry-dropbutton-arrow .ephox-pastry-icon-content").bind(function(a){p.add(a,d.resolve("icon"));p.add(a,d.resolve("arrow-"+b))});return a};return{aria:s,typical:function(b,c,e,d,f,g,h){return t(a,b,c,e,d,f,g,h)},toggle:function(a,b,c,e,d,f,g){return t(k,a,b,c,e,d,f,g)},splitToggle:function(a,b,c,e,d,g,h){return v(f,a,b,c,e,d,g,h)},split:function(a,b,c,d,f,g,h){return v(e,a,b,c,d,f,g,h)}}});l("k8",["4g"],function(c){return{resolve:c.create("ephox-gopher").resolve}});
l("sc",["k8","s","1y","4e","31"],function(c,d,b,a,e){return function(f){var g=c.resolve(f);return{set:function(a){b.add(a,g)},up:function(a){return b.has(a,g)?d.some(a):e.ancestor(a,"."+g)},all:function(b){return a.descendants(b,"."+g)},first:function(a){return e.descendant(a,"."+g)},is:function(a){return b.has(a,g)}}}});l("k9",["k8","sc","1a","1y"],function(c,d,b,a){var e=d("item"),f=c.resolve("disabled-item"),g="data-"+c.resolve("item-value");return{set:function(a,c){e.set(a);b.set(a,g,c)},get:function(a){return b.get(a,
g)},up:e.up,all:e.all,disable:function(b){a.add(b,f)},enable:function(b){a.remove(b,f)},isEnabled:function(b){return!a.has(b,f)}}});l("ka","b k8 sc k9 s 1a 1y 31".split(" "),function(c,d,b,a,e,f,g,h){var k=b("menu"),m="data-"+d.resolve("menu-value"),n=d.resolve("active-menu");return{set:function(a,b){k.set(a);f.set(a,m,b)},active:function(a){return h.descendant(a,"."+n)},inactive:function(a){a=k.all(a);return c.filter(a,function(a){return!g.has(a,n)})},activate:function(a,b){var e=k.all(a);c.each(e,
function(a){g.remove(a,n)});g.add(b,n)},up:k.up,all:k.all,submenu:function(b,c,d){d=a.get(d);return(c.hasOwnProperty(d)?e.from(c[d]):e.none()).bind(function(a){return h.descendant(b,"["+m+'="'+a+'"]')})}}});l("kb",["sc","7"],function(c,d){var b=c("submenu"),a=c("main-menu");return{main:d.constant(a),submenu:d.constant(b)}});l("gi","b k8 k9 ka kb 4z 7 1a 1y l 2o 3c".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=function(a,c,e){b.set(e,c);h.set(e,"tabindex",-1);return e},r=function(a,b,c){return s(a,
b,c,!1)},s=function(a,b,c,e){var g=m.fromTag("li",a.dom()),h=f.span();k.add(h,d.resolve("item-text"));!0===e&&k.add(h,d.resolve("item-ellipsis"));n.append(h,m.fromText(c));n.append(g,h);q(a,b,g);return g},t=function(a){a=m.fromTag("li",a.dom());k.add(a,d.resolve("separator"));return a},u=function(a,b){return"-"!==b.value()?r(a,b.value(),b.text()):t(a)},v=function(b,e,d){var f=m.fromTag("ol",b.dom());a.set(f,e);b=c.map(d,g.curry(u,b));p.append(f,b);return f},w=function(b,c){var e=m.fromTag("div",b.dom());
a.set(e,c);return e};return{item:r,ellipsisItem:function(a,b,c){return s(a,b,c,!0)},mainmenu:function(a,b,c){a=v(a,b,c);e.main().set(a);return a},submenu:function(a,b,c){a=v(a,b,c);e.submenu().set(a);return a},widget:w,widgetSubmenu:function(a,b){var c=w(a,b);e.submenu().set(c);return c},separator:t,custom:q,enableItem:b.enable,disableItem:b.disable}});l("kc",[],function(){var c=function(c,b){if(void 0===c)throw"Cannot intersperse undefined";if(1>=c.length)return c;var a=[];a.push(c[0]);for(var e=
1;e<c.length;e++)a.push(b()),a.push(c[e]);return a};return{intersperse:function(d,b){return c(d,function(){return b})},intersperseThunk:c,untabulate:function(c){var b=[],a;for(a in c)if(Object.prototype.hasOwnProperty.call(c,a))for(var e=c[a],f=0;f<e.length;f++){var g=e[f];b[f]=b[f]||{};b[f][a]=g}return b},tabulate:function(c){for(var b={},a=0;a<c.length;a++){var e=c[a],f;for(f in e)if(Object.prototype.hasOwnProperty.call(e,f)){var g=e[f];Object.prototype.hasOwnProperty.call(b,f)||(b[f]=[]);b[f][a]=
g}}return b}}});l("sd",[],function(){return{css:function(c){var d=/^[a-zA-Z]/.test(c)?"":"e";c=c.replace(/[^\w]/gi,"-");return d+c}}});l("se",["b"],function(c){return{splits:function(d,b){if(0===b.length)return[d];var a=c.foldl(b,function(a,b){if(0===b)return a;var c=d.substring(a.prev,b);return{prev:b,values:a.values.concat([c])}},{prev:0,values:[]}),e=b[b.length-1];return e<d.length?a.values.concat(d.substring(e)):a.values}}});l("kd",["sd","se"],function(c,d){return{cssSanitise:function(b){return c.css(b)},
splits:function(b,a){return d.splits(b,a)}}});l("c6","jx k6 k7 a b 85 gi kc 7 s kd l 3c q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=function(a,b){var d=e.flatten(b);return c.menu(a,d)},t=function(a){return e.map(a,function(a){a=e.map(a,function(a){return a.items()});return e.flatten(a)})};return{create:function(c,v,w){var x=c.name,y=c.textkey,z=c.menuTextkey,A=c.tooltip,l=c.label,B=m.from(c.icon),C=k.constant(void 0!==c.contentFocus?c.contentFocus:!1),F=p.fromDom(r),E=a.isString(y)?
n.cssSanitise(x):x,G=w(y),z=w(z),H=g.mainmenu(F,E+"-menu",[]),I=b.toggle(x,E,k.identity,y,l,A,w);B.filter(a.isString).each(function(a){d.findAndSetUrl(I.element(),a)});var K=I.initAria(I,G,!0,c.toggle);c=t(v);var J=s(E,v);v=h.intersperseThunk(c,function(){return[g.separator(F)]});f.menu(H,z);q.append(H,e.flatten(v));return{button:k.constant(I),contentFocus:C,destroy:function(){I.destroy();J.destroy();K.destroy()},element:k.constant(H),events:J.events,handlers:J.handlers,icon:k.constant(B),init:J.init,
label:k.constant(G),name:J.name,structure:J.structure,submenus:J.submenus,textkey:k.constant(y),menuTextkey:k.constant(z),updateMenu:k.noop,enable:K.enable,disable:K.disable}}}});l("jy",["s5","c6","b","7","s"],function(c,d,b,a,e){var f=function(a,b){return e.some(b(a))},g=function(a,b){return e.some(b(a,[]))},h=function(k,m){var n=a.curry(h,k);return c.cata(m,e.none,e.none,f,function(a,c,f){c=b.map(c,function(a){return b.bind(a.books,n)});a=d.create(a,c,k);return e.some(f(a,[]))},g,function(a,c,d){c=
b.bind(c,n);return e.some(d(a,c))}).toArray()};return{build:function(a,c){return{items:b.bind(a.books,function(a){return h(c,a)}),category:a.category}}}});l("bz",["jw","jx","jy","b","85"],function(c,d,b,a,e){return{build:function(f,g,h){var k=h.translations();f=c.fromConfig(g.toolbar(),g.menu(),f);f=a.map(f,function(a){return b.build(a,k)});return a.map(f,function(a){var b=d.toolbar(a.items);a=a.category;e.toolbarGroup(b.component(),k(a));return b})}}});l("c0",["2u"],function(c){var d=c.immutable("toolbar",
"menu");c=c.immutable("smartview","translations");var b=function(a){return function(){return a.apply(null,arguments)}};return{blueprints:b(d),env:b(c)}});l("c4",["66"],function(c){var d=function(){return/(?:(?:[A-Za-z]{3,9}:(?:\/\/))(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?[A-Za-z0-9-]+(?:\.[A-Za-z0-9-]+)*|(?:www\.|[-;:&=+$,.\w]+@)[A-Za-z0-9-]+(?:\.[A-Za-z0-9-]+)*)(?::[0-9]+)?(?:\/[-+~%.()\/\w]*)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\w]*))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]*))?/g};return{tokens:function(b,a){return b.replace(/\{(\d+)\}/g,
function(c,d,g,h){d=parseInt(d,10);if(void 0===a[d])throw"No value for token: "+c+" in translation: "+b;return a[d]})},link:d,autolink:function(){var b=d().source;return new c("("+b+")[-.~*+=!&;:'%@?^${}(),]*","g")}}});l("75","a 7 c4 1g 4n 9".split(" "),function(c,d,b,a,e,f){var g=e.generate([{raw:["text"]},{key:["key"]},{pkey:["key","params"]}]),h=function(c){var e=a.get(c);if(1<arguments.length||/\{(\d+)\}/.test(e)){for(var d=new f(arguments.length-1),g=1;g<arguments.length;g++)d[g-1]=arguments[g];
return b.tokens(e,d)}return e};return{get:function(a){if(c.isString(a))throw"string passed to I18n.get:"+a;return a.fold(d.identity,h,h)},has:a.has,translate:h,raw:g.raw,key:function(b){a.get(b);return g.key(b)},pkey:function(b,c){a.get(b);return g.pkey(b,c)},cata:function(a,b,c,e){return a.fold(b,c,e)}}});l("jz","85 4z 75 33 55 46 1y 4b 3u l 2o 3c 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){return function(r,s){var t=void 0!==s?s:"info",u=d.div();h.add(u,[a.resolve("banner"),a.resolve("banner-"+
t)]);t=d.div();g.add(t,a.resolve("banner-message"));n.append(t,m.fromText(r));var v=d.div();g.add(v,a.resolve("banner-buttons"));var w=m.fromTag("span");g.add(w,a.resolve("banner-close"));n.append(v,w);c.button(w,b.translate("banner.close"));p.append(u,[t,v]);var x=k.bind(w,"click",function(){y.trigger.close()}),y=f.create({close:e([])});return{element:function(){return u},action:function(a){n.prepend(v,a.element())},destroy:function(){x.unbind();q.remove(u)},events:y.registry}}});l("c1","7 s jz 1a 3u l 2o 36".split(" "),
function(c,d,b,a,e,f,g,h){return function(k,m){var n=void 0!==m?m:"error",p=k.description(),q=k.link(),r=b(p,n),s=d.none(),t=function(a,b){return e.bind(a,"click",function(a){a.kill();h.open(b.url())})},n=function(b){var e=f.fromTag("a");a.set(e,"href",b.url());a.set(e,"target","_blank");var h=f.fromText(b.text());s=d.some(t(e,b));g.append(e,h);r.action({element:c.constant(e)})};null!==q&&q.url()&&q.text()&&n(q);return{element:r.element,action:r.action,destroy:function(){r.destroy();s.each(function(a){a.unbind()})},
events:r.events}}});l("sj",["53"],function(c){return{dropdown:c.exactly("enable disable select clear selectElement populate tick untick activate deactivate".split(" ")),menu:c.exactly(["enable","disable"]),general:c.exactly("enable disable select deselect selected element".split(" ")),widget:c.exactly("enable disable select deselect press release".split(" ")),palette:c.exactly(["show","hide"])}});l("ye",["gi","l","2o"],function(c,d,b){return{generateItem:function(a,e,f,g){return f.fold(function(){return c.item(a,
e.value(),g(e.textkey()))},function(f){f=f(e);var g=d.fromTag("li",a.dom());b.append(g,f);return c.custom(a,e.value(),g)})},generateSeparator:function(a,e,f){var g=c.separator(a);b.append(g,d.fromText(f(e),a.dom()));return g}}});l("yf","a b f8 la 7 s 1a 1y 4e".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a,b){var c=d.find(a,function(a){return a.value()===b});return f.from(c)},n=function(a){a=k.children(a,".ephox-pastry-toggle-list-item-selected");d.each(a,function(a){h.remove(a,"ephox-pastry-toggle-list-item-selected");
b.checked(a,!1)})};return{updateDropdown:function(b,d,g,k,n){d.fold(b.clear,e.noop,function(e){n.fold(function(){(c.isString(e)?m(k,e):f.some(e)).each(b.select)},function(c){c=c(e);var d=a.resolve("arrow-righticon");h.add(c,d);b.selectElement(c)})});g.fold(b.disable,e.noop,b.enable)},tick:function(a,c){n(a);var e=k.descendants(a,".ephox-gopher-item"),e=d.find(e,function(a){return g.get(a,"data-ephox-gopher-item-value")===c});void 0!==e&&null!==e&&(h.add(e,"ephox-pastry-toggle-list-item-selected"),
b.checked(e,!0))},untick:n,activate:function(a){h.add(a,"ephox-pastry-statebutton-selected")},deactivate:function(a){h.remove(a,"ephox-pastry-statebutton-selected")}}});l("si",["f8","gi","la","7","1y"],function(c,d,b,a,e){var f=b.resolve("toggle-list-item-selected"),g=function(a){d.enableItem(a);c.enable(a)},h=function(a){d.disableItem(a);c.disable(a)},k=function(a){e.remove(a,f);c.checked(a,!1)},m=function(a){e.add(a,f);c.checked(a,!0)};return{control:function(b){return{enable:a.curry(g,b),disable:a.curry(h,
b)}},selected:function(b){return{deselect:a.curry(k,b),select:a.curry(m,b),selected:a.curry(e.has,b,f)}}}});l("sk",["k6","a","85","4z","4b"],function(c,d,b,a,e){var f=function(c){var d=a.span();b.hidden(d,!0);e.add(d,["ephox-pastry-icon-content","ephox-chameleon-icon"].concat([c]));return[d]},g=function(d){var f=a.span();b.hidden(f,!0);e.add(f,["ephox-pastry-icon-content","ephox-chameleon-"+d.value]);c.setUrl(f,d.icon);return[f]},h=function(a){return f(!0===a.icon?"ephox-chameleon-"+a.value:a.icon)};
return{generate:f,generateFrom:function(a){return void 0===a.icon?[]:(d.isString(a.icon)?g:h)(a)}}});l("ag","85 2z c 7 1a 2n l 2o 2q 2a 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=b.detect().browser.isFirefox(),q={position:"absolute",left:"-9999px"},r=function(a,b){var e=g.fromTag("span",a.dom());c.presentation(e);var d=g.fromText(b,a.dom());h.append(e,d);return e},s=function(a,b){var c=d.generate("ephox-echo-voice");e.set(b,"id",c);e.set(a,"aria-describedby",c)},t=function(a,b,c){var d=
m.owner(b),g=r(d,c);p&&s(b,g);e.setAll(g,a(c));f.setAll(g,q);h.append(b,g);n(function(){e.remove(g,"aria-live");k.remove(g)},1E3)};b=a.curry(t,function(a){return{"aria-live":"polite","aria-atomic":"true","aria-label":a}});a=a.curry(t,a.constant({"aria-live":"assertive","aria-atomic":"true",role:"alert"}));return{describe:function(a,b){var e=m.owner(a),e=r(e,b);f.set(e,"display","none");c.hidden(e,!0);s(a,e);return e},speak:b,shout:a,tokenSelector:function(){return'span[id^="ephox-echo-voice"]'}}});
l("yg","si sk 77 85 ag gi 7 s 55 46 1y l 2o 3c 2q 31 q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u){var v=p.fromDom(u),w=b.resolve("label-default");return function(u,y){var z=m.create({populate:k(["items"])}),A=function(c){var e=u(c.textkey),e=f.item(v,c.name+"-menu-trigger",e);n.add(e,b.resolve("menu-more"));c=d.generate("ephox-chameleon-"+c.name);r.prepend(e,c);a.menuItem(e,h.none(),h.some(!0));return e}(y),l=function(a){a=p.fromText(a);B(a)},B=function(a){t.child(A,".ephox-gopher-item-text").each(function(b){s.empty(b);
q.append(b,a);n.remove(b,w)})},C=c.control(A);return{element:g.constant(A),populate:function(a){z.trigger.populate(a)},select:function(a){t.child(A,e.tokenSelector()).each(s.remove);var b=e.describe(A,y.describe(a));q.append(A,b);a=u(a.textkey());l(a)},selectElement:B,disable:C.disable,enable:C.enable,clear:function(){l(u(y.textkey));t.child(A,".ephox-gopher-item-text").each(function(a){n.add(a,w)})},destroy:function(){s.remove(A)},events:z.registry}}});l("sf","sj ye yf yg b 85 gi k8 7 55 46 1a 1y l 3c 2q q".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u){var v=r.fromDom(u),w="data-"+h.resolve("item-value"),x=function(a){a=g.submenu(v,a+"-menu",[]);q.remove(a,"ephox-gopher-main-menu");q.add(a,"ephox-gopher-submenu");return a},y=function(a,b){var c=p.get(b,"data-ephox-gopher-menu-value"),e={};e[a.name+"-menu-trigger"]=c;return e};return{init:function(g,h){var q=x(h.name);f.menu(q,g(h.textkey,!1));var r=y(h,q),u=a(g,h),l=function(a){a=e.bind(a,function(a){var b=e.map(a.items(),function(a){a=d.generateItem(v,
a,h.render,g);f.menuItemCheckbox(a);return a});return a.label().fold(k.constant(b),function(a){return[d.generateSeparator(v,a,g)].concat(b)})});t.empty(q);s.append(q,a)},E=n.create({done:m([]),abort:m(["item"])}),G={};e.each(h.values,function(a){G[a.value()]=function(a){a=p.get(a,w);h.action(a);E.trigger.done()}});u.events.populate.bind(function(a){l(a.items())});return{items:k.constant([u.element()]),structure:k.constant(r),submenus:k.constant([q]),refreshMenu:function(){h.updateDropdown(c.dropdown({enable:u.enable,
disable:u.disable,select:u.select,clear:u.clear,selectElement:u.selectElement,populate:u.populate,tick:k.curry(b.tick,q),untick:k.curry(b.untick,q),activate:k.noop,deactivate:k.noop}))},destroyer:function(){u.destroy()},handlers:k.constant(G),events:E.registry}}}});l("sg","si sj sk 85 gi 7 s 55 46 l 3c q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=m.fromDom(p);return{init:function(m,p){var t=m(p.textkey),u=(!0===p.hasDialog?e.ellipsisItem:e.item)(q,p.value,t),v=c.control(u),w=!0===p.toggle?
c.selected(u):{select:f.noop,deselect:f.noop,selected:f.constant(!1)};!0===p.toggle?a.menuItemCheckbox(u):a.menuItem(u,g.some(t),g.some(!1));var x=function(){p.updateGeneral(d.general({disable:v.disable,enable:v.enable,select:w.select,deselect:w.deselect,selected:w.selected,element:f.constant(u)}))},y=k.create({done:h([]),abort:h(["item"])}),t={};t[p.value]=function(){y.trigger.done();p.action();x()};var z=b.generateFrom(p);n.prepend(u,z);return{items:f.constant([u]),structure:f.constant({}),submenus:f.constant([]),
refreshMenu:x,handlers:f.constant(t),destroyer:f.identity,events:y.registry}}}});l("sh","si k6 sk 77 85 gi 6 7 s 1a 1y l 3c q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=p.fromDom(r),t=function(b){return{submenu:function(a){var c=a.textkey();a=a.element();e.menu(a,b(c));n.remove(a,"ephox-gopher-main-menu");n.add(a,"ephox-gopher-submenu");return a},item:function(c){var d=c.textkey(),d=b(d);c=f.item(s,c.name()+"-menu-trigger",d);n.add(c,a.resolve("menu-more"));e.menuItem(c,k.some(d),k.some(!0));
return c}}};return{nested:function(a,e,f){f=t(a);a=f.submenu(e);var k=m.get(a,"data-ephox-gopher-menu-value");f=f.item(e);var n={};n[e.name()+"-menu-trigger"]=k;var k=g.merge(n,e.structure()),p=b.generate("ephox-chameleon-"+e.name());q.prepend(f,p);e.icon().each(function(a){0<p.length&&d.setUrl(p[0],a)});var r=c.control(f),n=void 0!==e.destroyer?e.destroyer:void 0!==e.destroy?e.destroy:h.noop;return{items:h.constant([f]),structure:h.constant(k),submenus:h.constant([a].concat(e.submenus())),refreshMenu:function(){e.updateMenu({enable:r.enable,
disable:r.disable})},destroyer:n,handlers:e.handlers,events:e.events}}}});l("kf","si sj sk 77 85 gi 7 s 55 46 47 1y 4b 1b l 2y 2o 3c 37 q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w,x){var y=s.fromDom(x),z=a.resolve("menu-widget"),A=function(a,b){var c=f.widgetSubmenu(y,b);u.append(c,a.element());q.add(a.element(),[z,"ephox-gopher-item"]);return c},l=function(c,e,d){c=c(e.textkey());c=f.item(y,d,c);p.add(c,a.resolve("menu-more"));d=b.generate(a.resolve(d));v.prepend(c,d);return c};
x=function(a,b){var f=b.instance(),p=f.name(),q=p+"-submenu",r=A(f,q),s=l(a,f,p);e.menu(r,a(f.menuTextkey()));e.menuItem(s,h.some(a(f.textkey())),h.some(!0));var t=c.control(s),u={};u[p]=q;var v=m.create({done:n([],f.events.done),abort:k(["item"])});f.events.abort.bind(function(){v.trigger.abort(s)});return{items:g.constant([s]),structure:g.constant(u),submenus:g.constant([r]),refreshMenu:function(){f.updateWidget(d.widget({enable:t.enable,disable:t.disable,select:g.noop,deselect:g.noop,press:g.noop,
release:g.noop}))},destroyer:f.destroy,handlers:g.constant({}),events:v.registry}};return{widget:x,inline:function(b,q){var v=q.instance(),x=v.name();p.add(v.element(),a.resolve("menu-inline-widget"));var z=s.fromTag("li");u.append(z,v.element());var A=f.custom(y,x,z),l=c.control(A);e.menuItem(A,h.some(b(v.textkey())),h.some(!1));z={};z[x]=function(a){var b=t.active().filter(function(b){return w.ancestor(b,g.curry(r.eq,a))});v.element().dom().click();b.each(t.focus)};var D=m.create({done:n([],v.events.done),
abort:k(["item"])});v.events.abort.bind(function(){D.trigger.abort(A)});return{items:g.constant([A]),structure:g.constant({}),submenus:g.constant([]),refreshMenu:function(){v.updateInlineWidget(d.widget({enable:l.enable,disable:l.disable,select:g.noop,deselect:g.noop,press:g.noop,release:g.noop}))},destroyer:v.destroy,handlers:g.constant(z),events:D.registry}},split:x,styles:g.constant(z)}});l("kj","77 4z s 1y 2n 3u 2o 31 m".split(" "),function(c,d,b,a,e,f,g,h,k){var m=c.resolve("keyfocus"),n=function(b,
c){var h=d.span();e.set(h,"display","none");a.add(h,m);g.append(b,h);return f.bind(h,"click",function(a){c();a.kill()})};return{onButton:function(a){return n(a.element(),a.click)},custom:n,trigger:function(a){var c="."+m;a=k.is(a,c)?b.some(a):h.descendant(a,c);a.each(function(a){a.dom().click()});return a}}});l("af",["2u"],function(c){return{menu:c.immutableBag(["focusActive"],[])}});l("ss","b k8 k9 s 1y 31".split(" "),function(c,d,b,a,e,f){var g=d.resolve("item-selected"),h=function(a,b){e.add(b,
g)},k=function(a,b){e.remove(b,g)};return{is:function(a){return e.has(a,g)},none:function(a){var e=b.all(a);c.each(e,function(b){k(a,b)})},selectAll:function(a,d){var f=b.all(a);c.each(f,function(a){e.remove(a,g)});c.each(d,function(a){e.add(a,g)})},select:h,deselect:k,selected:function(a){return f.descendant(a,"."+g)},first:function(c){var e=b.all(c);return a.from(e[0]).map(function(a){h(c,a);return a})},last:function(c){var e=b.all(c);return a.from(e[e.length-1]).map(function(a){h(c,a);return a})}}});
l("sr","b ss k9 7 s 1b".split(" "),function(c,d,b,a,e,f){var g=function(d,g){var h=b.all(d),k=c.findIndex(h,function(a){return f.eq(g,a)});return 0<=k?e.some({index:a.constant(k),all:a.constant(h)}):e.none()},h=function(a,b){return 0===b?a.length-1:b-1},k=function(a,b){return b===a.length-1?0:b+1},m=function(a,b,c){return g(a,b).map(function(e){var f=c(e.all(),e.index());e=e.all()[f];d.deselect(a,b);d.select(a,e);return e})};return{first:function(a){var c=b.all(a);return e.from(c[0]).map(function(b){d.select(a,
b);return b})},prev:function(a,b){return m(a,b,h)},next:function(a,b){return m(a,b,k)}}});l("ah",[],function(){var c=function(c){return function(){return c}};return{BACKSPACE:c([8]),TAB:c([9]),ENTER:c([13]),SHIFT:c([16]),CTRL:c([17]),ALT:c([18]),CAPSLOCK:c([20]),ESCAPE:c([27]),SPACE:c([32]),PAGEUP:c([33]),PAGEDOWN:c([34]),END:c([35]),HOME:c([36]),LEFT:c([37]),UP:c([38]),RIGHT:c([39]),DOWN:c([40]),INSERT:c([45]),DEL:c([46]),META:c([91,93,224]),F10:c([121])}});l("w1",["b","ah","w"],function(c,d,b){return{isCommand:function(a,
e){var f=[];c.each(e,function(a){a="string"===typeof a?[a.toUpperCase().charCodeAt(0)]:a;f=f.concat(a)});var g=function(a){return 0<c.filter(f,function(b){return c.contains(d[a](),b)}).length};if(!!a.altKey!==g("ALT")||!!a.shiftKey!==g("SHIFT")||!!a.ctrlKey!==g("CTRL")||!!a.metaKey!==g("META"))return!1;var g=null!==a.charCode&&void 0!==a.charCode&&0!==a.charCode?b.fromCharCode(a.charCode).toUpperCase().charCodeAt(0):a.which,h=d.CTRL().concat(d.ALT()).concat(d.SHIFT()).concat(d.META()),k=c.filter(f,
function(a){return!c.contains(h,a)});return 1<k.length?!1:0===k.length&&void 0===a.which||k[0]===g}}});l("w3",[],function(){return{stop:function(c){c.preventDefault();c.stopPropagation&&c.stopPropagation()}}});l("yi",["b","1o","ah"],function(c,d,b){return function(a,e){var f=e?a.slice(0):[],g=e,h=e?c.map(d.values(b),function(a){return a()}):[];return{swallowShortcuts:function(a){f=a.slice(0)},yieldShortcuts:function(a){f=c.difference(f,a)},swallowChars:function(){g=!0},yieldChars:function(){g=!1},
swallowKeys:function(a){h=a.slice(0)},yieldKeys:function(a){h=c.difference(h,a)},process:function(a,b){a.fold(function(a){c.contains(f,a)&&b()},function(a){c.contains(h,a)&&b()},function(){g&&b()})}}}});l("w5",["b","1o","ah"],function(c,d,b){var a={BACKSPACE:b.BACKSPACE,TAB:b.TAB,ENTER:b.ENTER,CAPSLOCK:b.CAPSLOCK,ESCAPE:b.ESCAPE,SPACE:b.SPACE,PAGEUP:b.PAGEUP,PAGEDOWN:b.PAGEDOWN,END:b.END,HOME:b.HOME,LEFT:b.LEFT,UP:b.UP,DOWN:b.DOWN,RIGHT:b.RIGHT,INSERT:b.INSERT,DEL:b.DEL};return{getSpecial:function(b){var f=
null;d.each(a,function(a,d){c.contains(a(),b)&&(f=d)});return f},noModifiers:function(a){return!(a.metaKey||a.altKey||a.ctrlKey)},isCharCode:function(a){return a.charCode===a.keyCode}}});l("yj","b w1 w5 ah s w".split(" "),function(c,d,b,a,e,f){var g=function(a,b){return e.from(c.find(b,function(b){return d.isCommand(a,b)}))},h=function(a){return b.isCharCode(a)?e.none():e.from(b.getSpecial(a.keyCode))};return{identify:function(b,c){return{fold:function(e,d,q){g(b,c).fold(function(){h(b).fold(function(){q(b.which&&
f.fromCharCode(b.which))},function(b){d(a[b]())})},e)}}},shortcut:g,special:h}});l("w2",["w3","yi","yj","7"],function(c,d,b,a){return function(e,f){var g=!1,h=d(e,f);return{on:function(){g=!0},off:function(){g=!1},isOn:function(){return g},handle:function(a){return function(b){g&&a(b.raw())}},stop:function(d){var f=b.identify(d,e);h.process(f,a.curry(c.stop,d))},swallowShortcuts:h.swallowShortcuts,yieldShortcuts:h.yieldShortcuts,swallowChars:h.swallowChars,yieldChars:h.yieldChars,swallowKeys:h.swallowKeys,
yieldKeys:h.yieldKeys}}});l("w4",["55","46"],function(c,d){return function(){return d.create({character:c(["character"]),space:c(["shift","stopper"]),left:c(["shift","stopper"]),right:c(["shift","stopper"]),backspace:c(["shift","stopper"]),tab:c(["shift","stopper"]),enter:c(["shift","stopper"]),capslock:c(["shift","stopper"]),escape:c(["shift","stopper"]),pageup:c(["shift","stopper"]),pagedown:c(["shift","stopper"]),end:c(["shift","stopper"]),home:c(["shift","stopper"]),down:c(["shift","stopper"]),
up:c(["shift","stopper"]),insert:c(["shift","stopper"]),del:c(["shift","stopper"]),command:c(["command"])})}});l("nw","b 6 w1 w2 w3 w4 w5 w".split(" "),function(c,d,b,a,e,f,g,h){return function(k){var m=d.merge({shortcuts:[],swallow:!1},k),n=f(),p=a(m.shortcuts,m.swallow),q=function(a){return c.find(m.shortcuts,function(c){return b.isCommand(a,c)})||null},r=function(a,b,c){t(a);n.trigger[b].apply(void 0,c)},s=function(a){return function(){p.isOn()&&e.stop(a)}};k=p.handle(function(a){var b=q(a);null!==
b?r(a,"command",[b]):(b=g.getSpecial(a.keyCode),g.noModifiers(a)&&null!==b&&(b=b.toLowerCase(),r(a,b,[a.shiftKey,s(a)])))});var t=function(a){p.isOn()&&p.stop(a)},u=p.handle(function(a){if(g.noModifiers(a))g.isCharCode(a)||null===g.getSpecial(a.keyCode)?null!==q(a)?t(a):a.which&&r(a,"character",[h.fromCharCode(a.which)]):t(a);else return!1});return{off:p.off,on:p.on,events:n.registry,swallowShortcuts:p.swallowShortcuts,yieldShortcuts:p.yieldShortcuts,swallowChars:p.swallowChars,yieldChars:p.yieldChars,
swallowKeys:p.swallowKeys,yieldKeys:p.yieldKeys,keypress:u,keydown:k}}});l("st","b k9 ah nw 7 55 46 3u".split(" "),function(c,d,b,a,e,f,g,h){return function(k){var m=g.create({mouseover:f(["item"]),click:f(["item"])}),n=[],p=a({shortcuts:k.shortcuts,swallow:k.swallow});k=k.tabs?[b.TAB()]:[];p.swallowKeys([b.UP(),b.DOWN(),b.ENTER(),b.SPACE(),b.ESCAPE()].concat(k));var q=function(){c.each(n,function(a){a.mouseover().unbind();a.click().unbind();a.keydown().unbind()});n=[];p.off()};return{destroy:function(){q()},
attach:function(a){q();n=c.map(a,function(a){var b=h.bind(a,"mouseover",function(a){d.up(a.target()).each(m.trigger.mouseover)}),c=h.bind(a,"click",function(a){d.up(a.target()).each(m.trigger.click)});a=h.bind(a,"keydown",function(a){p.keydown(a)});return{mouseover:e.constant(b),click:e.constant(c),keydown:e.constant(a)}});p.on()},detach:q,simulateKey:function(a){p.keydown(a)},events:m.registry,keys:p.events}}});l("bl",["2n"],function(c){var d=function(b){return"rtl"===c.get(b,"direction")?"rtl":
"ltr"};return{onDirection:function(b,a){return function(c){return"rtl"===d(c)?a:b}},getDirection:d}});l("au",["7","2x","2n"],function(c,d,b){var a=function(a,f,g,h){var k=b.get(a,f);void 0===k&&(k="");g=k===g?h:g;k=c.curry(b.set,a,f,k);a=c.curry(b.set,a,f,g);return d(k,a,!1)};return{toggler:function(b){return a(b,"visibility","hidden","visible")},displayToggler:function(b,c){return a(b,"display","none",c)},isVisible:function(a){a=a.dom();return!(0>=a.offsetWidth&&0>=a.offsetHeight)}}});l("k5","b sr ss st k9 ka kb 6 7 55 46 1b bl l 2y 21 au q".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v){return function(w,x){var y=n.create({select:m(["item"]),active:m(["item"]),show:m(["menu"]),hide:m(["menu"]),collapse:m(["menu"]),expand:m(["menu","trigger"]),escaped:m([])}),z=a({shortcuts:[],swallow:[],tabs:x.tabs}),A={},l=function(a){f.activate(w,a)},B=function(){var a=f.inactive(w);c.each(a,function(a){g.submenu().is(a)&&y.trigger.hide(a)})},C=function(a){e.isEnabled(a)&&f.submenu(w,A,a).each(function(b){y.trigger.expand(b,a)})},F=function(a){f.up(a).each(function(c){l(c);
b.selectAll(c,[a]);y.trigger.active(a)})},E=function(a){f.active(w).bind(function(c){b.selected(c).orThunk(function(){return d.first(c)}).each(function(b){a(c,b)})})},G=function(a){E(function(b,c){e.isEnabled(c)&&a(b,c)})},H=function(a){E(function(b,c){a(b,c).each(function(a){p.eq(c,a)||(f.submenu(w,A,c).each(y.trigger.collapse),y.trigger.active(a))})})},I=k.curry(H,d.prev),K=k.curry(H,d.next),J=function(){g.main().first(w).each(function(a){l(a);b.selected(a).each(y.trigger.active)})},M=function(a){s.active().fold(a.stopper(),
function(b){!1===c.contains(["input"],t.name(b))&&a.stopper()()});G(function(a,c){f.submenu(w,A,c).fold(function(){g.submenu().is(a)&&(y.trigger.collapse(a),J())},function(a){y.trigger.expand(a,c);b.none(a);b.first(a).each(y.trigger.active);l(a)})})},H=function(a){s.active().fold(a.stopper(),function(b){!1===c.contains(["input"],t.name(b))&&a.stopper()()});G(function(a,b){g.submenu().is(a)&&(y.trigger.collapse(a),J())})},O=function(a){G(function(b,c){var d=e.get(c);A.hasOwnProperty(d)&&void 0!==A[d]?
M(a):y.trigger.select(c)})},N=function(a){a.shift()?I(a):K(a)};z.keys.up.bind(I);z.keys.down.bind(K);x.tabs&&z.keys.tab.bind(N);z.keys.enter.bind(O);z.keys.space.bind(O);z.keys.escape.bind(function(a){a.stopper()();E(function(a,b){g.submenu().is(a)?(y.trigger.collapse(a),J()):y.trigger.escaped()})});"ltr"===q.getDirection(w)?(z.keys.left.bind(H),z.keys.right.bind(M)):(z.keys.right.bind(H),z.keys.left.bind(M));z.events.mouseover.bind(function(a){a=a.item();b.is(a)&&f.submenu(w,A,a).forall(u.isVisible)||
(F(a),B(),C(a))});z.events.click.bind(function(a){a=a.item();var b=e.get(a);A.hasOwnProperty(b)&&void 0!==A[b]||!e.isEnabled(a)||y.trigger.select(a)});return{destroy:function(){z.destroy()},populate:function(a){A=h.merge({},a)},on:function(a){a=void 0!==a?a:[r.fromDom(v)];z.attach(a)},off:function(){z.detach()},selectFirst:function(){f.active(w).each(function(a){b.none(a);b.first(a).each(y.trigger.active)})},select:function(a){F(a);B()},setActiveMenu:l,simulateKey:z.simulateKey,state:function(){return f.active(w).bind(function(a){return b.selected(a).map(function(b){return{menu:k.constant(a),
item:k.constant(b)}})})},events:y.registry}}});l("c5","77 b 1o k5 4z 7 s 55 46 47 4m 2u 1a 1y 2y 2o 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u){return function(v,w,x){var y=e.div();r.add(y,c.resolve("menu-"+w()+"-sandbox"));q.set(y,"tabindex",-1);t.append(v(),y);var z=g.none(),A=a(y,{tabs:!0}),l=n({}),B=function(){A.off();E();F.trigger.close()},C=function(a){var c=b.mapToArray(l.get(),p.immutable("submenu","item")),e=q.get(a,"data-ephox-gopher-menu-value"),c=d.find(c,function(a){return a.submenu()===
e});return g.from(c).bind(function(b){return u.descendant(y,"[data-ephox-gopher-item-value="+b.item()+"]").map(function(b){return{menu:f.constant(a),item:f.constant(b)}})})};v=function(a){var b=C(a.menu()).map(function(a){return a.item()});F.trigger.collapse(a.menu(),b)};var F=k.create({open:h([]),close:h([]),itemAction:h(["value","item"]),itemHover:m(["item"],A.events.active),reveal:m(["menu","trigger"],A.events.expand),collapse:h(["menu","item"]),escaped:m([],A.events.escaped)});A.events.hide.bind(v);
A.events.collapse.bind(v);A.events.escaped.bind(function(){A.state().fold(B,function(a){C(a.menu()).fold(function(){B()},function(a){F.trigger.collapse(a.menu(),g.some(a.item()));A.select(a.item())})})});A.events.select.bind(function(a){a=a.item();var b=q.get(a,"data-ephox-gopher-item-value");F.trigger.itemAction(b,a)});A.events.active.bind(function(a){x.focusActive()&&s.focusInside(a.item())});var E=function(){b.each(l.get(),function(a,b){u.descendant(y,'[data-ephox-gopher-menu-value="'+a+'"]').each(function(a){var c=
u.descendant(y,'[data-ephox-gopher-item-value="'+b+'"]');F.trigger.collapse(a,c)})})};return{update:function(a){l.set(a);A.populate(a)},setActiveMenu:function(a){z=g.from(a);A.setActiveMenu(a);A.selectFirst()},getActiveMenu:function(){return z},structure:l,destroy:function(){B();A.destroy()},open:function(a,b){s.focus(b);A.on(a);A.selectFirst();F.trigger.open()},close:B,events:F.registry,sandbox:f.constant(y),select:A.select,simulateKey:A.simulateKey}}});l("su",["4n"],function(c){c=c.generate([{southeast:[]},
{southwest:[]},{northeast:[]},{northwest:[]}]);return{southeast:c.southeast,southwest:c.southwest,northeast:c.northeast,northwest:c.northwest,cata:function(c,b,a,e,f){return c.fold(b,a,e,f)}}});l("l3",["7","s"],function(c,d){var b=function(a,e){return a.view(e).fold(c.constant([]),function(c){var e=a.owner(c),e=b(a,e);return[c].concat(e)})};return{pathTo:function(a,c){var f=c.owner(a),f=b(c,f);return d.some(f)}}});l("l4",["s","l","2a","q"],function(c,d,b,a){return{view:function(b){return(b.dom()===
a?c.none():c.from(b.dom().defaultView.frameElement)).map(d.fromDom)},owner:function(a){return b.owner(a)}}});l("cf","b 7 l3 l4 3k l 3l 29 q".split(" "),function(c,d,b,a,e,f,g,h,k){return{find:function(m){var n=f.fromDom(k),p=h.get(n);return b.pathTo(m,a).fold(d.curry(g.absolute,m),function(a){var b=g.viewport(m);a=c.foldr(a,function(a,b){var c=g.viewport(b);return{left:a.left+c.left(),top:a.top+c.top()}},{left:0,top:0});return e(a.left+b.left()+p.left(),a.top+b.top()+p.top())})}}});l("64",["2n","3v"],
function(c,d){var b=d("height",function(a){return a.dom().offsetHeight});return{set:function(a,c){b.set(a,c)},get:function(a){return b.get(a)},getOuter:function(a){return b.getOuter(a)},setMax:function(a,e){var d=b.max(a,e,"margin-top border-top-width padding-top padding-bottom border-bottom-width margin-bottom".split(" "));c.set(a,"max-height",d+"px")}}});l("70","cf 6z l 64 29 2r q 36".split(" "),function(c,d,b,a,e,f,g,h){return{absolute:function(b){var e=c.find(b),g=f.getOuter(b);b=a.getOuter(b);
return d(e.left(),e.top(),g,b)},view:function(){var a=h.innerWidth,c=h.innerHeight,f=b.fromDom(g),f=e.get(f);return d(f.left(),f.top(),a,c)}}});l("sv","7 cf 6z 70 3k 64 29 2r".split(" "),function(c,d,b,a,e,f,g,h){return{toBox:function(a,e){var n=c.curry(d.find,e),n=a.fold(n,n,function(){var a=g.get();return d.find(e).translate(-a.left(),-a.top())}),p=h.getOuter(e),q=f.getOuter(e);return b(n.left(),n.top(),p,q)},viewport:function(c,e){return e.fold(function(){return c.fold(a.view,a.view,b)},function(a){return c.fold(a,
a,b)})},translate:function(a,b,d,f){var h=e(d,f);return a.fold(c.constant(h),c.constant(h),function(){var a=g.get();return h.translate(-a.left(),-a.top())})}}});l("sw",["2u"],function(c){var d=c.immutableBag("x y width height maxHeight direction classes label candidateYforTest".split(" "),[]);c=c.immutable("position","left","top","right","bottom");return{decision:d,css:c}});l("np",["s","su","sv","sw","4n"],function(c,d,b,a,e){e=e.generate([{none:[]},{relative:["x","y"]},{fixed:["x","y","width","height"]}]);
return{none:e.none,relative:e.relative,fixed:e.fixed,reposition:function(b,e){return b.fold(function(){return a.css("absolute",c.some(e.x()),c.some(e.y()),c.none(),c.none())},function(b,d){return a.css("absolute",c.some(e.x()-b),c.some(e.y()-d),c.none(),c.none())},function(b,f,m,n){b=e.x()-b;f=e.y()-f;var p=e.width(),q=e.height();m-=b+p;n-=f+q;var r=c.some(b),s=c.some(f),t=c.some(m),u=c.some(n),v=c.none();return d.cata(e.direction(),function(){return a.css("fixed",r,s,v,v)},function(){return a.css("fixed",
v,s,t,v)},function(){return a.css("fixed",r,v,v,u)},function(){return a.css("fixed",v,v,t,u)})})},viewport:function(a,c){return b.viewport(a,c)},toBox:function(a,c){return b.toBox(a,c)},translate:function(a,c,e,d){return b.translate(a,c,e,d)},cata:function(a,b,c,e){return a.fold(b,c,e)}}});l("nn",["np","2u","36"],function(c,d,b){var a=d.immutable("anchorBox","origin"),e=function(){return c.fixed(0,0,b.innerWidth,b.innerHeight)};return{box:function(b){var c=e();return a(b,c)},element:function(b){var d=
e();b=c.toBox(d,b);return a(b,d)},fixedOrigin:e}});l("fd",["7","3k"],function(c,d){return function(b,a){return{southeast:c.constant(d(-b,a)),southwest:c.constant(d(b,a)),northeast:c.constant(d(-b,-a)),northwest:c.constant(d(b,-a))}}});l("yk",["4g"],function(c){return{resolve:c.create("ephox-repartee").resolve}});l("sx",["7","yk"],function(c,d){var b=d.resolve("caret-top-align"),a=d.resolve("caret-bottom-align"),e=d.resolve("caret-right-align"),f=d.resolve("caret-left-align"),g=d.resolve("caret-middle-align");
return{east:c.constant(f),south:c.constant(b),west:c.constant(e),north:c.constant(a),middle:c.constant(g),all:c.constant([b,a,f,e,g])}});l("sy",["2u"],function(c){return c.immutable("x","y","bubble","direction","anchors","label")});l("no",["su","sx","sy"],function(c,d,b){var a=function(a,b){return a.x()+a.width()-b.width()/2},e=function(a,b){return a.x()+a.width()-b.width()},f=function(a,b){return a.y()-b.height()},g=function(a){return a.y()+a.height()},h=function(a,e,f){return b(a.x(),g(a),f.southeast(),
c.southeast(),[d.south(),d.east()],"layout-se")},k=function(a,f,h){return b(e(a,f),g(a),h.southwest(),c.southwest(),[d.south(),d.west()],"layout-sw")},m=function(a,e,g){return b(a.x(),f(a,e),g.northeast(),c.northeast(),[d.north(),d.east()],"layout-ne")},n=function(a,g,h){return b(e(a,g),f(a,g),h.northwest(),c.northwest(),[d.north(),d.west()],"layout-nw")},p=function(e,g,h){return b(a(e,g),f(e,g),h.northeast(),c.northeast(),[d.north(),d.middle()],"layout-nm")},q=function(e,f,h){return b(a(e,f),g(e),
h.southeast(),c.southeast(),[d.south(),d.middle()],"layout-sm")};return{southeast:h,northeast:m,southwest:k,northwest:n,southmiddle:q,northmiddle:p,all:function(){return[h,k,m,n,q,p]},allRtl:function(){return[k,h,n,m,q,p]}}});l("sz",["su","sx","sy"],function(c,d,b){var a=function(a){return a.x()+a.width()},e=function(a,b){return a.y()-b.height()+a.height()},f=function(e,f,g){return b(a(e),e.y(),g.southeast(),c.southeast(),[d.south(),d.east()],"link-layout-se")},g=function(a,e,f){e=a.x()-e.width();
return b(e,a.y(),f.southwest(),c.southwest(),[d.south(),d.west()],"link-layout-sw")},h=function(f,g,h){return b(a(f),e(f,g),h.northeast(),c.northeast(),[d.north(),d.east()],"link-layout-ne")},k=function(a,f,g){var h;h=a.x()-f.width();return b(h,e(a,f),g.northwest(),c.northwest(),[d.north(),d.west()],"link-layout-nw")};return{southeast:f,northeast:h,southwest:g,northwest:k,all:function(){return[f,g,h,k]},allRtl:function(){return[g,f,k,h]}}});l("i1",["7","2n","64","1s"],function(c,d,b,a){return{anchored:c.constant(function(c,
f){b.setMax(c,a.floor(f));d.setAll(c,{"overflow-x":"hidden","overflow-y":"auto"})}),expandable:c.constant(function(c,d){b.setMax(c,a.floor(d))})}});l("yl","b 7 su sw 4n 1s".split(" "),function(c,d,b,a,e,f){var g=e.generate([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),h=function(c,e,h,p){var q=c.x(),r=c.y(),s=c.bubble().left(),t=c.bubble().top(),u=p.x(),v=p.y(),w=p.width(),x=p.height(),s=q+s,q=r+t,y=s>=u,z=q>=v,r=y&&z,t=s+e<=u+w&&q+h<=v+x,u=y?f.min(e,u+w-s):f.abs(u-(s+e)),w=z?f.min(h,
v+x-q):f.abs(v-(q+h));e=p.width()-e;p=f.max(0,s);e=f.min(p,e);h=z?q:q+(h-w);p=d.constant(h+w-v);v=d.constant(v+x-h);v=b.cata(c.direction(),v,v,p,p);c=a.decision({x:e,y:h,width:u,height:w,maxHeight:v,direction:c.direction(),classes:c.anchors(),label:c.label(),candidateYforTest:q});return r&&t?g.fit(c):g.nofit(c,u,w)};return{attempts:function(e,f,n,p,q){var r=n.width(),s=n.height(),t=function(a,b,c,e){a=a(f,n,p);return h(a,r,s,q).fold(g.fit,function(a,d,f){return d>c||f>e?g.nofit(a,d,f):g.nofit(b,c,
e)})};return c.foldl(e,function(a,b){var c=d.curry(t,b);return a.fold(g.fit,c)},g.nofit(a.decision({x:f.x(),y:f.y(),width:n.width(),height:n.height(),maxHeight:n.height(),direction:b.southeast(),classes:[],label:"none",candidateYforTest:f.y()}),-1,-1)).fold(d.identity,d.identity)}}});l("ym","7 2n l 64 2o 3l 2q 2r".split(" "),function(c,d,b,a,e,f,g,h){return{measure:function(k){var m=b.fromTag("div");d.setAll(m,{position:"fixed",opacity:"0",top:"0",left:"0",bottom:"0",right:"0"});e.prepend(k,m);k=
f.viewport(m);var n=h.get(m),p=a.get(m);g.remove(m);return{top:k.top,left:k.left,width:c.constant(n),height:c.constant(p)}}}});l("t0","7 s np sx yl ym 4b 2n 64 2r".split(" "),function(c,d,b,a,e,f,g,h,k,m){return{layout:function(a,b,d,f){h.remove(b,"max-height");b={width:c.constant(m.getOuter(b)),height:c.constant(k.getOuter(b))};return e.attempts(f.preference(),a,b,d,f.bounds())},setClasses:function(b,c){g.remove(b,a.all());g.add(b,c.classes())},setHeight:function(a,b,c){c.maxHeightFunction()(a,b.maxHeight())},
position:function(a,e,g){var k=function(a){return a+"px"};g=g.origin();var m=c.constant(g);g=g.fold(m,m,function(){var c=f.measure(a);return b.fixed(c.left(),c.top(),c.width(),c.height())});e=b.reposition(g,e,a);h.setOptions(a,{position:d.some(e.position()),left:e.left().map(k),top:e.top().map(k),right:e.right().map(k),bottom:e.bottom().map(k)})}}});l("nq","s 70 no i1 np t0 2u".split(" "),function(c,d,b,a,e,f,g){var h=g.immutableBag(["bounds","origin","preference","maxHeightFunction"],[]),k=function(a,
b,c){return void 0===a[b]?c:a[b]},m=function(a,b,c,e){a=f.layout(a,b,c,e);f.position(b,a,e);f.setClasses(b,a);f.setHeight(b,a,e)};return{fixed:function(b,d,f,g,s){var t=k(s,"maxHeightFunction",a.anchored());s=b.anchorBox();b=b.origin();g=h({bounds:e.viewport(b,c.none()),origin:b,preference:g,maxHeightFunction:t});m(s,d,f,g)},relative:function(c,f,g,r){r=void 0!==r?r:{};r=h({bounds:k(r,"bounds",d.view()),origin:k(r,"origin",e.none()),preference:k(r,"preference",b.all()),maxHeightFunction:k(r,"maxHeightFunction",
a.anchored())});m(c,f,g,r)}}});l("kg","c 7 s nn fd no sz np nq 3k 3l 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=function(e,d,f,g,q,r,s){var l=!c.detect().deviceType.isiOS();return function(c){var B,C;!0===l?C=a.fixedOrigin():(C=e(),C=p.offsetParent(C).map(n.absolute).getOr(m(0,0)),C=h.relative(C.left(),C.top()));var F=C;B=h.viewport(F,b.some(d));C=h.toBox(F,f());B={bounds:B,origin:F,preference:q.isRtl()?r.allRtl():r.all(),maxHeightFunction:s};c=c.panel();k.relative(C,c,g,B)}},r=function(b,
c,e,d,f,g,h){return function(b){var c=f.isRtl()?g.allRtl():g.all(),n={maxHeightFunction:h},m=a.element(e());b=b.panel();k.fixed(m,b,d,c,n)}},s=c.detect().deviceType.isiOS()?q:r;return{main:function(a,b,c,e,g,h){a=s(a,b,c,e,g,f,h);return{recalculate:a,isAnchored:d.constant(!0),place:a}},submenu:function(a,b,c,f,h){a=s(a,b,c,e(3,-2),f,g,h);return{recalculate:a,isAnchored:d.constant(!0),place:a}}}});l("yn",["3k"],function(c){return function(){return{northwest:function(){return c(-2,1)},northeast:function(){return c(0,
1)},southwest:function(){return c(-2,-2)},southeast:function(){return c(0,-2)}}}});l("ke",["b","s","2u"],function(c,d,b){var a=function(a){return function(b){return b.key()===a}},e=b.immutable("key","value");return{put:function(b,d,h,k,m){var n=void 0!==k?k:e,p=void 0!==m?m:a(d);b=c.foldl(b,function(a,b){var c=p(b)?n(d,h):b;return{updated:p(b)||a.updated,acc:a.acc.concat([c])}},{updated:!1,acc:[]});return b.updated?b.acc:b.acc.concat([n(d,h)])},get:function(b,e,h){e=void 0!==h?h:a(e);b=c.find(b,e);
return d.from(b)}}});l("kh",["b","2m"],function(c,d){return{triage:function(b){b=c.foldr(b,function(a,b){var c=d.inBody(b.menu());return{keep:c?[b].concat(a.keep):a.keep,throwaway:!1===c?[b].concat(a.throwaway):a.throwaway}},{throwaway:[],keep:[]});c.each(b.throwaway,function(a){a.popup().destroy()});return b.keep}}});l("ln",["b","7","1b","37"],function(c,d,b,a){var e=function(c,e){return a.ancestor(c,d.curry(b.eq,e))};return{ancestor:e,anyAncestor:function(a,b){return c.exists(b,function(b){return e(a,
b)})},sibling:function(c,e){return a.sibling(c,d.curry(b.eq,e))},child:function(c,e){return a.child(c,d.curry(b.eq,e))},descendant:function(c,e){return a.descendant(c,d.curry(b.eq,e))}}});l("cr","b 7 1b 3u l ln q".split(" "),function(c,d,b,a,e,f,g){return function(h,k,m){m=m||[e.fromDom(g)];var n=[],p=function(a){var c=k();a=a.target();b.member(a,c)||f.anyAncestor(a,c)||h(a)};return{on:function(){c.each(m,function(b){n.push(a.bind(b,"mousedown",p).unbind)})},off:function(){c.each(n,d.apply)},mousedown:p}}});
l("t1","6 4z la 1y 2n 2o 2q 31 au".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m){var n=c.merge({layerClass:null,zindex:null},m),p=d.div();a.add(p,b.resolve("panel"));e.setAll(p,{position:"absolute",display:"none",top:"0px"});n.zindex&&e.set(p,"z-index",n.zindex);n.layerClass&&a.add(p,n.layerClass);m=void 0!==m.container?m.container:h.first("body").getOrDie();f.append(m,p);m=k.displayToggler(p,"block");return{element:function(){return p},destroy:function(){g.remove(p)},content:function(a){g.empty(p);
f.append(p,a)},show:m.on,hide:m.off,toggle:m.toggle}}});l("ey",[],function(){return{create:function(){var c=!1;return{isBlocked:function(){return c},block:function(){c=!0},unblock:function(){c=!1}}}}});l("ez",[],function(){return{create:function(c,d){return{control:c,instance:d}}}});l("bk",["ey","ez"],function(c,d){return{tap:function(b){var a=c.create();return d.create(a,function(){a.isBlocked()||b.apply(null,arguments)})}}});l("ki","77 cr 4z t1 7 bk 55 46 1y 2n 2y 2o 31".split(" "),function(c,d,
b,a,e,f,g,h,k,m,n,p,q){return{create:function(r,s){var t=h.create({open:g([]),close:g([]),uistale:g([])});if(void 0===r)throw"uicontainer not specified";var u=a({layerClass:c.resolve("layer-menus"),container:r()}),v=b.div();k.add(v,c.resolve("popup-container"));u.content(v);var w=!1,x=function(){w&&(z.off(),u.hide(),w=!1,l.control.block(),t.trigger.close())},y=[v],z=d(function(a){!1===!w&&(x(),q.ancestor(a,"."+s).fold(function(){n.focus(a)},e.noop))},function(){return y}),l=f.tap(function(){t.trigger.uistale()});
l.control.block();return{element:function(){return v},panel:u.element,destroy:function(){u.hide();u.destroy();z.off()},open:function(){w||(l.control.unblock(),m.set(u.element(),"opacity","0"),u.show(),m.reflow(u.element()),z.on(),w=!0,t.trigger.open(),m.set(u.element(),"opacity","1"))},close:x,closed:function(){return!w},mousedown:function(a){z.mousedown(a.original())},uiStale:function(){l.instance()},setContent:function(a){p.append(v,a)},setComponents:function(a){y=a.concat([v])},events:t.registry}}}});
l("c7","ke kf kg kh ki b 7 i1 2u 1b 2n 6o".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=k.immutable("menu","popup"),r=function(a){return function(b){return m.eq(b.menu(),a)}};return function(k,m,u,v,w){var x=[],y=function(){var a=f.map(x,function(a){return a.popup().panel()}).concat(v);f.each(x,function(b){b.popup().setComponents(a)})},z=function(a){var b=c.get(x,a,r(a)).fold(function(){return D(a)},function(a){return a.popup()});y();x=c.put(x,a,b,q,r(a));return b},l=function(a){c.get(x,a,r(a)).each(function(a){a.popup().close()});
n.set(a,"display","none")},D=function(a){var b=e.create(k,w);b.setContent(a);x=c.put(x,a,b,q,r(a));y();return b};return{initMenu:D,registerMenus:function(b){x=a.triage(x);return f.map(b,z)},hideAll:function(){f.each(x,function(a){l(a.menu())})},hideMenu:l,expandMenu:function(a,c){var e=z(a),f=p.descendant(a,"."+d.styles())?h.expandable():h.anchored(),f=b.submenu(k,m,g.constant(c),u.uiDirection(),f);n.set(a,"display","block");e.open();f.recalculate(e);return{popup:e,anchorage:f}}}}});l("11x","4z la 4b l 2o 2q".split(" "),
function(c,d,b,a,e,f){return function(a,h){var k=c.span();b.add(k,[d.resolve("righticon-content"),h]);e.append(k,a);return{element:function(){return k},destroy:function(){f.remove(k)}}}});l("11y",["11x","e4"],function(c,d){return function(b,a){var e=d(b),f=c(e.element(),a);return{element:f.element,destroy:function(){e.destroy();f.destroy()}}}});l("yh","af s8 c5 ye yf sk kg yn c7 77 b 85 f8 2z c gi 4z 11x 11y lb 7 55 46 47 i1 1a 1y 4b l 2o 3c 2q q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,
t,u,v,w,x,y,z,l,D,B,C,F,E,G,H,I,K,J){var M=s.detect().deviceType.isiOS;return function(s,N,Q,R,P,S,L,U,V,X){var W=x(Q);L=d.control(W);E.add(W.element(),[m.resolve("dropdown-button"),m.resolve(Q+"-dropdown-button")]);C.set(W.element(),"title",U(R));p.toolbarButton(W.element(),U(R),!0,V);var Y=b(s.uiContainer,y.constant("dropdown-"+Q),c.menu({focusActive:!0})),da=G.fromDom(J),Z=t.mainmenu(da,Q+"-menu",[]),aa=k(Y.sandbox,s.bounds,N,[W.element()],X).initMenu(Z);Q=h();var ea=g.main(s.uiContainer,s.bounds,
W.element,Q,N.uiDirection(),B.anchored());p.menu(Z,U(P));var ha=r.generate("menu-control");C.set(Z,"id",ha);p.controls(W.element(),ha);var fa=u.span();F.add(fa,m.resolve("dropdown-viewport"));W.content({element:y.constant(fa)});var ia=function(a,b){var c=b.map(f.generate).getOr([]);I.prepend(a,c)};N=function(){ga(U(R))};var ga=function(a){K.empty(fa);H.append(fa,w(a,"ephox-pastry-arrow-righticon").element())},xa=function(){W.deselect();V&&q.pressed(W);q.collapsed(W.element());p.disown(W.element());
aa.close();Y.close()},la=function(){W.select();V&&q.pressed(W);q.expanded(W.element());p.owns(W.element(),ha);aa.open();var a=[s.uiContainer()];Y.open(a,W.element())},$=l.create({select:D(["value","item"],Y.events.itemAction),itemHover:D(["item"],Y.events.itemHover),escaped:D([],Y.events.escaped),open:z(["menu","popup","anchor"]),close:D([],Y.events.close)});W.events.click.bind(function(){(W.selected()?la:xa)()});aa.events.close.bind(xa);Y.events.open.bind(function(){$.trigger.open(Z,aa,ea);Y.update({});
M()||Y.setActiveMenu(Z)});Y.events.escaped.bind(xa);N();return{element:y.constant(W.element()),menu:aa.element,list:y.constant(Z),click:W.click,populate:function(b){K.empty(Z);n.each(b,function(b){b.label().each(function(b){b=a.generateSeparator(da,b,U);H.append(Z,b)});n.each(b.items(),function(b){var c=a.generateItem(da,b,S,U);p.menuItemCheckbox(c);ia(c,b.icon());H.append(Z,c)})})},enable:L.enable,disable:L.disable,close:xa,uiStale:aa.uiStale,recalculate:function(){ea.recalculate(aa)},clear:N,select:function(a){ga(U(a.textkey()));
ia(fa,a.icon())},selectElement:function(a){a=v(a,"ephox-pastry-arrow-righticon");W.content({element:a.element,destroy:y.noop})},tick:y.curry(e.tick,Z),untick:y.curry(e.untick,Z),activate:y.curry(e.activate,W.element()),deactivate:y.curry(e.deactivate,W.element()),destroy:function(){Y.destroy();W.destroy()},events:$.registry}}});l("sl","kj sj yh 46 47 1a".split(" "),function(c,d,b,a,e,f){return{init:function(g,h,k,m,n){var p=b(g,h,n.name,n.textkey,n.menuTextkey,n.render,n.layout,k,n.toggle,m);g=function(){n.updateDropdown(d.dropdown({enable:p.enable,
disable:p.disable,select:p.select,clear:p.clear,selectElement:p.selectElement,populate:p.populate,tick:p.tick,untick:p.untick,activate:p.activate,deactivate:p.deactivate}))};var q=c.onButton(p);p.events.select.bind(function(a){n.action(a.value());p.close()});var r=a.create({select:e(["value","item"],p.events.select),itemHover:e(["item"],p.events.itemHover),escaped:e([],p.events.escaped),open:e(["menu","popup","anchor"],p.events.open),close:e([],p.events.close)});g();f.set(p.element(),"tabindex","-1");
return{dropdown:function(){return{events:r.registry,close:p.close,uiStale:p.uiStale,enable:p.enable,disable:p.disable,list:p.list,menu:p.menu,recalculate:p.recalculate}},component:p.element,refreshUi:g,destroy:function(){q.unbind();p.destroy()}}}}});l("sm","kj sj k6 k7 a f8 7 46 47 1a".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(b,c){var e=a.typical(b.value,b.value,b.action,b.textkey,b.label,b.tooltip,c);b.setup&&b.setup(e,b);return e},p=function(b,c){var e=a.toggle(b.value,b.value,b.action,
b.textkey,b.label,b.tooltip,c);b.setup&&b.setup(e,b);b.selected&&e.select();return e};return{init:function(a,r){var s=!0===r.hasPopup,t=(!0===r.toggle?p:n)(r,a);e.isString(r.icon)&&b.findAndSetUrl(t.element(),r.icon);var u=t.initAria(t,a(r.textkey),s,r.toggle);m.set(t.element(),"tabindex","-1");var v=function(){!0===r.toggle&&f.pressed(t)},w=c.onButton(t);t.events.click.bind(function(){v()});var x=!0===r.toggle?t.select:g.noop,y=!0===r.toggle?t.deselect:g.noop,z=!0===r.toggle?t.selected:g.constant(!1);
v();var l=h.create({click:k([],t.events.click)});return{generals:function(){return{events:l.registry,enableButton:t.enable,disableButton:t.disable}},component:t.element,refreshUi:function(){r.updateGeneral(d.general({disable:u.disable,enable:u.enable,select:x,deselect:y,selected:z,element:t.element}));v()},destroy:function(){w.unbind();t.destroy();u.destroy()}}}}});l("sn","af kj c5 kg yn c7 77 b f8 c 4z 55 46 47 i1 1a 1y 2n 2y 2o 3c 2q 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w,
x,y,z,l){var D=m.detect().deviceType.isiOS;return{init:function(m,C,F,E,G,H){var I=G.button(),K=d.onButton(I),J=b(m.uiContainer,G.name,c.menu({focusActive:!0}));t.set(I.element(),"tabindex","-1");var M=n.div();u.add(M,g.resolve("menu-system-main"));var O=f(J.sandbox,m.bounds,C,[I.element()],E),N=O.initMenu(M);F=e();var Q=a.main(m.uiContainer,m.bounds,I.element,F,C.uiDirection(),s.anchored()),R=function(){Q.recalculate(N)},P=function(){var a=l.children(J.sandbox());h.each(a,function(a){v.set(a,"display",
"none")})},S=function(a){J.update(a.structure());z.empty(M);x.append(M,a.element());a=O.registerMenus(a.submenus());a=h.map(a,function(a){return a.panel()});z.empty(J.sandbox());y.append(J.sandbox(),[N.panel()].concat(a));P()},L=function(a){G.init(a)},U=q.create({open:p(["menu","popup","anchor"]),close:r([],J.events.close),itemAction:r(["value","item"],J.events.itemAction),itemHover:r(["item"],J.events.itemHover),reveal:p(["menu","trigger","popup","anchor"]),collapse:r(["menu","item"],J.events.collapse),
escaped:r([],J.events.escaped)});I.events.click.bind(function(){return(I.selected()?N.open:N.close)()});G.events.done.bind(function(){J.close()});G.events.abort.bind(function(a){J.select(a.item());w.focus(a.item())});N.events.uistale.bind(function(){J.getActiveMenu().bind(function(a){L(a)})});N.events.close.bind(function(){J.close();k.collapsed(I.element())});N.events.open.bind(function(){var a=void 0!==H?H:[],a=[J.sandbox()].concat(a);S(G);L(G);v.set(N.panel(),"display","block");v.set(M,"display",
"block");J.open(a,M);k.expanded(I.element())});J.events.open.bind(function(){U.trigger.open(G.element(),N,Q);D()||J.setActiveMenu(G.element())});J.events.close.bind(function(){O.hideAll();I.deselect()});J.events.itemAction.bind(function(a){var b=G.handlers();if(void 0!==b[a.value()])(0,b[a.value()])(a.item())});J.events.reveal.bind(function(a){k.expanded(a.trigger());var b=O.expandMenu(a.menu(),a.trigger(),N);U.trigger.reveal(a.menu(),a.trigger(),b.popup,b.anchorage)});J.events.collapse.bind(function(a){O.hideMenu(a.menu());
a.item().each(k.collapsed)});return{menus:function(){return{events:U.registry,enable:G.enable,disable:G.disable,close:N.close,uiStale:N.uiStale,mousedown:N.mousedown,contentFocus:G.contentFocus,menu:N.element,refreshMenus:L,recalculate:R}},component:I.element,refreshUi:function(){G.updateMenu({enable:G.enable,disable:G.disable})},destroy:function(){K.unbind();J.destroy();G.destroy();N.destroy()}}}}});l("so","sj 77 yd b ag 4z 7 s 2m 1y 3c".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return{init:function(p,
q){var r=f.span();m.add(r,d.resolve("palette-group"));var s=g.curry(e.speak,k.body()),t=function(a){var c=b.isShowing(r);b.hide(r);c&&a.each(s);return c},u=c.palette({show:function(a){var c=b.isHiding(r);b.show(r);c&&a.each(s);return c},hide:t});t(h.none());n.append(r,a.map(q,function(a){return a.component()}));return{component:g.constant(r),destroy:function(){a.each(q,function(a){a.destroy()})},refreshUi:function(){p.updatePalette(u);a.each(q,function(a){a.refreshUi()})}}}}});l("sp","kj sj kg yn c7 k7 85 f8 2z gi 7 55 46 47 i1 1a l 2o q".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w){return{widget:function(x,y,z,l,D){var B=D.instance();D=u.fromDom(w);var C=(B.toggle?f.splitToggle:f.split)(B.name(),B.name(),n.identity,B.textkey(),B.label(),B.tooltip,z),F=c.custom(C.element(),function(){C.open();B.enter()});t.set(C.element(),"tabindex","-1");var E=C.initAria(C,z(B.textkey()),!0,B.toggle);l=e(x.uiContainer,x.bounds,y,[C.element()],l);var G=a(),H=m.widget(D,B.name());D=k.generate("menu-control");t.set(H,"id",D);g.controls(C.element(),
D);g.owns(C.element(),D);g.menu(H,z(B.menuTextkey()));v.append(H,B.element());var I=l.initMenu(H),K=b.main(x.uiContainer,x.bounds,C.element,G,y.uiDirection(),s.expandable()),J=function(){K.recalculate(I)};I.events.open.bind(function(){h.expanded(C.element());B.open();M.trigger.open(H,I,K)});I.events.close.bind(function(){h.collapsed(C.element());B.close();C.close()});B.events.done.bind(function(){I.close();C.close()});B.events.abort.bind(function(){I.close();C.close();M.trigger.abort()});C.events.open.bind(function(){I.open();
K.recalculate(I)});C.events.close.bind(function(){B.close();I.close()});C.events.click.bind(function(){B.action()});var M=q.create({abort:p([]),close:r([],B.events.close),open:p(["menu","popup","anchor"])});return{widgets:function(){return{events:M.registry,open:C.open,isOpen:C.isOpen,close:C.close,recalculate:J}},component:C.element,refreshUi:function(){B.updateWidget(d.widget({select:C.select,deselect:C.deselect,enable:C.enable,disable:C.disable,press:E.press,release:E.release}))},destroy:function(){F.unbind();
E.destroy();I.destroy();B.destroy();C.destroy()}}}}});l("sq","kj sj kg yn c7 77 k7 85 f8 7 55 46 i1 1a 1y".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){return{widget:function(h,u,v,w,x){var y=x.instance(),z=g.toggle(y.name(),y.name(),m.identity,y.textkey(),y.label(),y.tooltip,v),l=c.onButton(z),D=z.initAria(z,v(y.textkey()),!0,!0);v=e(h.uiContainer,h.bounds,u,[z.element()],w);w=a();var B=v.initMenu(y.element()),C=b.main(h.uiContainer,h.bounds,z.element,w,u.uiDirection(),q.expandable());r.set(z.element(),
"tabindex","-1");s.add(B.element(),f.resolve("toolbar-widget"));var F=function(){C.recalculate(B)};B.events.open.bind(function(){k.expanded(z.element());y.open();E.trigger.open(y.element(),B,C)});B.events.close.bind(function(){k.collapsed(z.element());y.close()});y.events.done.bind(function(){B.close();z.deselect()});y.events.abort.bind(function(){B.close();z.deselect();E.trigger.abort()});z.events.click.bind(function(){z.selected()?(B.open(),C.recalculate(B)):B.close();k.pressed(z)});var E=p.create({abort:n([]),
open:n(["menu","popup","anchor"])}),G=function(){z.deselect();B.close()};return{widgets:function(){return{events:E.registry,close:G,recalculate:F}},component:z.element,refreshUi:function(){y.updateWidget(d.widget({select:m.noop,deselect:m.noop,enable:D.enable,disable:D.disable,press:m.noop,release:m.noop}))},destroy:function(){l.unbind();D.destroy();B.destroy();y.destroy();z.destroy()}}},inline:function(a,b){var e=b.instance(),g=c.custom(e.element(),function(){e.element().dom().click()});r.remove(e.element(),
"tabindex");s.add(e.element(),f.resolve("toolbar-inline-widget"));h.toolbarButton(e.element(),a(e.textkey()),!1);var q=p.create({abort:n([]),open:n(["menu","popup","anchor"])});return{widgets:function(){return{events:q.registry,recalculate:m.noop,close:m.noop}},component:e.element,refreshUi:function(){e.updateInlineWidget(d.widget({select:m.noop,deselect:m.noop,enable:m.curry(k.enable,e.element()),disable:m.curry(k.disable,e.element()),press:m.noop,release:m.noop}))},destroy:function(){g.unbind();
e.destroy()}}}}});l("k0","sf sg sh kf sl sm sn so sp sq 7".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return{menu:function(e){return{general:n.curry(d.init,e),menu:n.curry(b.nested,e),dropdown:n.curry(c.init,e),widget:n.curry(a.widget,e),"split-widget":n.curry(a.split,e),"inline-widget":n.curry(a.inline,e),palette:n.die("No palettes for menus yet")}},toolbar:function(a,b,c,d){var t=function(e){return n.curry(e,a,b,c,d)};return{menu:t(g.init),dropdown:t(e.init),widget:t(m.widget),"split-widget":t(k.widget),
"inline-widget":n.curry(m.inline,c),general:n.curry(f.init,c),palette:h.init}}}});l("hd",["4n"],function(c){c=c.generate([{toolbar:[]},{menu:[]}]);return{toolbar:c.toolbar,menu:c.menu,cata:function(c,b,a){return c.fold(b,a)}}});l("c2",["k0","hd"],function(c,d){return function(b){var a=c.menu(b);return{widget:a.widget,menu:a.menu,general:a.general,"inline-widget":function(b){return a["inline-widget"]({instance:function(){return b.instance(d.menu())}})},"split-widget":a["split-widget"],dropdown:a.dropdown,
palette:a.palette}}});l("k1",["b","c","3m","2y"],function(c,d,b,a){var e=function(b,c,e,d){b.events.escaped.bind(function(b){e.focused()&&a.focus(d.component())});b.events.close.bind(function(a){c.focus()})},f=function(a,c,e,d){a.events.open.bind(function(a){b.register(a.popup().panel())})};return{init:function(b,h,k,m,n,p,q,r,s){var t=b.dropdown(s),u=t.dropdown();b=k.toolbar;(d.detect().deviceType.isTouch()?f:e)(u,n,b,t);var v=!1;u.events.open.bind(function(a){n.toReading();q.show(a.popup(),a.anchor());
v=!0});u.events.close.bind(function(){v=!1});u.events.escaped.bind(function(){a.focus(t.component())});n.events.mousedown.bind(function(){v&&u.close()});n.events.uiStale.bind(u.uiStale);k.toolbar.events.transitionend.bind(function(a){c.contains(["top","height"],a.property())&&u.recalculate()});return{component:t.component,refreshUi:t.refreshUi,destroy:t.destroy}}}});l("k2",[],function(){return{init:function(c,d,b,a,e,f,g,h,k){c=c.general(k);d=c.generals();c.refreshUi();return{generals:d,component:c.component,
refreshUi:c.refreshUi,destroy:c.destroy}}}});l("f9",["s","29"],function(c,d){var b=function(a,b){var f=c.none(),g=function(){f=c.none()};return{begin:function(){f=c.some(d.get(a))},end:function(){f.each(function(a){b.scrollTo(a.left(),a.top())});g()},destroy:g}};return{fromSafe:function(a){return b(a.doc(),a.win())},fromUnsafe:function(a){var c=a.doc().getOrDie();a=a.win().getOrDie();return b(c,a)}}});l("k3","7 s f9 3m l 2y 21 2a q".split(" "),function(c,d,b,a,e,f,g,h,k){return{init:function(m,n,
p,q,r,s,t,u,v){var w=m.menu(v,[]),x=w.menus(),y=b.fromUnsafe(r);x.events.open.bind(function(a){r.toReading();x.refreshMenus(a.menu());t.show(a.popup(),a.anchor())});x.events.close.bind(function(){r.focus();y.end()});x.events.escaped.bind(function(){f.focus(w.component())});x.events.reveal.bind(function(a){v.init(a.menu());t.show(a.popup(),a.anchor())});x.events.itemAction.bind(function(a){y.end()});x.events.itemHover.bind(function(b){y.begin();if(null!==k.activeElement&&void 0!==k.activeElement){var d=
e.fromDom(k.activeElement),n=h.owner(b.item());"input"!==g.name(d)&&a.preserve(n,c.curry(f.focusInside,b.item()))}else r.backupSelection(),f.focus(b.item())});r.events.mousedown.bind(x.mousedown);r.events.uiStale.bind(x.uiStale);r.events.focus.bind(x.enable);var z=!r.isInline()&&v.contentFocus();z&&x.disable();return{component:w.component,refreshUi:function(){w.refreshUi();var a=z?d.none():d.some(!0);r.getSelection().or(a).fold(x.disable,x.enable)},destroy:function(){y.destroy();r.events.mousedown.unbind(x.mousedown);
r.events.uiStale.unbind(x.update);w.destroy()}}}}});l("k4","c la 7 hd 1y 3u 2y".split(" "),function(c,d,b,a,e,f,g){var h=function(a,b,e,d,f,h,u,v,w,x,y){var z=e[b]({instance:a(y.instance)});a=z.widgets();f=f.toolbar;a.events.open.bind(function(a){u.toReading();w.show(a.popup(),a.anchor())});a.events.abort.bind(function(){g.focus(z.component())});u.events.mousedown.bind(a.close);return(c.detect().deviceType.isTouch()&&"split-widget"===b?m:k)(a,u,f,z)},k=function(a,b,c,e){return e},m=function(a,b,c,
g){var h=f.capture(g.component(),"click",function(b){b.kill();e.add(g.component(),d.resolve("statebutton-selected"));a.isOpen()?a.close():a.open()});a.events.close.bind(function(){e.remove(g.component(),d.resolve("statebutton-selected"))});return{widgets:g.widgets,component:g.component,refreshUi:g.refreshUi,destroy:function(){h.unbind();g.destroy()}}};return{widget:b.curry(h,b.identity,"widget"),inlineWidget:b.curry(h,function(b){return function(){return b(a.toolbar())}},"inline-widget"),splitWidget:b.curry(h,
b.identity,"split-widget")}});l("as",["7","33"],function(c,d){var b=d.resolve("editor-container");return{editorContainer:c.constant(b)}});l("c3","k0 7 k1 k2 k3 k4 as".split(" "),function(c,d,b,a,e,f,g){return function(h,k,m,n,p,q,r){var s=c.toolbar(q,m,r,g.editorContainer()),t=function(a){return d.curry(a,s,h,k,m,n,p,q,r)};return{widget:t(f.widget),"inline-widget":t(f.inlineWidget),"split-widget":t(f.splitWidget),cards:s.cards,general:t(a.init),dropdown:t(b.init),menu:t(e.init),palette:s.palette}}});
l("90","c 7 s 75 2u o".split(" "),function(c,d,b,a,e,f){var g=e.immutable("key","link"),h=e.immutable("url","text"),k=function(c,e,d){return function(f){var k=h(e,a.translate(d));return g(a.pkey(c,f),b.some(k))}},m=function(c){return function(e){return g(a.pkey(c,e),b.none())}};e=function(c){return function(e){var d=c(e);e=h(e[0].websiteUrl,a.translate("cloud.dashboard"));return g(d.key(),b.some(e))}};var n={"no.api.key":e(m("cloud.error.apikey")),"domain.not.supported":e(function(c){return g(a.pkey("cloud.error.domain",
[c[0].details.domain]),b.none())}),"plan.exceeded":e(m("cloud.error.plan")),"error.code.invalid.toolbar":m("errors.toolbar.invalid"),"error.code.spelling.not.found":m("errors.spelling.missing.service"),"error.code.images.not.found":m("errors.images.missing.service"),"safari.imagepaste":k("errors.safari.image","https://support.ephox.com/entries/88543243-Safari-Direct-paste-of-images-does-not-work","errors.safari.url"),"webview.imagepaste":m("errors.webview.image"),"flash.clipboard.no.rtf":function(a){return(c.detect().browser.isSafari()?
k("errors.safari.browser-settings","https://support.ephox.com/entries/59328357-Safari-6-1-and-7-Flash-Sandboxing","errors.safari.rtf"):m("errors.images.missing.flash"))(a)},"fileupload.invalidimages":m("errors.images.upload.invalid"),"error.imageupload":m("errors.images.upload.failed"),"error.imageupload.generic":m("errors.images.upload.unknown"),"error.imageupload.cors":m("errors.images.upload.cors"),"errors.paste.word.notready":m("errors.paste.notready"),"errors.paste.process.failure":m("errors.paste.generic"),
"flash.crashed":m("errors.flash.crashed"),"errors.imageimport.failed":m("errors.images.import.failed"),"errors.imageimport.unsupported":m("errors.images.import.unsupported"),"errors.imageimport.invalid":m("errors.images.import.invalid"),"imageedit.needsproxy":m("errors.images.edit.needsproxy"),"imageedit.proxyerror":m("errors.images.edit.proxyerror"),"imageedit.generic":m("errors.images.edit.generic")},p={"errors.local.images.disallowed":"Removing pasted images from content. Local image insert has been disabled.",
"errors.dragdrop.images.disallowed":"Blocking image drop operation. Local image insert has been disabled."},q=function(b,c){var e=(0,n[b])(c);return{description:d.constant(a.get(e.key())),link:d.constant(e.link().getOr(null))}};return{get:q,getOrLog:function(a,c){return b.from(p[a]).fold(function(){var e=q(a,c);return b.some(e)},function(a){f.warn(a);return b.none()})}}});l("6x","bz c0 a b 7 c1 c2 c3 75 90 33 1y o".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=function(b,c){var d=function(c){var e=
m.get("error.code.invalid.toolbar",[c.small()]),e=f(e);b.displayBanner(e);a.each(c.big(),function(a){q.error(a)})};return c.fold(function(a){d(a);return[]},e.identity)};return{setup:function(e,f,m,q,w,x){x=r(e,x);var y=function(a){a=b.isString(a)?k.has(a)?k.key(a):k.raw(a):a;return k.get(a)};p.add(e.toolbar.element(),n.resolve("layer-above-editor"));f=d.blueprints(h(w.uiContainer,e,f,m,q,w,y),g(y));w=d.env(w.uiContainer,y);w=c.build(x,f,w);a.each(w,e.toolbar.add);e.position();a.each(w,function(a){m.events.uiStale.bind(function(){a.refreshUi()})})}}});
l("kk","kj jx 77 k7 oq e4 7 1a 1y 2y".split(" "),function(c,d,b,a,e,f,g,h,k,m){return function(n){var p=e("overflower");k.add(p.element(),b.resolve("more-button"));p.content(f(n("toolbar.more")));var q=c.onButton(p);h.set(p.element(),"tabindex","-1");n=n("aria.label.more");h.set(p.element(),"title",n);var r=a.aria(p,n,!0,!0),s=d.toolbar([{component:p.element,destroy:p.destroy,refreshUi:g.noop}]);return{group:s.component,select:function(){p.select();r.press()},deselect:function(){r.release();p.deselect()},
focus:function(){m.focus(p.element())},destroy:function(){q.unbind();r.destroy();s.destroy()},events:p.events}}});l("lf",["s","1b","2y","4i","2a"],function(c,d,b,a,e){return{preserve:function(f,g){var h=e.owner(g),k=b.active(h).bind(function(b){var e=function(a){return d.eq(b,a)};return e(g)?c.some(g):a.descendant(g,e)}),m=f(g);k.each(function(a){b.active(h).filter(function(b){return d.eq(b,a)}).orThunk(function(){b.focus(a)})});return m}}});l("yo",["2u"],function(c){return c.immutable("component",
"index")});l("t2",["b","yo"],function(c,d){return function(b){var a=[];return{add:function(c,f){var g=f?b.indexOf(a,f).getOrDie():a.length;a.splice(g,0,c);return d(c,g)},remove:function(e){e=b.resolve(a,e).getOrDie();var f=c.indexOf(a,e);a.splice(f,1);return d(e,f)},get:function(){return a.slice(0)},itemAt:function(c){return b.resolve(a,c)}}}});l("t3",["a","b","p"],function(c,d,b){return function(a){var e=function(a,e){return c.isNumber(e)?f(a,e):c.isString(e)?g(a,e):c.isObject(e)?h(a,e):b.error("Unsupported specifier type: "+
e)},f=function(a,c){return 0===a.length?b.error("Items is empty"):0>c||c>=a.length?b.error("Item index: "+c+" is out of range (0-"+(a.length-1)+")"):b.value(a[c])},g=function(c,e){var f=d.find(c,function(b){return a(b)===e});return void 0===f?b.error("No item with value: ["+e+"]"):b.value(f)},h=function(a,c){return-1===d.indexOf(a,c)?b.error("Specified object is not a registered item: "+c):b.value(c)};return{resolve:e,indexOf:function(a,c){return e(a,c).bind(function(e){e=d.indexOf(a,e);return-1<
e?b.value(e):b.error("Item not found: "+c)})},index:f,value:g,item:h}}});l("kl","77 b lf 85 t2 t3 7 55 46 1y 4b 2n l 2o 3c 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t){return function(u,v){var w=k.create({grow:h([]),shrink:h([]),exit:h([])}),x=e(f(g.identity)),y=q.fromTag("div");p.set(y,"overflow-x","auto");m.add(y,c.resolve("toolstrip"));a.toolbarGroup(y);var z=q.fromTag("div");n.add(z,[c.resolve("toolbar"),c.resolve("toolbar-primary")]);var l=q.fromTag("div");n.add(l,[c.resolve("toolbar"),
c.resolve("toolbar-more")]);r.append(y,z);r.append(y,l);var D=function(){var a=x.get();return d.bind(a,function(a){return a.isVisible()?[a.component()]:[]})};return{element:function(){return y},main:g.constant(z),mores:g.constant(l),destroy:function(){var a=x.get();d.each(a,function(a){a.destroy()})},focused:g.constant(!1),enter:g.noop,restore:g.noop,refocus:g.noop,refresh:g.curry(b.preserve,function(){var a=D(),a=u.build(a);t.empty(z);t.empty(l);s.append(z,a);p.reflow(z)},y),add:function(a){x.add(a)},
events:w.registry}}});l("km",["7"],function(c){return{item:c.constant('.ephox-chameleon-toolbar-group [tabindex="-1"]'),group:c.constant(".ephox-chameleon-toolbar-group"),sector:c.constant(".ephox-chameleon-toolstrip > *")}});l("oy","77 1y 4b 2n 3u 64".split(" "),function(c,d,b,a,e,f){var g=c.resolve("toolbar-more-closed"),h=c.resolve("toolbar-more-open"),k=c.resolve("toolbar-more-hide"),m=c.resolve("toolbar-more-show"),n=function(b,c){a.set(b,"height",c+"px");a.reflow(b)},p=function(a){d.remove(a,
h);d.add(a,g);n(a,0)},q=function(b){d.remove(b,g);d.add(b,h);a.remove(b,"height")};return function(c){p(c);var g=!1,h=e.bind(c,"transitionend",function(e){"height"===e.raw().propertyName&&(b.remove(c,[m,k]),g&&a.remove(c,"height"))});return{visible:function(){return g},hide:function(){g=!1;n(c,f.get(c));d.add(c,k);p(c)},show:function(){q(c);var a=f.get(c);p(c);d.add(c,m);q(c);n(c,a);g=!0},destroy:function(){h.unbind()}}}});l("yp",["2u"],function(c){return c.immutable("within","extra","withinWidth")});
l("pc",["b","7"],function(c,d){return{make:function(b,a,e){return c.foldl(b,function(b,c){return a(c,b.len).fold(d.constant(b),function(a){return{len:a.finish(),list:b.list.concat([a])}})},{len:void 0!==e?e:0,list:[]}).list}}});l("pd",["b","s"],function(c,d){var b=function(a,b){return b>=a.start()&&b<=a.finish()},a=function(a,b){return c.findIndex(a,function(a){return a.start()===b})};return{get:function(a,f){var g=c.find(a,function(a){return b(a,f)});return d.from(g)},find:function(a,b){return d.from(c.find(a,
b))},inUnit:b,sublist:function(b,c,d){c=a(b,c);var h=a(b,d);d=-1<h?h:b[b.length-1]&&b[b.length-1].finish()===d?b.length+1:-1;return-1<c&&-1<d?b.slice(c,d):[]}}});l("pf",["b","6","7"],function(c,d,b){return{translate:function(a,e){return c.map(a,function(a){return d.merge(a,{start:b.constant(a.start()+e),finish:b.constant(a.finish()+e)})})}}});l("pe",["b","pd","pf"],function(c,d,b){var a=function(a,c,d){c=d(a,c);return b.translate(c,a.start())};return{splits:function(b,f,g){return 0===f.length?b:c.bind(b,
function(b){var e=c.bind(f,function(a){return d.inUnit(b,a)?[a-b.start()]:[]});return 0<e.length?a(b,e,g):[b]})}}});l("hm",["pc","pd","pe","pf"],function(c,d,b,a){return{generate:function(a,b,d){return c.make(a,b,d)},get:function(a,b){return d.get(a,b)},find:function(a,b){return d.find(a,b)},splits:function(a,c,d){return b.splits(a,c,d)},translate:function(b,c){return a.translate(b,c)},sublist:function(a,b,c){return d.sublist(a,b,c)}}});l("t4",["b","yp","7","s","hm"],function(c,d,b,a,e){var f=function(d,
f,g){var h=e.generate(d,function(c,e){var d=g(c);return a.some({element:b.constant(c),start:b.constant(e),finish:b.constant(e+d),width:b.constant(d)})});d=c.filter(h,function(a){return a.finish()<f});var k=c.foldr(d,function(a,b){return a+b.width()},0),h=h.slice(d.length);return{within:b.constant(d),extra:b.constant(h),withinWidth:b.constant(k)}},g=function(a){return c.map(a,function(a){return a.element()})},h=function(a,b,c){a=g(a.concat(b));return d(a,[],c)},k=function(a,b,c,e){a=g(a).concat([c]);
return d(a,g(b),e)},m=function(a,b,c){return d(g(a),[],c)},n=function(b,c,e){b=f(c,b,e);return 0===b.extra().length?a.some(b):a.none()};return{partition:function(a,b,c,e){var d=n(a,b,c).getOrThunk(function(){return f(b,a-c(e),c)}),g=d.within(),v=d.extra(),d=d.withinWidth();return 1===v.length&&v[0].width()<=c(e)?h(g,v,d):1<=v.length?k(g,v,e,d):m(g,v,d)}}});l("kn","77 oy b lf 85 t2 t3 t4 7 55 46 1y 4b 2n l 2o 3c 2q 2r".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w){return function(x,y){var z=
n.create({grow:m([]),shrink:m([]),exit:m([])}),l=f(g(k.identity)),D=s.fromTag("div");e.toolbarGroup(D);p.add(D,c.resolve("toolstrip"));var B=s.fromTag("div");q.add(B,[c.resolve("toolbar"),c.resolve("toolbar-primary")]);var C=s.fromTag("div");q.add(C,[c.resolve("toolbar"),c.resolve("toolbar-more")]);t.append(D,B);t.append(D,C);var F=d(C);y.events.click.bind(function(){F.visible()?(F.hide(),y.deselect(),z.trigger.shrink()):(F.show(),y.select(),z.trigger.grow())});var E=function(){var a=l.get();return b.bind(a,
function(a){return a.isVisible()?[a.component()]:[]})};return{element:function(){return D},main:k.constant(B),mores:k.constant(C),destroy:function(){var a=l.get();b.each(a,function(a){a.destroy()});y.destroy();F.destroy()},focused:k.constant(!1),enter:k.noop,restore:k.noop,refocus:k.noop,refresh:k.curry(a.preserve,function(){x.update();var a=E(),a=x.build(a);r.set(B,"visibility","hidden");x.clearWidth();v.empty(B);u.append(B,a);var b=x.width(B);t.append(B,y.group());var a=h.partition(b,a,w.getOuter,
y.group()),b=a.extra(),c=a.within();v.empty(B);v.empty(C);u.append(B,c);u.append(C,b);x.updateWidth(y,a);r.remove(B,"visibility")},D),add:function(a){l.add(a)},events:z.registry}}});l("gk",["2u"],function(c){return{grid:c.immutableBag(["trigger"],["isValid","first"]),flow:c.immutableBag(["trigger"],["first","executeOnArrow"]),sectors:c.immutableBag(["trigger","first"],[]),radio:c.immutableBag(["one"],[]),input:c.immutableBag([],["execute"]),button:c.immutableBag(["execute"],["process"]),dialog:c.immutableBag(["execute",
"ok","cancel"],["index"]),inlineDialog:c.immutableBag(["ok","cancel"],["index"]),page:c.immutableBag(["trigger"],["first"]),tabular:c.immutableBag(["trigger"],["first","isValid"]),dynamic:c.immutableBag([],["execute"])}});l("ko",["53"],function(c){return c.ensure(["enter","exit","destroy"])});l("kp",["b"],function(c){var d=function(b){return function(a){return a.raw().which===b}};return{inSet:function(b){return function(a){return c.contains(b,a.raw().which)}},and:function(b){return function(a){return c.forall(b,
function(b){return b(a)})}},is:d,isShift:function(b){return!0===b.raw().shiftKey},basic:function(b,a){return{matches:d(b),run:a}},rule:function(b,a){return{matches:b,run:a}}}});l("kq",["b","1a","2y","4e"],function(c,d,b,a){var e=function(a){d.has(a,"tabIndex")||d.set(a,"tabIndex","-1")};return{set:function(a){e(a);b.focus(a)},find:function(a){return b.search(a)},isFocused:b.hasFocus,mark:e,markSelectors:function(b,d){c.each(d,function(d){d=a.descendants(b,d);c.each(d,e)})}}});l("d4","b ko kq 7 55 46 3u".split(" "),
function(c,d,b,a,e,f,g){return function(h,k,m){var n=g.bind(h,"keydown",m.getOr(function(a){var b=c.find(k,function(b){return b.matches(a)});void 0!==b&&null!==b&&b.run(a).each(function(b){a.kill()})})),p=f.create({enter:e([]),exit:e([])});return d({isFocused:a.curry(b.isFocused,h),element:a.constant(h),clear:a.noop,enter:function(){b.set(h);p.trigger.enter()},refresh:a.noop,isEnabled:a.constant(!0),exit:function(){p.trigger.exit()},events:p.registry,destroy:function(){n.unbind()}})}});l("cs","ko kp d4 ah 7 s".split(" "),
function(c,d,b,a,e,f){return function(g,h){var k=b(g,[d.rule(d.inSet(a.SPACE().concat(a.ENTER())),function(){h.execute()(g);return f.some(!0)})],h.process());return c({element:k.element,destroy:k.destroy,clear:k.clear,isFocused:k.isFocused,isEnabled:e.constant(!0),refresh:e.noop,enter:k.enter,exit:k.exit})}});l("ku",["b","s"],function(c,d){return{adjust:function(b,a,c,d){b+=a;return b>d?c:b<c?d:b},findPrev:function(b,a,e){var f=c.reverse(b.slice(0,a));b=c.reverse(b.slice(a+1));e=c.find(f.concat(b),
e);return void 0!==e&&null!==e?d.some(e):d.none()},findNext:function(b,a,e){var f=b.slice(0,a);b=b.slice(a+1);e=c.find(b.concat(f),e);return d.from(e)}}});l("kr","b ku 7 s 1b 2n 37 au".split(" "),function(c,d,b,a,e,f,g,h){var k=function(b){b=c.find(b,m);return a.from(b)},m=function(a){return h.isVisible(a.element())&&a.isEnabled()&&"hidden"!==f.get(a.element(),"visibility")};return{exit:function(a){c.each(a,function(a){a.clear();a.exit()})},clear:function(a){c.each(a,function(a){a.clear()})},refresh:function(a){c.each(a,
function(a){a.refresh()})},first:k,enterFirst:function(b,c){c.index().bind(function(c){return a.from(b[c]).filter(m)}).orThunk(function(){return k(b)}).each(function(a){a.enter()})},isEnabled:function(a){return c.exists(a,function(a){return a.isEnabled()})},locate:function(a,d){return c.find(a,function(a){var c=d.target();a=a.element();return g.closest(c,b.curry(e.eq,a))})},next:function(a,b){var e=c.indexOf(a,b);return d.findNext(a,e,m).getOr(b)},prev:function(a,b){var e=c.indexOf(a,b);return d.findPrev(a,
e,m).getOr(b)},prevNoCycle:function(b,e){var d=c.indexOf(b,e);return 0<d?a.some(b[d-1]):a.none()},nextNoCycle:function(b,e){var d=c.indexOf(b,e);return d+1<b.length?a.some(b[d+1]):a.none()},progress:function(a,b){a.exit();b.enter()},destroy:function(a){c.each(a,function(a){a.destroy()})}}});l("ct","b ko gk kp cs kq kr ah 7 55 46 3u 21".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){return function(r,s,t){var u=t.execute(),v=b.button({execute:u}),w=s.slice(0).concat([e(t.cancel(),v),e(t.ok(),v)]),
x=p.bind(r,"keydown",function(b){var e=g.locate(w,b);if(void 0!==e&&null!==e){var d=a.isShift(b);a.is(h.TAB()[0])(b)?(d=(d?g.prev:g.next)(w,e),g.progress(e,d),b.kill()):a.is(h.ESCAPE()[0])(b)?(y(),b.kill(),u(t.cancel())):(e=e.element(),"button"===q.name(e)||d||!a.is(h.ENTER()[0])(b)?(e=[h.UP()[0],h.DOWN()[0]],d=["textarea","select","input"],a.inSet(e)(b)&&!1===c.contains(d,q.name(b.target()))&&b.kill()):(u(t.ok()),b.kill()))}}),y=function(){g.exit(w);z.trigger.exit()},z=n.create({enter:m([]),exit:m([])});
return d({enter:function(){g.enterFirst(w,t)},exit:y,clear:k.curry(g.clear,w),refresh:k.curry(g.refresh,w),isEnabled:k.curry(g.isEnabled,w),isFocused:k.curry(f.isFocused,r),events:z.registry,destroy:function(){g.destroy(w);x.unbind()}})}});l("cu","ko kp kq kr ah 7 55 46 4m 3u".split(" "),function(c,d,b,a,e,f,g,h,k,m){return function(n){var p=k([]),q=function(b,c){d.is(e.TAB()[0])(c)&&(d.isShift(c)?a.prevNoCycle:a.nextNoCycle)(p.get(),b).each(function(e){a.progress(b,e);c.kill()})},r=m.bind(n,"keydown",
function(b){var c=a.locate(p.get(),b);void 0!==c&&null!==c&&q(c,b)}),s=h.create({enter:g([]),exit:g([])}),t=function(a){return function(){return a(p.get())}};return c({element:f.constant(n),enter:function(){a.first(p.get()).each(function(a){a.enter()})},exit:function(){a.exit(p.get());s.trigger.exit()},set:function(b){a.destroy(p.get());p.set(b)},clear:t(a.clear,p),refresh:t(a.refresh,p),isEnabled:t(a.isEnabled,p),isFocused:t(b.isFocused,n),destroy:function(){a.destroy(p.get());r.unbind()},events:s.registry})}});
l("kw","b kq 7 s 2u 1b 4e 31 2a au".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=e.immutableBag(["index","focused","group","items"],[]),p=e.immutableBag(["index","sectors","sector"],[]),q=e.immutableBag(["index","candidates"],[]);return{ofFocus:function(e,k,p){return d.find(e).bind(function(e){return h.closest(e,k).bind(function(d){var h=g.descendants(d,p),h=c.filter(h,m.isVisible),k=c.findIndex(h,b.curry(f.eq,e));return-1<k?a.some(n({index:k,focused:e,group:d,items:h})):a.none()})})},ofSector:function(e,
d,k){var m=g.descendants(e,d);return h.closest(k,d).bind(function(e){var d=c.findIndex(m,b.curry(f.eq,e));return-1<d?a.some(p({index:d,sectors:m,sector:e})):a.none()})},within:function(e,d,h){e=g.descendants(e,h);d=c.findIndex(e,b.curry(f.eq,d));return-1<d?a.some(q({index:d,candidates:e})):a.none()}}});l("ks",["ku","kw","s"],function(c,d,b){return{horizontal:function(a,e,f,g){return d.within(a,f,e).bind(function(a){var e=a.index();a=a.candidates();e=c.adjust(e,g,0,a.length-1);return b.from(a[e])})}}});
l("kt",["7","bl"],function(c,d){return function(b,a){var e=c.curry(a,-1,0),f=c.curry(a,1,0),g=d.onDirection(e,f),h=d.onDirection(f,e),e=c.curry(a,0,-1),f=c.curry(a,0,1),k=function(a){return a(b)()},g=c.curry(k,g),h=c.curry(k,h);return{west:g,east:h,north:e,south:f}}});l("cv","ko kp d4 ks kq kt ah 7 s 31 m".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return function(p,q,r){var s=k.none();e.markSelectors(p,[q.item()]);var t=function(b){return e.find(p).bind(function(c){return a.horizontal(p,q.item(),
c,b)})},u=f(p,function(a){return t(a).bind(function(a){x(a);return r.executeOnArrow().fold(function(){return k.some(!0)},v)})}),v=function(){return e.find(p).bind(r.trigger()).map(h.constant(!0))},w=b(p,[d.rule(d.inSet(g.LEFT().concat(g.UP())),u.west),d.rule(d.inSet(g.RIGHT().concat(g.DOWN())),u.east),d.rule(d.inSet(g.SPACE().concat(g.ENTER())),v)],k.none()),x=function(a){s=k.some(a);e.set(a)};return c({element:w.element,destroy:w.destroy,clickFocus:function(a){n.is(a,q.item())&&x(a)},clear:function(){s=
k.none()},isFocused:w.isFocused,isEnabled:h.constant(!0),refresh:h.noop,enter:function(){w.enter();s.orThunk(function(){return r.first().fold(function(){return m.descendant(p,q.item())},h.apply)}).bind(x)},exit:w.exit})}});l("kv","kp d4 kq ah 7 s 31".split(" "),function(c,d,b,a,e,f,g){return{delegate:function(g,k,m){return d(g,[c.basic(a.LEFT()[0],k.west),c.basic(a.RIGHT()[0],k.east),c.basic(a.UP()[0],k.north),c.basic(a.DOWN()[0],k.south),c.rule(c.inSet(a.SPACE().concat(a.ENTER())),function(){return b.find(g).bind(m.trigger()).map(e.constant(!0))})],
f.none())},findRecent:function(a,b,c,d){return d.isValid().fold(e.constant(c),function(a){return c.filter(a)}).orThunk(function(){return d.first().bind(function(a){return a()}).orThunk(function(){return g.descendant(a,b)})})}}});l("cw","ko ku kq kv kt 7 s 4m 2u 2y 4e 2a 1s".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=k.immutable("row","column");return function(k,t,u,v,w){var x=u,y=v;b.markSelectors(k,[t.cell()]);var z=h(g.none()),l=function(a){return p.findIndex(a).map(function(a){return r(q.floor(a/
y),a%y)})},D=function(a,c){return b.find(k).bind(function(b){return l(b).bind(function(b){var e=d.adjust(b.row(),c,0,x-1),f=d.adjust(b.column(),a,0,y-1);b=n.descendants(k,t.cell());var h=b.length-1,e=e*y,e=e+f>h?0<a?e:h:e+f;return 0<=e&&e<b.length?g.some(b[e]):g.none()})})};u=e(k,function(a,c){return D(a,c).bind(function(a){b.set(a);z.set(g.some(a));return g.some(!0)})});var B=a.delegate(k,u,w);return c({element:B.element,destroy:B.destroy,clear:function(){z.set(g.none())},isFocused:B.isFocused,isEnabled:f.constant(!0),
refresh:f.noop,enter:function(){B.enter();z.set(a.findRecent(k,t.cell(),z.get(),w));z.get().each(m.focus)},exit:B.exit,resize:function(a,b){x=a;y=b}})}});l("cx","b ko kp kq kr ah 7 55 46 3u 21".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return function(p,q,r){var s=r.ok(),t=r.cancel(),u=m.bind(p,"keydown",function(a){var d=e.locate(q,a);if(void 0!==d&&null!==d){var g=b.isShift(a);b.is(f.TAB()[0])(a)?(g=(g?e.prev:e.next)(q,d),e.progress(d,g),a.kill()):b.is(f.ESCAPE()[0])(a)?(v(),a.kill(),t(a.target())):
!g&&b.is(f.ENTER()[0])(a)?(s(a.target()),a.kill()):(d=[f.UP()[0],f.DOWN()[0]],g=["textarea","select","input"],b.inSet(d)(a)&&!1===c.contains(g,n.name(a.target()))&&a.kill())}}),v=function(){e.exit(q);w.trigger.exit()},w=k.create({enter:h([]),exit:h([])});return d({enter:function(){e.enterFirst(q,r)},exit:v,clear:g.curry(e.clear,q),refresh:g.curry(e.refresh,q),isEnabled:g.curry(e.isEnabled,q),isFocused:g.curry(a.isFocused,p),events:w.registry,destroy:function(){e.destroy(q);u.unbind()}})}});l("32",
["n"],function(c){return{set:function(d,b){if(void 0===b)throw new c("Value.set was undefined");d.dom().value=b},get:function(c){return c.dom().value}}});l("cy","ko kp d4 ah 7 s 1a 32".split(" "),function(c,d,b,a,e,f,g,h){return function(k,m){var n=b(k,[d.basic(a.ENTER()[0],function(a){return m.execute().map(function(b){var c={isShift:e.constant(d.isShift(a))},f=h.get(k);b(f,c);return!0})})],f.none());return c({element:n.element,destroy:n.destroy,clear:n.clear,isFocused:n.isFocused,isEnabled:function(){return!g.has(k,
"disabled")},refresh:e.noop,enter:function(){n.enter();k.dom().setSelectionRange(0,h.get(k).length)},exit:n.exit})}});l("cz","ko kp kq kr ah 7 55 46 3u".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m,n){var p=k.bind(m,"keydown",function(b){var c=a.locate(n,b);if(d.is(e.ESCAPE()[0])(b))q(),b.kill();else if(void 0!==c&&null!==c&&d.is(e.TAB()[0])(b)){var f=(d.isShift(b)?a.prev:a.next)(n,c);a.progress(c,f);b.kill()}}),q=function(){a.exit(n);r.trigger.exit()},r=h.create({enter:g([]),exit:g([])});
return c({enter:function(){a.first(n).each(function(a){a.enter()})},exit:q,clear:f.curry(a.clear,n),refresh:f.curry(a.refresh,n),isEnabled:f.curry(a.isEnabled,n),isFocused:f.curry(b.isFocused,m),destroy:function(){a.destroy(n);p.unbind()},events:r.registry})}});l("d0","ko kp kq kr ah 7 55 46 3u".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m,n){var p=k.bind(m,"keydown",function(b){var c=a.locate(n,b);if(d.is(e.ESCAPE()[0])(b))q(),b.kill();else if(void 0!==c&&null!==c)if(d.is(e.UP()[0])(b))a.progress(c,
a.prev(n,c)),b.kill();else if(d.is(e.DOWN()[0])(b))a.progress(c,a.next(n,c)),b.kill();else if(d.is(e.TAB()[0])(b)){var f=(d.isShift(b)?a.prev:a.next)(n,c);a.progress(c,f);b.kill()}}),q=function(){a.exit(n);r.trigger.exit()},r=h.create({enter:g([]),exit:g([])});return c({enter:function(){a.first(n).each(function(a){a.enter()})},exit:q,clear:f.curry(a.clear,n),refresh:f.curry(a.refresh,n),isEnabled:f.curry(a.isEnabled,n),isFocused:f.curry(b.isFocused,m),events:r.registry,destroy:function(){a.destroy(n);
p.unbind()}})}});l("d1","b ko kp d4 kq ah 7 s 1b 2y 4e 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){return function(q,r,s){var t=r.stops().join(","),u=function(){return s.first().bind(function(a){return p.descendant(q,a)}).getOr(q)},v=function(a){var b=u();return(m.hasFocus(b)?h.some:e.find)(b).bind(function(b){var e;e=u();if(k.eq(e,b)&&0>a)e=h.none();else{var d=n.descendants(e,t);b=c.findIndex(d,g.curry(k.eq,b))+a;e=b>=d.length?h.none():0>b?h.some(e):0<=b&&b<d.length?h.some(d[b]):h.none()}return e})};
r=function(a){return v(a).bind(function(a){e.set(a);return h.some(!0)})};var w=a(q,[b.rule(b.and([b.isShift,b.inSet(f.TAB())]),g.curry(r,-1)),b.rule(b.inSet(f.TAB()),g.curry(r,1)),b.rule(b.inSet(f.SPACE().concat(f.ENTER())),function(){return e.find(q).bind(s.trigger()).map(g.constant(!0))})],h.none());return d({element:w.element,destroy:w.destroy,clear:g.noop,isFocused:w.isFocused,isEnabled:g.constant(!0),refresh:g.noop,enter:function(){w.enter();e.set(u())},exit:w.exit})}});l("d2","ko kp d4 ks kq kt ah 7 s 31 m".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n){return function(p,q,r){var s=function(b){return e.find(p).bind(function(c){return a.horizontal(p,q.item(),c,b)})},t=f(p,function(a){return s(a).bind(function(a){e.set(a);r.one()(p,a);return k.some(!0)})}),u=b(p,[d.rule(d.inSet(g.LEFT().concat(g.UP())),t.west),d.rule(d.inSet(g.RIGHT().concat(g.DOWN())),t.east),d.rule(d.inSet(g.SPACE()),h.curry(k.some,!0))],k.none());return c({element:u.element,destroy:u.destroy,clear:h.noop,refresh:function(){u.isFocused()&&m.descendant(p,
q.selected()).each(e.set)},isFocused:u.isFocused,isEnabled:h.constant(!0),enter:function(){u.enter();m.descendant(p,q.selected()).orThunk(function(){return m.descendant(p,q.item())}).each(function(a){n.is(a,q.selected())||r.one()(p,a);e.set(a)})},exit:u.exit})}});l("d3","b ko kp d4 ku kq kw kt ah 7 s 55 46 64 6j 4i 4e m 2a au".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w,x){return function(y,z,l){f.markSelectors(y,[z.sector(),z.group(),z.item()]);var D=function(a){return t.descendant(a,
function(a){return v.is(a,z.item())&&G(a)})},B=function(a){return t.child(a,K)},C=function(a){a=s.children(a,K);return 0<a.length?n.some(a[a.length-1]):n.none()},F=h(y,function(a){return g.ofFocus(y,z.group(),z.item()).bind(function(b){var c=b.items();b=e.adjust(b.index(),a,0,c.length-1);return n.from(c[b])})}),E=function(a){return g.ofFocus(y,z.group(),z.item()).bind(function(b){return a(b.group()).bind(D)})},G=function(a){return 0<r.get(a)},H=function(a){return g.ofSector(y,z.sector(),a).map(function(a){return e.findPrev(a.sectors(),
a.index(),G).getOr(a.sector())})},I=function(a){return g.ofSector(y,z.sector(),a).map(function(a){return e.findNext(a.sectors(),a.index(),G).getOr(a.sector())})},K=function(a){var b;if(b=v.is(a,z.group()))a=u.descendants(a,z.item()),b=c.exists(a,x.isVisible);return b},J=function(a){return function(){return a().map(function(a){f.set(a);M.trigger.active(a);return a})}},M=q.create({enter:p([]),exit:p([]),active:p(["element"])}),O=a(y,[b.rule(b.inSet(k.ESCAPE()),function(){O.exit();M.trigger.exit();return n.some(!0)}),
b.rule(b.inSet(k.RIGHT().concat(k.DOWN())),J(F.east)),b.rule(b.inSet(k.LEFT().concat(k.UP())),J(F.west)),b.rule(b.and([b.isShift,b.inSet(k.TAB())]),J(m.curry(E,function(a){return w.prevSibling(a).filter(K).orThunk(function(){return H(a).bind(C)})}))),b.rule(b.inSet(k.TAB()),J(m.curry(E,function(a){return w.nextSibling(a).filter(K).orThunk(function(){return I(a).bind(B)})}))),b.rule(b.inSet(k.SPACE().concat(k.ENTER())),function(){return f.find(y).bind(l.trigger()).map(m.constant(!0))})],n.none());
return d({element:O.element,clear:m.noop,isFocused:O.isFocused,enter:function(){O.enter();M.trigger.enter();l.first()().orThunk(function(){return D(y)}).each(function(a){f.set(a);M.trigger.active(a)})},refresh:m.noop,isEnabled:m.constant(!0),exit:O.exit,destroy:O.destroy,events:M.registry})}});l("kx",["ku","2u","1s"],function(c,d,b){return{move:function(a,e,f){var g=d.immutable("row","col"),h=a.length-1,k=a[e.row()]-1,h=c.adjust(e.row(),f.dr(),0,h);a=a[h]-1;k=b.max(k,a);e=b.min(a,c.adjust(e.col(),
f.dc(),0,k));return g(h,e)}}});l("d5","b ko kq kv kw kx kt 7 s 4m 2u 4e 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){return function(r,s,t){var u=s.row(),v=s.cell();b.markSelectors(r,[u,v]);var w=m(k.none()),x=g(r,function(a,c){return C(a,c).bind(function(a){b.set(a);w.set(k.some(a));return k.some(!0)})}),y=n.immutable("row","col"),z=n.immutable("dc","dr"),l=function(a){a=p.descendants(a,u);return c.map(a,function(a){return p.descendants(a,v).length})},D=function(a){return q.closest(a,u).bind(function(b){return e.within(r,
b,u).bind(function(c){return e.within(b,a,v).map(function(a){return y(c.index(),a.index())})})})},B=function(a){var b=p.descendants(r,u);return k.from(b[a.row()]).bind(function(b){b=p.descendants(b,v);return k.from(b[a.col()])})},C=function(a,c){return b.find(r).bind(function(b){return D(b).bind(function(b){var e=l(r);b=f.move(e,b,z(a,c));return B(b)})})},F=a.delegate(r,x,t);return d({element:F.element,destroy:F.destroy,clear:function(){w.set(k.none())},isFocused:F.isFocused,isEnabled:h.constant(!0),
refresh:h.noop,enter:function(){F.enter();w.set(a.findRecent(r,s.cell(),w.get(),t));w.get().each(b.set)},exit:F.exit})}});l("d6",["kq"],function(c){return function(d,b,a,e,f){c.markSelectors(d,[b.cell()])}});l("8s","1o c cs ct cu cv cw cx cy cz d0 d1 d2 d3 d4 d5 d6 7 s 55 46".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w,x,y){b={single:s,multiple:m,multipleAll:n,flow:f,grid:g,sectors:r,radio:q,input:k,dialog:a,button:b,inlineDialog:h,tabular:t,page:p,dynamic:e};var z={grid:u};u=function(a,
b){var c=w.from(z[b]).getOr(v.noop);return function(){c.apply(null,arguments);return{element:v.noop,clear:v.noop,isFocused:v.noop,isEnabled:v.noop,refresh:v.noop,enter:v.noop,exit:v.noop,events:y.create({enter:x([]),exit:x([]),active:x([])}).registry,destroy:v.noop,set:v.noop,clickFocus:v.noop,resize:v.noop}}};return d.detect().deviceType.isTouch()?c.map(b,u):b});l("c8","kj kk kl km kn 85 c gk 8s s 55 46 47 3u 2y".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){return function(t,u){var v=d(u),
w=g.detect().deviceType.isTouch()?b(t,v):e(t,v);f.toolbar(w.main(),u("aria.label.toolbar"));f.group(w.mores());var x=p.create({drawer:q(["delta","total"],w.events.drawer),grow:q([],w.events.grow),shrink:n([]),transitionend:n(["property"]),exit:n([])}),y=r.bind(w.element(),"transitionend",function(a){x.trigger.transitionend(a.raw().propertyName)}),z=m.none(),l=h.sectors({first:m.none,trigger:c.trigger}),D=k.sectors(w.element(),a,l);D.events.exit.bind(function(){z=m.none();x.trigger.exit()});D.events.active.bind(function(a){z=
m.some(a.element())});var B=function(){return D.isFocused()},C=function(){z.each(s.focus)};w.events.shrink.bind(function(){s.search(w.mores()).isSome()&&v.focus();x.trigger.shrink()});return{element:w.element,refresh:w.refresh,add:w.add,enter:function(){D.enter()},destroy:function(){D.exit();z=m.none();y.unbind();w.destroy();D.destroy()},focused:B,restore:C,refocus:function(){B()&&C()},events:x.registry}}});l("ae",["c5","c6","c7","c8"],function(c,d,b,a){return{toolbar:function(b,c){return a(b,c)},
menu:function(a,b,c){return d.create(a,b,c)},popup:function(a,c,d,h,k){return b(a,c,d,h,k)},menuSystem:function(a,b,d){return c(a,b,d)}}});l("ig",["b","c","s","36"],function(c,d,b,a){var e=d.detect(),f=e.deviceType.isTouch,g=function(b,c){return a.screen.width>=b&&a.screen.height>=c},h=function(){return!g(620,700)&&f()};return{isTouch:f,choice:function(a,e){return c.foldl(a,function(a,c){return a.orThunk(function(){return c.predicate()?b.some(c.value()):b.none()})},b.none()).getOr(e)},isLarge:function(){return g(620,
700)},isLargeTouch:function(){return g(620,700)&&f()},isSmallTouch:h,isLargeDesktop:function(){return g(620,700)&&!f()},isSmallAndroid:function(){return h()&&e.deviceType.isAndroid()}}});l("c9",["1o","c","4b","ig"],function(c,d,b,a){d=d.detect();a={"ephox-platform-desktop":!d.deviceType.isTouch(),"ephox-platform-touch":d.deviceType.isTouch(),"ephox-platform-small-touch":a.isSmallTouch(),"ephox-platform-android":d.deviceType.isAndroid(),"ephox-platform-ios":d.deviceType.isiOS(),"ephox-platform-ie":d.browser.isIE()||
d.browser.isSpartan(),"ephox-platform-firefox":d.browser.isFirefox()};var e=[];c.each(a,function(a,b){!0===a&&e.push(b)});return{addClasses:function(a){b.add(a,e)}}});l("ky","b 4z s 33 3e 55 46 1y 2o 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m){return function(){var n=d.div();h.add(n,a.resolve("bannerarium"));h.add(n,a.resolve("layer-above-editor"));var p=b.some([]),q=e.create(),r=function(a){p=p.bind(function(e){e=c.filter(e,function(b){return b!==a});return b.some(e)});s(a)},s=function(a){a.destroy();
q.unbind(a.events.close);m.remove(a.element())},t=g.create({close:f(["banner"])});return{element:function(){return n},display:function(a){p.fold(function(){a.destroy()},function(b){b.push(a);q.bind(a.events.close,function(){r(a);t.trigger.close(a)});k.append(n,a.element())})},hide:r,destroy:function(){m.remove(n);p=p.bind(function(a){c.each(a,s);return b.none()})},events:t.registry}}});l("ca",["ky","55","46"],function(c,d,b){return function(){var a=c();a.events.close.bind(function(){e.trigger.resize()});
var e=b.create({resize:d([])});return{element:a.element,display:function(b){a.display(b);e.trigger.resize()},hide:function(b){a.hide(b);e.trigger.resize()},destroy:a.destroy,events:e.registry}}});l("bj",["2i"],function(c){return{atob:function(d){return c.getOrDie("atob")(d)},requestAnimationFrame:function(d){c.getOrDie("requestAnimationFrame")(d)}}});l("a4",["3t"],function(c){return function(d,b){var a=null,e=null;return{throttle:function(){e=arguments;null===a&&(a=c(function(){d.apply(null,e);e=
a=null},b))}}}});l("t5","bj 7 a4 2a au 2s 2t 36".split(" "),function(c,d,b,a,e,f,g,h){var k=function(a,b){var c=g(b,500);return function(){f(c)}},m=function(b,c){var e=new h.MutationObserver(c);e.observe(a.owner(b).dom(),{attributes:!0,subtree:!0,childList:!0,attributeFilter:["style","class"]});return function(){e.disconnect()}},n=void 0!==h.MutationObserver&&null!==h.MutationObserver?m:k;return{onShow:function(a,f){if(e.isVisible(a))return c.requestAnimationFrame(f),d.noop;var g=b(function(){e.isVisible(a)&&
(h(),c.requestAnimationFrame(f))},100),h=n(a,g.throttle);return h}}});l("t6",["b","s","1b"],function(c,d,b){var a=[],e=function(e){return c.findIndex(a,function(a){return b.eq(a.element,e)})};return{begin:function(b,c){if(-1===e(b)){var d=c();a.push({element:b,unbind:d})}},query:function(b){b=e(b);return-1===b?d.none():d.some(a[b])},end:function(b){b=e(b);if(-1!==b){var c=a[b];a.splice(b,1);c.unbind()}}}});l("kz","b bj 7 s 1b 3u l 64 t5 au 2r t6 3t 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,
q,r){var s=function(a){return{element:a,handlers:[],lastWidth:n.get(a),lastHeight:h.get(a)}},t=[],u=function(a){return c.findIndex(t,function(b){return e.eq(b.element,a)})},v=function(a){var e=n.get(a.element),d=h.get(a.element);if(e!==a.lastWidth||d!==a.lastHeight)a.lastWidth=e,a.lastHeight=d,c.each(a.handlers,b.apply)},w=function(a){var b=a.element;m.isVisible(b)?v(a):p.begin(b,function(){return k.onShow(b,function(){p.end(b);v(a)})})},x=!1,y=function(){x=!1;c.each(t,w)},z=function(){x||(x=!0,d.requestAnimationFrame(y))},
l=a.none(),D=function(){l.each(function(b){b.unbind();l=a.none()})};return{bind:function(b,d){var h=c.find(t,function(a){return e.eq(a.element,b)});void 0===h&&(h=s(b),t.push(h));h.handlers.push(d);l.isNone()&&(l=a.some(f.bind(g.fromDom(r),"resize",z)));q(function(){-1!==u(h.element)&&w(h)},100)},unbind:function(a,b){p.end(a);var e=u(a);if(-1!==e){var d=c.indexOf(t[e].handlers,b);-1!==d&&(t[e].handlers.splice(d,1),0===t[e].handlers.length&&t.splice(e,1),0===t.length&&D())}}}});l("cb","bj 7 s 55 46 64 kz 2r".split(" "),
function(c,d,b,a,e,f,g,h){return function(k){var m=e.create({change:a(["width","height","element"])}),n=void 0!==k.resize&&void 0!==k.resize.container?b.some(k.resize.container):b.none(),p=b.none();return{hookup:function(a){var e=n.getOr(a),s=function(){k.resize&&k.resize.callback&&k.resize.callback();var a=h.get(e),b=f.get(e);m.trigger.change(a,b,e)};p=b.some({target:d.constant(e),f:s});c.requestAnimationFrame(function(){g.bind(e,s)})},destroy:function(){p.each(function(a){g.unbind(a.target(),a.f)})},
events:m.registry}}});l("cc","1p 7 s 33 1y l 2o 3c 2a".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(b,c){var d=f.fromTag("div");e.add(d,a.resolve(c));g.append(d,b);return d};return{build:function(d,p,q){b.from(p).filter(c.isPrototypeOf).map(f.fromDom).each(function(b){var c=f.fromTag("div");e.add(c,a.resolve("flex-row"));var p=f.fromTag("div");e.add(p,a.resolve("flex-column"));h.append(p,k.children(d));g.append(d,c);g.append(c,p);g.append(c,m(b,"side-bar"))});b.from(q).filter(c.isPrototypeOf).map(f.fromDom).each(function(a){g.append(d,
m(a,"bottom-bar"))})}}});l("cd",["7","55","46"],function(c,d,b){return function(){var a=b.create({change:d(["width","height","element"])});return{hookup:c.noop,destroy:c.noop,events:a.registry}}});l("l0",["7","s","6p","3c","2r"],function(c,d,b,a,e){return function(){return{updateWidth:c.noop,clearWidth:c.noop,build:c.identity,update:c.noop,width:e.getOuter,init:function(a,b,c,e,d){a.refresh()},state:c.constant({toolbar:{drag:d.none()}}),integrate:function(b,c,e,d){a.append(b,[c.element(),e.element(),
d])},destroy:c.noop,events:b(["changed"])}}});l("x8",["53"],function(c){var d=c.exactly(["compare","extract","mutate","sink"]),b=c.exactly(["element","start","stop","destroy"]);c=c.exactly(["forceDrop","drop","move","delayDrop"]);return{mode:d,sink:b,api:c}});l("10w",["4g"],function(c){return{resolve:c.create("ephox-dragster").resolve}});l("x9","10w 6 1y 2n l 2q".split(" "),function(c,d,b,a,e,f){return function(g){g=d.merge({layerClass:c.resolve("blocker")},g);var h=e.fromTag("div");a.setAll(h,{position:"fixed",
left:"0px",top:"0px",width:"100%",height:"100%"});b.add(h,c.resolve("blocker"));b.add(h,g.layerClass);return{element:function(){return h},destroy:function(){f.remove(h)}}}});l("qk","x8 x9 s 3k 3u 2o 2q".split(" "),function(c,d,b,a,e,f,g){return c.mode({compare:function(b,c){return a(c.left()-b.left(),c.top()-b.top())},extract:function(c){return b.some(a(c.x(),c.y()))},sink:function(a,b){var m=d(b),n=e.bind(m.element(),"mousedown",a.forceDrop),p=e.bind(m.element(),"mouseup",a.drop),q=e.bind(m.element(),
"mousemove",a.move),r=e.bind(m.element(),"mouseout",a.delayDrop);return c.sink({element:m.element,start:function(a){f.append(a,m.element())},stop:function(){g.remove(m.element())},destroy:function(){m.destroy();p.unbind();q.unbind();r.unbind();n.unbind()}})},mutate:function(a,b){a.mutate(b.left(),b.top())}})});l("10x",["s","55","46"],function(c,d,b){return function(){var a=c.none(),e=function(b,e){var d=a.map(function(a){return b.compare(a,e)});a=c.some(e);return d},f=b.create({move:d(["info"])});
return{onEvent:function(a,b){b.extract(a).each(function(a){e(b,a).each(function(a){f.trigger.move(a)})})},reset:function(){a=c.none()},events:f.registry}}});l("10y",["7"],function(c){return function(d){return{onEvent:function(b,a){},reset:c.noop}}});l("xa",["10x","10y"],function(c,d){return function(){var b=d(),a=c(),e=b;return{on:function(){e.reset();e=a},off:function(){e.reset();e=b},isOn:function(){return e===a},onEvent:function(a,b){e.onEvent(a,b)},events:a.events}}});l("ql","x8 xa 6n 55 46 9".split(" "),
function(c,d,b,a,e,f){return{setup:function(g,h,k){var m=!1,n=e.create({start:a([]),stop:a([])}),p=d(),q=function(){t.stop();p.isOn()&&(p.off(),n.trigger.stop())},r=b(q,200);p.events.move.bind(function(a){h.mutate(g,a.info())});var s=function(a){return function(){var b=f.prototype.slice.call(arguments,0);if(m)return a.apply(null,b)}},t=h.sink(c.api({forceDrop:q,drop:s(q),move:s(function(a,b){r.cancel();p.onEvent(a,h)}),delayDrop:s(r.schedule)}),k);return{element:t.element,go:function(a){t.start(a);
p.on();n.trigger.start()},on:function(){m=!0},off:function(){m=!1},destroy:function(){t.destroy()},events:n.registry}}}});l("in",["qk","ql","9"],function(c,d,b){return{transform:function(a,b){var f=void 0!==b?b:{};return d.setup(a,void 0!==f.mode?f.mode:c,b)}}});l("11z",["55","46","3l"],function(c,d,b){return{both:function(a){var e=d.create({relocate:c(["x","y","deltaX","deltaY"])});return{mutate:function(c,d){var h=b.absolute(a),k=h.left()+c,h=h.top()+d;e.trigger.relocate(k,h,c,d)},events:e.registry}}}});
l("yq","in 11z 55 46 2n 3u l 6o q".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m,n){var p=a.create({relocate:b(["x","y","deltaX","deltaY"]),dragend:b([])}),q=d.both(m);e.set(m,"position","absolute");var r=c.transform(q),s=f.bind(m,"mousedown",function(a){0!==a.raw().button||h.closest(a.target(),n)||(r.on(),r.go(g.fromDom(k.body)))});r.events.stop.bind(function(){p.trigger.dragend();r.off()});q.events.relocate.bind(function(a){p.trigger.relocate(a.x(),a.y(),a.deltaX(),a.deltaY())});return{blocker:r.element,
destroy:function(){s.unbind();r.destroy()},events:p.registry}}});l("120",["b","s","2u","1s"],function(c,d,b,a){var e=b.immutable("hx","hy","position","x","y"),f=function(a,b,c,d,f,p){p=b.x();b=b.y()-c;return(b>=a.y()&&b<=a.y()+a.h()?[e(p,b,"absolute",p,b)]:[]).concat([e(f,a.y(),"fixed",f-d.left(),a.fy())])};return{detect:function(b,e,k,m,n,p){b=f(b,e,n,p,k,m);b=c.find(b,function(b){return 10>a.abs(m-b.hy())&&38>a.abs(k-b.hx())});return d.from(b)}}});l("121",["7"],function(c){return function(d,b,a,
e){return{x:c.constant(d),y:c.constant(b),width:c.constant(a),height:c.constant(e),right:c.constant(d+a),bottom:c.constant(b+e)}}});l("yt",["121","64","3l","2r"],function(c,d,b,a){return{box:function(e){var f=b.absolute(e),g=a.getOuter(e);e=d.getOuter(e);return c(f.left(),f.top(),g,e)}}});l("14j",["4g"],function(c){return{resolve:c.create("ephox-ego").resolve}});ca("dp",parseInt);l("122","14j 7 s 1a 1u dp".split(" "),function(c,d,b,a,e,f){return{make:function(g){var h="data-"+c.resolve(g+"-left"),
k="data-"+c.resolve(g+"-top"),m="data-"+c.resolve(g+"-position");return{get:function(c){var g=f(a.get(c,h),10),q=f(a.get(c,k),10);c=a.get(c,m);return e(g)||e(q)?b.none():b.some({left:d.constant(g),top:d.constant(q),position:d.constant(c)})},set:function(b,c,e,d){a.set(b,m,c);a.set(b,h,e+"px");a.set(b,k,d+"px")},clear:function(b){a.remove(b,m);a.remove(b,h);a.remove(b,k)}}}}});l("yr","120 yt 122 2u 3k 29 2a".split(" "),function(c,d,b,a,e,f,g){var h=b.make("pre-snap");a.immutable("fixed","loc");var k=
function(a,b,c,e,d,f){return h.get(b).fold(function(){return a.fromLocation(b,c,e)},function(c){return a.fromFixed(b,c.left()+d,c.top()+f)})},m=function(a,b,e,h){var k=g.owner(b),k=f.get(k);b=d.box(b);e=e.loc();return c.detect(a,b,e.left(),e.top(),h,k)};return{move:function(a,b,c,d,f,g){var u=a.graph(),v=a.lazyTheatre(),w=a.lazyHeight();c=k(u,b,c,d,f,g);var x=c.loc(),y=c.fixed();return m(v,a.container(),c,w).fold(function(){var a=u.boundToFixed(v,b,x.left(),x.top(),y.left(),y.top(),w);h.set(b,"fixed",
a.left(),a.top());return{position:"fixed",left:a.left()+"px",top:a.top()+"px"}},function(a){var c=u.boundToFixed(v,b,x.left(),x.top(),y.left(),y.top(),w);h.set(b,"fixed",c.left()+"px",c.top()+"px");c="absolute"===a.position()?u.locationToAbsolute(b,a.x(),a.y()):e(a.x(),a.y());return{position:a.position(),left:c.left()+"px",top:c.top()+"px"}})},forget:function(a){h.clear(a)}}});l("yu",[],function(){return{isInside:function(c,d,b){return!(d>c.y()+c.h()||b<c.y())},isAllInside:function(c,d,b){return d>
c.y()&&d<c.y()+c.h()&&b>c.y()&&b<c.y()+c.h()}}});l("ys","122 yu s 3k 2n 3l dp".split(" "),function(c,d,b,a,e,f,g){var h=c.make("old"),k=function(b,c,d){return e.getRaw(c,"left").bind(function(b){return e.getRaw(c,"top").map(function(c){var e=g(b,10);c=g(c,10);return a(e,c)})}).getOrThunk(function(){return b.locationToAbsolute(c,d.left(),d.top())})},m=function(a,c,g,m,n,u){g=f.absolute(m);n="absolute"===e.get(m,"position");var v=d.isAllInside(c,g.top(),g.top()+u());return n&&!v?(n=k(a,m,g),h.set(m,
"absolute",n.left(),n.top()),a=a.absoluteToFixed(m,g.left(),g.top()),c=g.top()<=c.y()?c.fy():c.fy()+c.h()-u(),b.some({position:"fixed",left:a.left()+"px",top:c+"px"})):b.none()},n=function(a,c,f,g,k,m){return h.get(g).bind(function(f){var k="fixed"===e.get(g,"position"),n=a.absoluteToLocation(g,f.left(),f.top()),n=d.isAllInside(c,n.top(),n.top()+m());return k&&n?(h.clear(g),b.some({position:"absolute",left:f.left()+"px",top:f.top()+"px"})):b.none()})};return{forget:function(a){h.clear(a)},update:function(a,
b,c,d,f,g){m(a,b,c,d,f,g).orThunk(function(){return n(a,b,c,d,f,g)}).each(function(a){e.setAll(d,a)})},state:function(a){return h.get(a)},set:function(a,b){h.set(a,b.position(),b.left(),b.top())}}});l("t7","yq yr ys 7 s 55 46 47 2n 3l".split(" "),function(c,d,b,a,e,f,g,h,k,m){return{none:function(b,c){var e=g.create({dragend:f([]),moved:f([])});return{blocker:a.die("no blocker"),setState:a.noop,getState:a.constant({}),init:function(a,b){k.setAll(c,{left:a+"px",top:b+"px",position:"absolute"});e.trigger.moved()},
update:a.noop,destroy:a.noop,events:e.registry}},except:function(e){return function(p,q){var r=c(q,e.join(",")),s=g.create({dragend:h([],r.events.dragend),moved:f([])});r.events.relocate.bind(function(a){var c=a.x(),e=a.y(),f=a.deltaX();a=a.deltaY();c=d.move(p,q,c,e,f,a);k.setAll(q,c);"absolute"!==c.position&&b.forget(q)});r.events.dragend.bind(function(){s.trigger.moved()});return{blocker:r.blocker,setState:function(a){k.setAll(q,{position:a.position(),left:a.x()+"px",top:a.y()+"px"})},getState:function(){var b=
m.viewport(q),c=k.get(q,"position");return{x:b.left,y:b.top,position:a.constant(c)}},init:function(a,b){k.setAll(q,{left:a+"px",top:b+"px",position:"absolute"});s.trigger.moved()},update:function(){d.forget(q)},destroy:function(){r.destroy()},events:s.registry}}}}});l("t8","6 s 46 47 2n 3l 2r 1s dp".split(" "),function(c,d,b,a,e,f,g,h){return{register:function(g,m,n,p){g.container();var q=n(g,m),r=p(g,m);n=b.create({dragend:a([],q.events.dragend),appear:a(["element"],r.events.appear),disappear:a(["element"],
r.events.disappear)});q.events.moved.bind(function(){t();s=!0});r.events.scrolled.bind(function(){t()});var s=!1,t=function(){q.update();r.update();var a=g.lazyTheatre(),b=f.absolute(m),a=h.max(0,a.x()+a.w()-b.left());e.set(m,"max-width",a+"px")};return{blocker:q.blocker,setState:function(a){q.setState(a);r.setState(a);t();s=!0},state:function(){if(!s)return d.none();var a=c.deepMerge(q.getState(),r.getState());return d.some(a)},init:function(a,b){q.init(a,b);t()},update:t,destroy:function(){r.destroy();
q.destroy()},events:n.registry}}}});l("t9","ys yt yu 7 55 46 3u 29 2a".split(" "),function(c,d,b,a,e,f,g,h,k){return{transitions:function(m,n){var p=m.container(),q=k.defaultView(n),r=f.create({appear:e(["element"]),disappear:e(["element"]),scrolled:e([])}),s=g.bind(q,"scroll",function(){r.trigger.scrolled()});return{update:function(){var a=m.lazyTheatre(),e=d.box(p);if(b.isInside(a,e.y(),e.bottom())){r.trigger.appear(n);var f=m.graph(),g=k.owner(p),g=h.get(g);c.update(f,a,e,n,g,m.lazyHeight)}else r.trigger.disappear(n)},
destroy:function(){s.unbind()},setState:function(b){b.transition().each(a.curry(c.set,n))},getState:function(){return{transition:a.constant(c.state(n))}},events:r.registry}}}});l("123",["2u","3k","29","2a"],function(c,d,b,a){var e=c.immutable("fixed","loc");return function(c){var g=function(c,e,f){c=a.owner(c);c=b.get(c);e-=c.left();f-=c.top();return d(e,f)},h=function(c,e,f){c=a.owner(c);c=b.get(c);e+=c.left();f+=c.top();return d(e,f)};return{locationToFixed:g,fixedToLocation:h,absoluteToFixed:function(e,
g,h){var p=c();e=a.owner(e);e=b.get(e);g-=e.left();return d(g,p.top()-h)},locationToAbsolute:function(a,b,e){a=c();return d(b,e).translate(-a.left(),-a.top())},absoluteToLocation:function(a,b,e){a=c();return d(b,e).translate(a.left(),a.top())},fromFixed:function(a,b,c){var f=d(b,c);a=h(a,b,c);return e(f,a)},fromLocation:function(a,b,c){a=g(a,b,c);b=d(b,c);return e(a,b)},boundToFixed:function(a,b,c,e,f,g,h){b=c<a.x()?a.fx():c>a.x()+a.w()?a.fx()+a.w():f;a=e<a.y()?a.fy():e+h>a.y()+a.h()?a.fy()+a.h()-
h:g;return d(b,a)}}}});l("yv",["123","7"],function(c,d){return function(b,a,e,f){a=c(a);return{lazyTheatre:b,graph:d.constant(a),lazyHeight:e,container:d.constant(f)}}});l("ta","yv 7 3k 64 3l 29 31 2a 36".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m,n){var p=m.isInline()?m.element():h.parent(m.placeholder()).getOr(m.placeholder());return c(function(){var a=f.get();return{x:a.left,y:a.top,w:d.constant(k.innerWidth),h:d.constant(k.innerHeight),fx:d.constant(0),fy:d.constant(0)}},function(){return m.isInline()?
b(0,0):e.absolute(p)},function(){var b=g.descendant(n,".ephox-chameleon-toolbar").getOr(n);return a.getOuter(b)},p)}});l("6a","33 1y 2n 3l 2a 2r".split(" "),function(c,d,b,a,e,f){var g=c.resolve("drag-show"),h=c.resolve("fade-container");return{width:function(c,d){return b.getRaw(c,"max-width").fold(function(){return e.owner(d).dom().defaultView.innerWidth-a.absolute(d).left()},function(a){return parseInt(a,10)})},updateWidth:function(a,c,e){c=0===e.extra().length?e.withinWidth():e.withinWidth()+
f.getOuter(c.group());0<c&&b.set(a,"width",c+"px")},clearWidth:function(a){b.remove(a,"width")},offsetFrom:function(b,c,e,d){c=void 0!==d.toolbar.offset?d.toolbar.offset:{left:0,top:-1*e};e=a.absolute(b.element());b=b.isInline()?{left:e.left(),top:e.top()}:{left:0,top:0};return{left:b.left+c.left,top:b.top+c.top}},initFade:function(a,b){d.add(b,g)},fadeIn:function(a,b){d.remove(a,h);d.add(b,g)},fadeOut:function(a,b){d.remove(b,g);d.add(a,h)}}});l("l1","85 t7 t8 t9 c 4z 7 33 ta 6a 46 47 1y 4b 2n 64 2o 3c".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v){return function(w,x){var y=f.div();s.set(y,"position","relative");q.add(y,h.resolve("dragging-container"));var l=f.div();q.add(l,h.resolve("draggable-container"));var A=w.isInline()?x:l,D=k(w,A,l),B=a.transitions,C=d.except([".ephox-pastry-button","."+h.resolve("banner-buttons")+" *",".ephox-polish-ui-container",".ephox-polish-socket"]),F=b.register(D,A,C,B);m.initFade(A,l);F.events.appear.bind(g.curry(m.fadeIn,A,l));F.events.disappear.bind(g.curry(m.fadeOut,
A,l));q.add(l,h.resolve("layer-above-editor"));r.add(F.blocker(),[h.resolve("above-outside"),h.resolve("dragging")]);var E=f.span();c.hidden(E,!0);r.add(E,[h.resolve("toolbar-drag-handle"),h.resolve("general-drag-handle"),"ephox-textbox-font",h.resolve("icon")]);D=e.detect();D.browser.isIE()&&10===D.browser.version.major&&q.add(E,h.resolve("ie10"));return{updateWidth:g.curry(m.updateWidth,A),clearWidth:g.curry(m.clearWidth,A),build:function(a){return[E].concat(a)},width:g.curry(m.width,A),init:function(a,
b,c,e,d){var f=s.preserve(A,function(){s.set(A,"visibility","hidden");s.remove(A,"display");a.refresh();return t.get(a.element())});d.toolbar.drag.fold(function(){var a=m.offsetFrom(w,A,f,e);F.init(a.left,a.top)},F.setState);v.append(l,[a.element(),b.element()])},update:function(){F.update()},state:function(){return{toolbar:{drag:F.state()}}},integrate:function(a,b,c,e){u.append(l,b.element());w.isInline()?(v.append(y,[l,e]),u.append(x,y)):v.append(x,[l,e])},destroy:function(){F.destroy()},events:n.create({changed:p([],
F.events.dragend)}).registry}}});l("l2","t7 t8 t9 7 s 33 ta 6a 46 47 1y 2n l 64 2o 3c".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t){return function(u,v){var w=q.fromTag("div");p.set(w,"position","relative");n.add(w,f.resolve("floating-container"));var x=q.fromTag("div");n.add(x,f.resolve("draggable-container"));var y=u.isInline()?v:x,l=g(u,y),A=d.register(l,y,c.none,b.transitions);h.initFade(y,x);A.events.appear.bind(a.curry(h.fadeIn,y,x));A.events.disappear.bind(a.curry(h.fadeOut,y,x));n.add(x,
f.resolve("layer-above-editor"));return{updateWidth:a.curry(h.updateWidth,y),clearWidth:a.curry(h.clearWidth,y),build:a.identity,width:a.curry(h.width,y),init:function(a,b,c,e,d){c=p.preserve(y,function(){p.set(y,"visibility","hidden");p.remove(y,"display");a.refresh();return r.get(a.element())});e=h.offsetFrom(u,y,c,e);A.init(e.left,e.top);t.append(x,[a.element(),b.element()])},update:function(){A.update()},state:a.constant({toolbar:{drag:e.none()}}),integrate:function(a,b,c,e){s.append(x,b.element());
u.isInline()?(t.append(w,[x,e]),s.append(v,w)):t.append(v,[x,e])},destroy:function(){A.destroy()},events:k.create({changed:m([],A.events.dragend)}).registry}}});l("ce",["l0","l1","l2"],function(c,d,b){return{setup:function(a,e,f,g){return(!0===f.toolbar.draggable?d:void 0!==f.toolbar.offset||a.isInline()?b:c)(a,e)}}});l("6y","ae 4z 7 50 75 1f c9 33 ca cb cc cd as ce 1a 1y 4b 2n l 2o 2q 2r".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w,x,y,l){return function(A,D,B,C,F,E){var G=w.fromTag("div");
C.updateUi(G);u.add(G,[q.editorContainer(),"ephox-textbox-font",h.resolve("layer-editor")]);s.set(G,"lang",f.get());g.addClasses(G);var H=r.setup(A,G,F,E),I=c.toolbar(H,e.translate);!1===F.toolbar.visible&&t.add(G,"ephox-polish-no-toolbar");D.events.toolbar.bind(I.enter);I.events.exit.bind(A.focus);var K=k(),J=d.div();t.add(J,h.resolve("socket"));var M=F.autoresize?m(F):p();H.integrate(G,I,K,J);n.build(G,F.sideBar,F.bottomBar);var O=A.isInline()?function(){v.set(K.element(),"min-width",l.getOuter(A.element())+
"px")}:b.noop;M.events.change.bind(function(a){I.refresh();B.refresh();O()});H.events.changed.bind(function(){I.refresh()});return{element:function(){return G},socket:function(a){a.connect(J)},viewport:b.constant(J),connect:function(b){x.append(b,G);a.detect(G);M.hookup(A.element());return!0},destroy:function(){M.destroy();I.destroy();H.destroy();K.destroy();y.remove(G)},toolbar:I,position:function(){O();H.init(I,K,J,F,E)},refresh:function(){H.update();I.refresh()},banners:K.element,displayBanner:K.display,
hideBanner:K.hide,state:H.state}}});l("57","a c 1p 7 s 6w 6x 6y 6z 70 l".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=function(a){a=m.absolute(a);var b=m.view();a=f.intersect(a,b);return k(a.x(),a.y(),a.width(),a.height())};return{build:function(a,b,c,e,d,f,k,m){var n=h(a,b,c,f,k,m),p=e.tabbed(n);p.init();return{element:n.element,socket:n.socket,viewport:n.viewport,init:function(b,e,h){e=p.config(a.isInline(),e,d,h);g.setup(n,f,a,b,c,e);p.loaded()},connect:n.connect,destroy:function(){n.destroy();
p.destroy()},displayBanner:n.displayBanner,hideBanner:n.hideBanner,position:n.position,refresh:n.refresh,tabstrip:n.toolbar,state:n.state}},bounds:function(){var f=function(a){var d=function(){return e.from(a.bounds()).filter(b.isPrototypeOf).map(n.fromDom).map(p).getOrThunk(m.view)};return c.isFunction(a.bounds)?d:m.view};return d.detect().deviceType.isTouch()?a.constant(m.view):f}()}});l("3x",["s","p","56","57"],function(c,d,b,a){return{settings:function(e){return{onprem:!0,blocktag:{styles:[{rule:"p"},
{rule:"h1"},{rule:"h2"},{rule:"h3"},{rule:"h4"},{rule:"div"},{rule:"pre"}],bundled:!0},image:{bundled:!0},imageEdit:{bundled:!0},imageupload:{immediate:!1,bundled:!1},content:{css:e+"/css",tabindex:null,stylesheets:[],documentStyles:"",prettyprint:!0},ui:{layout:a,isFullScreen:!1,toolbar:{draggable:!1},autoresize:!0,locale:{},editorName:d.value("debug"),bounds:null,showHelpHint:!1},shortcuts:{features:!0},spelling:{bundled:!0,autocorrect:!0,scanView:!0,multilingual:!0,menu:!0},specialchar:{bundled:!0},
fileupload:{bundled:!0,allowLocalImages:!0},horizontalrule:{bundled:!0},media:{bundled:!0},mentions:{bundled:!1},registration:{bundled:!1},help:{baseUrl:e+"/html",integration:{},bundled:!0},draganddrop:{bundled:!0},wordcount:{bundled:!0},formatting:{bundled:!0},alignindent:{bundled:!0},directionality:{bundled:!0},parlance:{bundled:!0,languages:"en_us en_gb es fr de pt zh".split(" ")},font:{faces:[],bundled:!0},lists:{bundled:!0},link:{bundled:!0},linkvalidator:{bundled:!1},removeformat:{bundled:!0},
fullscreen:{bundled:!0,autoresize:!1},editorcontext:{bundled:!0},macros:{whitelist:c.none(),bundled:!0},highlighter:{external:[],bundled:!0},table:{bundled:!0},contextmenu:{bundled:!0},project:{apiKey:null},smartclipboard:{bundled:!0,copy:{},paste:{forceText:!1,baseUrl:e+"/js",swf:e+"/flash/textboxpaste.swf",officeStyles:"prompt",htmlStyles:"merge",allowLocalImages:!0,enableFlashImport:!0}},resize:{bundled:!0},platform:{toolbar:{items:b,contextual:["table-tools","image-tools"]},allowLocalImages:!0,
fillscreen:!1},codeview:{bundled:!0,showButton:!0,mode:"pencil",css:e+"/css",js:e+"/js"},findreplace:{bundled:!0},accessibility:{bundled:!0},plaincodeview:{bundled:!0},embed:{inlineStyles:!0,bundled:!1}}},state:function(){return{spelling:{words:{},language:c.none()},undo:{initial:{clean:"",marked:""},undo:[],redo:[]},profile:{spelling:!1,nativeSpelling:!0,autocorrect:!0,capitalisation:!1,linkpreviews:!1},content:{clean:"",marked:""},ui:{toolbar:{drag:c.none()}},macros:{customs:{}},filters:{customs:[]},
laundry:{dirty:!1},linkvalidator:{ignore:[],cache:{}}}}}});l("3y",["s","42","55","46"],function(c,d,b,a){return function(e){var f=c.none(),g=function(a){return function(){var b=e.get()[a];if(null===b||void 0===b)throw"can't find instance method: "+a;return b.apply(null,arguments)}},h=function(){var a=f.getOrDie("Cannot reconnect the editor before it has been connected the first time.");g("connect")(a)&&k.trigger.connected()},k=a.create({connected:b([])});return d.external({activateInline:g("activateInline"),
deactivateInline:g("deactivateInline"),content:g("content"),keyboard:g("keyboard"),smartview:g("smartview"),macros:g("macros"),ui:g("ui"),filter:g("filter"),undo:g("undo"),operations:g("operations"),getMode:g("getMode"),element:g("element"),connect:function(a){f=c.some(a);h()},reconnect:h,focus:g("focus"),getContent:g("getContent"),setContent:g("setContent"),insertHtmlAtCursor:g("insertHtmlAtCursor"),state:g("state"),communication:g("communication"),uploader:g("uploader"),isDirty:g("isDirty"),setDirty:g("setDirty"),
isPrettyPrinting:g("isPrettyPrinting"),events:k.registry})}});l("lv",[],function(){return"body p div article aside figcaption figure footer header nav section ol ul li table thead tbody tfoot caption tr td th h1 h2 h3 h4 h5 h6 blockquote pre address".split(" ")});l("de",["c","s","n"],function(c,d,b){return function(a,e){var f=function(a){try{return g(a)}catch(b){return d.none()}},g=function(b){return a(b)?d.from(b.dom().nodeValue):d.none()},h=c.detect().browser,k=h.isIE()&&10===h.version.major?f:
g;return{get:function(c){if(!a(c))throw new b("Can only get "+e+" value of a "+e+" node");return k(c).getOr("")},getOption:k,set:function(c,d){if(!a(c))throw new b("Can only set raw "+e+" value of a "+e+" node");c.dom().nodeValue=d}}}});l("at",["21","de"],function(c,d){var b=d(c.isText,"text");return{get:function(a){return b.get(a)},getOption:function(a){return b.getOption(a)},set:function(a,c){b.set(a,c)}}});l("e7","lv b 7 1a 1b 2n l 2o 3c 21 6j 4i 2q 4e 31 at 2a".split(" "),function(c,d,b,a,e,f,
g,h,k,m,n,p,q,r,s,t,u){return function(){return{up:b.constant({selector:s.ancestor,closest:s.closest,predicate:p.ancestor,all:u.parents}),down:b.constant({selector:r.descendants,predicate:n.descendants}),styles:b.constant({get:f.get,getRaw:f.getRaw,set:f.set,remove:f.remove}),attrs:b.constant({get:a.get,set:a.set,remove:a.remove,copyTo:function(b,c){var e=a.clone(b);a.setAll(c,e)}}),insert:b.constant({before:h.before,after:h.after,afterAll:k.after,append:h.append,appendAll:k.append,prepend:h.prepend,
wrap:h.wrap}),remove:b.constant({unwrap:q.unwrap,remove:q.remove}),create:b.constant({nu:g.fromTag,clone:function(a){return g.fromDom(a.dom().cloneNode(!1))},text:g.fromText}),query:b.constant({comparePosition:function(a,b){return a.dom().compareDocumentPosition(b.dom())},prevSibling:u.prevSibling,nextSibling:u.nextSibling}),property:b.constant({children:u.children,name:m.name,parent:u.parent,isText:m.isText,isElement:m.isElement,getText:t.get,setText:t.set,isBoundary:function(a){return m.isElement(a)?
"body"===m.name(a)?!0:d.contains(c,m.name(a)):!1},isEmptyTag:function(a){return m.isElement(a)?d.contains(["br","img","hr"],m.name(a)):!1}}),eq:e.eq,is:e.is}}});l("o4",["b","s","2u"],function(c,d,b){var a=b.immutable("item","mode");b=function(b,c,d,f){var g=void 0!==f?f:e;return b.property().parent(c).map(function(b){return a(b,g)})};var e=function(b,c,e,d){var g=void 0!==d?d:f;return e.sibling(b,c).map(function(b){return a(b,g)})},f=function(b,c,e,d){var g=void 0!==d?d:f;b=b.property().children(c);
return e.first(b).map(function(b){return a(b,g)})},g=[{current:b,next:e,fallback:d.none()},{current:e,next:f,fallback:d.some(b)},{current:f,next:f,fallback:d.some(e)}],h=function(a,b,e,f,q){var r=c.find(void 0!==q?q:g,function(a){return a.current===e});return void 0===r||null===r?d.none():r.current(a,b,f,r.next).orThunk(function(){return r.fallback.bind(function(c){return h(a,b,c,f)})})};return{backtrack:b,sidestep:e,advance:f,go:h}});l("o5",["s"],function(c){return{left:function(){return{sibling:function(c,
b){return c.query().prevSibling(b)},first:function(d){return 0<d.length?c.some(d[d.length-1]):c.none()}}},right:function(){return{sibling:function(c,b){return c.query().nextSibling(b)},first:function(d){return 0<d.length?c.some(d[0]):c.none()}}}}});l("o3",["s","o4","o5"],function(c,d,b){var a=function(b,f,g,h,k,m){return d.go(b,f,h,k).bind(function(d){return m(d.item())?c.none():g(d.item())?c.some(d.item()):a(b,d.item(),g,d.mode(),k,m)})};return{left:function(c,f,g,h){return a(c,f,g,d.sidestep,b.left(),
h)},right:function(c,f,g,h){return a(c,f,g,d.sidestep,b.right(),h)}}});l("ij",["7","o3","o4","o5"],function(c,d,b,a){var e=function(a,b){return 0===a.property().children(b).length},f=function(a,b,c,e){return d.left(a,b,c,e)},g=function(a,b,c,e){return d.right(a,b,c,e)};return{before:function(a,b,d){return f(a,b,c.curry(e,a),d)},after:function(a,b,d){return g(a,b,c.curry(e,a),d)},seekLeft:f,seekRight:g,walkers:function(){return{left:a.left,right:a.right}},walk:function(a,c,e,d,f){return b.go(a,c,e,
d,f)},backtrack:b.backtrack,sidestep:b.sidestep,advance:b.advance}});l("j8",["e7","ij"],function(c,d){var b=c();return{gather:function(a,c,f){return d.gather(b,a,c,f)},before:function(a,c){return d.before(b,a,c)},after:function(a,c){return d.after(b,a,c)},seekLeft:function(a,c,f){return d.seekLeft(b,a,c,f)},seekRight:function(a,c,f){return d.seekRight(b,a,c,f)},walkers:function(){return d.walkers()},walk:function(a,c,f,g){return d.walk(b,a,c,f,g)}}});l("fl","1a l 2o 3c 2q 2a".split(" "),function(c,
d,b,a,e,f){var g=function(a){return d.fromDom(a.dom().cloneNode(!0))},h=function(a,b){var e=d.fromTag(b),f=c.clone(a);c.setAll(e,f);return e};return{shallow:function(a){return d.fromDom(a.dom().cloneNode(!1))},shallowAs:h,deep:g,copy:function(b,c){var e=h(b,c),d=f.children(g(b));a.append(e,d);return e},mutate:function(c,d){var g=h(c,d);b.before(c,g);var p=f.children(c);a.append(g,p);e.remove(c);return g}}});l("l5","b p j8 l 2o 3c 21 2q fl 4e 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return{convertToHeading:function(b,
g){var r=n.owner(b),r=a.fromTag(g,r.dom()),s=n.children(b),s=c.map(s,k.deep);f.append(r,s);s=m.descendants(r,"b,strong");c.each(s,h.unwrap);e.before(b,r);h.remove(b);return d.value(r)},joinLinks:function(a,c){return b.seekLeft(c,function(a){return"a"===g.name(a)},a).fold(function(){return d.value(c)},function(a){var b=n.children(c);f.append(a,b);h.remove(c);return d.value(a)})}}});l("tb",["7","p"],function(c,d){return function(b){var a=c.compose(d.error,b);return{invalidError:a,different:function(b,
c,g,h,k){return 0===c.length?a(h):c===g?a(k):d.value(b)}}}});l("l6",["tb","1a"],function(c,d){return function(b){var a=c(b);return{changeAlt:function(b,c,g,h){var k=d.get(b,"src");return a.different(b,c,k,g,h).map(function(a){d.set(a,"alt",c);return a})}}}});l("jl",["7","1b"],function(c,d){return function(b,a,e,f){var g=d.eq(b,e)&&a===f;return{startContainer:c.constant(b),startOffset:c.constant(a),endContainer:c.constant(e),endOffset:c.constant(f),collapsed:c.constant(g)}}});l("qs","1o 7 1a 2n l 2o 21 fl 2a".split(" "),
function(c,d,b,a,e,f,g,h,k){var m=function(){var a=e.fromTag("td");f.append(a,e.fromTag("br"));return a},n=function(a,e,d){var f=h.copy(a,e);c.each(d,function(a,c){null===a?b.remove(f,c):b.set(f,c,a)});return f},p=function(a){return a},q=function(a){return function(){return e.fromTag("tr",a.dom())}};return{cellOperations:function(b,c){return{row:q(c),cell:function(c){var d=k.owner(c.element()),d=e.fromTag(g.name(c.element()),d.dom());f.append(d,e.fromTag("br"));a.copy(c.element(),d);a.remove(d,"height");
1!==c.colspan()&&a.remove(c.element(),"width");b(c.element(),d);return d},replace:n,gap:m}},paste:function(a){return{row:q(a),cell:m,replace:p,gap:m}}}});l("jo","b 7 2u 64 3l 2r".split(" "),function(c,d,b,a,e,f){var g=b.immutable("row","y"),h=b.immutable("col","x"),k=function(a){return e.absolute(a).left()+f.getOuter(a)},m=function(a){return e.absolute(a).left()},n=function(a,b){return h(a,m(b))},p=function(a,b){return h(a,k(b))},q=function(a){return e.absolute(a).top()},r=function(a,b,e){if(0===
e.length)return[];var d=c.map(e.slice(1),function(b,c){return b.map(function(b){return a(c,b)})}),f=e[e.length-1].map(function(a){return b(e.length-1,a)});return d.concat([f])};b={delta:d.identity,positions:d.curry(r,function(a,b){return g(a,q(b))},function(b,c){return g(b,q(c)+a.getOuter(c))}),edge:q};var s={delta:d.identity,edge:m,positions:d.curry(r,n,p)};d={delta:function(a,b){return-a},edge:k,positions:d.curry(r,p,n)};return{height:b,rtl:d,ltr:s}});l("je",["jo"],function(c){return{ltr:c.ltr,
rtl:c.rtl}});l("bb",["je"],function(c){return function(d){var b=function(a){return d.directionAt(a).isRtl()?c.rtl:c.ltr};return{delta:function(a,c){return b(c).delta(a,c)},edge:function(a){return b(a).edge(a)},positions:function(a,c){return b(c).positions(a,c)}}}});l("jf","jl s qs bb l 2o 2q".split(" "),function(c,d,b,a,e,f,g){return{erase:function(a,b,m,n){a=e.fromText("");f.after(b,a);g.remove(b);return d.some(c(a,0,a,0))},execute:function(e,d,f,g){return function(p,q,r){var s=g(),t=p.doc().getOrDie();
p=a(e);t=b.cellOperations(f,t);return d(s,q,r,t,p).map(function(a){return c(a,0,a,0)})}}}});l("be",["7","s","3k","l","3l"],function(c,d,b,a,e){return{only:function(e){var g=d.from(e.dom().documentElement).map(a.fromDom).getOr(e);return{parent:c.constant(g),view:c.constant(e),origin:c.constant(b(0,0))}},detached:function(a,b){var d=c.curry(e.absolute,b);return{parent:c.constant(b),view:c.constant(a),origin:d}}}});l("b6",["be"],function(c){var d=function(b,a,e){return b.isInline()?c.detached(b.element(),
a.uiContainer()):c.only(e)};return{get:d,fromEngine:function(b){var a=b.content(),c=b.smartview();return a.doc().map(function(b){return d(a,c,b)})}}});l("g7",["2u"],function(c){var d=c.immutable("width","height"),b=c.immutable("rows","columns"),a=c.immutable("row","column"),e=c.immutable("x","y"),f=c.immutable("element","rowspan","colspan"),g=c.immutable("element","rowspan","colspan","row","column"),h=c.immutable("before","on","after"),k=c.immutable("element","cells"),m=c.immutableBag(["startRow",
"startCol","finishRow","finishCol"],[]);c=c.immutableBag(["row","col"],[]);return{dimensions:d,grid:b,address:a,coords:e,extended:g,detail:f,context:h,rowdata:k,bounds:m,cell:c}});l("g8",["b","7","m","2a"],function(c,d,b,a){var e=function(d,g,h){return c.bind(a.children(d),function(a){return b.is(a,g)?h(a)?[a]:[]:e(a,g,h)})};return{firstLayer:function(a,b){return e(a,b,d.constant(!0))},filterFirstLayer:e}});l("bf","b 7 s g7 g8 1a 21 4e 31 m 2a dp".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=
function(a,e){return c.contains(a,g.name(e))?b.some(e):k.ancestor(e,a.join(","),function(a){return m.is(a,"table")})},r=function(a,b){return n.parent(b).map(function(b){return h.children(b,a)})},s=d.curry(r,"th,td");d=d.curry(r,"tr");var t=function(a,b){return p(f.get(a,b),10)};return{cell:function(a){return q(["td","th"],a)},firstCell:function(a){return k.descendant(a,"th,td")},cells:function(a){return e.firstLayer(a,"th,td")},neighbourCells:s,table:function(a){return k.closest(a,"table")},row:function(a){return q(["tr"],
a)},rows:function(a){return e.firstLayer(a,"tr")},notCell:function(a){return q(["caption","tr","tbody","tfoot","thead"],a)},neighbourRows:d,attr:t,grid:function(b,c,e){c=t(b,c);b=t(b,e);return a.grid(c,b)}}});l("qm",["b","7","g7","bf","1a"],function(c,d,b,a,e){return{fromTable:function(f){f=a.rows(f);return c.map(f,function(f){var h=c.map(a.cells(f),function(a){var c=e.has(a,"rowspan")?parseInt(e.get(a,"rowspan"),10):1,d=e.has(a,"colspan")?parseInt(e.get(a,"colspan"),10):1;return b.detail(a,c,d)});
return{element:d.constant(f),cells:d.constant(h)}})}}});l("qn",["b","7","s","g7","1s"],function(c,d,b,a,e){var f=function(a,b){var e=c.bind(a.all(),function(a){return a.cells()});return c.filter(e,b)};return{generate:function(b){var f={},k=[],m=0,n=0;c.each(b,function(b,d){var g=[];c.each(b.cells(),function(b,c){for(var k=0;void 0!==f[d+","+k];)k++;for(var p=a.extended(b.element(),b.rowspan(),b.colspan(),d,k),w=0;w<b.colspan();w++)for(var x=0;x<b.rowspan();x++){var y=d+x,l=k+w;f[y+","+l]=p;m=e.max(m,
y+1);n=e.max(n,l+1)}g.push(p)});k.push(a.rowdata(b.element(),g))});b=a.grid(m,n);return{grid:d.constant(b),access:d.constant(f),all:d.constant(k)}},getAt:function(a,c,e){a=a.access()[c+","+e];return void 0!==a?b.some(a):b.none()},findItem:function(a,c,e){a=f(a,function(a){return e(c,a.element())});return 0<a.length?b.some(a[0]):b.none()},filterItems:f,justCells:function(a){a=c.map(a.all(),function(a){return a.cells()});return c.flatten(a)}}});l("td",["b","s","k","1s"],function(c,d,b,a){return{repeat:function(a,
b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c},range:function(a,b){for(var c=[],d=a;d<b;d++)c.push(d);return c},unique:function(a,b){var d=[];c.each(a,function(c,k){k<a.length-1&&!b(c,a[k+1])?d.push(c):k===a.length-1&&d.push(c)});return d},deduce:function(e,f){if(0>f||f>=e.length-1)return d.none();var g=e[f].fold(function(){var a=c.reverse(e.slice(0,f));return b.findMap(a,function(a,b){return a.map(function(a){return{value:a,delta:b+1}})})},function(a){return d.some({value:a,delta:0})}),h=e[f+
1].fold(function(){var a=e.slice(f+1);return b.findMap(a,function(a,b){return a.map(function(a){return{value:a,delta:b+1}})})},function(a){return d.some({value:a,delta:1})});return g.bind(function(b){return h.map(function(c){var e=c.delta+b.delta;return a.abs(c.value-b.value)/e})})}}});l("tc",["b","7","s","qn","td"],function(c,d,b,a,e){var f=function(a,e,d){var f=a();a=c.find(f,e);return b.from(a).orThunk(function(){return b.from(f[0]).orThunk(d)}).map(function(a){return a.element()})};return{columns:function(b){var h=
b.grid(),k=e.range(0,h.columns()),m=e.range(0,h.rows());return c.map(k,function(e){return f(function(){return c.bind(m,function(c){return a.getAt(b,c,e).filter(function(a){return a.column()===e}).fold(d.constant([]),function(a){return[a]})})},function(a){return 1===a.colspan()},function(){return a.getAt(b,0,e)})})},rows:function(b){var h=b.grid(),k=e.range(0,h.rows()),m=e.range(0,h.columns());return c.map(k,function(e){return f(function(){return c.bind(m,function(c){return a.getAt(b,e,c).filter(function(a){return a.row()===
e}).fold(d.constant([]),function(a){return[a]})})},function(a){return 1===a.rowspan()},function(){return a.getAt(b,e,0)})})}}});l("r5","bf 1a 2n 64 21 2r v 1s dp".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a,c){b.set(a,"width",c+"px")},n=function(a,c){b.set(a,"height",c+"px")},p=function(a,c){return b.getRaw(a,c).getOrThunk(function(){return b.get(a,c)})},q=function(a,b,e,d){var f=c.table(a).map(function(a){a=e(a);return h.floor(b/100*a)}).getOr(b);d(a,f);return f},r=function(a,b,c,d){var f=
k(a,10);return g.endsWith(a,"%")&&"table"!==e.name(b)?q(b,f,c,d):f},s=function(a){var b=p(a,"width");return b?r(b,a,f.get,m):f.get(a)},t=function(b){var c=p(b,"height");return c?r(c,b,a.get,n):a.get(b)},u=function(a,b,c){c=c(a);a=d.has(a,b)?k(d.get(a,b),10):1;return c/a};return{setWidth:m,setHeight:n,getWidth:function(a){return u(a,"colspan",s)},getHeight:function(a){return u(a,"rowspan",t)}}});l("r6",["7","1a","2n","dp"],function(c,d,b,a){var e=function(b,c){return d.has(b,c)&&1<a(d.get(b,c),10)};
return{hasColspan:function(a){return e(a,"colspan")},hasRowspan:function(a){return e(a,"rowspan")},minWidth:c.constant(10),minHeight:c.constant(10),getInt:function(c,e){return a(b.get(c,e),10)}}});l("r3","b 7 tc r5 r6 td 2n".split(" "),function(c,d,b,a,e,f,g){var h=function(a,b,c){return g.getRaw(a,b).fold(function(){return c(a)+"px"},function(a){return a})},k=function(b){return h(b,"width",a.getWidth)},m=function(b){return h(b,"height",a.getHeight)},n=function(b){return a.getWidth(b)},p=function(a,
g,h,k){a=b.columns(a);var m=c.map(a,function(a){return a.map(g.edge)});return c.map(a,function(a,b){return a.filter(d.not(e.hasColspan)).fold(function(){var a=f.deduce(m,b);return k(a)},function(a){return h(a)})})},q=function(a){return a.map(function(a){return a+"px"}).getOr("")},r=function(b){return a.getHeight(b)},s=function(a,g,h,k){a=b.rows(a);var m=c.map(a,function(a){return a.map(g.edge)});return c.map(a,function(a,b){return a.filter(d.not(e.hasRowspan)).fold(function(){var a=f.deduce(m,b);
return k(a)},function(a){return h(a)})})};return{getRawWidths:function(a,b){return p(a,b,k,q)},getPixelWidths:function(a,b){return p(a,b,n,function(a){return a.getOrThunk(e.minWidth)})},getPixelHeights:function(a,b){return s(a,b,r,function(a){return a.getOrThunk(e.minHeight)})},getRawHeights:function(a,b){return s(a,b,m,q)}}});l("rs","b 7 4n td v 1s 1v dp".split(" "),function(c,d,b,a,e,f,g,h){var k=b.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),m=function(a,b,c){a=c.substring(0,
c.length-a.length);var e=g(a);return a===e.toString()?b(e):k.invalid(c)},n=function(a){return e.endsWith(a,"%")?m("%",k.percent,a):e.endsWith(a,"px")?m("px",k.pixels,a):k.invalid(a)},p=function(a,b){return c.map(a,function(a){return n(a).fold(function(){return a},function(a){return a/b*100+"%"},function(a){return a+"%"})})},q=function(a,b,e){var d=e/b;return c.map(a,function(a){return n(a).fold(function(){return a},function(a){return a*d+"px"},function(a){return a/100*e+"px"})})},r=function(b,c){var e=
b.fold(function(){return d.constant("")},function(a){return d.constant(a/c+"px")},function(a){return d.constant(a/c+"px")});return a.repeat(c,e)},s=function(a,b,c){return a.fold(function(){return b},function(a){return q(b,c,a)},function(a){return p(b,c)})},t=function(a,b){var c=f.floor(a);return{value:c+b,remainder:a-c}},u=function(a,b){return n(a).fold(d.constant(a),function(a){return a+b+"px"},function(a){return a+b+"%"})},v=function(a){if(0===a.length)return a;a=c.foldr(a,function(a,b){var c=n(b).fold(function(){return{value:b,
remainder:0}},function(a){return t(a,"px")},function(a){return t(a,"%")});return{output:[c.value].concat(a.output),remainder:a.remainder+c.remainder}},{output:[],remainder:0});var b=a.output;return b.slice(0,b.length-1).concat([u(b[b.length-1],f.round(a.remainder))])};return{validate:n,redistribute:function(a,b,e){e=n(e);a=c.forall(a,function(a){return"0px"===a})?r(e,a.length):s(e,a,b);return v(a)},sum:function(a,b){return 0===a.length?b:c.foldr(a,function(a,b){return n(b).fold(d.constant(0),d.identity,
d.identity)+a},0)},toIntegers:v}});l("jj","b 7 qm qn jo r3 rs r5 r6 2n 64 2r".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=function(a,b,e){c.each(b,function(b){var c=a.slice(b.column(),b.colspan()+b.column()),c=g.sum(c,k.minWidth());m.set(b.element(),"width",c+e)})},r=function(a,b,e,d){c.each(e,function(b){var c=a.slice(b.row(),b.rowspan()+b.row()),c=g.sum(c,k.minHeight());m.set(b.element(),"height",c+d)});c.each(b,function(b,c){m.set(b.element(),"height",a[c])})},s=function(a){return g.validate(a).fold(d.constant("px"),
d.constant("px"),d.constant("%"))};return{setWidth:h.setWidth,getWidth:h.getWidth,setHeight:h.setHeight,getHeight:h.getHeight,redistribute:function(c,d,h,k){var x=b.fromTable(c),y=a.generate(x),l=y.all(),A=a.justCells(y);d.each(function(a){var b=s(a),e=p.get(c),d=f.getRawWidths(y,k),e=g.redistribute(d,e,a);q(e,A,b);m.set(c,"width",a)});h.each(function(a){var b=s(a),d=n.get(c),h=f.getRawHeights(y,e.height),d=g.redistribute(h,d,a);r(d,l,A,b);m.set(c,"height",a)})}}});l("qu","b 7 s 4m 53 1a 2n dp".split(" "),
function(c,d,b,a,e,f,g,h){var k=function(a){var b=f.has(a,"colspan")?h(f.get(a,"colspan"),10):1,c=f.has(a,"rowspan")?h(f.get(a,"rowspan"),10):1;return{element:d.constant(a),colspan:d.constant(b),rowspan:d.constant(c)}},m=e.exactly(["cell","row","replace","gap"]);return{modification:function(c,e){m(c);var d=a(b.none()),f=void 0!==e?e:k,g=function(a){var e;e=f(a);e=c.cell(e);d.get().isNone()&&d.set(b.some(e));h=b.some({item:a,replacement:e});return e},h=b.none();return{getOrInit:function(a,b){return h.fold(function(){return g(a)},
function(c){return b(a,c.item)?c.replacement:g(a)})},cursor:d.get}},transform:function(e,d){return function(f){var g=a(b.none());m(f);var h=[],k=function(a,e){var d=c.find(h,function(b){return e(b.item,a)});return b.from(d)},u=function(a){var c=f.replace(a,d,{scope:e});h.push({item:a,sub:c});g.get().isNone()&&g.set(b.some(c));return c};return{replaceOrInit:function(a,b){return k(a,b).fold(function(){return u(a)},function(c){return b(a,c.item)?c.sub:u(a)})},cursor:g.get}}},merging:function(c){m(c);
var e=a(b.none());return{combine:function(a){e.get().isNone()&&e.set(b.some(a));return function(){var b=c.cell({element:d.constant(a),colspan:d.constant(1),rowspan:d.constant(1)});g.remove(b,"width");g.remove(a,"width");return b}},cursor:e.get}}}});l("80",["b","21","at","2a"],function(c,d,b,a){var e=function(c){return"img"===d.name(c)?1:b.getOption(c).fold(function(){return a.children(c).length},function(a){return a.length})},f=["img","br"];return{getEnd:e,isEnd:function(a,b){return e(a)===b},isStart:function(a,
b){return 0===b},isCursorPosition:function(a){return d.isText(a)&&b.get(a).length||c.contains(f,d.name(a))}}});l("ds",["80","s","4i","2a"],function(c,d,b,a){var e=function(b,c){var e=function(b){b=a.children(b);for(var f=b.length-1;0<=f;f--){var n=b[f];if(c(n))return d.some(n);n=e(n);if(n.isSome())return n}return d.none()};return e(b)};return{firstCursor:function(a){return b.descendant(a,c.isCursorPosition)},lastCursor:function(a){return e(a,c.isCursorPosition)}}});l("lx",["b"],function(c){var d=
"body p div article aside figcaption figure footer header nav section ol ul table thead tfoot tbody caption tr td th h1 h2 h3 h4 h5 h6 blockquote pre address".split(" "),b=function(a,b){var g=a.property().name(b);return c.contains(d,g)},a=function(a,b){return c.contains(["br","img","hr","input"],a.property().name(b))};return{isBlock:b,isList:function(a,b){var d=a.property().name(b);return c.contains(["ol","ul"],d)},isFormatting:function(a,b){var d=a.property().name(b);return c.contains("address pre p h1 h2 h3 h4 h5 h6".split(" "),
d)},isHeading:function(a,b){var d=a.property().name(b);return c.contains("h1 h2 h3 h4 h5 h6".split(" "),d)},isContainer:function(a,b){return c.contains("div li td th blockquote body caption".split(" "),a.property().name(b))},isEmptyTag:a,isFrame:function(a,b){return"iframe"===a.property().name(b)},isInline:function(c,d){return!(b(c,d)||a(c,d))&&"li"!==c.property().name(d)}}});l("f7",["e7","lx"],function(c,d){var b=c();return{isBlock:function(a){return d.isBlock(b,a)},isList:function(a){return d.isList(b,
a)},isFormatting:function(a){return d.isFormatting(b,a)},isHeading:function(a){return d.isHeading(b,a)},isContainer:function(a){return d.isContainer(b,a)},isEmptyTag:function(a){return d.isEmptyTag(b,a)},isFrame:function(a){return d.isFrame(b,a)},isInline:function(a){return d.isInline(b,a)}}});l("qv","b ds f7 1b l 3c 21 4i 2q 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m){return{merge:function(n){var p=function(a){return m.nextSibling(a).each(function(a){if(b.isBlock(a))return!0;if(b.isEmptyTag(a))return"img"===
g.name(a)?!1:!0}).getOr(!1)},q=function(c){return d.lastCursor(c).bind(function(d){var f=p(d);return m.parent(d).map(function(k){var m;(m=!0===f)||(m="li"===g.name(k)||h.ancestor(k,b.isList).isSome()||"br"===g.name(d)||b.isBlock(k)&&!a.eq(c,k));return m?[]:[e.fromTag("br")]})}).getOr([])},r=function(){return c.bind(n,function(a){var b=m.children(a);return 1<b.length||1==b.length&&"br"!==g.name(b[0])?b.concat(q(a)):[]})}();k.empty(n[0]);f.append(n[0],r)}}});l("te",["b","7"],function(c,d){var b=function(a,
b){return c.map(a,function(a){return a[b]})},a=function(a,b){if(0===a.length)return 0;var d=a[0],h=c.findIndex(a,function(a){return!b(d,a)});return-1===h?a.length:h};return{subgrid:function(c,f,g,h){var k=c[f].slice(g),k=a(k,h);c=b(c,g).slice(f);h=a(c,h);return{colspan:d.constant(k),rowspan:d.constant(h)}}}});l("qy",["b","g7","te","qn"],function(c,d,b,a){return{toDetails:function(a,f){var g=c.map(a,function(a,b){return c.map(a,function(a,b){return!1})});return c.map(a,function(h,k){return c.bind(h,
function(c,h){if(!1===g[k][h]){for(var p=b.subgrid(a,k,h,f),q=p.rowspan(),r=p.colspan(),s=k;s<k+q;s++)for(var t=h;t<h+r;t++)g[s][t]=!0;return[d.detail(c,p.rowspan(),p.colspan())]}return[]})})},toGrid:function(b,c){for(var d=[],h=0;h<b.grid().rows();h++){for(var k=[],m=0;m<b.grid().columns();m++){var n=a.getAt(b,h,m).map(function(a){return a.element()}).getOrThunk(c.gap);k.push(n)}d.push(k)}return d}}});l("tf","b 1a l 2o 3c 2q 31 2a".split(" "),function(c,d,b,a,e,f,g,h){return{render:function(k,m){var n=
g.child(k,"tbody").getOrThunk(function(){var c=b.fromTag("tbody",h.owner(k).dom());a.append(k,c);return c});f.empty(n);var p=c.map(m,function(b){var e=b.element();f.empty(e);c.each(b.cells(),function(b){var c=b.element(),f=b.colspan();1===f?d.remove(c,"colspan"):d.set(c,"colspan",f);c=b.element();f=b.rowspan();1===f?d.remove(c,"rowspan"):d.set(c,"rowspan",f);a.append(e,b.element())});return e});e.append(n,p)}}});l("tg",["1a","2n","l"],function(c,d,b){return{col:function(a,e,f,g,h){var k=b.fromTag("div");
d.setAll(k,{position:"absolute",left:e-g/2+"px",top:f+"px",height:h+"px",width:g+"px"});c.set(k,"data-column",a);return k},row:function(a,e,f,g,h){var k=b.fromTag("div");d.setAll(k,{position:"absolute",left:e+"px",top:f-h/2+"px",height:h+"px",width:g+"px"});c.set(k,"data-row",a);return k}}});l("rv",["4g"],function(c){return{resolve:c.create("ephox-snooker").resolve}});l("ru","b tc qm qn tg rv 1y 2n 64 2o 3l 2q 4e 2r".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=f.resolve("resizer-bar"),
t=f.resolve("resizer-rows"),u=f.resolve("resizer-cols"),v=function(a){a=q.descendants(a.parent(),"."+s);c.each(a,p.remove)},w=function(a,b,e){var d=a.origin();c.each(b,function(b,c){b.each(function(b){b=e(d,b);g.add(b,s);m.append(a.parent(),b)})})},x=function(a,b,c,d){w(a,b,function(a,b){var f=e.col(b.col(),b.x()-a.left(),c.top()-a.top(),7,d);g.add(f,u);return f})},y=function(a,b,c,d){w(a,b,function(a,b){var f=e.row(b.row(),c.left()-a.left(),b.y()-a.top(),d,7);g.add(f,t);return f})},l=function(a,
b){var e=q.descendants(a.parent(),"."+s);c.each(e,b)};return{refresh:function(c,e,f,g){v(c,e);var h=b.fromTable(e),h=a.generate(h),m=d.rows(h),p=d.columns(h),h=n.absolute(e);f=0<m.length?f.positions(m,e):[];y(c,f,h,r.getOuter(e));g=0<p.length?g.positions(p,e):[];x(c,g,h,k.getOuter(e))},hide:function(a){l(a,function(a){h.set(a,"display","none")})},show:function(a){l(a,function(a){h.set(a,"display","block")})},destroy:v,isRowBar:function(a){return g.has(a,t)},isColBar:function(a){return g.has(a,u)}}});
l("qw","b 6 7 s k bf qm qy qn tf jo ru 1b 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=function(a,d){var f=function(a){return e.findMap(a,function(a){return r.parent(a.element())}).getOrThunk(function(){return d.row()})};return c.map(a,function(a){var c=f(a);return{element:b.constant(c),cells:b.constant(a)}})},t=function(b,e){var d=c.flatten(c.map(b.all(),function(a){return a.cells()})),d=c.find(d,function(a){return q.eq(e,a.element())});return a.from(d)};return{run:function(c,e,d,f,
r){return function(t,l,D,B,C){var F=g.fromTable(l),E=k.generate(F);return e(E,D).map(function(a){var e=h.toGrid(E,B);a=c(e,a,q.eq,r(B));e=a.grid();e=h.toDetails(e,q.eq);e=s(e,B);return{grid:b.constant(e),cursor:a.cursor}}).fold(function(){return a.none()},function(a){m.render(l,a.grid());d(a.grid(),C);f(l);p.refresh(t,l,n.height,C);return a.cursor()})}},onCell:function(a,b){return f.cell(b.element()).bind(function(b){return t(a,b)})},onCells:function(b,d){var g=c.map(d.selection(),function(a){return f.cell(a).bind(function(a){return t(b,
a)})}),g=e.cat(g);return 0<g.length?a.some(g):a.none()},onPaste:function(a,b){return f.cell(b.element()).bind(function(c){return t(a,c).map(function(a){return d.merge(a,{generators:b.generators,clipboard:b.clipboard})})})},onMergable:function(a,b){return b.mergable()},onUnmergable:function(a,b){return b.unmergable()}}});l("th","b 7 p td 9 n 1s".split(" "),function(c,d,b,a,e,f,g){var h=function(a,b){return c.map(a,b.cell)},k=function(b,c,e){return b.concat(a.repeat(c,function(a){return h(b[0],e)}))},
m=function(b,e,d){return c.map(b,function(b){return b.concat(h(a.range(0,e),d))})};return{measure:function(a,c,e){if(a.row()>=c.length||a.column()>c[0].length)return b.error("invalid start address out of table bounds, row: "+a.row()+", column: "+a.column());c=c.slice(a.row());a=c[0].slice(a.column());var f=e[0].length;return b.value({rowDelta:d.constant(c.length-e.length),colDelta:d.constant(a.length-f)})},tailor:function(a,b,c,e){var f=0>c.colDelta()?m:d.identity;a=0>c.rowDelta()?k:d.identity;b=
f(b,g.abs(c.colDelta()),e);return a(b,g.abs(c.rowDelta()),e)}}});l("qz",[],function(){return{merge:function(c,d,b,a){if(0===c.length)return c;for(b=d.startRow();b<=d.finishRow();b++)for(var e=d.startCol();e<=d.finishCol();e++)c[b][e]=a();return c},unmerge:function(c,d,b,a){for(var e=!0,f=0;f<c.length;f++)for(var g=0;g<c[0].length;g++){var h=b(c[f][g],d);!0===h&&!1===e?c[f][g]=a():!0===h&&(e=!1)}return c}}});l("qx",["7","th","qz"],function(c,d,b){return{merge:function(a,e,f,g,h){return d.measure(a,
e,f).map(function(k){k=d.tailor(a,e,k,g);for(var m=a.row(),n=a.column(),p=m+f.length,q=n+f[0].length,r=m;r<p;r++)for(var s=n;s<q;s++){var t=k,u=r,v=s,w=c.curry(h,t[u][v]),x=t[u];1<t.length&&1<x.length&&(0<v&&w(x[v-1])||v<x.length-1&&w(x[v+1])||0<u&&w(t[u-1][v])||u<t.length-1&&w(t[u+1][v]))&&b.unmerge(k,k[r][s],h,g.cell);k[r][s]=g.replace(f[r-m][s-n])}return k})}}});l("r0",["b"],function(c){return{insertRowAt:function(d,b,a,e,f){var g=d.slice(0,b),h=d.slice(b);a=c.map(d[a],function(a,c){return 0<b&&
b<d.length&&e(d[b-1][c],d[b][c])?d[b][c]:f(a,e)});return g.concat([a]).concat(h)},insertColumnAt:function(d,b,a,e,f){return c.map(d,function(c){var d=0<b&&b<c.length&&e(c[b-1],c[b])?c[b]:f(c[a],e);return c.slice(0,b).concat([d]).concat(c.slice(b))})},splitCellIntoColumns:function(d,b,a,e,f){var g=a+1;return c.map(d,function(c,d){var m=d===b?f(c[a],e):c[a];return c.slice(0,g).concat([m]).concat(c.slice(g))})},splitCellIntoRows:function(d,b,a,e,f){var g=b+1,h=d.slice(0,g),g=d.slice(g);d=c.map(d[b]||
[],function(b,c){return c===a?f(b,e):b});return h.concat([d]).concat(g)},deleteRowAt:function(c,b){return c.slice(0,b).concat(c.slice(b+1))},deleteRowsAt:function(c,b,a){return c.slice(0,b).concat(c.slice(a+1))},deleteColumnAt:function(d,b){return c.map(d,function(a){return a.slice(0,b).concat(a.slice(b+1))})},deleteColumnsAt:function(d,b,a){return c.map(d,function(c){return c.slice(0,b).concat(c.slice(a+1))})}}});l("r1",["b","7"],function(c,d){var b=function(a,b,f,g){return c.map(a,function(a){return c.map(a,
function(a){return c.exists(b,d.curry(f,a))?g(a,f):a})})};return{replaceColumn:function(a,e,d,g){var h=c.bind(a,function(b,c){return void 0!==a[c][e]&&0<c&&d(a[c-1][e],a[c][e])||0<e&&d(b[e-1],b[e])?[]:[b[e]]});return b(a,h,d,g)},replaceRow:function(a,e,d,g){var h=a[e],k=c.bind(h,function(b,c){return void 0!==a[e][c]&&0<e&&d(a[e-1][c],a[e][c])||0<c&&d(h[c-1],h[c])?[]:[b]});return b(a,k,d,g)}}});l("ti",[],function(){var c=function(c){return{fold:c}};return{none:function(){return c(function(c,b,a,e,
f){return c()})},only:function(d){return c(function(b,a,c,f,g){return a(d)})},left:function(d,b){return c(function(a,c,f,g,h){return f(d,b)})},middle:function(d,b,a){return c(function(c,f,g,h,k){return h(d,b,a)})},right:function(d,b){return c(function(a,c,f,g,h){return h(d,b)})}}});l("r2",["b","7","ti","1s"],function(c,d,b,a){var e=function(a,c){return 0===a.length?b.none():1===a.length?b.only(0):0===c?b.left(0,1):c===a.length-1?b.right(c-1,c):0<c&&c<a.length-1?b.middle(c-1,c,c+1):b.none()};return{determine:function(b,
g,h,k){var m=b.slice(0);b=e(b,g);var n=function(a){return c.map(a,d.constant(0))};g=d.constant(n(m));var p=function(b,c){if(0<=h){var e=a.max(k,m[c]-h);return n(m.slice(0,b)).concat([h,e-m[c]]).concat(n(m.slice(c+1)))}var e=a.max(k,m[b]+h),d=m[b]-e;return n(m.slice(0,b)).concat([e-m[b],d]).concat(n(m.slice(c+1)))};return b.fold(g,function(b){return[a.max(k,m[b]+h)-m[b]]},p,function(a,b,c){return p(b,c)},function(b,c){if(0<=h)return n(m.slice(0,c)).concat([h]);var e=a.max(k,m[c]+h);return n(m.slice(0,
c)).concat([e-m[c]])})}}});l("r4",["b","7","qn","dp"],function(c,d,b,a){var e=function(b,c,e){for(var d=0;b<c;b++)d+=void 0!==e[b]?a(e[b],10):0;return d};return{recalculateWidth:function(a,g){var h=b.justCells(a);return c.map(h,function(a){var b=e(a.column(),a.column()+a.colspan(),g);return{element:a.element,width:d.constant(b),colspan:a.colspan}})},recalculateHeight:function(a,g){var h=b.justCells(a);return c.map(h,function(a){var b=e(a.row(),a.row()+a.rowspan(),g);return{element:a.element,height:d.constant(b),
rowspan:a.rowspan}})},matchRowHeight:function(a,b){return c.map(a.all(),function(a,c){return{element:a.element,height:d.constant(b[c])}})}}});l("jm","b r2 qm qn r3 r4 r5 r6 31 1s".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(a){return c.foldr(a,function(a,b){return a+b},0)},p=function(c){c=b.fromTable(c);return a.generate(c)};return{adjustWidth:function(a,b,k,m){var u=p(a),v=e.getPixelWidths(u,m);b=d.determine(v,k,b,h.minWidth());b=c.map(b,function(a,b){return a+v[b]});u=f.recalculateWidth(u,
b);c.each(u,function(a){g.setWidth(a.element(),a.width())});u=n(b);g.setWidth(a,u)},adjustHeight:function(a,b,d,k){var u=p(a);k=e.getPixelHeights(u,k);k=c.map(k,function(a,c){return d===c?m.max(b+a,h.minHeight()):a});var v=f.recalculateHeight(u,k),u=f.matchRowHeight(u,k);c.each(u,function(a){g.setHeight(a.element(),a.height())});c.each(v,function(a){g.setHeight(a.element(),a.height())});u=n(k);g.setHeight(a,u)},adjustWidthTo:function(b,d){var h=a.generate(b),m=e.getPixelWidths(h,d),h=f.recalculateWidth(h,
m);c.each(h,function(a){g.setWidth(a.element(),a.width())});var n=c.foldr(m,function(a,b){return b+a},0);0<h.length&&k.ancestor(h[0].element(),"table").each(function(a){g.setWidth(a,n)})}}});l("jk","b 7 s 2u qu g7 qv bf qm qw qx qy qn qz r0 r1 jm 2q dp".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w){w=function(a){0===h.cells(a).length&&v.remove(a)};var x=a.immutable("grid","cursor"),y=function(a,b,c){return l(a,b,c).orThunk(function(){return l(a,0,0)})},l=function(a,c,e){return b.from(a[c]).bind(function(a){return b.from(a[e])})},
A=function(a,b,c){return x(a,l(a,b,c))};a=u.adjustWidthTo;return{insertRowBefore:m.run(function(a,b,c,e){var d=b.row(),f=b.row();a=s.insertRowAt(a,f,d,c,e.getOrInit);return A(a,f,b.column())},m.onCell,d.noop,d.noop,e.modification),insertRowAfter:m.run(function(a,b,c,e){var d=b.row(),f=b.row()+b.rowspan();a=s.insertRowAt(a,f,d,c,e.getOrInit);return A(a,f,b.column())},m.onCell,d.noop,d.noop,e.modification),insertColumnBefore:m.run(function(a,b,c,e){var d=b.column(),f=b.column();a=s.insertColumnAt(a,
f,d,c,e.getOrInit);return A(a,b.row(),f)},m.onCell,a,d.noop,e.modification),insertColumnAfter:m.run(function(a,b,c,e){var d=b.column(),f=b.column()+b.colspan();a=s.insertColumnAt(a,f,d,c,e.getOrInit);return A(a,b.row(),f)},m.onCell,a,d.noop,e.modification),splitCellIntoColumns:m.run(function(a,b,c,e){a=s.splitCellIntoColumns(a,b.row(),b.column(),c,e.getOrInit);return A(a,b.row(),b.column())},m.onCell,a,d.noop,e.modification),splitCellIntoRows:m.run(function(a,b,c,e){a=s.splitCellIntoRows(a,b.row(),
b.column(),c,e.getOrInit);return A(a,b.row(),b.column())},m.onCell,d.noop,d.noop,e.modification),eraseColumns:m.run(function(a,b,e,d){e=c.foldl(b,function(a,b){return c.contains(a,b.column())?a:a.concat([b.column()])},[]).sort();a=s.deleteColumnsAt(a,e[0],e[e.length-1]);b=y(a,b[0].row(),b[0].column());return x(a,b)},m.onCells,a,w,e.modification),eraseRows:m.run(function(a,b,e,d){e=c.foldl(b,function(a,b){return c.contains(a,b.row())?a:a.concat([b.row()])},[]).sort();a=s.deleteRowsAt(a,e[0],e[e.length-
1]);b=y(a,b[0].row(),b[0].column());return x(a,b)},m.onCells,d.noop,w,e.modification),makeColumnHeader:m.run(function(a,b,c,e){a=t.replaceColumn(a,b.column(),c,e.replaceOrInit);return A(a,b.row(),b.column())},m.onCell,d.noop,d.noop,e.transform("row","th")),unmakeColumnHeader:m.run(function(a,b,c,e){a=t.replaceColumn(a,b.column(),c,e.replaceOrInit);return A(a,b.row(),b.column())},m.onCell,d.noop,d.noop,e.transform(null,"td")),makeRowHeader:m.run(function(a,b,c,e){a=t.replaceRow(a,b.row(),c,e.replaceOrInit);
return A(a,b.row(),b.column())},m.onCell,d.noop,d.noop,e.transform("col","th")),unmakeRowHeader:m.run(function(a,b,c,e){a=t.replaceRow(a,b.row(),c,e.replaceOrInit);return A(a,b.row(),b.column())},m.onCell,d.noop,d.noop,e.transform(null,"td")),mergeCells:m.run(function(a,c,e,f){f=c.cells();g.merge(f);a=r.merge(a,c.bounds(),e,d.constant(f[0]));return x(a,b.from(f[0]))},m.onMergable,d.noop,d.noop,e.merging),unmergeCells:m.run(function(a,e,d,f){a=c.foldr(e,function(a,b){return r.unmerge(a,b,d,f.combine(b))},
a);return x(a,b.from(e[0]))},m.onUnmergable,a,d.noop,e.merging),pasteCells:m.run(function(a,c,e,d){d=function(a,b){var c=k.fromTable(a),c=q.generate(c);return p.toGrid(c,b)}(c.clipboard(),c.generators());var g=f.address(c.row(),c.column());return n.merge(g,a,d,c.generators(),e).fold(function(){return x(a,b.some(c.element()))},function(a){var b=y(a,c.row(),c.column());return x(a,b)})},m.onPaste,a,d.noop,e.modification)}});l("2f","l 48 2o 3c 2q 2a".split(" "),function(c,d,b,a,e,f){var g=function(a){return a.dom().innerHTML};
return{get:g,set:function(g,k){var m=f.owner(g).dom(),n=c.fromDom(m.createDocumentFragment()),m=d.fromHtml(k,m);a.append(n,m);e.empty(g);b.append(g,n)},getOuter:function(a){var e=c.fromTag("div");a=c.fromDom(a.dom().cloneNode(!0));b.append(e,a);return g(e)}}});l("rr","b 7 p jf b6 je jj jk 1a l 2f 2o 2q 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=function(a){return function(e,d){return c.foldl(a,function(a,b){return a.bind(function(a){return w(d,function(a){return v(b,e,d,a)})})},b.value(d))}},
t=s([h.makeRowHeader,h.makeColumnHeader]),u=s([h.makeRowHeader]);h=s([h.makeColumnHeader]);var v=function(b,c,f,g){return e.fromEngine(c).bind(function(e){e=d.constant(e);var h=d.noop;return a.execute(c.region(),b,h,e)(c.content(),f,{element:d.constant(g)})})},w=function(a,c){return r.descendant(a,"td,th").bind(function(a){return c(a)}).fold(function(){return b.error("Could not run the operation on table")},function(c){return b.value(a)})};return{setCaption:function(a,b){var c=r.child(a,"caption").fold(function(){return m.fromTag("caption")},
function(a){q.empty(a);return a});n.set(c,b);p.prepend(a,c)},setSummary:function(a,b){k.set(a,"summary",b)},setDimensions:function(a,b){g.redistribute(a,b.width(),b.height(),"rtl"===k.get(a,"dir")?f.rtl:f.ltr)},addBothHeaders:t,addRowHeader:u,addColumnHeader:h}});l("l7","7 p tb rr 1a 2f 31".split(" "),function(c,d,b,a,e,f,g){return function(h){var k=b(h);return{changeCaption:function(b,c,d,f){var g=e.get(b,"summary");return k.different(b,c,g,d,f).map(function(b){a.setCaption(b,c);return b})},changeSummary:function(b,
c,e,d){var h=g.descendant(b,"caption").map(f.get).getOr("");return k.different(b,c,h,e,d).map(function(b){a.setSummary(b,c);return b})},setHeaders:function(b,e,d,f){return(!0===d&&!0===f?a.addBothHeaders:!0===d?a.addRowHeader:!0===f?a.addColumnHeader:c.constant(k.invalidError("a11y.t4b.repair.errors.none")))(b,e)},setScope:function(a,b){e.set(a,"scope",b);return d.value(a)}}}});l("l8",["4n","2u"],function(c,d){var b=c.generate([{field:["name","textkey","f"]},{select:["name","textkey","values"]},{toggles:["name",
"textkey","options"]}]),a=d.immutable("value","text"),e=d.immutable("value","icon","textkey");return{field:b.field,select:b.select,toggles:b.toggles,pair:a,toggle:e,cata:function(a,b,c,e){return a.fold(b,c,e)}}});l("cg","b 7 s p l5 l6 l7 2u 1a l l8".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return function(p){var q=h.immutableBag("id description prompts element severity url repair".split(" "),[]),r=h.immutableBag(["ui","repair"],[]),s=f(p),t=g(p),u={I1:b.some(r({ui:[n.field("image-alt","a11y.i1.repair.info",
d.constant(""))],repair:function(a,b,c){return s.changeAlt(b.element(),c["image-alt"](),"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate")}})),I2:b.some(r({ui:[n.field("image-alt","a11y.i2.repair.info",function(a){return k.get(a.element(),"alt")})],repair:function(a,b,c){return s.changeAlt(b.element(),c["image-alt"](),"a11y.i2.repair.errors.empty","a11y.i2.repair.errors.duplicate")}})),T1:b.some(r({ui:[n.field("table-caption","a11y.t1.repair.info",d.constant(""))],repair:function(a,
b,c){return t.changeCaption(b.element(),c["table-caption"](),"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate")}})),T2:b.some(r({ui:[n.field("table-summary","a11y.t2.repair.info",d.constant(""))],repair:function(a,b,c){return t.changeSummary(b.element(),c["table-summary"](),"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate")}})),T3:b.some(r({ui:[n.field("table-caption","a11y.t3.repair.info",function(a){return k.get(a.element(),"summary")})],repair:function(a,b,c){return t.changeCaption(b.element(),
c["table-caption"](),"a11y.t3.repair.errors.empty","a11y.t3.repair.errors.duplicate")}})),T4A:b.none(),T4B:b.some(r({ui:[n.toggles("table-headers","a11y.t4b.repair.info",[n.toggle("row-header","ephox-polish-row-header","a11y.t4b.repair.row"),n.toggle("col-header","ephox-polish-column-header","a11y.t4b.repair.column")])],repair:function(a,b,c){var e=c["row-header"]();c=c["col-header"]();return t.setHeaders(a,b.element(),e,c)}})),T4C:b.some(r({ui:[n.select("scope-type","a11y.t4c.repair.info",[n.pair("row",
"a11y.t4c.repair.scope.row"),n.pair("col","a11y.t4c.repair.scope.col"),n.pair("rowgroup","a11y.t4c.repair.scope.rowgroup"),n.pair("colgroup","a11y.t4c.repair.scope.colgroup")])],repair:function(a,b,c){return t.setScope(b.element(),c["scope-type"]())}})),D1:b.some(r({ui:[n.select("heading-type","a11y.d1.repair.info",[n.pair("h1","a11y.d1.repair.block.h1"),n.pair("h2","a11y.d1.repair.block.h2"),n.pair("h3","a11y.d1.repair.block.h3"),n.pair("h4","a11y.d1.repair.block.h4"),n.pair("h5","a11y.d1.repair.block.h5"),
n.pair("h6","a11y.d1.repair.block.h6")])],repair:function(a,b,c){return e.convertToHeading(b.element(),c["heading-type"]())}})),D2:b.none(),D3:b.some(r({ui:[],repair:function(a,b,c){return e.joinLinks(a.content().isRoot,b.element())}})),D4:b.none(),D5:b.none(),O1:b.none(),O2:b.none()};return{convert:function(e,d){var f=function(a){var b=a.repair();return function(a,c){return e.undo().transaction(function(){return b(e,a,c)})}};return c.map(d,function(c){var e=c.rule(),d=e.id().toUpperCase(),g=void 0!==
u[d]?u[d]:b.none(),h=e.desckey();return q({id:d,description:h,prompts:g.map(function(a){return a.ui()}),element:m.fromDom(c.element()),url:e.url(),severity:e.severity(),repair:g.map(f).getOr(function(){return a.error("no repair")})})})}}}});l("ch","b s 1a 4h 1y 4b 4e o".split(" "),function(c,d,b,a,e,f,g,h){var k=function(e,g){c.each(e,function(b){g.get(b.severity()).fold(function(){h.warn("unknown severity for accessibility rule: ",b.id(),b.severity())},function(c){f.add(b.element(),[g.violation(),
c.style()]);a.add(b.element(),c.attribute(),b.id())})});d.from(e[0]).each(function(a){var c=a.element(),e=g.currentAttr();a=a.severity();b.set(c,e,a)})},m=function(a,e,d,f){a=g.descendants(a,"["+e+"]");c.each(a,function(a){b.remove(a,e)});b.set(d,e,f)},n=function(a,d){var f=g.descendants(a,"."+d.violation());c.each(f,function(a){e.remove(a,d.violation());b.remove(a,d.currentAttr());c.each(d.all(),function(c){e.remove(a,c.style());b.remove(a,c.attribute())})})},p=function(b,d,f){var g=function(c){return 0===
a.read(b,c.attribute()).length};d.get(f).each(function(a){g(a)&&e.remove(b,a.style())});c.forall(d.all(),g)&&e.remove(b,d.violation())},q=function(c,e,d,f){e.get(f).each(function(f){a.remove(c,f.attribute(),d);a.add(c,e.ignoreAttr(),d);f=e.currentAttr();b.remove(c,f)})},r=function(c,e,d,f){e.get(f).each(function(f){a.remove(c,f.attribute(),d);f=e.currentAttr();b.remove(c,f)})};return{manager:function(a){var b=a.content();return{start:function(b){k(b,a)},moveTo:function(c,e){b.body().each(function(b){m(b,
a.currentAttr(),c,e)})},stop:function(){b.body().each(function(b){n(b,a)})},ignore:function(b,c,e){q(b,a,c,e);p(b,a,e)},solve:function(b,c,e){r(b,a,c,e);p(b,a,e)}}}}});l("ci","b 1a 1y 3c 2q 2a".split(" "),function(c,d,b,a,e,f){var g=function(a){return function(b){c.each(b,a)}},h=g(e.remove),k=g(function(a){d.set(a,"class","")}),m=g(function(b){var c=f.children(b);a.before(b,c);e.remove(b)});return{remove:h,clearClasses:k,removeClass:function(a){return g(function(c){b.remove(c,a)})},removeAttr:function(a){return g(function(b){d.remove(b,
a)})},unwrap:m}});l("72","b 7 s ch 33 2u ci".split(" "),function(c,d,b,a,e,f,g){var h=function(a){return"data-"+e.resolve(a)},k=h("a11y-current-violation"),m=e.resolve("a11y-violation"),n=e.resolve("a11y-severity-info"),p=e.resolve("a11y-severity-warn"),q=e.resolve("a11y-severity-error"),r=h("a11y-ignore"),s=h("a11y-error"),t=h("a11y-warning"),u=h("a11y-info");f=f.immutableBag(["style","attribute"],[]);var v=f({style:q,attribute:s}),w=f({style:p,attribute:t}),x=f({style:n,attribute:u}),y=function(a){return"error"===
a?b.some(v):"warning"===a?b.some(w):"info"===a?b.some(x):b.none()};return{configure:function(a){a.addSelector(a.output(),"["+r+"]",g.removeAttr(r));c.each([a.output(),a.input(),a.history(),a.internal()],function(b){c.each([m,n,p,q],function(c){a.add(b,c,g.removeClass(c))});c.each([k,s,t,u],function(c){a.addSelector(b,"["+c+"]",g.removeAttr(c))})})},ignoreAttr:d.constant(r),manager:function(b){return a.manager({content:d.constant(b),violation:d.constant(m),currentAttr:d.constant(k),ignoreAttr:d.constant(r),
get:y,all:d.constant([v,w,x])})}}});l("ex",["2u"],function(c){var d=c.immutable("element","offset"),b=c.immutable("element","deltaOffset"),a=c.immutable("element","start","finish"),e=c.immutable("begin","end");c=c.immutable("element","text");return{point:d,delta:b,range:a,points:e,text:c}});l("fp","80 ex 1a 21 at 2a".split(" "),function(c,d,b,a,e,f){var g=function(a){return"false"===b.get(a,"contenteditable")},h=function(a){a=a[a.length-1];var b=c.getEnd(a);return d.point(a,b)};return{descend:function(b,
c){var g=f.children(b);if(0===g.length)return d.point(b,c);if(c<g.length)return d.point(g[c],0);var g=g[g.length-1],h=a.isText(g)?e.get(g).length:f.children(g).length;return d.point(g,h)},descendUntilLeaf:function(a,b){var c=d.point(a,b),e=function(a){return g(a.element())?c:f.child(a.element(),a.offset()).fold(function(){return a},function(a){return e(d.point(a,0))})},q=f.children(a);return 0<q.length&&b<q.length?e(d.point(q[b],0)):0<q.length&&b===q.length?e(h(q)):c}}});l("cj","58 7 fp 2n l 64 2o 3l 21 2q 29 2a 1s dp".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=function(b){var c=r(a.get(b,"padding-top"),10),e=r(a.get(b,"padding-bottom"),10);b=p.owner(b);return n.get(b).top()-(c+e)},t=function(a,k){var n=b.descend(a,k),p=e.fromText(c.zeroWidth()),q=e.fromTag("span");g.append(q,p);g.before(n.element(),q);n=h.absolute(q);p=f.get(q);return{element:d.constant(q),bottom:d.constant(n.top()+p),pos:d.constant(n),cleanup:function(){m.remove(q)}}},u=function(a){var b=h.absolute(a),c=f.get(a);return{element:d.constant(a),
bottom:d.constant(b.top()+c),pos:d.constant(b),cleanup:d.noop}},v=function(b,c){b.getSelection().each(function(e){b.body().each(function(d){b.win().each(function(b){a.reflow(d);var f=s(d),g=t(e.startContainer(),e.startOffset());c(b,f,g);g.cleanup()})})})},w=function(a,b,c){a.body().each(function(e){a.win().each(function(a){c(a,s(e),b)})})},x=function(a,b,c){var e=a.innerHeight,d=c.pos();c.bottom()>e+b?(b=d.top()-e+1.5*f.get(c.element()),a.scrollTo(d.left(),b)):d.top()<b&&a.scrollTo(d.left(),d.top())},
y=function(b,c,e,d){b.body().each(function(g){var h=f.get(b.element()),k;k=g.dom();k=q.max(k.offsetHeight,k.scrollHeight);var m=d.pos();d.bottom()>k?a.set(g,"min-height",d.bottom()+"px"):a.remove(g,"min-height");(m.top()>h+e||m.top()<e)&&c.scrollTo(m.left(),m.top())})},l=function(a){v(a,x)},A=function(a,b){w(a,u(b),x)},D=function(a){v(a,d.curry(y,a))},B=function(a,b){w(a,u(b),d.curry(y,a))};return{cursorIntoView:function(a){(a.isInline()?l:D)(a)},elementIntoView:function(a,b){(a.isInline()?A:B)(a,
b)},putInView:function(a,b,c,e){p.parent(e).each(function(d){var g=k.isText(e)||"br"===k.name(e)?d:e;d=f.get(c.element());var m=n.get(a),g=h.absolute(g),p=m.top(),r=p+d;(g.top()>r||g.top()<p)&&b.scrollTo(m.left(),q.max(0,g.top()-d/2))})},createMarker:t}});l("lc","85 2z 4z 7 75 33 1a 1y 4b l 2o 3c 21".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=function(a,b,c){a=m.fromTag(a);c=e.translate(c);return s(a,b,c)},s=function(a,e,d){d=c.labelledField(a,e,d);h.add(d.element(),f.resolve("form-group"));
h.add(d.element(),f.resolve(e));"select"===q.name(a)&&(a=b.div(),h.add(a,f.resolve("select-wrap")),n.append(a,d.field()),n.append(d.element(),a));return d};return{input:function(a,b){var c=r("input",a,b);g.setAll(c.field(),{type:"text"});return{element:c.element,input:c.field}},textarea:function(a,b){var e=r("textarea",a,b);c.multiline(e.field());return{element:e.element,textarea:e.field}},common:r,commonWith:s,comboBox:function(q,r,s){var w=m.fromTag("input"),x=e.translate(r);r=b.div();var y=q+d.generate(""),
x=m.fromHtml("<label>"+x+"</label>");g.set(x,"for",y);g.set(w,"id",y);h.add(r,f.resolve("form-group"));h.add(r,f.resolve(q));q=b.span();c.hidden(q,!0);y=b.span();c.hidden(y,!0);k.add(y,["ephox-textbox-font",f.resolve("icon"),f.resolve("combo-drop-arrow-icon")]);h.add(q,f.resolve("combo-drop-arrow"));n.append(q,y);var l=b.div();h.add(l,f.resolve("label-wrap"));s.each(function(a){n.append(l,a)});n.append(l,x);s=b.div();h.add(s,f.resolve("combo-wrap"));p.append(s,[w,q]);g.set(w,"type","text");p.append(r,
[l,s]);return{element:a.constant(r),input:a.constant(w),dropArrow:a.constant(q)}}}});l("gn","85 f8 4z h7 e4 7 75 33 46 47 1a 1y 3c".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=function(a){p.add(a,h.resolve("dialog-button-default"))},s=function(a){p.add(a,h.resolve("dialog-button"))},t=function(b,f,k){var m=a(b+f);p.add(m.element(),h.resolve("dialog-"+f));b=e(g.translate(k));m.content(b);n.set(m.element(),"tabindex","-1");c.textButton(m.element(),b.element());return{enable:function(){m.enable();
d.enable(m.element())},disable:function(){m.disable();d.disable(m.element())},element:m.element,name:m.name,destroy:m.destroy,content:m.content,disabled:m.disabled,click:m.click,events:m.events}},u=function(a){a=t(a,"ok","button.ok");r(a.element());return a},v=function(a){a=t(a,"cancel","button.cancel");s(a.element());return a};return{button:t,okCancel:function(a){var c=void 0!==a?a+"-":"";a=b.div();p.add(a,h.resolve(c+"dialog-controls"));var e=v(c),d=u(c);q.append(a,[e.element(),d.element()]);c=
k.create({ok:m([],d.events.click),cancel:m([],e.events.click)});return{element:f.constant(a),ok:f.constant(d),cancel:f.constant(e),destroy:function(){d.destroy();e.destroy()},events:c.registry}},makeNormal:s,makeDefault:r}});l("ck","85 h7 h8 e4 lb lc gn 33 1a 1y 4b 2y".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=function(a,b){var e=a(),d=e.element();c.button(d,b);k.set(d,"tabindex","-1");e.events.click.bind(function(){p.focus(d)});return e},r=function(a,c){var e=q(d,c);e.content(b([a,h.resolve("icon")]));
k.set(e.element(),"title",c);return e};return{setDefaultAction:function(a){g.makeDefault(a)},setNormalButton:function(a){g.makeNormal(a)},makeTextButton:function(b,c,e){c=q(d,c);n.add(c.element(),b);c.content(a(e));return c},makeIconToggle:function(a,c,d){var f=q(e,d);f.content(b([c,h.resolve("icon")]));m.add(f.element(),h.resolve("choice-button"));k.set(f.element(),"data-value",a);k.set(f.element(),"title",d);return f},makeField:function(a,b,c){return f.commonWith(a,b,c)},makeIconButton:r,makeIconStepperButton:function(a,
b){var c=r(a,b);m.add(c.element(),h.resolve("stepper-button"));return c}}});l("cl",["s","75","9"],function(c,d,b){var a={"a11y.widget.ok.label":"button.ok","a11y.widget.ok.text":"button.ok","a11y.widget.ignore.label":"a11y.widget.ignore","a11y.widget.ignore.text":"a11y.widget.ignore","a11y.widget.repair.label":"a11y.widget.repair","a11y.widget.repair.text":"a11y.widget.repair","a11y.widget.repair.available":"a11y.widget.available","a11y.i1.description":"a11y.image.alttext.empty","a11y.i1.repair.info":"a11y.image.alttext.set",
"a11y.i1.repair.errors.empty":"a11y.image.alttext.validation.empty","a11y.i1.repair.errors.duplicate":"a11y.image.alttext.validation.filenameduplicate","a11y.i2.description":"a11y.image.alttext.filenameduplicate","a11y.i2.repair.info":"a11y.image.alttext.set","a11y.i2.repair.errors.empty":"a11y.image.alttext.validation.empty","a11y.i2.repair.errors.duplicate":"a11y.image.alttext.validation.filenameduplicate","a11y.t1.description":"a11y.table.caption.empty","a11y.t1.repair.info":"a11y.table.caption.set",
"a11y.t1.repair.errors.empty":"a11y.table.caption.validation.empty","a11y.t1.repair.errors.duplicate":"a11y.table.caption.validation.summaryduplicate","a11y.t2.description":"a11y.table.summary.empty","a11y.t2.repair.info":"a11y.table.summary.set","a11y.t2.repair.errors.empty":"a11y.table.summary.validation.empty","a11y.t2.repair.errors.duplicate":"a11y.table.summary.validation.captionduplicate","a11y.t3.description":"a11y.table.caption.summaryduplicate","a11y.t3.repair.info":"a11y.table.caption.set",
"a11y.t3.repair.errors.empty":"a11y.table.caption.validation.empty","a11y.t3.repair.errors.duplicate":"a11y.table.caption.validation.summaryduplicate","a11y.t4a.description":"a11y.table.rowscells.none","a11y.t4b.description":"a11y.table.headers.none","a11y.t4b.repair.info":"a11y.table.headers.set","a11y.t4b.repair.row":"table.row-header","a11y.t4b.repair.column":"table.column-header","a11y.t4b.repair.errors.none":"a11y.table.headers.validation.none","a11y.t4c.description":"a11y.table.headerscope.none",
"a11y.t4c.repair.info":"a11y.table.headerscope.set","a11y.t4c.repair.scope.row":"a11y.table.headerscope.scope.row","a11y.t4c.repair.scope.col":"a11y.table.headerscope.scope.col","a11y.t4c.repair.scope.rowgroup":"a11y.table.headerscope.scope.rowgroup","a11y.t4c.repair.scope.colgroup":"a11y.table.headerscope.scope.colgroup","a11y.d1.description":"a11y.heading.paragraphmisuse","a11y.d1.repair.info":"a11y.heading.set","a11y.d1.repair.block.h1":"block.h1","a11y.d1.repair.block.h2":"block.h2","a11y.d1.repair.block.h3":"block.h3",
"a11y.d1.repair.block.h4":"block.h4","a11y.d1.repair.block.h5":"block.h5","a11y.d1.repair.block.h6":"block.h6","a11y.d2.description":"a11y.heading.nonsequential","a11y.d3.description":"a11y.link.adjacent","a11y.d4.description":"a11y.list.paragraphmisuse","a11y.d5a.description":"a11y.contrast.largetext","a11y.d5b.description":"a11y.contrast.smalltext"};return{get:function(b){return c.from(a[b])},translate:function(c){var f=b.prototype.slice.call(arguments,1);return d.translate.apply(void 0,[void 0!==
a[c]?a[c]:c].concat(f))}}});l("cm",["2u"],function(c){return c.immutableBag(["rules"],[])});l("tj",["2i"],function(c){return{filterAccept:function(){return c.getOrDie("NodeFilter").FILTER_ACCEPT},showElement:function(){return c.getOrDie("NodeFilter").SHOW_ELEMENT}}});l("tk",["2u"],function(c){return c.immutableBag(["rule","element"],[])});l("ld",["b","2b","tj","tk","q"],function(c,d,b,a,e){var f=function(a){return b.filterAccept()},g=function(b,e){return c.bind(e,function(c){return c.check()(b)?[a({rule:c,
element:b})]:[]})},h=function(b,e){return c.bind(e,function(e){return c.map(e.check()(b),function(b){return a({rule:e,element:b})})})};return{audit:function(a,m){for(var n=[],p=c.partition(m,function(a){return a.walkable()}),q=p.pass,p=p.fail,r=e.createTreeWalker(a,b.showElement(),f,!1);r.nextNode();)n=n.concat(g(r.currentNode,q));q=h(a,p);n=n.concat(q);n.sort(function(a,b){var c=a.element(),e=b.element();return c===e?0:d.documentPositionPreceding(c,e)?1:-1});return n}}});l("cn",["ld"],function(c){return function(d){return{audit:function(b){return c.audit(b,
d.rules())}}}});l("yw",["2u"],function(c){return c.immutableBag("id wcag severity desckey url walkable check".split(" "),[])});l("yx",["7"],function(c){return{error:c.constant("error"),warning:c.constant("warning"),info:c.constant("info")}});l("yy",[],function(){return{match:function(c,d){return c.matches?c.matches(d):c.webkitMatchesSelector?c.webkitMatchesSelector(d):c.mozMatchesSelector?c.mozMatchesSelector(d):c.msMatchesSelector?c.msMatchesSelector(d):!1}}});l("tl",["b","yw","yx","yy"],function(c,
d,b,a){var e=function(a){return c.forall(a.childNodes,function(a){return/^(b|strong)$/i.test(a.nodeName)})};return d({id:"D1",wcag:"1.3.1",severity:b.warning(),desckey:"a11y.d1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(b){return a.match(b,"p")?e(b):!1}})});l("tm",["b","yw","yx"],function(c,d,b){return d({id:"D2",wcag:"1.3.1",severity:b.error(),desckey:"a11y.d2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",
walkable:!1,check:function(a){a=a.querySelectorAll("h1, h2, h3, h4, h5, h6");var b,d=[];c.each(a,function(a){var c=parseInt(a.tagName.slice(1),10);b&&1<c-b&&d.push(a);b=c});return d}})});l("tn",["b","yw","yx"],function(c,d,b){return d({id:"D3",wcag:"2.4.4",severity:b.error(),desckey:"a11y.d3.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-refs.html",walkable:!1,check:function(a){return c.filter(a.querySelectorAll("a + a"),function(a){return a.href===a.previousSibling.href})}})});
l("yz",[],function(){var c=function(c){var b=c.nodeName;for(c=c.nextSibling;null!==c&&("#text"===c.nodeName||"BR"===c.nodeName);)c=c.nextSibling;return null!==c&&c.nodeName===b?c:!1};return{check:function(d,b){for(var a=d.querySelectorAll("p,h1,h2,h3,h4,h5,h6"),e=[],f=0;f<a.length;){var g,h=a[f];g=b;for(var k=c(h),h=g(h)?[h]:[];!1!==k&&g(k);)h.push(k),k=c(k);g=h;if(1<g.length){e.push(g[0]);g=g[g.length-1];k=-1;for(h=0;h<a.length;h++)if(a[h]===g){k=h;break}g=k;f=-1===g?f+1:g}else f++}return e}}});
l("to",["yw","yx","yz"],function(c,d,b){var a=function(a){return a.textContent.match(/^\s{0,}([a-z1-9]|i+)\s{0,}[.)-]/gmi)};return c({id:"D4o",wcag:"1.3.1",severity:d.error(),desckey:"a11y.d4.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(c){return b.check(c,a)}})});l("tp",["yw","yx","yz"],function(c,d,b){var a=function(a){return a.textContent.match(/^\s{0,}(\*|-)\s{0,}/gmi)};return c({id:"D4u",wcag:"1.3.1",severity:d.error(),
desckey:"a11y.d4.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(c){return b.check(c,a)}})});l("14k",["2u"],function(c){var d=c.immutable("red","green","blue","alpha");return{rgbaColour:d,white:function(){return d(255,255,255,1)}}});l("125",["14k","1s"],function(c,d){return{calculateContrastRatio:function(b,a){var c=d.max(b,a)+0.05,f=d.min(b,a)+0.05;return c/f},calculateLuminance:function(b){var a=function(a){return 0.03928>=
a?a/12.92:d.pow((a+0.055)/1.055,2.4)},c=b.red()/255,f=b.green()/255;b=b.blue()/255;c=a(c);f=a(f);a=a(b);return 0.2126*c+0.7152*f+0.0722*a},composeColour:function(b,a){var e=b.alpha()+a.alpha()*(1-b.alpha()),f=(b.red()*b.alpha()+a.red()*a.alpha()*(1-b.alpha()))/e,g=(b.green()*b.alpha()+a.green()*a.alpha()*(1-b.alpha()))/e,h=(b.blue()*b.alpha()+a.blue()*a.alpha()*(1-b.alpha()))/e;return c.rgbaColour(d.ceil(f),d.ceil(g),d.ceil(h),e)}}});l("14l",["s","14k"],function(c,d){return{parseColour:function(b){var a=
function(a,b,e,k){a=parseInt(a,10);b=parseInt(b,10);e=parseInt(e,10);k=parseFloat(k);return c.some(d.rgbaColour(a,b,e,k))};if("transparent"===b)return a(0,0,0,0);var e=b.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(null!==e)return a(e[1],e[2],e[3],1);b=b.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/);return null!==b?a(b[1],b[2],b[3],b[4]):c.none()}}});l("124","b s 125 14k 14l 2m 1b 2n 2a".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(b,c){var e=h.get(b,"opacity");return 1>e?a.rgbaColour(c.red(),
c.green(),c.blue(),c.alpha()*e):c};return{getBackgroundColor:function(n){var p=k.owner(n),q=f.getBody(p);n=[n].concat(k.parents(n,function(a){return g.eq(a,q)}));n=c.foldl(n,function(a,c){if(1===a.alpha())return a;var f=h.get(c,"background-color");return e.parseColour(f).bind(function(e){e=m(c,e);return 0<e.alpha()?d.some(b.composeColour(a,e)):d.none()}).getOr(a)},a.rgbaColour(0,0,0,0));return 1>n.alpha()?b.composeColour(n,a.white()):n},getForegroundColor:function(a,c){var f=h.get(a,"color");return e.parseColour(f).bind(function(e){e=
m(a,e);e=1>e.alpha()?b.composeColour(e,c):e;return d.some(e)})}}});l("z0",["s","124","125"],function(c,d,b){var a=function(a){var c=d.getBackgroundColor(a);return d.getForegroundColor(a,c).map(function(a){var e=b.calculateLuminance(c);a=b.calculateLuminance(a);return b.calculateContrastRatio(a,e)})};return{check:function(b,c){return a(b).filter(function(a){return a<c}).isSome()},getRatio:a}});ca("p2",Number);l("z1","7 s 2m 2n 2a p2 66".split(" "),function(c,d,b,a,e,f,g){var h=function(b){b=a.get(b,
"font-weight");return"bold"===b||"bolder"===b?!0:/^[0-9]*$/.test(b)?700<=parseInt(b,10):!1},k=function(b){var c=a.get(b,"font-size");b=(new g(".*px")).test(c);c=c.match(/(\d*\.?\d*)(.*)/);return b&&null!==c?d.some(f(c[1])):d.none()};return{isLargeFont:function(a){var d=h(a),f=e.owner(a),f=b.getBody(f),g=k(f);return k(a).fold(c.constant(!1),function(a){return g.fold(function(){return 24<=a||d&&19<=a},function(b){return a>=1.5*b||d&&a>=1.2*b})})}}});l("z2",["b","21","2a"],function(c,d,b){return{hasNonEmptyTextChild:function(a){a=
b.children(a);return 0<c.filter(a,function(a){return d.isText(a)&&0<d.value(a).trim().length}).length}}});l("tq","yw yx z0 z1 z2 l".split(" "),function(c,d,b,a,e,f){return c({id:"D5a",wcag:"1.4.3",severity:d.error(),desckey:"a11y.d5a.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(c){c=f.fromDom(c);return e.hasNonEmptyTextChild(c)&&a.isLargeFont(c)&&b.check(c,3)}})});l("tr","yw yx z0 z1 z2 l".split(" "),function(c,d,b,a,
e,f){return c({id:"D5b",wcag:"1.4.3",severity:d.error(),desckey:"a11y.d5b.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(c){c=f.fromDom(c);return e.hasNonEmptyTextChild(c)&&!a.isLargeFont(c)&&b.check(c,4.5)}})});l("ts",["yw","yx","yy"],function(c,d,b){return c({id:"I1",wcag:"1.1.1",severity:d.error(),desckey:"a11y.i1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/text-equiv-all.html",walkable:!0,check:function(a){return b.match(a,
"img")&&(!1===a.hasAttribute("alt")||""===a.getAttribute("alt").trim())}})});l("tt",["yw","yx","yy"],function(c,d,b){return c({id:"I2",wcag:"1.1.1",severity:d.error(),desckey:"a11y.i2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/text-equiv-all.html",walkable:!0,check:function(a){return b.match(a,"img[alt][src]")&&a.src.split("/").pop()===a.alt.split("/").pop()}})});l("tu",["yw","yx","yy"],function(c,d,b){return c({id:"T1",wcag:"1.3.1",severity:d.error(),desckey:"a11y.t1.description",
url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(a){return b.match(a,"table")?(a=a.querySelector("caption"))?b.match(a,":empty"):!0:!1}})});l("tv",["yw","yx","yy"],function(c,d,b){return c({id:"T2",wcag:"1.3.1",severity:d.warning(),desckey:"a11y.t2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(a){return b.match(a,"table")&&(a.querySelector("[rowspan]")||
a.querySelector("[colspan]"))&&!a.hasAttribute("summary")}})});l("tw",["yw","yx","yy"],function(c,d,b){return c({id:"T3",wcag:"1.3.1",severity:d.error(),desckey:"a11y.t3.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(a){return b.match(a,"table")&&a.hasAttribute("summary")&&0<a.querySelectorAll("caption").length&&a.getAttribute("summary")===a.querySelector("caption").innerHTML}})});l("tx",["yw","yx"],function(c,
d){return c({id:"T4b",wcag:"1.3.1",severity:d.error(),desckey:"a11y.t4b.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(b){return"table"===b.nodeName.toLowerCase()&&0===b.querySelectorAll("th").length}})});l("ty",["yw","yx"],function(c,d){return c({id:"T4c",wcag:"1.3.1",severity:d.error(),desckey:"a11y.t4c.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",
walkable:!0,check:function(b){var a;"th"===b.nodeName.toLowerCase()?(a=!1===b.hasAttribute("scope"),b=!1===/row|col|rowgroup|colgroup/i.test(b.getAttribute("scope")),a=a||b):a=!1;return a}})});l("tz",["yw","yx"],function(c,d){return c({id:"T4a",wcag:"1.3.1",severity:d.error(),desckey:"a11y.t4a.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(b){return"table"===b.nodeName.toLowerCase()?0===b.querySelectorAll("tr").length||
0===b.querySelectorAll("td").length:!1}})});l("le","b 7 s tl tm tn to tp tq tr ts tt tu tv tw tx ty tz".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v){var w=[a,e,f,g,h,k,m,n,p,q,r,s,u,v,t];return{get:function(a){return b.from(c.find(w,function(b){return b.name()===a}))},all:d.constant(w)}});l("co",["le"],function(c){return{get:function(d){return c.get(d)},all:function(){return c.all().slice()}}});l("lg",["s","4m","2u","1s"],function(c,d,b,a){return function(){var e=d([]),f=d(0),g=b.immutable("index",
"total","detail"),h=function(a){var b=e.get();if(0===b.length)return c.none();var d,h=f.get();d=b.length-1;a=h+a;d=a>d?0:0>a?d:a;f.set(d);return c.some(g(d,b.length,b[d]))};return{load:function(a){if(0===a.length)return c.none();f.set(0);e.set(a);return c.some(g(f.get(),a.length,a[0]))},backwards:function(){return h(-1)},current:function(){var a=e.get();return 0===a.length?c.none():c.some(g(f.get(),a.length,a[f.get()]))},resolve:function(){var b=e.get();if(0===b.length)return c.none();var b=b.slice(0,
f.get()).concat(b.slice(f.get()+1)),d=a.min(b.length-1,f.get());f.set(d);e.set(b);return 0===b.length?c.none():c.some(g(f.get(),b.length,b[f.get()]))},forwards:function(){return h(1)}}}});l("u0",["4g"],function(c){return{resolve:c.create("ephox-wheel").resolve}});l("lh",["v","u0","9"],function(c,d,b){return{resolve:function(a,b){return d.resolve(a.prefix()+"-"+b)},translate:function(a,e){var d=[(c.startsWith(e,a.tnames())?"":a.tnames()+".")+e].concat(b.prototype.slice.call(arguments,2));return a.translate.apply(null,
d)}}});l("u3",["lh"],function(c){var d=function(b,a,e,d,g){e=c.translate(g,e);d=c.translate(g,d);return b.makeTextButton(a,e,d)};return{defaultActionButton:function(b,a,c,f,g){a=d(b,a,c,f,g);b.setDefaultAction(a.element());return a},normalButton:function(b,a,c,f,g){a=d(b,a,c,f,g);b.setNormalButton(a.element());return a},button:d,toggleButton:function(b,a,e,d,g){d=c.translate(g,d);return b.makeIconToggle(a,e,d)},field:function(b,a,e,d,g){d=c.translate(g,d);return b.makeField(a,e,d)},icon:function(b,
a,e,d){e=c.translate(d,e);return b.makeIconStepperButton(a,e)}}});l("u1","b gk 8s 6 4z 7 s 55 46 2u 1a 1y l 2f 3c 31 32 lh u3".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w){var x=function(a,c,e,g,h,k){var m=q.fromTag("input");a=w.field(a,m,e,g,k);p.add(m,v.resolve(k,"input"));c=[b.input(m,d.input({execute:c}))];return{element:a.element,get:function(){var a={};a[e]=u.get(m);return a},update:function(a){a=h(a);u.set(m,a)},keylayouts:f.constant(c),destroy:f.noop}},y=function(a,e,d,h,k){var m=
q.fromTag("select");a=w.field(a,m,e,d,k);h=c.map(h,function(a){var b=q.fromTag("option");u.set(b,a.value());r.set(b,v.translate(k,a.text()));return b});s.append(m,h);h=[b.single(m,[],g.none())];return{element:a.element,get:function(){var a={};a[e]=u.get(m);return a},update:f.noop,keylayouts:f.constant(h),destroy:f.noop}},l=function(g,h,k,m,q){var r=e.div();p.add(r,v.resolve(q,"flow"));var u=c.map(m,function(a){return w.toggleButton(g,a.value(),a.icon(),a.textkey(),q)});m=c.map(u,function(a){return a.element()});
s.append(r,m);m=[b.flow(r,{item:f.constant(".ephox-pastry-statebutton")},d.flow({trigger:function(a){return t.descendant(a,".ephox-pastry-button").map(function(a){a.dom().click();return a})}}))];return{element:w.field(g,r,h,k,q).element,get:function(){return c.foldr(u,function(b,c){var e={};e[n.get(c.element(),"data-value")]=c.selected();return a.deepMerge(b,e)},{})},update:f.noop,keylayouts:f.constant(m),destroy:function(){c.each(u,function(a){a.destroy()})}}};return{generate:function(b,e,d,g){e=
e.getOr([]);var n=c.bind(e,function(a){return a.fold(function(a,b,c){return[a]},function(a,b,c){return[a]},function(a,b,e){return c.map(e,function(a){return a.value()})})}),p=0<n.length?m.immutableBag(n,[]):f.constant({}),q=k.create({execute:h([])}),r=function(){q.trigger.execute()},s=c.map(e,function(a){return a.fold(function(a,c,e){return x(b,r,a,c,e,g)},function(a,c,e){return y(b,a,c,e,g)},function(a,c,e){return l(b,a,c,e,g)})});c.each(s,function(a){a.update(d)});e=c.map(s,function(a){return a.element()});
var t=c.bind(s,function(a){return a.keylayouts()});return{elements:f.constant(e),get:function(){var b=c.foldr(s,function(b,c){return a.deepMerge(b,c.get())},{});return p(b)},keylayouts:f.constant(t),destroy:function(){c.each(s,function(a){a.destroy()});c.each(t,function(a){a.destroy()})},events:q.registry}}}});l("li","ag gk 8s 4z 7 s 55 46 1a 1y l 2f 2o 3c 2q lh u1".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u){return function(v,w){var x=a.div();m.add(x,t.resolve(w,"assistance"));var y=t.resolve(w,
"assistance-invalid"),l=f.none(),A=n.fromTag("p");m.add(A,t.resolve(w,"repair-error"));k.set(A,"aria-live","polite");var D=function(){m.remove(x,y);s.remove(A)},B=h.create({execute:g([])}),C=b.dynamic(x,d.dynamic({})),F=[C];return{element:e.constant(x),keylayouts:e.constant(F),markInvalid:function(a){m.add(x,y);c.shout(x,a);p.set(A,a);q.append(x,A)},markValid:D,getChange:function(){return l.map(function(a){return a.get()})},destroy:function(){l.each(function(a){a.destroy()})},update:function(a){D();
a=a.detail();var b=a.prompts();l.each(function(a){a.destroy()});a=u.generate(v,b,a,w);l=f.some(a);s.empty(x);r.prepend(x,a.elements());a.events.execute.bind(function(){B.trigger.execute()});C.set(a.keylayouts())},events:B.registry}}});l("u2",["7"],function(c){return{title:c.constant("widget.title"),running:c.constant("widget.running"),previous:c.constant("widget.previous"),next:c.constant("widget.next"),issueCounter:c.constant("widget.issue.counter"),issueHelp:c.constant("widget.issue.help"),noIssue:c.constant("widget.issue.none"),
severity:function(c){return"severity."+c},repairLabel:c.constant("widget.repair.label"),repairText:c.constant("widget.repair.text"),repairAvailable:c.constant("widget.repair.available"),ignoreLabel:c.constant("widget.ignore.label"),ignoreText:c.constant("widget.ignore.text"),okLabel:c.constant("widget.ok.label"),okText:c.constant("widget.ok.text")}});l("lj","f8 ag gk 8s 4z 7 46 47 2m 1y 2y 2o 3c 2q au lh u2 u3".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v){return function(w,x){var y=e.div();
m.add(y,t.resolve(x,"commands"));var l=e.div();m.add(l,t.resolve(x,"commands-buttons"));var A=v.defaultActionButton(w,[t.resolve(x,"repair")],u.repairLabel(),u.repairText(),x),D=v.normalButton(w,[t.resolve(x,"ignore")],u.ignoreLabel(),u.ignoreText(),x),B=v.defaultActionButton(w,[t.resolve(x,"ok")],u.okLabel(),u.okText(),x),C=function(){q.append(l,[D.element(),A.element()])};C();var F=b.button({execute:function(a){a.dom().click()}}),F=[a.button(D.element(),F),a.button(A.element(),F),a.button(B.element(),
F)];p.append(y,l);var E=g.create({repair:h([],A.events.click),ignore:h([],D.events.click),done:h([],B.events.click)});return{element:f.constant(y),destroy:function(){A.destroy();D.destroy();B.destroy()},keylayouts:f.constant(F),focus:function(){var a=A.disabled()?A.element():D.element();n.focus(a)},update:function(a){r.remove(B.element());a=a.detail();s.isVisible(D.element())||C();a.prompts().fold(function(){A.disable();c.disable(A.element())},function(a){A.enable();c.enable(A.element());d.speak(k.body(),
t.translate(x,u.repairAvailable()))})},zero:function(a){r.empty(l);p.append(l,B.element());n.focus(B.element())},events:E.registry}}});l("lk","ag 8s 4z 7 s 1a 2m 1y 3u l 2f 2o 3c 2q lh u2 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u){return function(v,w){var x=b.div();h.add(x,s.resolve(w,"information"));f.set(x,"data-severity","info");var l=b.div();h.add(l,s.resolve(w,"icon"));var z=b.div();h.add(z,s.resolve(w,"description"));p.append(z,m.fromText(""));var A=m.fromTag("a");h.add(A,s.resolve(w,
"help-icon"));f.set(A,"href","javascript:void(0)");q.append(x,[l,z,A]);var D=k.bind(A,"click",function(){var a=f.get(A,"data-url");u.open(a,"","height=700,width=820,resizable=yes,scrollbars=yes")}),l=[d.single(A,[],e.none())];return{element:a.constant(x),destroy:function(){D.unbind()},keylayouts:a.constant(l),update:function(a){a=a.detail();var b=a.severity();f.set(x,"data-severity",b);c.speak(g.body(),s.translate(w,t.severity(b)));b=s.translate(w,a.description());n.set(z,b);c.speak(g.body(),b);f.set(A,
"title",s.translate(w,t.issueHelp()));f.set(A,"data-url",a.url());p.after(z,A)},zero:function(){f.set(x,"data-severity","success");var a=s.translate(w,t.noIssue());n.set(z,a);c.speak(g.body(),a);r.remove(A)}}}});l("ll",["4z","7","1y","2o","lh"],function(c,d,b,a,e){return function(f,g){var h=c.div(),k=c.span();b.add(k,e.resolve(g,"spin"));b.add(h,e.resolve(g,"loading"));a.append(h,k);return{element:d.constant(h),destroy:d.noop}}});l("lm","b lf f8 ag gk 8s 4z 7 s 46 47 2m 1y l 2f 2o 3c lh u2 u3".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w,x){var l=function(a,b,c){var e=g.div();q.add(e,v.resolve(c,a));b.each(function(a){t.append(e,r.fromText(v.translate(c,a)))});return e};return function(r,A){var D=l("titlebar",k.none(),A),B=l("title",k.none(),A),C=l("title-text",k.some(w.title()),A),F=l("issue",k.some(w.running()),A);u.append(B,[C,F]);var E=g.div();q.add(E,v.resolve(A,"navigation"));var C=x.icon(r,v.resolve(A,"previous"),w.previous(),A),G=x.icon(r,v.resolve(A,"next"),w.next(),A),H=[C,
G],C=m.create({previous:n([],C.events.click),next:n([],G.events.click)});u.append(E,c.map(H,function(a){return a.element()}));t.append(D,B);var I=e.button({execute:function(a){a.dom().click()}}),G=c.map(H,function(a){return f.button(a.element(),I)}),K=function(a){a.disable();b.disable(a.element())},J=function(a){a.enable();b.enable(a.element())},M=function(){c.each(H,K)},O=function(){c.each(H,J)},N=function(){d.preserve(function(){t.after(B,E)},E)};return{element:h.constant(D),update:function(b){var c=
b.index()+1;b=b.total();c=v.translate(A,w.issueCounter(),c,b);s.set(F,c);a.speak(p.body(),c);(1===b?M:O)();N()},zero:function(){s.set(F,"&nbsp;");N();M()},keylayouts:h.constant(G),destroy:function(){c.each(H,function(a){a.destroy()})},events:C.registry}}});l("cp","b lf 4z 7 55 46 4m 1y 2o 3c 2q lg lh li lj lk ll lm".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v){return function(w,x){var l=b.div();h.add(l,q.resolve(x,"widget"));var z=q.resolve(x,"loading");h.add(l,z);var A=v(w,x),D=t(w,x),
B=r(w,x),C=s(w,x),F=u(w,x);m.append(l,[A.element(),F.element()]);var E=f.create({showcase:e(["detail"]),ignored:e(["detail"]),solved:e(["detail"]),done:e([])}),G=function(a){c.each([A,D,B,C],function(b){b.update(a)});E.trigger.showcase(a.detail());d.preserve(function(){k.after(A.element(),D.element());k.after(D.element(),B.element());k.after(B.element(),C.element())},l)},H=function(a){a.fold(function(){k.after(A.element(),D.element());k.after(D.element(),C.element());n.remove(B.element());A.zero();
D.zero();C.zero()},G)},I=g(p());A.events.previous.bind(function(){I.get().backwards().each(G)});A.events.next.bind(function(){I.get().forwards().each(G)});var K=function(){var a=B.getChange().getOr({});I.get().current().each(function(b){var c=b.detail();c.repair()(c,a).fold(function(a){B.markInvalid(a)},function(a){B.markValid();a=I.get().resolve();E.trigger.solved(c);H(a);C.focus()})})};B.events.execute.bind(K);C.events.repair.bind(K);C.events.ignore.bind(function(){I.get().current().each(function(a){var b=
I.get().resolve();E.trigger.ignored(a.detail());H(b)})});C.events.done.bind(function(){E.trigger.done()});K=c.flatten([A.keylayouts(),D.keylayouts(),B.keylayouts(),C.keylayouts()]);return{element:a.constant(l),destroy:function(){c.each([A,D,B,C],function(a){a.destroy()})},load:function(a){n.remove(F.element());h.remove(l,z);a=I.get().load(a);H(a)},open:function(){k.append(l,F.element());h.add(l,z)},skip:function(){var a=I.get().resolve();H(a)},keylayouts:a.constant(K),events:E.registry}}});l("71",
"b 7 cg 72 cj ck cl 46 47 cm cn co 4h 2m cp".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){return function(t){var u=a.ignoreAttr(),v={prefix:d.constant("accessibility-check"),translate:g.translate,tnames:d.constant("a11y")},w=s(f,v),v=p.all(),v=m({rules:v}),x=n(v),l=b(g.translate),z=a.manager(t.content()),A=function(a){a=x.audit(a.dom());a=l.convert(t,a);return c.filter(a,function(a){var b=a.element(),b=q.read(b,u);return!c.contains(b,a.id())})};w.events.showcase.bind(function(a){t.content().body().each(function(b){b=
a.detail().element();r.inBody(b)?(z.moveTo(b,a.detail().severity()),e.elementIntoView(t.content(),b)):w.skip()})});w.events.ignored.bind(function(a){a=a.detail();z.ignore(a.element(),a.id(),a.severity())});w.events.solved.bind(function(a){a=a.detail();z.solve(a.element(),a.id(),a.severity())});v=h.create({done:k([],w.events.done)});return{element:w.element,anchorName:d.constant("a11y-widget-anchor"),textkey:d.constant("action.a11ycheck"),dialogTextkey:d.constant("a11y.widget.title"),destroy:function(){w.destroy()},
keylayouts:w.keylayouts,openWidget:function(){t.content().hideInlineSelection();w.open();t.content().body().each(function(a){a=A(a);z.start(a);w.load(a)})},closeWidget:function(){z.stop()},events:v.registry}}});l("73",["s","4m"],function(c,d){var b=function(a){var b=d(c.none());return{clear:function(){b.get().each(a);b.set(c.none())},isSet:function(){return b.get().isSome()},set:function(d){b.get().each(a);b.set(c.some(d))}}};return{destroyable:function(){return b(function(a){a.destroy()})},unbindable:function(){return b(function(a){a.unbind()})},
api:function(){var a=d(c.none()),b=function(){a.get().each(function(a){a.destroy()})};return{clear:function(){b();a.set(c.none())},isSet:function(){return a.get().isSome()},set:function(d){b();a.set(c.some(d))},run:function(b){a.get().each(b)}}},value:function(){var a=d(c.none());return{clear:function(){a.set(c.none())},set:function(b){a.set(c.some(b))},isSet:function(){return a.get().isSome()},on:function(b){a.get().each(b)}}}}});l("d7","77 55 46 1y 2n 3u l 2o 2q 3t".split(" "),function(c,d,b,a,
e,f,g,h,k,m){return function(m,p){var q=b.create({open:d([]),close:d([])}),r=g.fromTag("div");a.add(r,c.resolve("layer-menus"));a.add(r,c.resolve("toolstrip"));h.append(m(),r);var s=!1,t=f.bind(r,"transitionend",function(){s||(e.remove(r,"display"),q.trigger.close())});return{element:function(){return r},destroy:function(){t.unbind();k.remove(r)},open:function(){s||(s=!0,e.set(r,"display","block"),e.reflow(r),q.trigger.open(),e.set(r,"opacity","1"))},close:function(){s&&(s=!1,e.remove(r,"opacity"))},
isClosed:function(){return!s},setContent:function(a){h.append(r,a)},events:q.registry}}});l("74","77 85 cr 8s 73 d7 75 33 55 46 1y 4b 4e".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){return function(r,s,t,u){var v=r.content(),w=r.ui().tabstrip.element(),x=[s.element()],l="."+h.resolve(t)+", ."+c.resolve("more-button"),z=function(){var a=q.descendants(w,l);return x.concat(a)},A=e.api(),D=m.create({abort:k([]),open:k([]),close:k([])}),B=function(){v.events.mousedown.unbind(C);A.clear();F.off()},C=
function(){A.isSet()&&(s.closeWidget(),A.run(function(a){a.close()}))},F=b(C,z);s.events.done.bind(function(){C()});var E=a.multiple(s.element(),s.keylayouts());E.events.exit.bind(function(){D.trigger.abort()});return{destroy:function(){B();E.destroy();s.destroy();F.off()},events:D.registry,open:function(){F.on();s.openWidget();var a=f(r.ui().viewport,z);a.setContent(s.element());n.add(a.element(),u);var b=a.element();p.add(b,[h.resolve(s.anchorName()),h.resolve("side-widget-anchor")]);d.dialog(b,
g.translate(s.dialogTextkey()));a.open();a.events.close.bind(function(){v.focus();D.trigger.close();B()});A.set(a);E.enter();D.trigger.open();v.events.mousedown.bind(C)},close:C,isOpen:A.isSet}}});l("76",["b","c","6","75","1f"],function(c,d,b,a,e){var f=d.detect(),g=(d=f.os.isOSX())?"\u2318":"Ctrl",h=d?"\u21e7":"Shift",k={blockquote:[g,h,"9"],bold:[g,"B"],italic:[g,"I"],underline:[g,"U"],link:[g,"K"],help:[g,"?"],fullscreen:[g,h,"F"],indent:[g,"]"],outdent:[g,"["],undo:[g,"Z"],redo:d?[g,h,"Z"]:[g,
"Y"],search:[g,"F"]},m="fr nl sv ru de es it".split(" "),n=b.merge(k,{indent:[g,"M"],outdent:[g,h,"M"]}),p=function(a){var b=e.get();return c.contains(m,b)?n[a]:k[a]};b=function(a){a=p(a);return void 0===a?"":" "+a.join("")};var g=function(a){a=p(a);return void 0===a?"":" ("+a.join(" ")+")"},q=d?b:g;return{get:function(b,c){return f.os.isiOS()?a.get(b):a.get(b)+q(c)}}});l("59","71 72 73 74 75 33 6v 76 1y".split(" "),function(c,d,b,a,e,f,g,h,k){var m=f.resolve("inverted-dialog-widget");return function(n){var p=
n.filter();d.configure(p);var q=b.api(),r=function(){var b;b=c(n);b=a(n,b,"a11y-check",m);b.events.abort.bind(b.close);b.events.close.bind(t);q.set(b);b.open()},s=function(){q.run(function(a){a.close()})},t=function(){q.clear()};return{ui:g.ui({"a11ycheck.general":{toggle:!1,hasPopup:!1,value:"a11y-check",textkey:e.key("action.a11ycheck"),action:function(){(q.isSet()?s:r)()},updateGeneral:function(a){k.add(a.element(),f.resolve("a11y-check"))},icon:!0,tooltip:h.get}}),destroy:t}}});l("lo",["7","2n"],
function(c,d){var b=function(a,b,c){var h=d.get(b,a);c=parseInt(h,10)+40*c;(0<c?d.set:d.remove)(b,a,c+"px")},a={change:c.curry(b,"margin-right")};return{ltr:{change:c.curry(b,"margin-left")},rtl:a}});l("d8",["lo"],function(c){return function(d){return{change:function(b,a){return(d.directionAt(b).isRtl()?c.rtl:c.ltr).change(b,a)}}}});l("d9",["7","3t"],function(c,d){return{runTransaction:function(b,a,e,f){f=void 0!==f?f:c.noop;a.save();b.focus();e=e();d(function(){b.domChanged();b.uiChanged()},0);f();
a.save();return e}}});l("da",["b","d9"],function(c,d){return{multiple:function(b,a,e){return function(f,g){var h=b.getSelection(),k=d.runTransaction(b,a,function(){return c.bind(g,function(a){return a.getSelection().bind(function(a){return e(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset()).map(function(a){return a.all()})}).getOr([])})},b.toEditing);h.each(function(a){b.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())});return k}},single:function(b,
a,c,f,g){return function(h,k){var m=f(b,h.startContainer(),h.startOffset()),n=f(b,h.endContainer(),h.endOffset()),p=d.runTransaction(b,a,function(){return c(m.element(),m.offset(),n.element(),n.offset())},b.toEditing);return g(b,p,m,n,h)}}}});l("db",["b","d9"],function(c,d){return{multiple:function(b,a,e){return function(f,g){return d.runTransaction(b,a,function(){return c.bind(g,function(a){return a.getSelection().bind(function(a){return e(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset()).map(function(a){return a.all()})}).getOr([])})},
b.toEditing)}},single:function(b,a,c,f,g){return function(h,k){var m=f(b,h.startContainer(),h.startOffset()),n=f(b,h.endContainer(),h.endOffset()),p=d.runTransaction(b,a,function(){return c(m.element(),m.offset(),n.element(),n.offset())},b.toEditing);return g(b,p,m,n,h)}}}});l("dc",[],function(){return{update:function(c,d,b,a,e){return d.map(function(a){c.setSelection(a.start(),a.soffset(),a.finish(),a.foffset());return a.all()}).getOr([])}}});l("dd",["ex"],function(c){return{spot:function(d,b,a){return c.point(b,
a)}}});l("7f",["s","4n"],function(c,d){var b=d.generate([{none:[]},{multiple:["elements","environments"]},{single:["selection","environment"]}]);return{cata:function(a,b,c,d){return a.fold(b,c,d)},none:b.none,multiple:b.multiple,single:b.single,toSelection:function(a){return a.fold(c.none,function(a,b){return c.from(b[0]).bind(function(a){return a.getSelection()})},c.some)}}});l("9i",[],function(){var c=function(c){return{fold:c}};return{on:function(d,b){return c(function(a,c,f){return c(d,b)})},
before:function(d){return c(function(b,a,c){return b(d)})},after:function(d){return c(function(b,a,c){return c(d)})}}});l("9e",["7","33","ci"],function(c,d,b){var a=d.resolve("highlight-common"),e=d.resolve("highlight-placeholder");return{configure:function(c){c.add(c.output(),a,b.unwrap);c.add(c.history(),e,b.unwrap);c.add(c.output(),e,b.unwrap);c.add(c.output(),"ephox-custom-highlight",b.unwrap);c.add(c.history(),"ephox-custom-highlight",b.unwrap)},highlightClass:c.constant(a),customHighlightClass:c.constant("ephox-custom-highlight"),
placeholderClass:c.constant(e)}});l("7d",["7"],function(c){var d=function(){return e(function(a,b,c){return a()},"off")},b=function(){return e(function(a,b,c){return b()},"unchanged")},a=function(a){return e(function(b,c,e){return e(a)},"on")},e=function(e,g){return{fold:e,map:function(c){return e(d,b,function(b){return a(c(b))})},label:c.constant(g)}};return{off:d,unchanged:b,on:a}});l("7q","9e 7d 2u 1y 21 at".split(" "),function(c,d,b,a,e,f){var g=b.immutable("content");return{hasSelection:function(a){return a.getSelection().fold(function(){return g(d.off())},
function(){return g(d.on(!0))})},isAnnotation:function(b){return a.has(b,"ephox-cram-annotation-wrap")||a.has(b,c.customHighlightClass())},isEmptyText:function(a){return e.isText(a)&&0===f.get(a).length}}});l("eg",["9i","2u","l"],function(c,d,b){var a=d.immutable("start","soffset","finish","foffset"),e=d.immutable("start","soffset","finish","foffset"),f=d.immutable("start","finish");return{read:a,general:e,write:f,writeFromNative:function(a){var e=b.fromDom(a.startContainer),d=b.fromDom(a.endContainer);
return f(c.on(e,a.startOffset),c.on(d,a.endOffset))}}});l("eh",[],function(){return{run:function(c,d){if(c.getSelection)return d(c,c.getSelection());throw"No selection model supported.";}}});l("dl",["1b","l","2a"],function(c,d,b){var a=function(a,c,d,h){var k=b.owner(a).dom().createRange();k.setStart(a.dom(),c);k.setEnd(d.dom(),h);return k};return{after:function(b,d,g,h){var k=a(b,d,g,h);b=c.eq(b,g)&&d===h;return k.collapsed&&!b},commonAncestorContainer:function(b,c,g,h){b=a(b,c,g,h);return d.fromDom(b.commonAncestorContainer)}}});
l("lp",["eg","dl","l","2a"],function(c,d,b,a){var e=function(a){return d.after(b.fromDom(a.anchorNode),a.anchorOffset,b.fromDom(a.focusNode),a.focusOffset)},f=function(a,d){var f=b.fromDom(d.startContainer),g=b.fromDom(d.endContainer);return e(a)?c.read(g,d.endOffset,f,d.startOffset):c.read(f,d.startOffset,g,d.endOffset)},g=function(a){return e(a)},h=function(b,c,e,d){return function(f){if(f.extend)f.collapse(b.dom(),c),f.extend(e.dom(),d);else{var g=a.owner(b).dom().createRange();g.setStart(e.dom(),
d);g.setEnd(b.dom(),c);f.removeAllRanges();f.addRange(g)}}},k=function(a,b,c,e){return d.after(a,b,c,e)};return{read:function(){return{flip:f,isRtl:g}},write:function(){return{flip:h,isRtl:k}}}});l("ej",["eg","lp","s","dl","l"],function(c,d,b,a,e){var f=function(a,d){if(!0===g(a,d.start(),d.finish()).collapsed){var f=g(a,d.finish(),d.start());return!0===f.collapsed?b.none():b.some(c.general(e.fromDom(f.endContainer),f.endOffset,e.fromDom(f.startContainer),f.startOffset))}return b.none()},g=function(a,
b,c){var e=m(a);b.fold(function(a){e.setStartBefore(a.dom())},function(a,b){e.setStart(a.dom(),b)},function(a){e.setStartAfter(a.dom())});c.fold(function(a){e.setEndBefore(a.dom())},function(a,b){e.setEnd(a.dom(),b)},function(a){e.setEndAfter(a.dom())});return e},h=function(a,b){return g(a,b.start(),b.finish())},k=function(a,b){var c=h(a,b);return function(a){a.addRange(c)}},m=function(a){return a.document.createRange()};return{create:m,build:function(a,b){return f(a,b).fold(function(){return k(a,
b)},function(a){return d.write().flip(a.start(),a.soffset(),a.finish(),a.foffset())})},toNative:h,forceRange:function(a,b){var c=g(a,b.start(),b.finish());return!0===c.collapsed?g(a,b.finish(),b.start()):c},toExactNative:function(b,c,e,d,f){var g=a.after(c,e,d,f);b=b.document.createRange();g?(b.setStart(d.dom(),f),b.setEnd(c.dom(),e)):(b.setStart(c.dom(),e),b.setEnd(d.dom(),f));return b}}});l("ei","b ej l 21 4e m".split(" "),function(c,d,b,a,e,f){var g=function(a,b,d,g){var p=a.document.createRange();
a=(f.is(b,g)?[b]:[]).concat(e.descendants(b,g));return c.filter(a,function(a){p.selectNodeContents(a.dom());return 1>p.compareBoundaryPoints(d.END_TO_START,d)&&-1<p.compareBoundaryPoints(d.START_TO_END,d)})};return{find:function(c,e,f){e=d.forceRange(c,e);var n=b.fromDom(e.commonAncestorContainer);return a.isElement(n)?g(c,n,e,f):[]}}});l("lq",["b","eg","9i","21"],function(c,d,b,a){var e=function(e,d){var h=a.name(e);return"input"===h?b.after(e):c.contains(["br","img"],h)?0===d?b.before(e):b.after(e):
b.on(e,d)};return{beforeSpecial:e,preprocess:function(a){var c=a.start().fold(b.before,e,b.after);a=a.finish().fold(b.before,e,b.after);return d.write(c,a)}}});l("lr",["b","l","q"],function(c,d,b){return{fromElements:function(a,e){var f=(e||b).createDocumentFragment();c.each(a,function(a){f.appendChild(a.dom())});return d.fromDom(f)}}});l("ek","eg lp ej lq s l lr".split(" "),function(c,d,b,a,e,f,g){var h=function(a,b){var c=b.getRangeAt(0),e=b.getRangeAt(b.rangeCount-1),d=a.document.createRange();
d.setStart(c.startContainer,c.startOffset);d.setEnd(e.endContainer,e.endOffset);return d},k=function(a,b){return void 0!==b&&null!==b&&0<b.rangeCount?e.from(h(a,b)):e.none()};return{get:function(a,b){return k(a,b).map(function(a){var e=f.fromDom(a.startContainer),g=f.fromDom(a.endContainer);return d.read().isRtl(b)?d.read().flip(b,a):c.read(e,a.startOffset,g,a.endOffset)})},set:function(c){return function(e,d){var f=a.preprocess(c),f=b.build(e,f);void 0!==d&&null!==d&&(d.removeAllRanges(),f(d))}},
selectElementContents:function(a){return function(c,e){var d=b.create(c);d.selectNodeContents(a.dom());e.removeAllRanges();e.addRange(d)}},replace:function(a){return function(b,c){k(b,c).each(function(c){var e=g.fromElements(a,b.document);c.deleteContents();c.insertNode(e.dom())})}},replaceRange:function(c,e){return function(d,f){var h=a.preprocess(c),h=b.toNative(d,h),k=g.fromElements(e,d.document);h.deleteContents();h.insertNode(k.dom())}},deleteRange:function(a,c,e,d){return function(f,g){b.toExactNative(f,
a,c,e,d).deleteContents()}},cloneFragment:function(a,c,e,d){return function(g,h){var k=b.toExactNative(g,a,c,e,d).cloneContents();return f.fromDom(k)}},rectangleAt:function(a,c,d,f){return function(g,h){var k=b.toExactNative(g,a,c,d,f),u=k.getClientRects(),k=0<u.length?u[0]:k.getBoundingClientRect();return 0<k.width||0<k.height?e.some(k):e.none()}},bounds:function(a){return function(c,d){var f=b.create(c);f.selectNode(a.dom());f=f.getBoundingClientRect();return 0<f.width||0<f.height?e.some(f):e.none()}},
clearSelection:function(a,b){a.getSelection().removeAllRanges()},stringAt:function(a,c,e,d){return function(f,g){return b.toExactNative(f,a,c,e,d).toString()}}}});l("7v","eg 9i eh ei ej ek 1b l".split(" "),function(c,d,b,a,e,f,g,h){var k=function(a,c){b.run(a,f.set(c))},m=function(b,c,e){return a.find(b,c,e)};return{get:function(a){return b.run(a,f.get)},set:k,setExact:function(a,b,e,f,g){b=c.write(d.on(b,e),d.on(f,g));k(a,b)},selectElementContents:function(a,c){b.run(a,f.selectElementContents(c))},
replace:function(a,c){b.run(a,f.replace(c))},replaceRange:function(a,c,e){b.run(a,f.replaceRange(c,e))},deleteRange:function(a,c,e,d,g){b.run(a,f.deleteRange(c,e,d,g))},isCollapsed:function(a,b,c,e){return g.eq(a,c)&&b===e},cloneFragment:function(a,c,e,d,g){return b.run(a,f.cloneFragment(c,e,d,g))},rectangleAt:function(a,c,e,d,g){return b.run(a,f.rectangleAt(c,e,d,g))},bounds:function(a,c){return b.run(a,f.bounds(c))},findWithin:m,findWithinExact:function(a,b,e,f,g,h){b=c.write(d.on(b,e),d.on(f,g));
return m(a,b,h)},deriveExact:function(a,b){var d=e.forceRange(a,b);return c.general(h.fromDom(d.startContainer),d.startOffset,h.fromDom(d.endContainer),d.endOffset)},clearAll:function(a){b.run(a,f.clearSelection)},stringAt:function(a,c,e,d,g){return b.run(a,f.stringAt(c,e,d,g))}}});l("df","7v 80 7 s 2m 1b 31 2a 1s".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(b,c){return e.inBody(b)?a.some(k.max(0,k.min(c,d.getEnd(b)))):a.none()};return{findDescendants:function(a,b,e,d,f){var g=h.defaultView(a);
return m(a,b).bind(function(b){return m(e,d).map(function(d){return c.findWithinExact(g.dom(),a,b,e,d,f)})}).getOr([])},findAncestors:function(a,c,e){return g.ancestor(a,e).fold(function(){return g.ancestor(c,e).toArray()},function(a){return g.ancestor(c,e).fold(b.constant([a]),function(b){return f.eq(a,b)?[a]:[a,b]})})}}});l("7c","c 9i 7 s 7q df 1b l 2o 21 2q at 2a 1s".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=c.detect().browser.isFirefox(),t=function(a,b){return l(a).filter(function(a){return g.eq(a.image(),
b)}).isSome()};c=function(a,b){var c=function(){a.setRelativeSelection(d.before(b),d.after(b))},e=s?function(){a.getSelection().fold(c,function(c){u(a,c,b)})}:c;a.focus();e()};var u=function(a,b,c){2===r.abs(b.startOffset()-b.endOffset())&&t(b,c)||(b=q.nextSibling(c).filter(e.isEmptyText).getOrThunk(function(){var a=h.fromText("");k.after(c,a);return a}),a.setRelativeSelection(d.before(c),d.after(b)))},v=function(a){return a.filter(function(a){return"img"===m.name(a)})},w=function(b){return v(q.nextSibling(b.startContainer())).bind(function(c){return v(q.prevSibling(b.endContainer())).bind(function(e){e=
g.eq(c,e);var d=b.startContainer().dom().length===b.startOffset(),f=0===b.endOffset();return e&&d&&f?a.some(c):a.none()})})},x=function(b){if(!g.eq(b.startContainer(),b.endContainer()))return a.none();var c=r.min(b.startOffset(),b.endOffset()),d=r.max(b.startOffset(),b.endOffset()),f=v(q.child(b.startContainer(),c));return d===c+1?f.orThunk(function(){return v(a.some(b.startContainer()))}):s&&d===c+2?f.filter(function(a){return q.nextSibling(a).filter(e.isEmptyText).isSome()}):a.none()},l=function(c){return c.collapsed()?
a.none():x(c).orThunk(function(){return w(c)}).map(function(a){return{image:b.constant(a)}})};return{detect:l,selectionContains:function(b){b=f.findDescendants(b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset(),"img");return 1===b.length?a.some(b[0]):a.none()},remove:function(a,b){a.setRelativeSelection(d.before(b),d.before(b));n.remove(b)},select:c,reselect:s?c:b.noop}});l("ub",["b","7","s","2u"],function(c,d,b,a){var e=a.immutable("left","right"),f=function(a,e,f){e=a.property().children(e);
a=c.findIndex(e,d.curry(a.eq,f));return-1<a?b.some({before:d.constant(e.slice(0,a)),after:d.constant(e.slice(a+1))}):b.none()};return{breakToLeft:function(a,b,c){return f(a,b,c).map(function(d){var f=a.create().clone(b);a.insert().appendAll(f,d.before().concat([c]));a.insert().appendAll(b,d.after());a.insert().before(b,f);return e(f,b)})},breakToRight:function(a,b,c){return f(a,b,c).map(function(c){var d=a.create().clone(b);a.insert().appendAll(d,c.after());a.insert().after(b,d);return e(b,d)})},
breakPath:function(c,e,d,f){var n=a.immutable("first","second","splits"),p=function(a,e,h){var t=n(a,b.none(),h);return d(a)?n(a,e,h):c.property().parent(a).bind(function(e){return f(c,e,a).map(function(a){var c=[{first:a.left,second:a.right}],f=d(e)?e:a.left();return p(f,b.some(a.right()),h.concat(c))}).getOr(t)})};return p(e,b.none(),[])}}});l("uc",["b","7","s"],function(c,d,b){var a=function(a,b,d,k){d=b(a,d);return c.foldr(k,function(c,d){var h=b(a,d);return e(a,c,h)},d)},e=function(a,b,c){return b.bind(function(b){return c.filter(d.curry(a.eq,
b))})};return{oneAll:function(c,e,d){if(0<d.length){var k=d[0];d=d.slice(1);c=a(c,e,k,d)}else c=b.none();return c}}});l("ud",["b","7","s","1s"],function(c,d,b,a){var e=function(e,f,k,m){var n=e.property().children(f);if(e.eq(f,k[0]))return b.some([k[0]]);if(e.eq(f,m[0]))return b.some([m[0]]);var p=function(a){a=c.reverse(a);var b=c.findIndex(a,d.curry(e.eq,f));return c.findIndex(n,d.curry(e.eq,b<a.length-1?a[b+1]:a[b]))};k=p(k);m=p(m);var p=a.min(k,m),q=a.max(k,m);return-1<k&&-1<m?b.some(n.slice(p,
q+1)):b.none()},f=function(a,e,f,m){var n=void 0!==m?m:d.constant(!1);e=[e].concat(a.up().all(e));m=[f].concat(a.up().all(f));var p=function(a){var b=c.findIndex(a,n);return-1<b?a.slice(0,b+1):a};f=p(e);var q=p(m);e=c.find(f,function(b){return c.exists(q,d.curry(a.eq,b))});e=b.from(e);return{firstpath:d.constant(f),secondpath:d.constant(q),shared:d.constant(e)}};return{subset:function(a,b,c){var d=f(a,b,c);return d.shared().bind(function(b){return e(a,b,d.firstpath(),d.secondpath())})},ancestors:f}});
l("m9",["ub","uc","ud"],function(c,d,b){return{sharedOne:function(a,b,c){return d.oneAll(a,b,c)},subset:function(a,c,d){return b.subset(a,c,d)},ancestors:function(a,c,d,g){return b.ancestors(a,c,d,g)},breakToLeft:function(a,b,d){return c.breakToLeft(a,b,d)},breakToRight:function(a,b,d){return c.breakToRight(a,b,d)},breakPath:function(a,b,d,g){return c.breakPath(a,b,d,g)}}});l("g6",["e7","m9"],function(c,d){var b=c();return{sharedOne:function(a,c){return d.sharedOne(b,function(b,c){return a(c)},c)},
subset:function(a,c){return d.subset(b,a,c)},ancestors:function(a,c,f){return d.ancestors(b,a,c,f)},breakToLeft:function(a,c){return d.breakToLeft(b,a,c)},breakToRight:function(a,c){return d.breakToRight(b,a,c)},breakPath:function(a,c,f){return d.breakPath(b,a,c,function(a,b,c){return f(b,c)})}}});l("z3",["1b","l","2o","21","2q"],function(c,d,b,a,e){return{forceAddBr:function(f,g){if("br"!==a.name(f)){var h=d.fromTag("br");a.isText(f)?(b.after(f,h),c.eq(g,f)||e.remove(f)):b.prepend(f,h)}},rootBr:function(a,
c){b.before(a,d.fromTag("br"))}}});l("z4",["b","2a"],function(c,d){var b=function(a,f,g){var h=[];c.each(d.children(a),function(a){f(a)&&(h=h.concat([a]));h=g(a)?h:h.concat(b(a,f,g))});return h},a=function(b,c){var g=d.children(b);return 0<g.length?(g=g[0],c(g)?b:a(g,c)):0<g.length?a(g[0]):b};return{descendants:b,plunge:a}});l("j6",["ds","80","1b"],function(c,d,b){var a=function(a,c,d,h,k){return h(a).fold(function(){return!0},function(a){return b.eq(c,a)&&k(c,d)})};return{isLeft:function(b,f){return a(b,
f.startContainer(),f.startOffset(),c.firstCursor,d.isStart)},isAtLeftEdge:function(b,f,g){return a(b,f,g,c.firstCursor,d.isStart)},isRight:function(b,f){return a(b,f.startContainer(),f.startOffset(),c.lastCursor,d.isEnd)},isAtRightEdge:function(b,f,g){return a(b,f,g,c.lastCursor,d.isEnd)}}});l("ns","a b j6 7 f7 2u 1b 21 6j 4i at v".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=function(a){a=h.name(a);return"td"===a||"th"===a},r=function(a){return"li"===h.name(a)||e.isBlock(a)},s=function(a){return"a"===
h.name(a)},t=function(b,c,e){return m.closest(b,c,e).filter(a.not(e)).filter(a.not(q))};return{stopAt:function(b){return a.curry(g.eq,b)},isList:function(a){a=h.name(a);return"ol"===a||"ul"===a},isAnchor:s,isHeading:function(a,b){var e=c.isArray(b)?b:[],e="h1 h2 h3 h4 h5 h6".split(" ").concat(e),f=h.name(a);return d.contains(e,f)},isCollapsed:function(a){return g.eq(a.startContainer(),a.endContainer())&&a.startOffset()===a.endOffset()},isRightEdge:function(a,c,e){var d=f.immutable("startContainer",
"startOffset");return b.isRight(a,d(c,e))},exitList:function(a){return 0===k.descendants(a,function(a){return h.isText(a)&&0<n.get(a).length&&0<p.trim(n.get(a)).length||h.isElement(a)&&d.contains("hr img input video iframe picture audio embed map object".split(" "),h.name(a))}).length},findBlock:function(a,b){return m.closest(a,r,b)},findValidHardBreak:function(a,b){return t(a,r,b)},findAnchorBreak:function(a,b){return t(a,s,b)}}});l("vh","58 b 1a 2f 21 4e at 2a v".split(" "),function(c,d,b,a,e,f,
g,h,k){var m=function(a){if(!e.isText(a))return!1;a=g.get(a).trim();return 0===a.length||0===a.replace(c.zeroWidth(),"").length},n=function(b){if(e.isText(b))return m(b);var c=a.get(b);b=h.children(b);return""===k.trim(c)||d.forall(b,m)};return{vacant:function(a){a=f.descendants(a,"span,a");return d.filter(a,function(a){return"span"===e.name(a)?!(b.has(a,"class")&&0<b.get(a,"class").length)&&!b.has(a,"style")&&n(a):n(a)})},isEmpty:n,hasCursor:function(a,b){var c=void 0!==b?b:["hr","br","img","input",
"textarea"];return e.isText(a)?!1===m(a):d.contains(c,e.name(a))},isVacantText:m,hasNoContent:n}});l("u5","b 7 s z3 z4 ns vh 1a 21 2q 4e".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=function(a){var c="li"===k.name(a)?f.isList:d.constant(!1);return 0<e.descendants(a,g.hasCursor,c).length?b.none():b.some(e.plunge(a,c))},q=function(a){a=g.vacant(a);c.each(a,m.remove)},r=function(a,b){var e=n.descendants(b,a),e=c.filter(e,g.isEmpty);c.each(e,m.remove);g.isEmpty(b)&&m.remove(b)};return{vacate:q,emptyStyles:function(a){!0===
h.has(a,"style")&&0===h.get(a,"style").length&&h.remove(a,"style")},needsCursor:p,postprocess:function(b,c,e){q(b);p(b).each(function(b){a.forceAddBr(b,c)})},lists:d.curry(r,"ul,ol"),blockquotes:d.curry(r,"blockquote")}});l("u4",["b","7","g6","u5","1a"],function(c,d,b,a,e){var f=function(f,h){var k=b.breakToRight(f,h);k.each(function(b){b=b.right();c.each(["id"],d.curry(e.remove,b));a.emptyStyles(b)});return k};return{breakPath:function(a,c){return b.breakPath(a,c,f)}}});l("ls","b 9i 7 u4 u5 ns 2o".split(" "),
function(c,d,b,a,e,f,g){return{breakQuote:function(h,k){var m=a.breakPath(k,f.stopAt(h));return m.second().map(function(a){var f=m.first();g.before(a,k);c.each([f,a],e.blockquotes);return{start:b.constant(d.on(k,0)),finish:b.constant(d.on(k,0))}})}}});l("dg",["ls"],function(c){return{breakQuote:c.breakQuote}});l("lt",["21","2a"],function(c,d){var b=function(a){return c.isElement(a)?a:d.parent(a).getOr(a)};return{bothMatch:function(a,c,d){a=b(a);c=b(c);return d(a)&&d(c)}}});l("m4",["f7","m"],function(c,
d){return{isRootOrCell:function(b){return function(a){return b(a)||d.is(a,"td,th")}},isRootOrContainer:function(b){return function(a){return b(a)||c.isContainer(a)}}}});l("u6",["s"],function(c){var d=function(b,a){return 0===b.length?!0:0===a.length?!1:b[0]<a[0]?!0:a[0]<b[0]?!1:d(b.slice(1),a.slice(1))};return{head:function(b){return 0<b.length?c.some(b[0]):c.none()},tail:function(b){return 0<b.length?c.some(b.slice(1)):c.none()},toLast:function(b){return 0<b.length?c.some(b[b.length-1]):c.none()},
box:function(b){return[b]},isBefore:d}});l("ms",["b","7","4n","u6"],function(c,d,b,a){b=b.generate([{quasi:["elements"]},{block:["element"]},{container:["element","children"]},{fixture:["element"]}]);var e=function(a){return a.fold(function(a){return"@q["+c.map(a,function(a){return a.dom().outerHTML||'"'+a.dom().nodeValue+'"'}).join(",")+"]"},function(a){return"@"+a.dom().nodeName.toLowerCase()+"("+a.dom().innerHTML+")"},function(a,b){return"#"+a.dom().nodeName.toLowerCase()+"("+c.map(b,e).join(",")+
")"},function(a){return a.dom().nodeName.toLowerCase()})},f=function(a){var b=function(a){return[a]};return a.fold(d.identity,b,b,b)},g=d.constant(!0),h=d.constant(!1);return{cata:function(a,b,c,e,d){return a.fold(b,c,e,d)},quasi:b.quasi,block:b.block,container:b.container,fixture:b.fixture,isQuasi:function(a){return a.fold(g,h,h,h)},isFixture:function(a){return a.fold(h,h,h,g)},isQuasiOrFixture:function(a){return a.fold(g,h,h,g)},toTarget:f,toString:e,toLastTarget:function(b){return a.toLast(f(b))}}});
l("126",["7"],function(c){var d=function(b,a){return{fold:b,label:c.constant(a)}};return{before:function(b){return d(function(a,c,d,g,h){return a(b)},"before")},after:function(b){return d(function(a,c,d,g,h){return c(b)},"after")},rest:function(b){return d(function(a,c,d,g,h){return d(b)},"rest")},last:function(b){return d(function(a,c,d,g,h){return g(b)},"last")},invalid:function(b,a){return d(function(c,d,g,h,k){return k(b,a)},"invalid")}}});l("uq",["b","s","ex","hm","kd"],function(c,d,b,a,e){return{subdivide:function(f,
g,h){var k=f.property().getText(g);h=c.filter(e.splits(k,h),function(a){return 0<a.length});if(1>=h.length)return[b.range(g,0,k.length)];f.property().setText(g,h[0]);var k=a.generate(h.slice(1),function(a,c){var e=f.create().text(a),e=b.range(e,c,c+a.length);return d.some(e)},h[0].length),m=c.map(k,function(a){return a.element()});f.insert().afterAll(g,m);return[b.range(g,0,h[0].length)].concat(k)}}});l("zc",["7"],function(c){var d=function(b,a){return{fold:b,label:c.constant(a)}};return{none:function(){return d(function(b,
a,c,d){return b()},"none")},start:function(b){return d(function(a,c,d,g){return c(b)},"start")},middle:function(b,a){return d(function(c,d,g,h){return g(b,a)},"middle")},end:function(b){return d(function(a,c,d,g){return g(b)},"end")}}});l("ur",["zc"],function(c){return{determine:function(d){return d.before().fold(function(){return d.after().fold(function(){return c.none()},function(b){return c.start(b)})},function(b){return d.after().fold(function(){return c.end(b)},function(a){return c.middle(b,
a)})})}}});l("12a",["7","s"],function(c,d){var b=c.constant(!1),a=c.constant(!0),e=function(e){return{isBoundary:function(){return e(a,b,b)},fold:e,toText:function(){return e(d.none,d.none,function(a,b){return d.some(a)})},is:function(a){return e(b,b,function(b,c){return c.eq(b,a)})},len:function(){return e(c.constant(0),c.constant(1),function(a,b){return b.property().getText(a).length})}}};return{text:function(a,b){return e(function(c,e,d){return d(a,b)})},boundary:function(a,b){return e(function(c,
e,d){return c(a,b)})},empty:function(a,b){return e(function(c,e,d){return e(a,b)})},cata:function(a,b,c,e){return a.fold(b,c,e)}}});l("15n",["b","7"],function(c,d){return{boundAt:function(b,a,e,f){a=c.findIndex(b,d.curry(f,a));a=-1<a?a:0;e=c.findIndex(b,d.curry(f,e));return b.slice(a,-1<e?e+1:b.length)}}});l("15o",["b"],function(c){return{sliceby:function(d,b){var a=c.findIndex(d,b);return d.slice(0,a)}}});l("14n",["4n"],function(c){c=c.generate([{include:["item"]},{excludeWith:["item"]},{excludeWithout:["item"]}]);
return{include:c.include,excludeWith:c.excludeWith,excludeWithout:c.excludeWithout,cata:function(c,b,a,e){return c.fold(b,a,e)}}});l("15p",["b","14n"],function(c,d){var b=function(a,b){var f=[],g=[];c.each(a,function(a){var c=b(a);d.cata(c,function(){g.push(a)},function(){0<g.length&&f.push(g);f.push([a]);g=[]},function(){0<g.length&&f.push(g);g=[]})});0<g.length&&f.push(g);return f};return{splitby:function(a,c){return b(a,function(a){return c(a)?d.excludeWithout(a):d.include(a)})},splitbyAdv:b}});
l("14m",["15n","15o","15p"],function(c,d,b){return{splitby:function(a,c){return b.splitby(a,c)},splitbyAdv:function(a,c){return b.splitbyAdv(a,c)},sliceby:function(a,b){return d.sliceby(a,b)},boundAt:function(a,b,d,g){return c.boundAt(a,b,d,g)}}});l("12b",["b","7","s","ex","14m"],function(c,d,b,a,e){return{count:function(a){return c.foldr(a,function(a,b){return b.len()+a},0)},dropUntil:function(a,b){return e.sliceby(a,function(a){return a.is(b)})},gen:function(c,e){return c.fold(b.none,function(c){return b.some(a.range(c,
e,e+1))},function(d){return b.some(a.range(d,e,e+c.len()))})},justText:function(a){return c.bind(a,function(a){return a.fold(d.constant([]),d.constant([]),function(a){return[a]})})}}});l("z9",["b","ex","12a","12b"],function(c,d,b,a){var e=function(a,d,f){if(a.property().isText(d))return[b.text(d,a)];if(a.property().isEmptyTag(d))return[b.empty(d,a)];if(a.property().isElement(d)){var m=a.property().children(d),n=a.property().isBoundary(d)?[b.boundary(d,a)]:[];d=void 0!==f&&f(d)?[]:c.bind(m,function(b){return e(a,
b,f)});return n.concat(d).concat(n)}return[]},f=function(b,c,f,m,n){b=e(b,m,n);c=a.dropUntil(b,c);c=a.count(c);return d.point(m,c+f)};return{typed:e,items:function(a,b,d){a=e(a,b,d);var f=function(a,b){return a};return c.map(a,function(a){return a.fold(f,f,f)})},extractTo:function(a,b,c,e,n){return a.up().predicate(b,e).fold(function(){return d.point(b,c)},function(e){return f(a,b,c,e,n)})},extract:function(a,b,c,e){return a.property().parent(b).fold(function(){return d.point(b,c)},function(d){return f(a,
b,c,d,e)})}}});l("za",["b","7","z9"],function(c,d,b){var a=function(a,b){return"img"===b.property().name(a)?" ":"\n"};return{from:function(e,f,g){f=b.typed(e,f,g);return c.map(f,function(b){return b.fold(d.constant("\n"),a,e.property().getText)}).join("")}}});l("zb",["ex","z9","12b","hm"],function(c,d,b,a){return{find:function(e,f,g,h){e=d.typed(e,f,h);e=a.generate(e,b.gen);return a.get(e,g).map(function(a){return c.point(a.element(),g-a.start())})}}});l("up",["z9","za","zb"],function(c,d,b){return{extract:function(a,
b,d,g){return c.extract(a,b,d,g)},extractTo:function(a,b,d,g,h){return c.extractTo(a,b,d,g,h)},all:function(a,b,d){return c.items(a,b,d)},from:function(a,b,d){return c.typed(a,b,d)},find:function(a,c,d,g){return b.find(a,c,d,g)},toText:function(a,b,c){return d.from(a,b,c)}}});l("127",["b","up","12a","14m","14n"],function(c,d,b,a,e){return{group:function(f,g,h){g=c.bind(g,function(a){return d.from(f,a,h)});g=a.splitbyAdv(g,function(a){return b.cata(a,function(){return e.excludeWithout(a)},function(){return e.excludeWith(a)},
function(){return e.include(a)})});return c.filter(g,function(a){return 0<a.length})}}});l("14o",["b","s"],function(c,d){return{common:function(b,a,e){a=[a].concat(b.up().all(a));var f=[e].concat(b.up().all(e));e=c.find(a,function(a){return c.exists(f,function(c){return b.eq(c,a)})});return d.from(e)}}});l("14p",["b"],function(c){var d="table tbody thead tfoot tr ul ol".split(" ");return function(b){var a=b.property(),e=function(b,e){return a.parent(b).map(a.name).map(function(a){return!c.contains(e,
a)}).getOr(!1)};return{validateText:function(b){return a.isText(b)&&e(b,d)}}}});l("128",["b","7","up","14o","14p"],function(c,d,b,a,e){return{range:function(f,g,h,k,m){return f.eq(g,k)?[g]:a.common(f,g,k).fold(function(){return[]},function(a){a=[a].concat(b.all(f,a,d.constant(!1)));var p=c.findIndex(a,d.curry(f.eq,g)),q=c.findIndex(a,d.curry(f.eq,k));a=-1<p&&-1<q?p<q?a.slice(p+h,q+m):a.slice(q+m,p+h):[];p=e(f);return c.filter(a,p.validateText)})}}});l("zd",["127","128"],function(c,d){return{range:function(b,
a,c,f,g){return d.range(b,a,c,f,g)},group:function(b,a,e){return c.group(b,a,e)}}});l("ze",["2u"],function(c){return c.immutable("before","after")});l("ut",["b","s","ze","kd"],function(c,d,b,a){var e=function(b,c,e){b=b.property().getText(c);return a.splits(b,e)},f=function(a,b,d,m){if(!a.property().isText(b)||d===m)return b;if(d>m)return f(a,b,m,d);var n=a.property().getText(b).length;if(0===d&&m===n)return b;m=e(a,b,[d,m]);a.property().setText(b,m[0]);m=c.map(m.slice(1),function(b){return a.create().text(b)});
n=m[0];a.insert().afterAll(b,m);return 0===d?b:n};return{split:function(a,c,f){if(!a.property().isText(c)||0>=f)return b(d.none(),d.some(c));if(f>=a.property().getText(c).length)return b(d.some(c),d.none());f=e(a,c,[f]);a.property().setText(c,f[0]);f=a.create().text(f[1]);a.insert().after(c,f);return b(d.some(c),d.some(f))},splitByPair:f}});l("us",["ex","zd","ut"],function(c,d,b){var a=function(a,e,h,k,m){h=b.split(a,e,h).after().fold(function(){return c.delta(e,1)},function(a){return c.delta(a,0)});
m=b.split(a,k,m).before().fold(function(){return c.delta(k,0)},function(a){return c.delta(a,1)});return d.range(a,h.element(),h.deltaOffset(),m.element(),m.deltaOffset())},e=function(a,c,e,d,m){return[b.splitByPair(a,c,e,m)]};return{nodes:function(b,c,d,k,m){return(b.eq(c,k)?e:a)(b,c,d,k,m)}}});l("pa",["uq","ur","us","ut"],function(c,d,b,a){return{split:function(b,c,d){return a.split(b,c,d)},splitByPair:function(b,c,d,h){return a.splitByPair(b,c,d,h)},range:function(a,c,d,h,k){return b.nodes(a,c,
d,h,k)},subdivide:function(a,b,d){return c.subdivide(a,b,d)},position:function(a,b){return d.determine(b)}}});l("z5",["7","126","pa"],function(c,d,b){var a=function(a,c,e){var k=b.split(a,c,e);return b.position(a,k).fold(function(){return d.invalid(c,e)},d.before,d.after,d.after)},e=function(a,b,c){a=a.property().children(b);return c===a.length?d.last(b):c<a.length?d.rest(a[c]):d.invalid(b,c)};return{atStartOf:function(b,d,h,k){var m=function(a){b.insert().before(a,k)};(b.property().isText(d)?a:e)(b,
d,h).fold(m,function(a){b.insert().after(a,k)},m,function(a){b.insert().append(a,k)},c.noop)}}});l("uj",["z5"],function(c){return{atStartOf:function(d,b,a,e){c.atStartOf(d,b,a,e)}}});l("ue",["6","7","4n"],function(c,d,b){b=b.generate([{none:[]},{root:["target","block"]},{created:["target","block"]},{actual:["target","block"]}]);return c.merge(b,{toString:function(a){return a.fold(function(){return["block.none"]},function(a,b){return["block.root",a,b]},function(a,b){return["block.created",a,b]},function(a,
b){return["block.actual",a,b]})},cata:function(a,b,c,d,h){return a.fold(b,c,d,h)},extract:function(a){var b=d.constant([]),c=function(a,b){return[b]};return a.fold(b,b,c,c)},extractEvenRoot:function(a){var b=d.constant([]),c=function(a,b){return[b]};return a.fold(b,c,c,c)}})});l("ua",["s","ex"],function(c,d){var b=function(a,c){if(a.property().isText(c))return d.point(c,a.property().getText(c).length);var e=a.property().children(c);return 0<e.length?b(a,e[e.length-1]):d.point(c,e.length)},a=function(c,
e,f){var g=c.property().children(e);return 0<g.length&&f<g.length?a(c,g[f],0):0<g.length&&c.property().isElement(e)&&g.length===f?b(c,g[g.length-1]):d.point(e,f)},e=function(a,b,d){return!a.property().isText(b)||0<a.property().getText(b).trim().length?c.none():d(b).bind(function(b){return e(a,b,d).orThunk(function(){return c.some(b)})})},f=function(a,b){var c=e(a,b,a.query().nextSibling).getOr(b);if(a.property().isText(c))return d.point(c,0);var g=a.property().children(c);return 0<g.length?f(a,g[0]):
d.point(c,0)},g=function(a,b){return a.property().isText(b)?a.property().getText(b).length:a.property().children(b).length},h=function(a,b){var c=e(a,b,a.query().prevSibling).getOr(b);if(a.property().isText(c))return d.point(c,g(a,c));var f=a.property().children(c);return 0<f.length?h(a,f[f.length-1]):d.point(c,g(a,c))};return{toLast:b,toLeaf:a,toLower:function(a,b){var c=a.property().isText(b)?a.property().getText(b).length:a.property().children(b).length;return d.point(b,c)},freefallLtr:f,freefallRtl:h}});
l("lw",["ua"],function(c){return{toLeaf:function(d,b,a){return c.toLeaf(d,b,a)},freefallLtr:function(d,b){return c.freefallLtr(d,b)},freefallRtl:function(d,b){return c.freefallRtl(d,b)}}});l("u9","b 7 s lw ij m9".split(" "),function(c,d,b,a,e,f){var g=function(a,b){return function(c){return a.eq(c,b)||a.property().parent(c).map(function(c){return a.eq(c,b)}).getOr(!1)}},h=function(a,c,e){return a.eq(c,e)?b.none():a.property().isBoundary(e)?a.query().nextSibling(e):a.property().isEmptyTag(e)?(c=g(a,
c),c(e)?a.query().nextSibling(e):f.breakPath(a,e,c,f.breakToRight).second()):b.none()},k=function(a,c,e){if(a.eq(c,e))return b.none();if(a.property().isBoundary(e))return a.query().prevSibling(e);if(a.property().isEmptyTag(e)){var d=g(a,c);return d(e)?a.query().prevSibling(e):a.query().prevSibling(e).map(function(b){return f.breakPath(a,b,d,f.breakToRight).first()})}return b.none()},m=function(a,e,d,f){return d(a,e,f).bind(function(d){var f=a.property().children(e),f=c.findIndex(f,function(b){return a.eq(b,
d)});return-1<f?b.some(f):b.none()})},n=function(a,b){return a.property().isEmptyTag(b)||a.property().isBoundary(b)};return{create:function(b,c,f){if(n(b,f)||n(b,a.toLeaf(b,f,0).element()))return[f];var g=d.curry(n,b),t=d.curry(b.eq,c),u=e.seekLeft(b,f,g,t).bind(function(a){return m(b,c,h,a)}).getOr(0),v=b.property().children(c);f=e.seekRight(b,f,g,t).bind(function(a){return m(b,c,k,a)}).getOr(v.length-1);return b.property().children(c).slice(u,f+1)}}});l("u7","b s uj ue u9 1s".split(" "),function(c,
d,b,a,e,f){var g=function(a,b,c,e){return c(b)||e(b)?d.some(b):a.up().predicate(b,c,e)},h=function(b,c,e){e=e();b.insert().wrap(c,e);return a.created(c,e)},k=function(b,e,d,f){var g=f();b.insert().before(d[0],g);c.each(d,function(a){b.insert().append(g,a)});return a.created(e,g)},m=function(c,d,g,m,s,t,u){if(t(g)){var v=c.property().children(d);if(m<v.length&&u(v[m]))return a.actual(g,v[m])}return s(d).fold(function(){return a.root(g,d)},function(s){if(t(g)){var u=s(),v=c.property().children(d),l=
v[m];void 0!==l&&(s=e.create(c,d,l,s),c.insert().appendAll(u,0<s.length?s:[l]));b.atStartOf(c,d,f.min(v.count,m),u);return a.created(d,u)}c.property().isEmptyTag(g)?s=h(c,g,s):(u=e.create(c,d,g),s=0<u.length?k(c,g,u,s):h(c,g,s));return s})};return{single:function(b,c,e,d,f,h){return g(b,e,c,h).fold(a.none,function(g){return h(g)?m(b,g,e,d,f,h,c):a.actual(e,g)})}}});l("me",["4g"],function(c){return{resolve:c.create("ephox-soldier").resolve}});l("m0","b 7 s me 1y 21 2q 4e 2a".split(" "),function(c,
d,b,a,e,f,g,h,k){var m=a.resolve("quasi-block"),n=function(a){a=k.children(a);return 1===a.length&&"br"===f.name(a[0])},p=function(a){return e.has(a,m)&&!n(a)};return{condense:function(a){a=c.filter(a,function(a,b){if(!f.isElement(a))return!0;var c;e.has(a,m)&&n(a)&&(k.prevSibling(a).exists(p)||k.nextSibling(a).exists(p))?(g.remove(a),c=!1):c=!0;return c});return c.map(a,function(a){var b=f.isElement(a)?[a].concat(h.descendants(a,"."+m)):[];c.each(b,function(a){e.remove(a,m)});return a})},register:function(a){return function(b){return a(b).map(function(a){return function(){var b=
a();e.add(b,m);return b}})}},style:d.constant(m)}});l("oe",["e7","b","u7","m0","21"],function(c,d,b,a,e){var f=c();return{single:function(c,e,d,m,n){return b.single(f,c,e,d,a.register(m),n)},isBlock:function(a){return d.contains("ol p div ul table caption td th h1 h2 h3 h4 h5 h6 body blockquote pre".split(" "),e.name(a))}}});l("mr",["7"],function(c){return{tag:function(){return"p"},nu:function(d){return c.curry(d.create().nu,"p")}}});l("u8",["s","4n"],function(c,d){var b=function(a){return 0<a.length?
c.some(a[0]):c.none()},a=d.generate([{descend:["index"]},{leftOf:["rindex"]},{bounded:["lindex","rindex"]},{rightOf:["lindex"]},{all:[]}]);return{derive:function(c,d){return c.bind(b).fold(function(){return d.bind(b).fold(function(){return a.all()},function(b){return a.leftOf(b)})},function(c){return d.bind(b).fold(function(){return a.rightOf(c)},function(b){return c===b?a.descend(c):a.bounded(c,b)})})},cata:function(a,b,c,d,k,m){return a.fold(b,c,d,k,m)}}});l("lz","s ij lx u6 ms u8 u9".split(" "),
function(c,d,b,a,e,f,g){var h=function(a,b,e){return c.from(a.property().children(b)[e])},k=function(a,b,c){var d=a.property().children(c),f=h(a,c,0).bind(function(e){return h(a,c,d.length-1).map(function(d){return m(a,b,c,e,d)})}).getOr([]);return e.container(c,f)},m=function(a,b,f,g,h){var k=n(a,f,b,g);return e.toLastTarget(k).filter(function(b){return!a.eq(h,b)}).bind(function(e){return d.walk(a,e,d.sidestep,d.walkers().right()).bind(function(e){if(a.eq(f,e.item()))return c.none();e=m(a,b,f,e.item(),
h);return c.some([k].concat(e))})}).getOrThunk(function(){return[k]})},n=function(a,c,d,f){if(b.isFormatting(a,f))return e.block(f);if(b.isEmptyTag(a,f))return e.fixture(f);if(b.isBlock(a,f)||b.isContainer(a,f))return k(a,d,f);a=g.create(a,c,f);return e.quasi(0<a.length?a:[f])},p=function(a,b,c){return n(a,c,b,c)},q=function(b,d,f,g,h,k,n,p){f=f.map(function(e){return r(b,d,e,n.bind(a.tail),c.none())}).getOr([]);h=h.map(function(e){return r(b,d,e,c.none(),p.bind(a.tail))}).getOr([]);g=0===g.length?
[]:m(b,d,k,g[0],g[g.length-1]);return[e.container(k,f.concat(g).concat(h))]},r=function(b,e,d,g,h){var k=b.property().children(d);g.bind(a.head).getOr(0);h.bind(a.head).getOr(k.length-1);var m=f.derive(g,h);return f.cata(m,function(c){return r(b,e,k[c],g.bind(a.tail),h.bind(a.tail))},function(a){return q(b,e,c.none(),k.slice(0,a),c.from(k[a]),d,g,h)},function(a,f){return q(b,e,c.from(k[a]),k.slice(a+1,f),c.from(k[f]),d,g,h)},function(a){return q(b,e,c.from(k[a]),k.slice(a+1),c.none(),d,g,h)},function(){return[p(b,
e,d)]})};return{categorise:p,within:function(b,e,d,f,g){return!0===a.isBefore(f,g)?r(b,e,d,c.some(f),c.some(g)):r(b,e,d,c.some(g),c.some(f))}}});l("mt","e7 b 7 s mr ms lz m0 1y 1b l 2o 3c 21 2q at".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t){var u=function(a,b){if("li"!==r.name(a))return!1;var c=d.foldl(b,function(a,b){return 1<a.quasi||0<a.nonlist?a:f.cata(b,function(){return{quasi:1+a.quasi,nonlist:a.nonlist}},function(){return{quasi:a.quasi,nonlist:1+a.nonlist}},function(b){return{quasi:a.quasi,
nonlist:(d.contains(["ul","ol"],r.name(b))?0:1)+a.nonlist}},function(){return{quasi:1+a.quasi,nonlist:a.nonlist}})},{quasi:0,nonlist:0});return 1>=c.quasi&&0===c.nonlist},v=function(a,b,c){return 0>=c.length?!0:d.contains(a,r.name(b))?2<c.length?!1:1===c.length?f.isQuasiOrFixture(c[0]):f.isQuasiOrFixture(c[0])&&f.isQuasiOrFixture(c[1])&&!d.forall(c,f.isFixture):!1};return{wrap:function(a){if(0===a.length||1===a.length&&r.isText(a[0])&&0===t.get(a[0]).trim().length)return[];var b=n.fromTag(e.tag());
k.add(b,h.style());p.before(a[0],b);q.append(b,a);return[b]},handleContainer:function(a,b,c,e){if(v(a,b,c))return[b];var f=u(b,c)?[b]:[];return f.concat(d.bind(c,function(a){return e(a,0<f.length)}))},hasSimpleContent:v,isNestedList:u,handleRoot:function(d,h){var k=g.categorise(c(),b.curry(m.eq,h),h,h,h),n=function(){return a.some(e.nu(c()))},p=a.none;return f.cata(k,n,p,function(a,b){return v(d,a,b)||u(a,b)?p():n()},n)}}});l("lu","b 7 f7 m4 ms oe mt 21".split(" "),function(c,d,b,a,e,f,g,h){var k=
["li","td","th","caption"],m=function(a,b){return e.cata(a,function(a){return!0===b?[]:g.wrap(a)},function(a){return[a]},function(a,b){return g.handleContainer(k,a,b,m)},function(a){return!0===b?[]:g.wrap([a])})};return{isRootContainer:a.isRootOrContainer,extract:function(a){return m(a,!1)},isCapable:function(a){return f.isBlock(a)||c.contains(k,h.name(a))},canUse:function(a){return b.isFormatting(a)||c.contains(k,h.name(a))},quasi:d.curry(g.handleRoot,k),ascend:d.identity}});l("j1",["e7","lw"],function(c,
d){var b=c();return{toLeaf:function(a,c){return d.toLeaf(b,a,c)},freefallLtr:function(a){return d.freefallLtr(b,a)},freefallRtl:function(a){return d.freefallRtl(b,a)}}});l("dt",["80","s","2u"],function(c,d,b){var a=b.immutableBag(["start","soffset","finish","foffset","all"],[]),e=b.immutableBag(["start","soffset","finish","foffset"],[]);return{block:a,inline:e,blockFrom:function(b){return 0<b.length?d.some(a({start:b[0],soffset:0,finish:b[b.length-1],foffset:c.getEnd(b[b.length-1]),all:b})):d.none()},
inlineFrom:function(a){return a.map(function(a){return e({start:a.start(),soffset:a.soffset(),finish:a.finish(),foffset:a.foffset()})})}}});l("nf",["7","s","1b","2a"],function(c,d,b,a){var e=function(b,c){return c(b)?d.some([]):a.parent(b).bind(function(d){return a.findIndex(b).bind(function(a){return e(d,c).map(function(b){return b.concat([a])})})})},f=function(b,c){return 0===c.length?d.some(b):a.child(b,c[0]).bind(function(a){return f(a,c.slice(1))})};return{path:function(a,f){var k=c.curry(b.eq,
a);return b.eq(a,f)?d.some([]):e(f,k)},follow:f}});l("ly","80 s ex j1 g6 2u ue oe 1b l nf 2o".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=f.immutable("ancestor","startPath","finishPath"),r=function(a,b,c){return e.ancestors(b,c,a).shared().bind(function(a){return n.path(a,b).bind(function(b){return n.path(a,c).map(function(c){return q(a,b,c)})})})},s=function(a,b,c,e){var f=b.isRootContainer(a);c=h.single(b.isCapable,c,e,b.quasi,f);c=g.extractEvenRoot(c);return 1===c.length?d.some(c[0]).map(function(c){return b.ascend(c,
a)}):d.none()},t=function(e,d,f,g){return e.isRootContainer(d)(f)?(g<c.getEnd(f)||e.isCapable(f)&&e.canUse(f)?f=a.toLeaf(f,g):(e=m.fromTag("br"),p.append(f,e),f=b.point(e,0)),f):b.point(f,g)};return{branch:function(a,b,c,e,f,g){var h=t(b,a,c,e),m=t(b,a,f,g);return s(a,b,h.element(),h.offset()).bind(function(c){return(k.eq(h.element(),m.element())&&h.offset()===m.offset()?d.some(c):s(a,b,m.element(),m.offset())).bind(function(b){return k.eq(c,b)?d.some(q(c,[],[])):r(a,c,b)})})}}});l("ea","e7 b 80 s ex j1 f7 dt ly lz m0 2m dl l 2o 21 2a".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u){var v=function(c,g,h,k,m,n,q){c=g.isRootContainer(c)(h);g=!c&&p.inBody(h)?e.point(h,k):c||!g.isCapable(h)||p.inBody(h)?p.inBody(m.element())&&d.contains(["td","th"],t.name(h))?m:!p.inBody(h)&&p.inBody(n.element())&&"br"==t.name(n.element())?n:f.toLeaf(q,0):e.point(q,k);b.getEnd(g.element());return g.offset()<=b.getEnd(g.element())?a.some(g):a.none()};return{applyOn:function(b,p,t,l,A,D,B){var C=q.after(t,l,A,D),F=p.isRootContainer(b)(t)?f.toLeaf(t,l):e.point(t,
l),E=p.isRootContainer(b)(A)?f.toLeaf(A,D):e.point(A,D),G=f.toLeaf(t,l),H=f.toLeaf(A,D),I=k.branch(b,p,t,l,A,D).map(function(a){return m.within(c(),b,a.ancestor(),a.startPath(),a.finishPath())}).getOr([]),I=d.bind(I,p.extract);d.each(I,function(a){0===u.children(a).length&&g.isFormatting(a)&&s.append(a,r.fromTag("br"))});var I=n.condense(I),K=B(I);return 0===K.length?a.none():v(b,p,t,l,F,G,K[C?K.length-1:0]).bind(function(a){return v(b,p,A,D,E,H,K[C?0:K.length-1]).map(function(b){return h.block({start:a.element(),
soffset:a.offset(),finish:b.element(),foffset:b.offset(),all:K})})})}}});l("m1",["2n","bl","21"],function(c,d,b){var a=function(a){return function(b){return a}},e={start:d.onDirection("left","right"),end:d.onDirection("right","left"),justify:a("justify"),center:a("center"),"match-parent":a("match-parent")};return{hasAlignment:function(a,d,h){b.isText(a)?a=!1:(d=c.get(a,d),a=(void 0!==e[d]?e[d](a):d)===h);return a}}});l("m2",["2n"],function(c){return function(d,b){return{is:function(a){return c.get(a,
d)===b},remove:function(a){c.remove(a,d)},set:function(a){c.set(a,d,b)}}}});l("dh","b 7 lt lu ea m1 m2".split(" "),function(c,d,b,a,e,f,g){var h=function(a,b,c){return f.hasAlignment(c,a,b)},k=function(f,k,m){var n=g(k,m);return{run:function(b,d,f,g,h){return e.applyOn(b,a,d,f,g,h,function(a){var b=c.forall(a,n.is)?n.remove:n.set;c.each(a,b);return a})},query:function(a,c){var e=d.curry(h,k,m);return b.bothMatch(a,c,e)},name:d.constant(f)}},m=k("JustifyLeft","text-align","left"),n=k("JustifyCenter",
"text-align","center"),p=k("JustifyRight","text-align","right"),k=k("JustifyFull","text-align","justify");return{justifyleft:d.constant(m),justifycentre:d.constant(n),justifyright:d.constant(p),justifyfull:d.constant(k)}});l("do",["s","2n","35"],function(c,d,b){var a=function(a){a=a.dom();if(b.isSupported(a)){var c=a.style.marginLeft;return"auto"===a.style.marginRight&&"auto"===c}return!1};return{isCentered:a,divine:function(b){if(a(b))return c.some("center");var f=d.getRaw(b,"float").getOrThunk(function(){return d.get(b,
"float")});return void 0!==f&&null!==f&&0<f.length?c.some(f):c.none()},getRaw:function(a){return d.getRaw(a,"float").getOr(null)},setCentered:function(a){d.setAll(a,{"margin-left":"auto","margin-right":"auto"})}}});l("di",["7","s","2n","do","21"],function(c,d,b,a,e){var f={left:{"float":"left",margin:""},right:{"float":"right",margin:""},none:{"float":"none",margin:""},center:{"float":"",margin:"0 auto"}},g={none:{display:""},left:{display:""},right:{display:""},center:{display:"block"}},h=function(b,
c){return a.divine(b).is(c)},k=function(a,c){var h="img"===e.name(a)&&void 0!==g[c]?g[c]:{};d.from(f[c]).each(function(c){b.setAll(a,c);b.setAll(a,h)})},m=function(a,b){return{run:function(a){k(a,b);return d.none()},query:function(a){return h(a,b)},name:c.constant(a)}},n=m("JustifyLeft","left"),p=m("JustifyCenter","center"),q=m("JustifyRight","right"),m=m("FloatNone","none");return{floatnone:c.constant(m),floatleft:c.constant(n),floatcentre:c.constant(p),floatright:c.constant(q),queryIsFloat:h,runFloat:k}});
l("uf",["2u"],function(c){return c.immutable("level","content","cruft","list","item")});l("m3",["uf"],function(c){return{level:function(d,b){return c(d.level()+b,d.content(),d.cruft(),d.list(),d.item())},list:function(d,b){return c(d.level(),d.content(),d.cruft(),b,d.item())}}});l("m5","e7 b 7 s f7 mr m4 ms oe mt 21".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=function(a){return h.cata(a,function(a){return m.wrap(a)},function(a){return[a]},function(a,b){return d.bind(b,p)},function(a){return m.wrap([a])})};
return{isRootContainer:g.isRootOrContainer,extract:p,isCapable:function(a){return k.isBlock(a)||"li"===n.name(a)},canUse:function(a){return e.isFormatting(a)},quasi:function(b){return a.some(f.nu(c()))},ascend:b.identity}});l("uh",["b","lx","2u"],function(c,d,b){var a=b.immutable("elements","elementsTransformed"),e=b.immutable("original","replaced"),f=b.immutable("result","items");return{answer:a,write:function(b,h){var k=[],m=function(a){var c=b.create().nu("p");b.insert().appendAll(c,a);return c},
n=function(a){if(0===a.length)throw"Cannot get tail of an empty array";return a.slice(1)},p=function(a,e){for(var d=b.create().clone(e[0].list()),h=[];0<e.length&&e[0].level()>=a;){var k;if(e[0].level()===a){var m=a;k=e;var q=k[0],l;l=q;var z=l.item(),A=z,A=b.property().children(A);c.each(A,b.remove().remove);b.insert().appendAll(z,l.content());l=z;q=q.cruft();k=n(k);0<k.length&&k[0].level()>m&&(m=p(m+1,k),k=m.items(),b.insert().append(l,m.result()));b.insert().appendAll(l,q);k=f(l,k);k=f([k.result()],
k.items())}else k=p(a+1,e),m=b.create().nu("li"),b.styles().set(m,"list-style-type","none"),b.attrs().remove(d,"id"),b.insert().append(m,k.result()),k=f([m],k.items());e=k.items();h=h.concat(k.result())}b.insert().appendAll(d,h);return f(d,e)},q=function(a){for(var c=[];0<a.length;){var h=a[0];if(0===h.level()){var q;q=a[0];var v=q.content(),v=1===v.length&&d.isBlock(b,v[0])?v[0]:m(v);k.push(e(q.item(),v));q=f([v],n(a));a=q.items();c=c.concat(q.result());for(q=[];0<a.length&&0<a[0].level();)v=p(1,
a),a=v.items(),q=q.concat([v.result()]);q=f(q,a);a=q.items();c=c.concat(q.result());0<h.cruft().length&&(c=c.concat([m(h.cruft())]))}else h=p(1,a),a=h.items(),c=c.concat([h.result()])}return f(c,a)}(h);if(0!==q.items().length)throw"Error - there should not be any remaining items to parse";return a(q.result(),k)}}});l("ug",["b","uh"],function(c,d){var b=function(a){return c.foldl(a,function(a,b){var c=a.elements().concat(b.elements()),h=a.elementsTransformed().concat(b.elementsTransformed());return d.answer(c,
h)},d.answer([],[]))};return{combine:b,write:function(a,e){var f=c.groupBy(e,function(b){return a.property().name(b.list())+"-"+a.styles().getRaw(b.list(),"list-style-type").getOr("default")}),f=c.map(f,function(b){return d.write(a,b)});return b(f)}}});l("mu",["e7","ug","uh"],function(c,d,b){var a=c();return{groupWrite:function(b){return d.write(a,b)},write:function(c){return b.write(a,c)}}});l("mv","b 7 s f7 1b 21 6j 4e 31 1s".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(a,b,c){return k.closest(a,
"li",c).bind(function(a){return b(a,c).map(function(b){return{item:d.constant(a),outerlist:d.constant(b)}})})},p=function(a,b){return c.findIndex(a,function(a){return e.eq(a,b)})};return{context:function(a,c,f,g,k){return n(a,f,k).bind(function(v){return n(c,f,k).bind(function(f){if(e.eq(v.outerlist(),f.outerlist())){var k;if(e.eq(a,c))k=[v.item()];else{k=v.outerlist();var n=v.item(),s=f.item();k=h.descendants(k,"li");var n=p(k,n),u=p(k,s),s=m.min(n,u),n=m.max(n,u);k=(-1<s&&-1<n?b.some(k.slice(s,
n+1)):b.none()).getOr([])}f=b.some({outerlist:v.outerlist,startItem:v.item,finishItem:f.item,writer:d.constant(g),selected:d.constant(k)})}else f=b.none();return f})})},immediate:function(a,b){return k.closest(a,"ul,ol",b)},topmost:function(e,d){var h=g.ancestors(e,function(b){return a.isList(b)||a.isContainer(b)},d),k=c.findIndex(h,function(a){return!c.contains(["li","ol","ul"],f.name(a))});return 0<k&&k-1<h.length?b.some(h[k-1]):0<h.length?b.some(h[h.length-1]):b.none()}}});l("m6",["m3","mu","mv"],
function(c,d,b){return{context:function(a,c,f){return b.context(a,c,b.topmost,d.write,f)},indent:function(a){return c.level(a,1)},outdent:function(a){return c.level(a,-1)}}});l("m7",["b","1b"],function(c,d){var b=function(a,b){var f=c.find(a,function(a){return d.eq(b,a)});return null!==f&&void 0!==f};return{operate:function(a,e,d){return c.map(e,function(c){return b(d,c.item())?a(c):c})}}});l("ui",["b","s","2u"],function(c,d,b){var a=b.immutable("before","on","after");return{refine:function(b,f){var g=
c.findIndex(b,f),h=a(b,d.none(),[]);if(-1===g)g=h;else var h=d.from(b[g]),k=b.slice(0,g),g=b.slice(g+1),g=a(k,h,g);return g}}});l("m8","b uf ui 2n 21 4e m 2a".split(" "),function(c,d,b,a,e,f,g,h){var k=function(a,b){var d=f.children(a,"li,ol,ul");return c.bind(d,function(c){return"li"===e.name(c)?m(a,c,b):k(c,b+1)})},m=function(b,c,e){var f=p(c),g="none"===a.get(c,"list-style-type")?[]:[d(e,f.before(),f.after(),b,c)];return f.on().fold(function(){return g},function(a){a=k(a,e+1);return g.concat(a)})},
n=function(a){return g.is(a,"ol,ul")},p=function(a){a=h.children(a);return b.refine(a,n)};return{read:function(a){return k(a,1)}}});l("ec","b m7 m8 7 s dt 1a 1b 2n 3c 2q 1s".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=function(a){a=a.elementsTransformed();c.each(a,function(a){k.transfer(a.original(),a.replaced(),["text-align"]);g.transfer(a.original(),a.replaced(),["dir"])})},r=function(a,b){var d=c.find(b,function(b){return h.eq(b.original(),a)});return void 0!==d&&null!==d?d.replaced():a},
s=function(a,c,g,h,k,p){if(0===a.selected().length)return e.none();var s=a.writer(),l=a.outerlist();a=a.selected();var D=b.read(l);p=p(a);p=d.operate(p,D,a);s=s(p);q(s);m.before(l,s.elements());n.remove(l);l=s.elementsTransformed();c=r(c,l);h=r(h,l);return e.some(f.block({start:c,soffset:g,finish:h,foffset:k,all:s.elements()}))};return{execute:function(b,c,d,e,f,g){return s(b,c,d,e,f,a.constant(g))},executeUsing:s}});l("dj","e7 b m3 m4 ea m5 m6 ec".split(" "),function(c,d,b,a,e,f,g,h){c();var k=function(a,
b,c,g,h,k,m){return e.applyOn(a,f,b,c,g,h,function(a){d.each(a,function(a){m.change(a,k)});return a})},m=function(b,c){return function(d,e,f,m,u,v){var w=a.isRootOrCell(d);return g.context(e,m,d).fold(function(){return k(w,e,f,m,u,b,v)},function(a){return h.execute(a,e,f,m,u,c)})}};return{indent:function(a,b,c,d,e,f){return m(1,g.indent)(a,b,c,d,e,f)},outdent:function(a,b,c,d,e,f){return m(-1,g.outdent)(a,b,c,d,e,f)}}});l("ma","e7 b 7 s f7 mr ms 21".split(" "),function(c,d,b,a,e,f,g,h){return{isRootContainer:function(a){return function(b){return a(b)||
d.contains(["td","th","caption"],h.name(b))}},extract:function(a){return g.cata(a,function(a){return[a]},function(a){return[a]},function(a,b){return d.contains(["ol","ul"],h.name(a))?[a]:d.bind(b,g.toTarget)},function(a){return[a]})},isCapable:function(a){return e.isBlock(a)},canUse:b.constant(!1),quasi:function(b){return a.some(f.nu(c()))},ascend:b.identity}});l("dk","b s g6 dt ma ea 1b l 2o 3c 2q 4e 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=function(a){return q.closest(a,"blockquote")},
s=function(a){return b.sharedOne(r,a)},t=function(a,b,d,g,q){return f.applyOn(a,e,b,d,g,q,function(a){var b=h.fromTag("blockquote");0<a.length&&(k.before(a[0],b),m.append(b,a),b=p.descendants(b,"blockquote"),c.map(b,n.unwrap));return a})};return{toggle:function(b,c,e,f,h){return(g.eq(c,f)?r(c):s([c,f])).fold(function(){return t(b,c,e,f,h)},function(b){n.unwrap(b);return d.some(a.block({start:c,soffset:e,finish:f,foffset:h,all:[]}))})},queryPoint:r,queryAll:s}});l("78","7 d8 d9 da db dc dd 7f 7c dg dh di dj dk 3t".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){var t=function(b,d,e,f){var g=b.content(),k=b.undo();h.cata(b.selections().get(),c.noop,a.multiple(g,b.undo(),f),a.single(g,k,f,d,e))};s=function(a){return function(b){var c=0<a?q.indent:q.outdent,e=d(b.region()),h=b.content();t(b,g.spot,f.update,function(a,b,d,f){return c(h.isRoot,a,b,d,f,e)})}};var u=function(a){return function(b){var d=b.content(),k=function(b,c,e,f){return a.run(d.isRoot,b,c,e,f)};h.cata(b.selections().get(),c.noop,e.multiple(d,b.undo(),
k),e.single(d,b.undo(),k,g.spot,f.update))}},v=function(a){return function(c){c.content().getSelection().bind(k.detect).each(function(d){b.runTransaction(c.content(),c.undo(),function(){(a.query(d.image())?p.floatnone():a).run(d.image())},c.content().toEditing)})}};return{indent:s(1),outdent:s(-1),blockquote:function(a){var b=a.content();t(a,g.spot,f.update,function(a,c,d,e){return r.toggle(b.isRoot,a,c,d,e)})},justifyLeft:u(n.justifyleft()),justifyCentre:u(n.justifycentre()),justifyRight:u(n.justifyright()),
justifyFull:u(n.justifyfull()),imageNone:v(p.floatnone()),imageLeft:v(p.floatleft()),imageCentre:v(p.floatcentre()),imageRight:v(p.floatright()),breakQuote:function(a,b,c){m.breakQuote(b,c).each(function(b){a.content().setRelativeSelection(b.start(),b.finish());a.content().uiChanged()})}}});l("79",["a","b","7","s"],function(c,d,b,a){var e=function(b,c){var e=d.find(b,function(a){return a.value()===c});return a.from(e)};return{updateMenu:function(d,g,h,k,m){g.fold(d.clear,b.noop,function(b){(c.isString(b)?
e(k,b):a.some(b)).each(d.select);m.each(function(a){a=a(b);d.selectElement(a)})});h.fold(d.disable,b.noop,d.enable);g.fold(d.untick,b.noop,function(a){a=c.isString(a)?a:a.value();d.tick(a)})}}});l("7a","b 7 4n dl 21 31".split(" "),function(c,d,b,a,e,f){var g=b.generate([{table:["selection"]},{list:["selection"]}]),h=function(a,b){return a.isRoot(b)||c.contains(["table","ul","ol"],e.name(b))};return{context:function(b){return b.getSelection().bind(function(c){if(c.collapsed())return f.closest(c.startContainer(),
"td,th,li",d.curry(h,b)).map(function(a){return"li"===e.name(a)?g.list(c):g.table(c)});var n=a.commonAncestorContainer(c.startContainer(),c.startOffset(),c.endContainer(),c.endOffset());return f.closest(n,"ol,ul",b.isRoot).map(function(a){return g.list(c)})})},cata:function(a,b,c){return a.fold(b,c)}}});l("dm",["7","1a","2n"],function(c,d,b){return{attr:function(a,b,f){var g=c.curry(d.set,a,b,f);a=c.curry(d.remove,a,b);0<f.length?g():a()},css:function(a,d,f){var g=c.curry(b.set,a,d,f);a=c.curry(b.remove,
a,d);0<f.length?g():a()}}});l("jv",["4g"],function(c){return{resolve:c.create("ephox-salmon").resolve}});l("dn",["7","jv"],function(c,d){var b=d.resolve("upload-image-in-progress"),a="data-"+d.resolve("image-blob");return{uploadInProgress:c.constant(b),blobId:c.constant(a)}});l("9k","dm dn 2u di 1a 2n do 64 2r dp".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=b.immutableBag("url alt width height isLocal align".split(" "),["computedWidth","computedHeight"]),p=function(a,b){var c=e.get(a,b);return void 0!==
c?c:""};return{divine:function(a){var b=f.getRaw(a,"width").getOr(""),c=f.getRaw(a,"height").getOr(""),m=f.getRaw(a,"width").getOrThunk(function(){return k.get(a)+"px"}),u=f.getRaw(a,"height").getOrThunk(function(){return h.get(a)+"px"}),v=g.divine(a);return n({url:p(a,"src"),alt:p(a,"alt"),width:b,height:c,computedWidth:m,computedHeight:u,isLocal:e.has(a,d.blobId()),align:v})},properties:n,apply:function(b,d){e.get(b,"src")===d.url()||d.isLocal()||e.set(b,"src",d.url());c.attr(b,"alt",d.alt());c.css(b,
"width",d.width());c.css(b,"height",d.height());d.align().each(function(c){a.runFloat(b,c)})}}});l("dq",["21","2a"],function(c,d){return{hasNoContent:function(b){var a=d.children(b);return c.isElement(b)&&(0===a.length||1===a.length&&"br"===c.name(a[0]))}}});l("7b","b 7 s 9k dq 7c 7d 2u dh dk 1b 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=h.immutable("alignment","quoted"),r=function(a){return a.getSelection().fold(function(){return!1},function(a){var b=a.startContainer();a=a.endContainer();
return n.eq(b,a)?m.queryPoint(b).isSome():m.queryAll([b,a]).isSome()})},s=[k.justifyleft(),k.justifycentre(),k.justifyright(),k.justifyfull()],t=function(d){return d.getSelection().bind(f.detect).fold(function(){return d.getSelection().bind(function(a){var d=c.find(s,function(b){return b.query(a.startContainer(),a.endContainer())});return null!==d&&void 0!==d?b.some(d.name()):b.none()}).fold(g.off,g.on)},function(b){return a.divine(b.image()).align().fold(g.off,function(a){return"center"===a?g.on(k.justifycentre().name()):
"right"===a?g.on(k.justifyright().name()):g.on(k.justifyleft().name())})})};return{read:function(a){var b=t(a);a=r(a)?g.on({}):g.off();return q(b,a)},alignment:t,inQuote:r,atQuoteBreak:function(a){return a.getSelection().bind(function(a){var c=a.startContainer();return a.collapsed()?p.closest(c,"blockquote").bind(function(a){return e.hasNoContent(c)?b.some({quote:d.constant(a),element:d.constant(c)}):b.none()}):b.none()})}}});l("5a","77 7 s 78 79 75 7a 7b 7c 6v 76 7d 55 46 2u q".split(" "),function(c,
d,b,a,e,f,g,h,k,m,n,p,q,r,s,t){return function(t){var v=t.content(),w=t.keyboard(),l=t.shortcuts(),y=t.context(),z=r.create({analytics:q(["message","properties"])}),A=d.curry(a.indent,t),D=d.curry(a.outdent,t),B=d.curry(a.blockquote,t);l.events.indent.bind(A);l.events.outdent.bind(D);l.events.blockquote.bind(B);var C=function(a){var b=a.stopper();g.context(v).bind(function(c){g.cata(c,d.noop,function(c){(a.shift()?D:A)();b()})})},F=w.editor();F.on();F.events.tab.bind(C);y.events.preLinebreak.bind(function(b){h.atQuoteBreak(t.content()).each(function(c){a.breakQuote(t,
c.quote(),c.element());b.handler().handle()})});var E=s.immutable("value","icon","textkey"),w=E("justifyleft",b.some(c.resolve("justifyleft")),f.key("alignment.left")),l=E("justifycenter",b.some(c.resolve("justifycenter")),f.key("alignment.center")),y=E("justifyright",b.some(c.resolve("justifyright")),f.key("alignment.right")),G=E("justifyfull",b.some(c.resolve("justifyfull")),f.key("alignment.justify")),H=E("justifyleft",b.some(c.resolve("justifyleft")),f.key("alignment.left")),I=E("justifycenter",
b.some(c.resolve("justifycenter")),f.key("alignment.center")),E=E("justifyright",b.some(c.resolve("justifyright")),f.key("alignment.right")),K=[w,l,y,G],J=[H,I,E],M=function(){return v.getSelection().bind(k.detect).fold(function(){return K},function(a){return J})},O={justifyleft:d.curry(a.imageLeft),justifycenter:d.curry(a.imageCentre),justifyright:d.curry(a.imageRight)},N={justifyleft:a.justifyLeft,justifycenter:a.justifyCentre,justifyright:a.justifyRight,justifyfull:a.justifyFull},Q=function(a){return a.toLowerCase()},
R=b.none();return{ui:m.ui({"indent.general":{value:"indent",textkey:f.key("action.indent"),action:A,updateGeneral:d.identity,tooltip:n.get,toggle:!1},"outdent.general":{value:"outdent",textkey:f.key("action.outdent"),action:D,updateGeneral:d.identity,tooltip:n.get,toggle:!1},"blockquote.general":{value:"blockquote",textkey:f.key("action.blockquote"),action:B,updateGeneral:function(a){h.read(v).quoted().fold(a.deselect,d.noop,a.select)},tooltip:n.get,toggle:!0},"alignment.dropdown":{name:"alignment",
textkey:f.key("alignment.toolbar"),menuTextkey:f.key("alignment.menu"),action:function(a){var b=v.getSelection().bind(k.detect).fold(d.constant(N),d.constant(O));(void 0!==b[a]?b[a]:d.noop)(t)},updateDropdown:function(a){var c=M(),f=h.read(v).alignment().fold(function(){return 0<c.length?p.on(c[0].value()):p.off()},p.unchanged,p.on);a.populate([{label:b.none,items:d.constant(c)}]);e.updateMenu(a,f.map(Q),p.on(),c,R)},values:K,render:R,tooltip:n.get,toggle:!1,describe:function(a){return f.translate("alignment.describe",
f.get(a.textkey()))}}}),events:z.registry,destroy:function(){F.off();F.events.tab.unbind(C);F.destroy()}}}});l("7e",["b","d9"],function(c,d){return{multiple:function(b,a,e){return function(f,g){d.runTransaction(b,a,function(){c.each(g,e)},b.toEditing)}},single:function(b,a,c){return function(f,g){d.runTransaction(b,a,function(){c(g).each(function(a){b.setSelection(a.start(),a.soffset(),a.finish(),a.foffset())});b.backupSelection()},b.toEditing)}}}});l("mg",["e7","uj"],function(c,d){var b=c();return{atStartOf:function(a,
c,f){d.atStartOf(b,a,c,f)}}});l("du",["7","m0","me"],function(c,d,b){b=b.resolve("style-marker");return{styleSpan:c.constant(b),overrideSpan:c.constant("data-ephox-override"),quasiBlock:d.style}});l("dw",["80","s","2u","2a"],function(c,d,b,a){var e=b.immutable("startContainer","startOffset","endContainer","endOffset"),f=b.immutable("start","soffset","finish","foffset");return{hare:e,fussy:f,fromHare:function(a){return f(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())},fromFussy:function(a){return e(a.start(),
a.soffset(),a.finish(),a.foffset())},fussyFromElements:function(b){if(0===b.length)return d.none();var e=b[0];b=b[b.length-1];e=a.firstChild(e).getOr(e);b=a.lastChild(b).getOr(b);return d.some(f(e,0,b,c.getEnd(b)))}}});l("uk",["7v","4n"],function(c,d){var b=d.generate([{none:[]},{tempIn:["selection"]},{tempOut:["selection"]},{rangedIn:["selection"]},{rangedOut:["selection"]}]);return{detect:function(a,d){return a.getSelection().fold(function(){return b.none()},function(a){var g=d(a);return c.isCollapsed(a.startContainer(),
a.startOffset(),a.endContainer(),a.endOffset())?g?b.tempIn(a):b.tempOut(a):g?b.rangedIn(a):b.rangedOut(a)})}}});l("ul",["1a","2n","l"],function(c,d,b){var a=function(a,c){return b.fromTag(a,c.dom())},e=function(a,c,e){e=b.fromTag("span",e.dom());d.set(e,a,c);return e};return{nu:function(b,c,d,k){return"span"===d?e(b,c,k):a(d,k)},nuTag:a,nuAttr:function(a,d,e){e=b.fromTag("span",e.dom());c.set(e,a,d);return e},nuStyle:e}});l("hi",["b","s","2n","21","2a"],function(c,d,b,a,e){var f={"font-weight":{700:"bold",
400:"normal"}},g=function(a,b){if(a===b&&""!==b&&void 0!==b)return!0;var d=a.toLowerCase(),e=b.toLowerCase().split(" ");return c.contains(e,d)},h=function(a,b){if(void 0!==f[a]){var c=f[a][b];return void 0!==c?c:b}return b},k=function(a,b){var c=m(a,b);return h(b,c)},m=function(c,f){return(a.isText(c)?e.parent(c):d.some(c)).map(function(a){return b.get(a,f)}).getOr(void 0)};return{state:function(a,b,c){a=k(a,b);return"text-decoration"===b?g(c,a):c===a&&""!==a&&void 0!==a},rawState:function(a,c,d){a=
h(c,b.getRaw(a,c).getOr(void 0));return"text-decoration"===c?g(d,a):d===a&&""!==a&&void 0!==a},value:k}});l("z6",["b","s","2n","21","4i"],function(c,d,b,a,e){var f={"text-decoration":function(d,f,k,m){var n=function(f){return e.closest(f,function(e){return a.isElement(e)&&(c.contains(k,a.name(e))||b.getRaw(e,d).isSome())}).toArray()};m=n(m.startContainer()).concat(n(m.endContainer()));return c.exists(m,function(e){return c.contains(k,a.name(e))?!0:b.getRaw(e,d).exists(function(a){return f===a})})}};
return{handle:function(a,b,c){return void 0!==f[a]?d.some(f[a]):d.none()}}});l("um","b 7 s hi z6 1a 21 6o 31".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a,b){return b.getSelection().map(function(b){return a(b)}).getOr(!1)},n=function(b,c,d,f){return e.handle(b,c).fold(function(){var d=a.state(f.startContainer(),b,c),e=a.state(f.endContainer(),b,c);return d||e},function(a){return a(b,c,d,f)})},p=function(a,b,c,e){return m(d.curry(n,a,b,c),e)},q=function(a,b){var c=h.closest(b.startContainer(),
a),d=h.closest(b.endContainer(),a);return c||d},r=function(a,b){return m(d.curry(q,a),b)},s=function(a,b){return c.contains(a,g.name(b))},t=function(a,c){var d="["+a+"]";return k.closest(c.startContainer(),d).bind(function(e){return k.closest(c.endContainer(),d).bind(function(c){var d=f.get(e,a);c=f.get(c,a);d=d.toLowerCase();c=c.toLowerCase();return d===c?b.some(d):b.none()})})};return{queriesStyle:function(a,b,c){return{queryOn:d.curry(n,a,b,c),query:d.curry(p,a,b,c)}},queryStyleOn:n,queriesTag:function(a){return{queryOn:d.curry(q,
a),query:d.curry(r,a)}},relatedStyle:function(b,c,d,e){(d=s(d,e))||(d="span"===g.name(e)&&a.state(e,b,c));return d},relatedTags:s,queryAttrSame:function(a,b){return b.getSelection().bind(function(b){return t(a,b)})},queryAttrIs:function(a,b,c){var d=b.toLowerCase(),e=function(b){return f.get(b,a).toLowerCase()===d};return k.closest(c.startContainer(),"["+a+"]").filter(e).orThunk(function(){return k.closest(c.endContainer(),"["+a+"]").filter(e)}).isSome()}}});l("14q","b s ex lw ij lx 4n 2u".split(" "),
function(c,d,b,a,e,f,g,h){var k=g.generate([{none:["last","mode"]},{running:["next","mode"]},{split:["boundary","last","mode"]},{finished:["element","mode"]}]),m=h.immutable("start","soffset","finish","foffset"),n=function(c,d,e){e=a.toLeaf(c,e,0);return r(c,e.element())?q(c,d,e.element()).map(function(a){return b.point(a,0)}).getOr(e):e},p=function(a,b){return f.isFrame(a,b)||f.isBlock(a,b)||c.contains(["li"],a.property().name(b))},q=function(a,b,c){return e.seekRight(a,c,function(b){return!r(a,
b)&&!p(a,b)},b)},r=function(a,b){return a.property().isText(b)?a.property().parent(b).exists(function(b){return c.contains("table tbody thead tfoot tr ul ol".split(" "),a.property().name(b))}):!1},s=function(a,b,c,d,f){return e.walk(a,d,c,e.walkers().right()).fold(function(){return k.none(d,e.sidestep)},function(b){return a.eq(b.item(),f)?k.finished(f,b.mode()):p(a,b.item())?k.split(b.item(),d,b.mode()):k.running(b.item(),b.mode())})},t=function(a,b,c,e){return q(a,b,c).fold(function(){return d.none()},
function(f){return a.eq(f,e)?d.some(e):u(a,c,f)?t(a,b,f,e):p(a,f)?(f=n(a,b,f),d.some(f.element())):d.some(f)})},u=function(a,b,c){return a.property().parent(b).exists(function(b){return a.eq(b,c)})},v=function(a,b,c,f,g,h){return s(a,b,c,g,h).fold(function(a,b){return[{start:f,finish:a}]},function(c,d){return v(a,b,d,f,c,h)},function(c,k,m){var p={start:f,finish:k};return(u(a,g,c)?t(a,b,c,h):function(){var f=n(a,b,c);return a.eq(f.element(),c)?e.walk(a,c,e.advance,e.walkers().right()).map(function(a){return a.item()}):
d.some(f.element())}()).fold(function(){return[p]},function(c){return a.eq(c,h)?[p].concat({start:h,finish:h}):[p].concat(v(a,b,e.advance,c,c,h))})},function(a,b){return[{start:f,finish:a}]})},w=function(a,b,c){if(p(a,b)){var d=a.property().children(b);return 0<=c&&c<d.length?w(a,d[c],0):c===d.length?w(a,d[d.length-1],0):b}return b},l=function(a,b,c,d){c=w(a,c,d);return r(a,c)?q(a,b,c).getOr(c):c},y=function(a,b,d,f,g,h){var k=l(a,b,d,f),n=l(a,b,g,h);b=v(a,b,e.sidestep,k,k,n);return c.map(b,function(b,
c){var e=a.eq(b.start,d)?f:0,k;a.eq(b.finish,g)?k=h:(k=b.finish,k=a.property().isText(k)?a.property().getText(k).length:a.property().children(k).length);return m(b.start,e,b.finish,k)})},z=function(b,c,d,e,f,g){b.eq(d,f)?p(b,d)?(e=a.toLeaf(b,d,e),g=a.toLeaf(b,d,g),b=b.eq(e.element(),d)&&b.eq(g.element(),d)?[m(e.element(),e.offset(),g.element(),g.offset())]:z(b,c,e.element(),e.offset(),g.element(),g.offset())):b=[m(d,e,d,g)]:b=y(b,c,d,e,f,g);return b};return{collect:z}});l("14r",["ij","pa","4n"],function(c,
d,b){var a=b.generate([{leftEdge:["element"]},{between:["before","after"]},{rightEdge:["element"]}]),e=function(b,c,e){e=d.split(b,c,e);var f=function(){return a.rightEdge(c)};return d.position(b,e).fold(f,function(){return a.leftEdge(c)},a.between,f)},f=function(b,c,d,f){if(b.property().isText(c))return e(b,c,d);if(b.property().isEmptyTag(c))return f(c);b=b.property().children(c);c=0===d?a.leftEdge(c):d===b.length?a.rightEdge(c):0<d&&d<b.length?a.between(b[d-1],b[d]):a.rightEdge(c);return c};return{toLeft:function(b,
d,e,m){return f(b,e,m,a.leftEdge).fold(function(a){return a},function(a,b){return b},function(a){return c.after(b,a,d).getOr(a)})},toRight:function(b,d,e,m){return f(b,e,m,a.rightEdge).fold(function(a){return c.before(b,a,d).getOr(a)},function(a,b){return a},function(a){return a})}}});l("14s","b 7 s m9 ub ud".split(" "),function(c,d,b,a,e,f){var g=function(a,e,f,g){var h=a.property().children(e);e=function(e){e=c.findIndex(h,d.curry(a.eq,e));return-1<e?b.some(e):b.none()};f=f.bind(e).getOr(0);g=g.bind(e).getOr(h.length-
1);return-1<f&&-1<g?b.some(h.slice(f,g+1)):b.none()},h=function(b,c,e,f){return a.breakPath(b,c,function(a){return b.property().parent(a).fold(d.constant(!0),d.curry(b.eq,e))},f)},k=function(a,c,d,f){a.eq(c,f)?f=b.none():(f=h(a,f,c,e.breakToRight),f=b.some(f.first()));if(a.eq(c,d))d=b.none();else{var k=h(a,d,c,e.breakToLeft);0<k.splits().length&&a.insert().prepend(k.splits()[0].second(),d);d=b.some(k.second().getOr(d))}return g(a,c,d,f)},m=function(c,d,e,g,h){return f.ancestors(c,e,g,d).shared().orThunk(function(){return a.sharedOne(c,
function(a,e){return d(e)?b.some(e):c.up().predicate(e,d)},[e,g])}).map(h)},n=function(a,b,c,d,e){return m(a,b,c,d,e).bind(function(b){return k(a,b,c,d)})};return{fracture:function(a,c,e,f,g){g=void 0!==g?g:d.identity;a.eq(e,f)?(c=g(e),a=a.eq(c,e)?b.some([e]):k(a,c,e,e)):a=n(a,c,e,f,g);return a}}});l("129","b s pa 14q 14r 14s".split(" "),function(c,d,b,a,e,f){var g=function(a,c,d,g,p,q,r){a.property().isText(d)&&a.eq(d,p)?(d=b.splitByPair(a,d,g,q),a=f.fracture(a,c,d,d,r)):(p=e.toRight(a,c,p,q),d=
e.toLeft(a,c,d,g),a=f.fracture(a,c,d,p,r));return a};return{fractures:function(b,d,e,f,p,q,r){e=a.collect(b,d,e,f,p,q);return c.bind(e,function(a,c){return g(b,d,a.start(),a.soffset(),a.finish(),a.foffset(),r).toArray()})},fracture:g}});l("z7",["e7","129"],function(c,d){var b=c();return{fractures:function(a,c,f,g,h,k){return d.fractures(b,a,c,f,g,h,k)},fracture:function(a,c,f,g,h,k){return d.fracture(b,a,c,f,g,h,k)}}});l("uv",["ex","dl","2a"],function(c,d,b){return{makeTo:function(a,c,d){var g=b.owner(a).dom().createRange();
g.setStart(a.dom(),c);g.setEndBefore(d.dom());return g},makeFrom:function(a,c,d){var g=b.owner(c).dom().createRange();g.setStartAfter(a.dom());g.setEnd(c.dom(),d);return g},leftEdge:function(a,b,f,g){return d.after(a,b,f,g)?c.point(f,g):c.point(a,b)},rightEdge:function(a,b,f,g){return d.after(a,b,f,g)?c.point(a,b):c.point(f,g)}}});l("mi","b 1o 7 21 4e m".split(" "),function(c,d,b,a,e,f){var g=function(a,b){var c=d.keys(b).join(",");return(f.is(a,c)?[a]:[]).concat(e.descendants(a,c))};return{cleanse:function(d,
e){var f=g(d,e);c.each(f,function(c){var d=a.name(c);(void 0!==e[d]?e[d]:b.noop)(c)})}}});l("uo",["b","v"],function(c,d){return{onlyEphox:function(b){return void 0!==b&&null!==b&&0<b.trim().length?(b=b.split(/\s+/),c.filter(b,function(a){return d.startsWith(a,"ephox-")}).join(" ")):""}}});l("mj","b 6 uo 1a 2n 2q".split(" "),function(c,d,b,a,e,f){var g=function(a){f.unwrap(a)},h=function(b,c){e.remove(b,c);a.hasNone(b)&&g(b)},k=function(a){var b={};c.each(a,function(a){b[a]=m(g)});return b},m=function(b){return function(c){a.has(c,
"data-ignore")||b.apply(null,arguments)}};return{cssAndTag:function(a,b,c){a=k(a);c=function(a){h(a,b)};return d.merge(a,{span:m(c),font:m(c)})},tagList:k,removeStyle:m(h),removeAttribute:m(function(b,c){a.remove(b,c);a.hasNone(b)&&g(b)}),unwrap:m(g),unstyle:m(function(c){var d=a.get(c,"class");a.remove(c,"class");d=b.onlyEphox(d);0<d.length&&a.set(c,"class",d);a.remove(c,"style");a.hasNone(c)&&g(c)}),normal:function(b){a.remove(b,"data-ignore")},ignore:function(b){a.set(b,"data-ignore","true")}}});
l("z8","58 b f7 2f 21 2q 2a".split(" "),function(c,d,b,a,e,f,g){var h=function(a,b){var c=g.children(a);d.each(c,function(a){h(a,b)});b(a)},k=function(d){return e.isElement(d)&&!b.isEmptyTag(d)&&!b.isFrame(d)&&0===a.get(d).replace(c.zeroWidth(),"").length};return{wipeout:h,onEmpty:function(c){h(c,function(c){!e.isElement(c)||b.isFrame(c)||b.isEmptyTag(c)||0!==a.get(c).length?k(c)&&f.unwrap(c):f.remove(c)})},onQuasiEmpty:function(a){h(a,function(a){k(a)&&f.remove(a)})}}});l("un","b 7 s z7 f7 uv dw mi mj z8 2m 2o 3c 2a".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=function(a){return r.parent(a).fold(d.constant([]),function(a){return e.isBlock(a)?[a]:[a].concat(s(a))})},t=function(a,b){var d=[b].concat(s(b)),d=c.reverse(d),e=c.findIndex(d,a);return-1===e?b:0===e?d[0]:d[e-1]},u=function(a,b){c.each(b,function(b){h.cleanse(b,a);m.onQuasiEmpty(b)})};return{run:function(e,h,s,l){var z=f.leftEdge(s.startContainer(),s.startOffset(),s.endContainer(),s.endOffset());s=f.rightEdge(s.startContainer(),s.startOffset(),s.endContainer(),
s.endOffset());var A=d.curry(t,l.matches);h=a.fractures(h,z.element(),z.offset(),s.element(),s.offset(),A);h=c.bind(h,function(a){var d;if(0<a.length){d=l.purifiers();var f=(0,l.nu)(e);k.ignore(f);b.from(a[0]).bind(r.prevSibling).each(m.onQuasiEmpty);b.from(a[a.length-1]).bind(r.nextSibling).each(m.onQuasiEmpty);c.each(a,m.onQuasiEmpty);a=c.filter(a,n.inBody);0<a.length?(p.before(a[0],f),q.append(f,a),u(d,a),d=[f]):d=[]}else d=[];return d});c.each(h,k.normal);return g.fussyFromElements(h)}}});l("mh",
["b","1b","2a"],function(c,d,b){var a=function(c,e){return d.eq(c,e)?[]:b.parent(c).fold(function(){return[]},function(d){d=a(d,e);var f=b.findIndex(c).toArray();return d.concat(f)})},e=function(a,b){return a.slice(b+1)},f=function(a,b){return a.slice(0,b)},g=function(a,d,e,f){if(0===f.length)d(e);else{var p=f[0],q=f.slice(1);b.child(e,p).each(function(b){g(a,d,b,q)});e=b.children(e);p=a(e,p);c.each(p,d)}};return{one:function(a,b){a(b)},across:function(d,k,m,n){m=a(m,k);n=a(n,k);k=b.children(k);var p=
k.slice(0<m.length?m[0]+1:0,0<n.length?n[0]:k.length-1);c.each(p,d);0<m.length&&g(e,d,k[m[0]],m.slice(1));0<n.length&&g(f,d,k[n[0]],n.slice(1))}}});l("na",["e7","up"],function(c,d){var b=c();return{extract:function(a,c,f){return d.extract(b,a,c,f)},extractTo:function(a,c,f,g){return d.extractTo(b,a,c,f,g)},all:function(a,c){return d.all(b,a,c)},from:function(a,c){return d.from(b,a,c)},find:function(a,c,f){return d.find(b,a,c,f)},toText:function(a,c){return d.toText(b,a,c)}}});l("hk",["e7","pa"],function(c,
d){var b=c();return{split:function(a,c){return d.split(b,a,c)},splitByPair:function(a,c,f){return d.splitByPair(b,a,c,f)},range:function(a,c,f,g){return d.range(b,a,c,f,g)},subdivide:function(a,c){return d.subdivide(b,a,c)},position:function(a){return d.position(b,a)}}});l("uu","b hk uv 21 2a 9".split(" "),function(c,d,b,a,e,f){var g=function(b,d,f){var g=e.children(d),h=0===f,k=f===g.length,m=0<g.length;return void 0!==b.empty&&c.contains(["br","hr","img"],a.name(d))?b.empty:void 0!==b.hasPrevious&&
m&&0<f&&f<g.length?b.hasPrevious:void 0!==b.hasNext&&m&&f<g.length-1?b.hasNext:void 0!==b.rightEdge&&m&&k?b.rightEdge:void 0!==b.first&&h?b.first:b.otherwise},h=function(a,b,c){return g(a.before.element,b,c)(b,c)},k=function(a,b,c){return g(a.after.element,b,c)(b,c)},m=function(a,b,c){c=d.split(b,c);var e=function(a){return function(){var c=f.prototype.slice.call(arguments,0),c=[b].concat(c);return a.apply(null,c)}};return d.position(c).fold(e(a.none),e(a.start),e(a.middle),e(a.end))},n=function(a,
b,c){return m(a.before.text,b,c)},p=function(a,b,c){return m(a.after.text,b,c)};return{prefix:function(b,c,d){return(a.isText(c)?n:h)(b,c,d)},postfix:function(c,d,e,f,g){d=b.rightEdge(d,e,f,g);return(a.isText(d.element())?p:k)(c,d.element(),d.offset())}}});l("qq","7 hk uu uv 1b 21 2a 9".split(" "),function(c,d,b,a,e,f,g,h){var k=function(a,b){return a.bind(function(a){return b.map(function(b){return{left:c.constant(a),right:c.constant(b)}})})},m=function(a,b,c,e){b=d.splitByPair(b,c,e);return k(a.general.insertBefore(b),
a.general.insertAfter(b))},n=function(a,b,c,d){c=g.child(b,c);var e=d<g.children(b).length?g.child(b,d):g.lastChild(b);return c.bind(function(b){return e.bind(function(c){return k(a.general.insertBefore(b),a.general.insertAfter(c))})})};return{both:function(c,d,g,h,t){if(e.eq(d,h)){var u=f.isText(d)?m:n;return g>t?u(c,d,t,g):u(c,d,g,t)}u=a.leftEdge(d,g,h,t);d=b.postfix(c,d,g,h,t);c=b.prefix(c,u.element(),u.offset());return k(c,d)}}});l("uw","e7 b 7 s f7 2u u4 z8 1b 4i 2a".split(" "),function(c,d,
b,a,e,f,g,h,k,m,n){var p=f.immutable("inside","outside"),q=function(a){return n.parent(a).fold(b.constant(!0),function(a){return e.isBlock(a)||e.isContainer(a)})},r=function(e,f){var g=c(),h=[e].concat(g.up().all(e)),m=[f].concat(g.up().all(f)),g=d.find(h,function(a){return d.exists(m,b.curry(k.eq,a))});return a.from(g)},s=function(b){return p(b.second(),a.some(b.first()))},t=function(b){return p(a.some(b.first()),b.second())},u=function(c,d){var e=q(c)?c:m.ancestor(c,q).getOr(c);k.eq(c,e)?e=p(a.some(c),
a.none()):(e=g.breakPath(c,b.curry(k.eq,e)),e=d(e));return e};return{bridge:function(a,c){var d=u(a,s),e=u(c,t);return d.inside().bind(function(a){return e.inside().bind(function(c){return r(a,c).map(function(f){return{common:b.constant(f),left:b.constant(a),right:b.constant(c),wipeout:function(){d.outside().each(h.onEmpty);e.outside().each(h.onEmpty)}}})})})}}});l("ux",["7","s","l","2o","2q"],function(c,d,b,a,e){return function(f,g){var h=function(a,f,g){var h=b.fromText(f);a(g,h);return d.some({element:c.constant(h),
cleanup:function(){e.remove(h)},splits:c.constant([])})},k=function(b){return{none:d.none,start:c.curry(h,a.before,b),end:c.curry(h,a.after,b),middle:function(c,d,e){return h(a.after,b,d)}}},m=function(b){var d=function(b){return function(c,d){a.appendAt(c,d,b)}};return{prepend:c.curry(h,a.prepend,b),before:c.curry(h,a.before,b),after:c.curry(h,a.after,b),insertAt:function(a,c){return h(d(c),b,a)},append:c.curry(h,a.append,b)}};return{before:{text:k(f),element:{hasPrevious:m(f).insertAt,first:m(f).prepend,
empty:m(f).before,otherwise:m(f).append}},after:{text:k(g),element:{hasNext:m(g).insertAt,rightEdge:m(g).append,empty:m(g).after,otherwise:m(g).append}},general:{insertBefore:m(f).before,insertAfter:m(g).after}}}});l("mk","58 7v 80 7 ex j1 na j8 f7 2u qq uw ux".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=m.immutable("start","soffset","finish","foffset"),s=a.constant(!1),t=function(a){return k.isBlock(a)||k.isContainer(a)},u=function(a,c,k,m,n){var p=d.isCollapsed(c,k,m,n);c=f.toLeaf(c,k);
m=f.toLeaf(m,n);var q=g.extractTo(c.element(),c.offset(),t,s),u=g.extractTo(m.element(),m.offset(),t,s),l=function(c){return p||c.offset()!==b.getEnd(c.element())?c:h.after(c.element(),a).map(function(a){return e.point(a,0)}).getOr(c)},F=function(c){return p||0!==c.offset()?c:h.before(c.element(),a).map(function(a){return e.point(a,b.getEnd(a))}).getOr(c)};return function(){return g.find(q.element(),q.offset(),s).map(l).bind(function(a){return g.find(u.element(),u.offset(),s).map(F).map(function(b){return r(a.element(),
a.offset(),b.element(),b.offset())})})}};return{applyTo:function(a,b,d,e,f,g){var h=u(a,d,e,f,g);a=q(c.zeroWidth(),c.zeroWidth());return n.both(a,d,e,f,g).bind(function(a){return p.bridge(a.left().element(),a.right().element()).bind(function(c){b(c.common(),c.left(),c.right());a.left().cleanup();a.right().cleanup();c.wipeout();return h()})})}}});l("dz","7 mh mi mj mk 1b".split(" "),function(c,d,b,a,e,f){return{doRemove:function(a,c,k){var m=function(a){b.cleanse(a,c)};return e.applyTo(a,function(a,
b,c){if(f.eq(b,c))d.one(m,b);else d.across(m,a,b,c)},k.startContainer(),k.startOffset(),k.endContainer(),k.endOffset())},allRules:c.constant({b:a.unwrap,strong:a.unwrap,i:a.unwrap,em:a.unwrap,u:a.unwrap,strike:a.unwrap,del:a.unwrap,s:a.unwrap,sup:a.unwrap,sub:a.unwrap,small:c.noop,span:a.unstyle,font:a.unstyle})}});l("mb","58 b 1o 80 7 s ex j8 mg du dw uk ul um un mj dz 1y l 2o 21 at".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w,l,y,z){return function(A,D,B,C){B=[D].concat(B);var F=e.curry(q.nuTag,
D),E=e.curry(r.relatedTags,B),G=t.tagList(B),H=r.queriesTag(D),I={nu:F,matches:E,purifiers:e.constant(G)},K=function(a){var b=w.fromText(c.zeroWidth());k.atStartOf(a.startContainer(),a.startOffset(),b);return n.hare(b,0,b,1)},J=function(a,b,c){return y.isText(b)&&c===z.get(b).length?h.after(b,a).fold(function(){return g.point(b,c)},function(a){return g.point(a,0)}):g.point(b,c)},M=function(b,c,d){return y.isText(c)&&0===d?h.before(c,b).fold(function(){return g.point(c,d)},function(b){return g.point(b,
a.getEnd(b))}):g.point(c,d)},O=function(a,b){return b.map(function(b){var c=J(a,b.start(),b.soffset());b=M(a,b.finish(),b.foffset());return n.fussy(c.element(),c.offset(),b.element(),b.offset())})};B={nu:F,purifiers:e.constant(G),isStyled:e.constant(!0)};var N=["font-size"],Q=function(a){return a.getSelection().map(function(a){var c=b.keys(C),c=d.difference(c,N);return d.forall(c,function(b){return r.queryStyleOn(b,C[b],[D],a)})}).getOr(!1)};return{run:function(a,b){var c=b.doc();return p.detect(b,
H.queryOn).fold(function(){return f.none()},function(b){b=K(b);u.doRemove(a,G,b);return f.some(n.fromHare(b))},function(a){a=K(a);var b=w.fromTag(D,c.dom());v.add(b,m.styleSpan());l.wrap(a.startContainer(),b);return f.some(n.fussy(a.startContainer(),1,a.startContainer(),1))},function(b){b=u.doRemove(a,G,b);return O(a,b)},function(c){return s.run(b.doc(),a,c,I)})},query:function(a){return H.query(a)||Q(a)},deferred:e.constant(B),name:e.constant(A)}}});l("zf",["b","s"],function(c,d){var b=function(a,
b,c){return{groups:0<a.current.length?a.groups.concat({parent:a.parent,children:a.current}):a.groups,current:[c],parent:b}},a=function(a,b,c){return{groups:a.groups,current:a.current.concat([c]),parent:b}},e=function(c,e,h){return d.from(e.current[e.current.length-1]).bind(c.query().nextSibling).bind(function(b){return c.eq(b,h)?d.some(a):d.none()}).getOr(b)};return{textnodes:function(a,b){var d=c.foldl(b,function(b,c){return a.property().parent(c).fold(function(){return b},function(d){return e(a,
b,c)(b,d,c)})},{groups:[],current:[],parent:null});return 0<d.current.length?d.groups.concat({parent:d.parent,children:d.current}):d.groups}}});l("uz","b s ex pa zf ua".split(" "),function(c,d,b,a,e,f){var g=function(b,c,d,e,f,g){c=a.range(b,c,d,e,f);return h(b,c,g)},h=function(a,b,d){if(0===b.length)return b;b=c.filter(b,function(b){return a.property().isText(b)&&0<a.property().getText(b).length});return c.map(b,function(b){var c=d();a.insert().before(b,c.element());c.wrap(b);return c.element()})},
k=function(a,c){return d.from(c[0]).map(function(d){var e=f.toLower(a,c[c.length-1]);return b.points(b.point(d,0),b.point(e.element(),e.offset()))})};return{wrapWith:g,wrapper:h,leaves:function(a,b,c,d,e,h){b=f.toLeaf(a,b,c);d=f.toLeaf(a,d,e);h=g(a,b.element(),b.offset(),d.element(),d.offset(),h);return k(a,h)},reuse:function(b,d,g,h,k,s,t){d=f.toLeaf(b,d,g);h=f.toLeaf(b,h,k);h=a.range(b,d.element(),d.offset(),h.element(),h.offset());h=e.textnodes(b,h);var u=function(a){return a.parent},v=function(a){var d=
t();b.insert().before(a.children[0],d.element());c.each(a.children,d.wrap);return d.element()};return c.map(h,function(a){return(b.property().children(a.parent).length===a.children.length&&s(a.parent)?u:v)(a)})}}});l("v0",["7"],function(c){return function(d,b){return{element:c.constant(b),wrap:function(a){d.insert().append(b,a)}}}});l("uy","58 7 s ex uj uz v0 2u".split(" "),function(c,d,b,a,e,f,g,h){var k=function(c,e,f,g,h,k){c=m(c,e,f,g,h,k);e=c.cursor();e=a.points(a.point(e.element(),e.offset()),
a.point(e.element(),e.offset()));return b.some({range:d.constant(e),temporary:c.temporary,wrappers:c.wrappers})};h.immutable("span","cursor");var m=function(f,g,h,k,m,p){return f.property().parent(g).bind(function(e){var k=a.point(g,h),m;if(m=n(f,p,e))if(m=1===f.property().children(e).length)m=f.property().isText(g)&&f.property().getText(g)===c.zeroWidth();return m?b.some({cursor:d.constant(k),temporary:d.constant(!1),wrappers:d.constant([e])}):b.none()}).getOrThunk(function(){var b=g.dom().ownerDocument,
k=f.create().nu("span",b),b=f.create().text(c.zeroWidth(),b);f.insert().append(k,b);e.atStartOf(f,g,h,k);return{cursor:d.constant(a.point(b,1)),wrappers:d.constant([k]),temporary:d.constant(!0)}})},n=function(a,b,c){return"span"===a.property().name(c)&&!1===b(c)},p=function(c,e,h,k,m,p){var w=e.dom().ownerDocument,l=f.reuse(c,e,h,k,m,d.curry(n,c,p),function(){return g(c,c.create().nu("span",w))});return b.from(l[l.length-1]).map(function(b){var e=c.property().children(b).length;b=a.points(a.point(l[0],
0),a.point(b,e));return{wrappers:d.constant(l),temporary:d.constant(!1),range:d.constant(b)}})};return{spans:function(a,b,c,e,f,g){g=void 0!==g?g:d.constant(!1);return(a.eq(b,e)&&c===f?k:p)(a,b,c,e,f,g)}}});l("pb",["uy","uz","v0"],function(c,d,b){return{nu:function(a,c){return b(a,c)},wrapWith:function(a,b,c,g,h,k){return d.wrapWith(a,b,c,g,h,k)},wrapper:function(a,b,c){return d.wrapper(a,b,c)},leaves:function(a,b,c,g,h,k){return d.leaves(a,b,c,g,h,k)},reuse:function(a,b,c,g,h,k,m){return d.reuse(a,
b,c,g,h,k,m)},spans:function(a,b,d,g,h,k){return c.spans(a,b,d,g,h,k)}}});l("hl",["e7","pb"],function(c,d){var b=c();return{nu:function(a){return d.nu(b,a)},wrapWith:function(a,c,f,g,h){return d.wrapWith(b,a,c,f,g,h)},wrapper:function(a,c){return d.wrapper(b,a,c)},leaves:function(a,c,f,g,h){return d.leaves(b,a,c,f,g,h)},reuse:function(a,c,f,g,h,k){return d.reuse(b,a,c,f,g,h,k)},spans:function(a,c,f,g,h){return d.spans(b,a,c,f,g,h)}}});l("mn",["b","hl","du","4b","2n"],function(c,d,b,a,e){var f=function(e,
f,g){e.getSelection().each(function(n){d.spans(n.startContainer(),n.startOffset(),n.endContainer(),n.endOffset(),g).each(function(d){var g=d.temporary()?[b.styleSpan()]:[],m=d.range();c.each(d.wrappers(),function(b){a.add(b,g);f(b)});d=m.begin();m=m.end();e.setSelection(d.element(),d.offset(),m.element(),m.offset())})})},g=function(a,b,c,d){b(a);f(a,d,c)};return{style:function(a,b,c,d){return g(a,c,d,function(a){e.setAll(a,b)})},generic:g}});l("mc","7 s du hi mn uk ul um un mj dz 1a 1y 1b 2n 21 31".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u){return function(v,w,l,y,z,A){var D=c.curry(g.nu,y,z,w),B=c.curry(h.relatedStyle,y,z,l),C=m.cssAndTag(l,y,z),F=h.queriesStyle(y,z,l),E=c.constant(!0),G=function(a,f){e.generic(a,c.noop,E,function(a){q.add(a,b.styleSpan());s.set(a,y,f);p.set(a,b.overrideSpan(),v);s.reflow(a)});return d.none()};w={nu:D,purifiers:c.constant(C),isStyled:function(b){return"span"===t.name(b)&&a.rawState(b,y,z)}};return{run:function(a,b){return f.detect(b,F.queryOn).fold(function(){return d.none()},
function(a){return G(b,A)},function(a){return G(b,z)},function(b){return n.doRemove(a,C,b)},function(d){return k.run(b.doc(),a,d,{nu:D,matches:B,purifiers:c.constant(C)})})},query:function(a){var c="["+b.overrideSpan()+'="'+v+'"]';return a.getSelection().bind(function(a){return u.closest(a.startContainer(),c).bind(function(b){return u.closest(a.endContainer(),c).bind(function(a){return r.eq(b,a)?s.getRaw(b,y).map(function(a){return a===z}):d.none()})})}).getOrThunk(function(){return F.query(a)})},
deferred:c.constant(w),name:c.constant(v)}}});l("md","7 s du mn uk ul um un mj dz 1a 1y 21 2q 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){return function(t,u){var v=function(a,b){return f.nuAttr(u,a,b)},w=function(a){return"span"===q.name(a)&&n.has(a,u)},l={span:function(a){k.removeAttribute(a,u)}},y=function(a,b){return g.queryAttrIs(u,a,b)},z=function(e,f){a.generic(f,c.noop,void 0,function(a){p.add(a,b.styleSpan());n.set(a,u,e)});return d.none()};return{run:function(a,b,f){return e.detect(b,
c.curry(y,f)).fold(function(){return d.none()},function(a){var b=["[",u,'="',f,'"]'].join("");s.closest(a.startContainer(),b).each(r.unwrap);return d.none()},function(a){return z(f,b)},function(b){return m.doRemove(a,l,b)},function(d){return h.run(b.doc(),a,d,{nu:c.curry(v,f),matches:w,purifiers:c.constant(l)})})},queryValue:function(a){return g.queryAttrSame(u,a)},name:c.constant(t)}}});l("dr",["7","s","mb","mc","md"],function(c,d,b,a,e){var f=a("bold","strong",["strong","b"],"font-weight","bold",
"normal"),g=a("italic","em",["em","i"],"font-style","italic","normal"),h=a("underline","span",["u"],"text-decoration","underline","none");a=a("strikethrough","span",["s","strike","del"],"text-decoration","line-through","none");e=e("language","lang");var k=b("superscript","sup",["sup","sub"],{"font-size":"smaller","vertical-align":"super"});b=b("subscript","sub",["sub","sup"],{"font-size":"smaller","vertical-align":"sub"});var m={bold:f,italic:g,underline:h,strikethrough:a,language:e,superscript:k,
subscript:b};return{bold:c.constant(f),italic:c.constant(g),underline:c.constant(h),strikethrough:c.constant(a),language:c.constant(e),superscript:c.constant(k),subscript:c.constant(b),search:function(a){return void 0!==m[a]?d.some(m[a]):d.none()}}});l("aw",["7","dr"],function(c,d){var b=function(a,b){return a.query(b)};return{bold:c.curry(b,d.bold()),italic:c.curry(b,d.italic()),underline:c.curry(b,d.underline()),strikethrough:c.curry(b,d.strikethrough()),superscript:c.curry(b,d.superscript()),subscript:c.curry(b,
d.subscript()),language:c.curry(function(a,b){return a.queryValue(b)},d.language())}});l("7g",["7d","2u","aw"],function(c,d,b){var a=d.immutable("bold","italic","underline","strikethrough","superscript","subscript"),e=function(a,b){return a.on(function(a){return b(a)?c.on(!0):c.off()}).getOrThunk(c.off)};return{read:function(c){return a(e(c,b.bold),e(c,b.italic),e(c,b.underline),e(c,b.strikethrough),e(c,b.superscript),e(c,b.subscript))}}});l("14t",["2u"],function(c){return c.immutable("startContainer",
"startOffset","endContainer","endOffset")});l("15h",["2u"],function(c){var d=c.immutable("item","start","finish","text"),b=c.immutable("items","abort"),a=function(a,b){var c=a.property().getText(b);return d(b,0,c.length,c)},e=function(a,c,d){return b([],!0)},f=function(a,c,d){return b([],!1)},g=function(a,c,e){var f=a.property().getText(c);return e(f).fold(function(){return b([d(c,0,f.length,f)],!1)},function(a){a=a[0]===a[1]?[]:[d(c,a[0],a[1],f.substring(a[0],a[1]))];return b(a,!0)})};return{detail:a,
fromItem:function(b,c){return b.property().isText(c)?a(b,c):d(c,0,0,"")},decide:function(a,b,c,d){return(a.property().isBoundary(b)?e:a.property().isEmptyTag(b)?e:d(a,b)?e:a.property().isText(b)?g:f)(a,b,c)}}});l("pg",["7"],function(c){return{all:function(d,b){for(var a=b.term(),e=[],f=a.exec(d);f;){var g=f.index+b.prefix(f),f=f[0].length-b.prefix(f)-b.suffix(f);e.push({start:c.constant(g),finish:c.constant(g+f)});a.lastIndex=g+f;f=a.exec(d)}return e}}});l("ph",["b","6","pg","9"],function(c,d,b,a){var e=
function(b){b=a.prototype.slice.call(b,0);b.sort(function(a,b){return a.start()<b.start()?-1:b.start()<a.start()?1:0});return b};return{search:function(a,g){var h=c.bind(g,function(e){var g=b.all(a,e.pattern());return c.map(g,function(a){return d.merge(e,{start:a.start,finish:a.finish})})});return e(h)}}});l("hn",["pg","ph"],function(c,d){return{findall:function(b,a){return c.all(b,a)},findmany:function(b,a){return d.search(b,a)}}});l("zz",["7","s","6l","hn","66"],function(c,d,b,a,e){var f=new e(b.wordbreak()+
"+","g"),g=c.constant(0),h=function(c){c=a.findall(c,b.custom(b.wordbreak(),g,g,d.none()));return d.from(c[c.length-1]).map(function(a){return a.start()})},k=function(a){a=a.search(f);return-1<a?d.some(a):d.none()};return{firstWord:function(a){return k(a).map(function(b){return a.substring(0,b+1)})},lastWord:function(a){return h(a).map(function(b){return a.substring(b)})},leftBreak:h,rightBreak:k,hasBreak:function(a){return k(a).isSome()}}});l("167",["ij","zz"],function(c,d){var b=c.walkers(),a=b.left(),
b=b.right();return{left:{sibling:a.sibling,first:a.first,slicer:function(a){return d.leftBreak(a).map(function(b){return[b+1,a.length]})}},right:{sibling:b.sibling,first:b.first,slicer:function(a){return d.rightBreak(a).map(function(a){return[0,a]})}}}});l("15q",["b","ij","15h","167"],function(c,d,b,a){var e=function(a,g,h,k,m){g=d.walk(a,g,h,k).map(function(c){var d=b.decide(a,c.item(),k.slicer,m);c=d.abort()?[]:e(a,c.item(),c.mode(),k,m);return d.items().concat(c)}).getOr([]);return c.filter(g,
function(a){return 0<a.text().trim().length})};return{creepLeft:function(b,c,h){return e(b,c,d.sidestep,a.left,h)},creepRight:function(b,c,h){return e(b,c,d.sidestep,a.right,h)},flatten:function(a,d){return a.property().isText(d)?[b.detail(a,d)]:c.map(a.down().predicate(d,a.property().isText),function(c){return b.detail(a,c)})},isEmpty:function(a,b){return a.property().isText(b)?!1:0===a.down().predicate(b,a.property().isText).length}}});l("15i",["7","s"],function(c,d){var b=function(a,b){return a.up().closest(b,
"[lang]",c.constant(!1)).map(function(b){return a.attrs().get(b,"lang")})};return{nu:function(a){var b=[],f=[],g=[],h=a,k=function(a){a.each(function(a){b.push(a)})},m=function(a){a.each(function(a){b=b.slice(0,b.length-1)})},n=function(){0<g.length&&f.push({lang:c.constant(h),details:c.constant(g)})},p=function(a){n();g=[];h=a},q=function(c){return c.or(d.from(b[b.length-1])).getOr(a)};return{openInline:function(a,b){var c=q(a);c!==h&&p(c);k(a)},closeInline:function(a,b){m(a)},addDetail:function(a){var b=
q(d.none());b!==h&&p(b);g.push(a)},addEmpty:function(a){a=q(d.none());p(a)},openBoundary:function(a,b){k(a);var c=q(a);p(c)},closeBoundary:function(a,b){m(a);var c=q(a);p(c)},done:function(){n();return f.slice(0)}}},calculate:b,softBounder:function(a){return function(c,f){var g=b(c,f);return!d.equals(a,g)}},strictBounder:function(a,c){return function(d,g){var h=b(d,g).getOr(a);return c!==h}}}});l("14u",["b","7","15q","15h","15i"],function(c,d,b,a,e){var f=function(c,e,f,m){var n=b.creepLeft(c,e,m);
m=b.creepRight(c,f,m);e=0<n.length?n[n.length-1]:a.fromItem(c,e);c=0<m.length?m[m.length-1]:a.fromItem(c,f);n=0===n.length&&0===m.length;return{left:d.constant(e),right:d.constant(c),isEmpty:d.constant(n)}};return{byBoundary:function(a,c){var e=d.constant(!1),e=f(a,c,c,e),m=e.isEmpty()&&b.isEmpty(a,c);return{left:e.left,right:e.right,isEmpty:d.constant(m)}},getEdges:f,byLanguage:function(f,h){var k=e.calculate(f,h),m=e.softBounder(k),n=b.creepLeft(f,h,m),m=b.creepRight(f,h,m),p=f.property().isText(h)?
[a.detail(f,h)]:[],q=c.reverse(n).concat(p).concat(m);return{all:d.constant(q),left:d.constant(n),middle:d.constant(p),right:d.constant(m),lang:d.constant(k)}}}});l("12c","58 b 7 s 14t 14u".split(" "),function(c,d,b,a,e,f){var g=function(a,e,g,n){n=a.property().getText(e);var p=d.filter(n.substring(0,g),function(a){return a!==c.zeroWidth()}).length,q=d.filter(n.substring(g,n.length),function(a){return a===c.zeroWidth()}).length;a=f.byLanguage(a,e);e=0===p&&0===a.left().length;g=g+q===n.length&&0===
a.right().length;return{all:a.all,leftEdge:b.constant(e),rightEdge:b.constant(g),text:b.constant(n)}};return{before:function(b,c,d,f,p){b=g(b,c,d,p);b.rightEdge()?c=a.none():(b=b.all(),0===b.length?c=a.none():(b=b[b.length-1],c=a.some(e(c,f,b.item(),b.finish()))));return c},after:function(b,c,d,f,p){b=g(b,c,d,p);b.leftEdge()?c=a.none():(b=b.all(),0===b.length?c=a.none():(b=b[0],c=a.some(e(b.item(),b.start(),c,f))));return c},both:function(b,c,d,f,g,q){return f===g?a.none():a.some(e(c,f,c,g))},neither:function(b,
c,d,f){b=g(b,c,d,f);b.leftEdge()||b.rightEdge()?b=a.none():(c=b.all(),0===c.length?b=a.none():(b=c[0],c=c[c.length-1],b=a.some(e(b.item(),b.start(),c.item(),c.finish()))));return b}}});l("14v",["2u"],function(c){return c.immutable("before","after")});l("12d",["s","14v","zz"],function(c,d,b){return{around:function(a,e){var f=a.substring(0,e),g=b.leftBreak(f).map(function(a){return a+1}),f=a.substring(e),f=b.rightBreak(f).map(function(a){return e+a}),h=d(g,f),k=d(c.some(e),c.some(e));return f.bind(function(a){return e===
a?c.some(k):c.none()}).getOrThunk(function(){return g.bind(function(a){return e===a?c.some(k):c.none()}).getOr(h)})}}});l("zg",["s","12c","12d"],function(c,d,b){return{word:function(a,e,f,g){if(!a.property().isText(e))return c.none();var h=a.property().getText(e),k=b.around(h,f);return k.before().fold(function(){return k.after().fold(function(){return d.neither(a,e,f,g)},function(b){return d.after(a,e,f,b,g)})},function(b){return k.after().fold(function(){return d.before(a,e,f,b,g)},function(c){return d.both(a,
e,f,b,c,g)})})}}});l("v1",["zg"],function(c){return{word:function(d,b,a,e){return c.word(d,b,a,e)}}});l("mf",["e7","v1"],function(c,d){var b=c();return{word:function(a,c,f){return d.word(b,a,c,f)}}});l("dv",["7v","7","mf"],function(c,d,b){var a=function(a,c,g){b.word(c,g,d.constant(!1)).each(function(b){a.setSelection(b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset())})};return{expand:function(b){b.getSelection().each(function(d){c.isCollapsed(d.startContainer(),d.startOffset(),d.endContainer(),
d.endOffset())&&a(b,d.startContainer(),d.startOffset())})},expandWord:a}});l("dy","58 80 s du dw dr dz 1a 2m 1y 1b 2o 3c 21 2q 31 m at 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,w){var l=function(a,b){var c=e.fussy(b,0,b,w.children(b).length-1);A(a,b,c)},y=function(a){a=w.children(a);return 1===a.length&&r.isText(a[0])&&v.get(a[0])===c.zeroWidth()},z=function(b,c){return t.closest(b,"."+a.styleSpan()).bind(function(b){return t.closest(c,"."+a.styleSpan()).filter(function(a){return n.eq(b,
a)})})},A=function(c,d,e){m.remove(d,a.styleSpan());return h.has(d,a.overrideSpan())?D(c,d,e):b.some(e)},D=function(a,c,d){return B(c).bind(function(f){if(f.isStyled(c)){f=f.nu;var g=w.owner(c),g=f(g);p.before(c,g);q.append(g,w.children(c));s.remove(c);f=n.eq(c,d.start())?g:d.start();g=n.eq(c,d.finish())?g:d.finish();f=b.some(e.fussy(f,d.soffset(),g,d.foffset()))}else f=C(a,c,f.purifiers(),d);return f})},B=function(b){b=h.get(b,a.overrideSpan());return f.search(b).map(function(a){return a.deferred()})},
C=function(c,d,f,h){d=w.owner(d);var m=e.fromFussy(h);g.doRemove(c,f,m);c="["+a.overrideSpan()+"]";return u.one(c,d).bind(function(a){s.unwrap(a);return k.inBody(h.start())&&k.inBody(h.finish())?b.some(h):b.none()})};return{clean:function(a,b){y(b)?s.unwrap(b):l(a,b)},cleanNonEmpty:l,isTransient:y,withinTransient:z,handleOverride:D,apply:function(a,c,f,g,h){var k=e.fussy(c,f,g,h);return z(c,g).bind(function(c){if(y(c)){var f=w.children(c),f=n.eq(c,k.start())?e.fussy(f[0],0,f[0],d.getEnd(f[0])):k;
s.unwrap(c);c=b.some(f)}else c=A(a,c,k);return c})}}});l("dx","80 s mg dv dw dy dz 2o 2q 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(a,b){return a.action().run(a.isRoot(),a.environment())};return{override:function(a,b){var g=a.temp();f.handleOverride(a.isRoot(),g,e.fussy(g,0,g,c.getEnd(g)));return d.some(b)},insertAfter:function(a,b){h.after(a.temp(),a.cursor());return d.some(b)},insertBefore:function(a,b){h.before(a.temp(),a.cursor());return d.some(b)},insertAt:function(a,c){var e=
a.original();b.atStartOf(e.startContainer(),e.startOffset(),a.cursor());return d.some(c)},apply:n,applyIfOffCursor:function(a,b){var c=a.action().deferred().isStyled(a.temp()),f=a.cursor(),g=d.some(e.fussy(f,1,f,1));c?c=g:(a.environment().setSelection(f,0,f,0),c=n(a,b));return c},clearCursor:function(a,b){var c=a.cursor(),f=a.action().deferred();g.doRemove(a.isRoot(),f.purifiers(),e.hare(c,0,c,1));return d.some(e.fussy(c,1,c,1))},applyOverCursor:function(a,b){var c=a.cursor();a.environment().setSelection(c,
0,c,1);n(a,b);return d.some(e.fussy(c,1,c,1))},regrab:function(b,c){var d=b.environment(),f=b.original();d.setSelection(f.startContainer(),f.startOffset(),f.endContainer(),f.endOffset());a.expand(d);return d.getSelection().map(e.fromHare)},clearSelection:function(a,b){var c=a.action().deferred();return g.doRemove(a.isRoot(),c.purifiers(),e.fromFussy(b))},applyIfOffRange:function(a,b){var c;a.action().deferred().isStyled(a.temp())?c=d.some(b):(a.environment().setSelection(b.start(),b.soffset(),b.finish(),
b.foffset()),c=n(a,b));return c},unwrap:function(a,b){var f=a.temp(),g=m.children(f);k.unwrap(f);return 0===g.length?d.none():d.some(e.fussy(g[0],0,g[g.length-1],c.getEnd(g[g.length-1])))}}});l("7h","58 b ds 80 7 s 2u dt du dv dw dr dx dy dz 1a 1b l".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v){var w=g.immutable("environment","isRoot","cursor","temp","action","original"),l=function(c,d){return b.lastCursor(c).fold(e.constant(!0),function(b){return u.eq(b,d.startContainer())&&a.getEnd(b)===
d.startOffset()})},y=function(a,c){return b.firstCursor(a).fold(e.constant(!0),function(a){return u.eq(a,c.startContainer())&&0===c.startOffset()})},z=function(a,b,e,g,h){var m=t.get(g,k.overrideSpan()),p=h.collapsed(),s=v.fromText(c.zeroWidth()),u=l(g,h),z=y(g,h),m=a.name()===m,J=w(e,b,s,g,a,h);a=m&&r.isTransient(g)?[q.unwrap]:p&&m&&u?[q.insertAfter,q.override,q.applyIfOffCursor]:p&&m&&z?[q.insertBefore,q.override,q.applyIfOffCursor]:p&&m?[q.insertAt,q.override,q.clearCursor]:p&&u?[q.insertAt,q.override,
q.applyOverCursor]:p&&z?[q.insertBefore,q.override,q.applyOverCursor]:p?[q.insertAt,q.override,q.applyOverCursor]:m?[q.override,q.regrab,q.clearSelection,q.applyIfOffRange]:[q.override,q.regrab,q.apply];return d.foldl(a,function(a,b){return a.bind(function(a){return b(J,a)})},f.some(n.fromHare(h)))};g=function(a,b,c){m.expand(c);var d=c.getSelection().bind(function(d){return r.withinTransient(d.startContainer(),d.endContainer()).filter(function(a){return t.has(a,k.overrideSpan())}).fold(function(){return a.run(b,
c)},function(e){return z(a,b,c,e,d)})});return h.inlineFrom(d)};return{bold:e.curry(g,p.bold()),italic:e.curry(g,p.italic()),underline:e.curry(g,p.underline()),strikethrough:e.curry(g,p.strikethrough()),superscript:e.curry(g,p.superscript()),subscript:e.curry(g,p.subscript()),removeformat:function(a,b){m.expand(b);var c=b.getSelection().bind(function(b){var c=s.allRules();return s.doRemove(a,c,b)});return h.inlineFrom(c)},language:e.curry(function(a,b,c,d){c.getSelection().each(function(a){r.apply(b,
a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset()).each(function(a){c.setSelection(a.start(),a.soffset(),a.finish(),a.foffset())})});m.expand(c);a=a.run(b,c,d);return h.inlineFrom(a)},p.language()),cleanup:r.clean,cleanupNonEmpty:r.cleanNonEmpty,isTransient:r.isTransient,withinTransient:r.withinTransient}});l("5b","7 7e 7f 75 7g 6v 76 7d 55 46 7h".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return function(p){var q=p.content(),r=p.shortcuts(),s=p.undo(),t=m.create({analytics:k(["message",
"properties"])}),u=function(a,b){var d=e.read(q);(void 0!==d[a]?d[a]():h.unchanged()).fold(b.deselect,c.noop,b.select)},v=function(a){var e=function(b){return a(q.isRoot,b)};return function(){b.cata(p.selections().get(),c.noop,d.multiple(q,s,e),d.single(q,s,e));q.uiChanged()}},w=v(n.bold),l=v(n.italic),y=v(n.underline),z=v(n.strikethrough),A=v(n.subscript),D=v(n.superscript),v=v(n.removeformat);r.events.bold.bind(w);r.events.italic.bind(l);r.events.underline.bind(y);return{ui:f.ui({"bold.general":{toggle:!0,
value:"bold",textkey:a.key("action.bold"),action:w,updateGeneral:c.curry(u,"bold"),icon:!0,tooltip:g.get},"italic.general":{toggle:!0,value:"italic",textkey:a.key("action.italic"),action:l,updateGeneral:c.curry(u,"italic"),icon:!0,tooltip:g.get},"underline.general":{toggle:!0,value:"underline",textkey:a.key("action.underline"),action:y,updateGeneral:c.curry(u,"underline"),icon:!0,tooltip:g.get},"strikethrough.general":{toggle:!0,value:"strikethrough",textkey:a.key("action.strikethrough"),action:z,
updateGeneral:c.curry(u,"strikethrough"),icon:!0,tooltip:g.get},"removeformat.general":{toggle:!1,value:"removeformat",textkey:a.key("action.removeformat"),action:v,updateGeneral:c.identity,icon:!0,tooltip:g.get},"subscript.general":{toggle:!0,value:"subscript",textkey:a.key("action.subscript"),action:A,updateGeneral:c.curry(u,"subscript"),icon:!0,tooltip:g.get},"superscript.general":{toggle:!0,value:"superscript",textkey:a.key("action.superscript"),action:D,updateGeneral:c.curry(u,"superscript"),
icon:!0,tooltip:g.get}}),events:t.registry,destroy:c.noop}}});l("e0",["b","d9"],function(c,d){return{multiple:function(b,a,e,f){return function(g,h){d.runTransaction(b,a,function(){c.each(h,e)},f)}},single:function(b,a,c,f){return function(g,h){d.runTransaction(b,a,function(){c(h)},f)}}}});l("ml",["lx"],function(c){var d=function(a,b,c){c=a.create().nu(c);var d=a.property().children(b);a.insert().append(b,c);a.insert().appendAll(c,d);return c},b=function(a,b,c){c=a.create().nu(c);var d=a.property().children(b);
a.attrs().copyTo(b,c);a.insert().before(b,c);a.insert().appendAll(c,d);a.remove().remove(b);return c};return{blockTransform:function(a,e,f){return(c.isFormatting(a,e)?b:d)(a,e,f)},nest:d,replace:b}});l("mm",["7"],function(c){return{tags:c.constant("address article aside audio blockquote canvas dd div dl fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr li noscript ol output p pre section table tbody td tfoot th thead tr ul video".split(" "))}});l("ed",["b","7","s","mm"],function(c,
d,b,a){return function(e){var f=function(a,f,k,m){var n=k.join(",");a=e.up().closest(a,n,m);f=e.up().closest(f,n,m);return a.isSome()&&f.isSome()?(m=a.getOrDie("Just checked it was some."),f=f.getOrDie("Just checked it was some."),e.eq(m,f)?(k=c.find(k,d.curry(e.is,m)),k=void 0!==k&&null!==k?b.some(k):b.none()):k=b.none(),k):b.none()};return{query:function(b,c,d){c=c.concat(a.tags());return f(b.startContainer(),b.endContainer(),c,d)},queryAll:f}}});l("e1","e7 b ml ea m5 ed".split(" "),function(c,
d,b,a,e,f){var g=c(),h=f(g);return{query:function(a,b,c){return h.query(a,b,c)},apply:function(f,g,h,p,q,r){return a.applyOn(f,e,g,h,p,q,function(a){return d.map(a,function(a){return b.blockTransform(c(),a,r)})})}}});l("e2",["mn","dv","1a","1y"],function(c,d,b,a){return{background:function(a,b,g){c.style(a,{"background-color":b},d.expand,g)},addClass:function(b,f,g){c.generic(b,d.expand,g,function(b){a.add(b,f)})},foreground:function(a,b,g){c.style(a,{color:b},d.expand,g)},addAttribute:function(a){return function(f,
g,h){c.generic(f,d.expand,h,function(c){b.set(c,a,g)})}},face:function(a,b,g){c.style(a,{"font-family":b},d.expand,g)},size:function(a,b,g){c.style(a,{"font-size":b},d.expand,g)}}});l("7i","b 7 s d9 da e0 dc dd 7f 7q e1 e2 1a 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=function(a,c,d,f,m){c=function(b,c,e,f){return a(d.isRoot,b,c,e,f)};var n=e.multiple(d,f,c),p=e.single(d,f,c,h.spot,g.update);return k.cata(m.get(),b.none,function(a,c){return b.some(n(a,c))},function(a,c){return b.some(p(a,
c))})};return{transform:function(a,b,c,d,e){return s(function(a,b,c,d,f){return n.apply(a,b,c,d,f,e)},a,b,c,d)},setClass:function(b,e,f,g,h,m){var n=function(b){r.closest(b,h).each(function(b){a.runTransaction(e,f,function(){q.set(b,"class",m)},e.toEditing)})};k.cata(g.get(),d.noop,function(a,b){c.each(a,n)},function(a,b){n(a.startContainer())})},inline:function(a,b,c,e,g){a=function(a){p.addClass(a,g,m.isAnnotation)};k.cata(e.get(),d.noop,f.multiple(b,c,a,b.toEditing),f.single(b,c,a,b.toEditing))},
list:function(a,b,c,d,e){return s(a,b,c,d,e)}}});l("7j","b 6 s 75 2u 6o".split(" "),function(c,d,b,a,e,f){var g=e.immutable("label","items"),h=function(c,d){return 0<d.length?[g(b.some(a.key(c)),d)]:[]};return{groups:function(a,e,n){var p=a.divisions(),q=c.map(p.blocks().concat(p.classblocks()),a.toCandidate),r=c.map(p.inlines(),a.toCandidate);a=c.map(p.objects(),a.toCandidate);a=c.foldr(a,function(a,b){var g;f.closest(e,b.base(),n)?(g=b.base(),g=c.contains(["a"],g)?d.merge(a,{link:a.link.concat([b])}):
c.contains(["embed","img","object"],g)?d.merge(a,{media:a.media.concat([b])}):c.contains(["hr"],g)?d.merge(a,{line:a.line.concat([b])}):c.contains(["li","ol","ul"],g)?d.merge(a,{list:a.list.concat([b])}):c.contains(["table","tr","td","th"],g)?d.merge(a,{table:a.table.concat([b])}):a):g=a;return g},{link:[],media:[],line:[],list:[],table:[]});return c.flatten([[g(b.none(),q)],h("block.label.inline",r),h("block.label.link",a.link),h("block.label.media",a.media),h("block.label.line",a.line),h("block.label.list",
a.list),h("block.label.table",a.table)])}}});l("7l",[],function(){var c=function(c,b){return{fold:b}};return{inline:function(d,b,a){return c("inline",function(c,f,g,h){return c(d,b,a)})},object:function(d,b,a,e){return c("object",function(c,g,h,k){return g(d,b,a,e)})},block:function(d,b,a){return c("block",function(c,f,g,h){return g(d,b,a)})},classblock:function(d,b,a,e){return c("classed block",function(c,g,h,k){return k(d,b,a,e)})},cata:function(c,b,a,e,f){return c.fold(b,a,e,f)}}});l("e3","b 7 s p 7l 75".split(" "),
function(c,d,b,a,e,f){var g="h1 h2 h3 h4 h5 h6 div p pre".split(" "),h="a embed hr img li object ol table td tr ul th".split(" "),k=function(a){var c=a.indexOf("."),e;-1<c?(e=a.substring(0,c),a=a.substring(c+1),e=-1===a.indexOf(".")?b.some({tag:d.constant(e),clazz:d.constant(a)}):b.none()):e=b.none();return e},m=function(b,d){var f=b.tag(),k=b.clazz(),m=c.contains(g,f),n=c.contains(h,f);return(m?a.value(e.classblock):n?a.value(e.object):a.error("Rule must have object tag or block tag.")).map(function(a){var c=
q(d,b,m);return a(f,k,c,d.style)})},n=function(a){return a.text.getOrThunk(function(){return f.key("block."+a.name)})},p=function(a,b){return a.text.getOrThunk(function(){return f.pkey("tag.inline.class",[b])})},q=function(a,b,c){return a.text.getOrThunk(function(){var a=(c?"block":"tag")+"."+b.tag(),a=(f.has(a)?f.translate(a):b.tag())+" ("+b.clazz()+")";return f.raw(a)})};return{decipher:function(b){return k(b.name).fold(function(){return c.contains(g,b.name)?a.value(e.block(b.name,n(b),b.style)):
a.error("Invalid style name: "+b.name)},function(c){return 0<c.tag().length?m(c,b):a.value(e.inline(c.clazz(),p(b,c.clazz()),b.style))})}}});l("7k","b 1o 7 s e3 7l 75 2u".split(" "),function(c,d,b,a,e,f,g,h){return function(k){var m=h.immutable("base","value","textkey","icon","styles","tag");k=c.map(k.styles,function(b){return{name:b.rule,text:a.from(b.text).map(g.raw),style:void 0===b.style?{}:b.style}});var n={};c.each(k,function(a){e.decipher(a).each(function(b){n[a.name]=b})});k=b.constant(!0);
var p=b.constant(!1),q=function(a,b,c,d){return function(e){return f.cata(e,a,b,c,d)}},r=d.values(n),s=c.filter(r,q(p,p,p,k)),t=c.filter(r,q(p,p,k,p)),u=c.filter(r,q(p,k,p,p)),v=c.filter(r,q(k,p,p,p));k=function(){var a=s.concat(u).concat(t).concat(v);return c.map(a,function(a){return f.cata(a,function(a,b,c){return"."+a},function(a,b,c,d){return a+"."+b},function(a,b,c){return a},function(a,b,c,d){return a+"."+b})})}();var w=function(b){return void 0!==n[b]?a.some(n[b]):a.none()},l=function(b){return f.cata(b,
function(b,c,d){return m("span","."+b,c,a.none(),d,"span")},function(b,c,d,e){return m(b,b+"."+c,d,a.none(),e,"span")},function(b,c,d){return m(b,b,c,a.none(),d,b)},function(b,c,d,e){return m(b,b+"."+c,d,a.none(),e,b)})},p=function(){var a=d.values(n);return c.map(a,l)}();return{candidateByName:function(a){return w(a).map(l)},toCandidate:l,ruleByName:w,divisions:function(){return{classblocks:b.constant(s),blocks:b.constant(t),objects:b.constant(u),inlines:b.constant(v)}},backup:function(b){return m(b,
b,g.key("block."+b),a.none(),{},"span")},selectors:b.constant(k),everything:b.constant(p)}}});l("e5",["7","75"],function(c,d){return{text:function(b){var a=d.get(b.textkey()),e=d.cata(b.textkey(),c.constant(!0),c.constant(!1),c.constant(!1));b=e&&void 0===a?b.value():a;return{text:c.constant(b),unknown:c.constant(e)}}}});l("7m","4z e4 e5 75 33 1y 4b 2n l 2o".split(" "),function(c,d,b,a,e,f,g,h,k,m){return{format:function(b){var d=k.fromText(a.get(b.textkey())),g=c.div();f.add(g,e.resolve("format-element-"+
b.tag()));h.setAll(g,b.styles());b=c.div();f.add(b,e.resolve("format-element-container"));m.append(g,d);m.append(b,g);return b},face:function(a){var c=b.text(a),f=c.text(),f=d(f).element();h.setAll(f,{"font-family":a.value()});a=c.unknown()?[e.resolve("font-face-unknown")]:[];g.add(f,a);return f}}});l("mo","85 f8 ag 4z 7 s 75 33 7d 55 46 1a 1y 2n 3u l 2o 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v){var w=function(b,d){var e=t.fromTag(b);c.hidden(e,!0);r.set(e,"list-style-type",d);
for(var f=h.resolve("list-style-content"),g=0;3>g;g++){var k=t.fromTag("li"),m=a.span();q.add(m,f);u.append(k,m);u.append(e,k)}return e},l=function(b,c){var d=g.translate(c),e=t.fromText(d),f=a.span();q.add(f,h.resolve("list-style-default"));p.set(b,"data-"+h.resolve("list-style"),"default");p.set(b,"title",d);u.append(f,e);return f};return function(a,r,A){var D=A(void 0===r||"default"===r?f.none():f.some(r)),B=t.fromTag("div");q.add(B,h.resolve("list-style-option"));A=void 0===r||"default"===r?l(B,
"ul"===a?"list.unordered.default":"list.ordered.default"):w(a,r);u.append(B,A);a=g.translate(("ul"===a?"list.unordered.":"list.ordered.")+r);p.set(B,"title",a);c.label(B,a);c.menuItemCheckbox(B);var C=b.describe(B,g.translate("aria.widget.navigation"));u.append(B,C);var F=n.create({action:m(["type","element"])}),E=function(){d.checked(B,!0);q.add(B,h.resolve("list-style-selected"))},G=function(){d.checked(B,!1);q.remove(B,h.resolve("list-style-selected"))},H=s.bind(B,"click",function(a){F.trigger.action(D,
f.some(B))});return{element:e.constant(B),instance:D,style:r,update:function(a){(D.query(a)&&D.queryStyle(a)?k.on(!0):k.off()).fold(G,e.noop,E)},select:E,deselect:G,events:F.registry,destroy:function(){H.unbind();v.remove(B);v.remove(C)}}}});l("e6","b gk 8s 4z 7 s mo 33 55 46 1a 1y 2o 2q 31 1s".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t){var u="data-"+h.resolve("list-style");return function(v,w,l){var y=m.create({action:k(["type"])}),z=a.div();p.add(z,h.resolve("list-style-palette"));var A=
c.map(v,function(a){return g("bullist"===w?"ul":"ol",a,l)});c.each(A,function(a){a.events.action.bind(function(a){a.element().each(C);y.trigger.action(a.type())});q.append(z,a.element())});var D=function(){var a=t.floor(A.length/4)+(0<A.length%4?1:0);return b.grid(z,{cell:e.constant("."+h.resolve("list-style-option"))},a,4,d.grid({trigger:function(a){a.dom().click();return f.some(a)}}))}(),B=function(a){a=c.find(A,a);return f.from(a)},C=function(a){s.sibling(a,"["+u+'="default"]').filter(function(b){return b!==
a}).bind(function(b){n.remove(b,u);n.set(a,u,"default")})};return{enter:D.enter,element:e.constant(z),update:function(a){c.each(A,function(b){b.update(a)})},events:y.registry,destroy:function(a){D.isFocused()&&D.exit();D.destroy();c.each(A,function(a){a.destroy()});r.remove(z)},findDefault:function(){return B(function(a){return n.has(a.element(),u)}).map(function(a){return a.instance})}}}});l("7n","c ah 7 d8 7i e6 76 7d 55 46 2y 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){return function(q){var r=
q.region(),s=q.content(),t=q.undo(),u=q.keyboard(),v=q.listConstructor(),w=q.type(),l=q.styles(),y=q.textkey(),z=q.menuTextkey(),A=v("default"),D=c.detect(),B=u.all();B.swallowKeys([d.ESCAPE()]);var C=m.create({abort:k([]),done:k([]),close:k([]),analytics:k(["message"])});B.events.escape.bind(function(a){C.trigger.abort()});var F=function(b){var c=e.list(function(c,d,e,f,g){return b.apply(c,d,e,f,g,a(r))},r,s,t,q.selections());C.trigger.done();s.focus();return c},E=function(){p.descendant(G.element(),
'[data-ephox-polish-list-style="default"]').each(function(a){n.focus(a)})},G=f(l,w,v);G.events.action.bind(function(a){F(a.type())});return{action:function(){var a=G.findDefault().getOr(A);F(a)},element:G.element,shortcut:!1,textkey:b.constant(y),menuTextkey:b.constant(z),label:b.constant(!1),name:b.constant(w),tooltip:g.get,toggle:!0,value:w,updateWidget:function(a){s.getSelection().each(function(c){var d=A.query(c)?h.on(!0):h.off();d.fold(a.deselect,b.noop,a.select);d.fold(a.release,b.noop,a.press);
G.update(c)})},open:function(){D.deviceType.isTouch()||E();B.on()},close:function(){B.off();C.trigger.close()},icon:!0,events:C.registry,enter:G.enter,destroy:function(){B.off();B.destroy();G.destroy()}}}});l("mp",["6","4n"],function(c,d){var b=d.generate([{mine:["element"]},{other:["element"]},{paragraphs:["elements"]}]);return c.merge(b,{cata:function(a,b,c,d){return a.fold(b,c,d)}})});l("mq","b s f7 mp 2n 21 2a".split(" "),function(c,d,b,a,e,f,g){var h=function(a,b,c){var d=f.name(a);return e.getRaw(a,
"list-style-type").fold(function(){return d===b&&c.isNone()},function(a){return c.exists(function(c){return d===b&&a===c})})};return{categorise:function(d,e,f){d=c.groupBy(d,function(a){return b.isList(a)?!0:g.parent(a).map(function(a){return a.dom()}).getOr(!1)});return c.bind(d,function(d){return c.forall(d,b.isList)?c.map(d,function(b){return h(b,e,f)?a.mine(b):a.other(b)}):[a.paragraphs(d)]})}}});l("e8","b ds 80 7 s dj ml mp mq 1a 2n l 2o 3c 21 fl 4e".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,
p,q,r,s,t,u){return function(v,w,l){var y=function(a){if("p"===s.name(a))return g.replace(v,a,"li");var b=p.fromTag("li");q.before(a,b);q.append(b,a);return b},z=function(a){var b=p.fromTag(w);l.each(function(a){n.set(b,"list-style-type",a)});q.before(a[0],b);r.append(b,a);e.from(m.get(a[0],"dir")).each(function(a){m.set(b,"dir",a)});return b},A=function(a){var b=t.mutate(a,w);l.fold(function(){n.remove(b,"list-style-type")},function(a){n.set(b,"list-style-type",a)});return b},D=function(b){var c=
a.constant(!0),d=a.constant(!1);return b.fold(c,d,d)},B=function(a,c){return function(g){return h.cata(g,function(g){var h=u.descendants(g,"li");return 0<h.length?(g=h[0],h=h[h.length-1],g=d.firstCursor(g).getOr(g),h=d.lastCursor(h).getOr(h),f.outdent(a,g,0,h,b.getEnd(h),c).map(function(a){return a.all()})):e.none()},e.none,e.none).getOr([])}},C=function(a){return h.cata(a,function(a){return[a]},function(a){return[A(a)]},function(a){a=c.map(a,y);z(a);return a})};return{apply:function(a,b,d){d=k.categorise(d,
w,l);a=c.forall(d,D)?B(a,b):C;return c.bind(d,a)}}}});l("e9","e7 b 7 s f7 mr ms mt 21 31".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(a){return g.cata(a,function(a){return h.wrap(a)},function(a){return[a]},function(a,b){return e.isList(a)?[a]:d.bind(b,n)},function(a){return h.wrap([a])})};return{isRootContainer:function(a){return function(b){return a(b)||e.isContainer(b)&&"li"!==k.name(b)}},extract:n,isCapable:e.isBlock,canUse:b.constant(!1),quasi:function(){return a.some(f.nu(c()))},
ascend:function(a,b){return m.closest(a,"ol,ul",b).getOr(a)}}});l("eb","m3 mu mv 2n l 21".split(" "),function(c,d,b,a,e,f){var g=function(b,d,f){var g=e.fromTag(d);f.each(function(b){a.set(g,"list-style-type",b)});return c.list(b,g)},h=function(b,c){var d=a.getRaw(b,"list-style-type");return c.fold(function(){return d.isNone()},function(a){return d.is(a)})},k=function(a,b,c){return f.name(a)===b&&h(a,c)};return{isAlready:k,convertOr:function(a,b,c){return function(d){return k(d.list(),a,b)?c(d):g(d,
a,b)}},topContext:function(a,c,e){return b.context(a,c,b.topmost,d.groupWrite,e)},context:function(a,c,e){return b.context(a,c,b.immediate,d.groupWrite,e)},unapply:function(a){return c.level(a,-1*a.level())}}});l("7r","e7 b 7 s e8 e9 ea eb ec ed 2n 21 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=c(),s=m(r),t=function(b){b=d.map(b,function(a){return q.ancestor(a,"ul,ol")});var c=d.map(b,function(a){return a.fold(function(){return"-"},function(a){return p.name(a)+"-"+n.get(a,"list-style-type")})}),
e=c[0];return d.forall(c.slice(1),function(a){return a===e})?b[0]:a.none()};c=function(a,c,d){var m=e(r,a,d),n=function(a,b,c,d,e,h){return g.applyOn(a,f,b,c,d,e,function(b){return m.apply(a,h,b)})},p=function(b){b=b.selected();return 0<b.length&&t(b).map(function(b){return h.isAlready(b,a,d)}).getOr(!1)};return{query:function(b){return s.queryAll(b.startContainer(),b.endContainer(),["ul","ol"],c).exists(function(b){return b===a})},queryStyle:function(a){var b=d.fold(function(){return":not([style])"},
function(a){return'[style*="list-style-type: '+a+';"]'});return r.up().closest(a.startContainer(),"ol, ul",c).exists(function(d){return r.up().closest(a.endContainer(),"ol, ul",c).exists(function(a){return d.dom()===a.dom()?r.is(d,b):!1})})},apply:function(c,e,f,g,m,q){var r=function(){return n(c,e,f,g,m,q)},s=function(b,c){return k.executeUsing(b,e,f,g,m,function(){return h.convertOr(a,d,c)})},t=function(){return h.topContext(e,g,c).fold(r,function(a){return s(a,h.unapply)})};return h.context(e,
g,c).fold(r,function(a){return p(a)?t():s(a,b.identity)})}}};return{unordered:b.curry(c,"ul"),ordered:b.curry(c,"ol")}});l("7o","7 s d8 7i 75 76 7d 7r".split(" "),function(c,d,b,a,e,f,g,h){var k=function(h,k,m,r){return function(m){var q=r(m.content().isRoot,d.none());return{toggle:!0,value:h,textkey:e.key(k),icon:!0,tooltip:f.get,updateGeneral:function(a){m.content().getSelection().each(function(b){(q.query(b)?g.on(!0):g.off()).fold(a.deselect,c.noop,a.select)})},action:function(){a.list(function(a,
c,d,e,f){return q.apply(a,c,d,e,f,b(m.region()))},m.region(),m.content(),m.undo(),m.selections());m.content().focus()}}}},m=k("bullist","action.bullist","ul",h.unordered);return{ol:k("numlist","action.numlist","ol",h.ordered),ul:m}});l("7p",["b","7d","2u","e1"],function(c,d,b,a){var e=b.immutable("tag"),f=function(a,b){return c.contains(["label","li","td","th","normal"],b)?d.on(a.backup(b)):d.off()},g=function(b,c,e){return a.query(b,c.selectors(),e).fold(function(){return b.collapsed()?f(c,"normal"):
d.off()},function(a){return c.candidateByName(a).map(d.on).getOrThunk(function(){return f(c,a)})})};return{read:function(a,b){var c=a.getSelection().fold(function(){return d.off()},function(c){return g(c,b,a.isRoot)});return e(c)}}});l("5c","b c 7 s 7i 7f 7j 7k 7l 79 7m 7n 7o 75 7p 7q 6v 76 55 46 2u 7r 1a 2n 31 q 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,l,x,y,z,A,D,B,C,F){var E=d.detect();return function(d,C){var I=x.create({analytics:l(["message"])}),K=h(C),J=d.region(),M=d.content(),
O=d.undo(),N=a.some(n.format),Q=M.isRoot,R=function(a){E.deviceType.isiOS()&&c.each(c.groupBy(c.filter(c.map(a,function(a){return B.ancestor(a,"ul,ol",Q).getOr(!1)}),b.identity),function(a){return a.dom()}),function(a){var b=D.get(a[0],"list-style-type");D.set(a[0],"list-style-type","none");F(function(){D.set(a[0],"list-style-type",b)},0)})},P=function(){return f.cata(d.selections().get(),b.constant([]),function(a){return 0<a.length?g.groups(K,a[0]):[]},function(a,b){return g.groups(K,a.startContainer(),
Q)})},S=function(b){var c=t.hasSelection(M),d=s.read(M,K),e=P();b.populate(e);m.updateMenu(b,d.tag(),c.content(),K.everything(),a.none())},L=function(a){K.ruleByName(a).each(function(a){k.cata(a,function(a,b,c){e.inline(J,M,O,d.selections(),a)},function(a,b,c,f){e.setClass(J,M,O,d.selections(),a,b)},function(a,b,f){e.transform(J,M,O,d.selections(),a).each(function(a){c.each(a,function(a){A.remove(a,"class")});R(a)})},function(a,b,f,g){e.transform(J,M,O,d.selections(),a).each(function(a){c.each(a,
function(a){A.set(a,"class",b)});R(a)})});M.uiChanged()})},U=y.immutableBag("region content undo selections keyboard listConstructor type styles textkey menuTextkey".split(" "),[]),V=U({region:J,content:M,undo:O,selections:d.selections(),keyboard:d.keyboard(),listConstructor:b.curry(z.unordered,Q),type:"bullist",styles:["default","disc","circle","square"],textkey:r.key("action.bullist"),menuTextkey:r.key("list.unordered.menu")}),U=U({region:J,content:M,undo:O,selections:d.selections(),keyboard:d.keyboard(),
listConstructor:b.curry(z.ordered,Q),type:"numlist",styles:"default decimal upper-alpha lower-alpha upper-roman lower-roman lower-greek".split(" "),textkey:r.key("action.numlist"),menuTextkey:r.key("list.ordered.menu")}),X=function(a){return r.translate("block.describe",r.get(a.textkey()))},V=b.curry(p,V),U=b.curry(p,U);return{ui:u.ui({"blocktag.dropdown":function(){return{name:"blocktag",textkey:r.key("block.styles"),menuTextkey:r.key("block.menu"),updateDropdown:S,action:L,values:K.everything(),
render:N,tooltip:v.get,toggle:!1,describe:X}},"bullist.widget":V,"numlist.widget":U,"bullist.general":b.constant(q.ul(d)),"numlist.general":b.constant(q.ol(d))},b.identity),events:I.registry,destroy:b.noop}}});l("mw","b 7 f7 m4 ms oe mt 21".split(" "),function(c,d,b,a,e,f,g,h){var k=["li"],m=function(a,b){return e.cata(a,function(a){return!0===b?[]:g.wrap(a)},function(a){return[a]},function(a,b){return"table"===h.name(a)?[a]:g.handleContainer(k,a,b,m)},function(a){return!0===b?[]:g.wrap([a])})};return{isRootContainer:a.isRootOrContainer,
extract:function(a){return m(a,!1)},isCapable:function(a){return f.isBlock(a)||c.contains(k,h.name(a))},canUse:function(a){return b.isFormatting(a)||c.contains(k,h.name(a))},quasi:d.curry(g.handleRoot,k),ascend:d.identity}});l("mx",["1a"],function(c){return function(d,b){return{is:function(a){return c.get(a,d)===b},remove:function(a){c.remove(a,d)},set:function(a){c.set(a,d,b)}}}});l("ee","b 7 lt mw ea mx 2n bl 31".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a,b){return k.closest(b,'[dir="rtl"],[dir="ltr"]').filter(a).isSome()},
n=function(k,n,p){var t=f(n,p),u=function(a){t.set(a);g.reflow(a)},v=function(a){return h.getDirection(a)===p};return{run:function(b,d,f,g,h){return e.applyOn(b,a,d,f,g,h,function(a){c.each(a,u);return a})},query:function(a,c){return b.bothMatch(a,c,d.curry(m,v))},name:d.constant(k)}},p=n("DirRtl","dir","rtl"),n=n("DirLtr","dir","ltr");return{dirLtr:d.constant(n),dirRtl:d.constant(p)}});l("7s","7 db dc dd 7f ee 3t".split(" "),function(c,d,b,a,e,f,g){var h=function(f){return function(h){var n=function(a,
b,c,d){return f.run(h.content().isRoot,a,b,c,d)};e.cata(h.selections().get(),c.noop,d.multiple(h.content(),h.undo(),n),d.single(h.content(),h.undo(),n,a.spot,b.update));g(function(){h.content().uiChanged()},0)}};return{dirRtl:h(f.dirRtl()),dirLtr:h(f.dirLtr())}});l("7t",["7d","2u","ee","31"],function(c,d,b,a){var e=d.immutable("ltrdir","rtldir"),f=function(a,b){return b.query(a.startContainer(),a.endContainer())?c.on(!0):c.off()},g=function(b){return a.closest(b.startContainer(),"[dir]").isSome()||
a.closest(b.endContainer(),"[dir]").isSome()};return{readDir:function(a){return a.getSelection().filter(g).map(function(a){return e(f(a,b.dirLtr()),f(a,b.dirRtl()))})}}});l("5d","7 7s 75 7t 6v 7d 55 46".split(" "),function(c,d,b,a,e,f,g,h){return function(k){var m=k.content(),n=h.create({analytics:g(["message","properties"])}),p=function(b,d){a.readDir(m).map(function(a){return a[b]}).fold(f.unchanged,c.apply).fold(d.deselect,c.noop,d.select)};return{ui:e.ui({"ltrdir.general":{value:"ltrdir",textkey:b.key("directionality.ltrdir"),
action:c.curry(d.dirLtr,k),updateGeneral:c.curry(p,"ltrdir"),toggle:!0},"rtldir.general":{value:"rtldir",textkey:b.key("directionality.rtldir"),action:c.curry(d.dirRtl,k),updateGeneral:c.curry(p,"rtldir"),toggle:!0}}),events:n.registry,destroy:c.noop}}});l("v2",["ds","s","2a"],function(c,d,b){var a=function(a,b,c){a=a.createRange();a.selectNode(b.dom());a.collapse(c);return a},e=function(b,d,e){var f=b.createRange();f.selectNode(d.dom());var f=f.getBoundingClientRect(),n=e-f.left<f.right-e;return(n?
c.firstCursor:c.lastCursor)(d).map(function(c){return a(b,c,n)})},f=function(b,c,e){var f=c.dom().getBoundingClientRect();return d.some(a(b,c,e-f.left<f.right-e))};return{search:function(a,c,d){return(0===b.children(c).length?f:e)(a,c,d)}}});l("zh",["1s"],function(c){return{inRect:function(c,b,a){return b>=c.left&&b<=c.right&&a>=c.top&&a<=c.bottom},searchForPoint:function(d,b,a,e,f){if(0===f)return 0;if(b===e)return f-1;for(var g=1;g<f;g++){var h=d(g),k=c.abs(b-h.left);if(!(a>h.bottom)){if(a<h.top||
k>e)return g-1;e=k}}return 0}}});l("v3","zh s k 2u 21 at 2a 1s".split(" "),function(c,d,b,a,e,f,g,h){var k=a.immutable("node","doc","x","y","fullrect"),m=function(a){var b=function(b){var c=a.doc().createRange();c.setStart(a.node().dom(),b);c.collapse(!0);return c},d=f.get(a.node()).length,e=a.x(),g=a.y(),h=a.fullrect().right,d=c.searchForPoint(function(a){return b(a).getBoundingClientRect()},e,g,h,d);return b(d)},n=function(a,e,f,g){var h=a.createRange();h.selectNode(e.dom());h=h.getClientRects();
return b.findMap(h,function(a){return c.inRect(a,f,g)?d.some(a):d.none()}).map(function(b){return k(e,a,f,g,b)})},p=function(a,f,h,k){if(e.isText(f))return n(a,f,h,k);var m=a.createRange();f=g.children(f);return b.findMap(f,function(b){m.selectNode(b.dom());return c.inRect(m.getBoundingClientRect(),h,k)?p(a,b,h,k):d.none()})};return{search:function(a,b,c,d){var e=a.createRange();e.selectNode(b.dom());e=e.getBoundingClientRect();c=h.max(e.left,h.min(e.right,c));d=h.max(e.top,h.min(e.bottom,d));return p(a,
b,c,d).map(m)}}});l("my",["v2","v3","s","l","2a"],function(c,d,b,a,e){return{searchForRange:function(f,g,h){return b.from(f.elementFromPoint(g,h)).map(a.fromDom).bind(function(a){var b=function(){return c.search(f,a,g)};return 0===e.children(a).length?b():d.search(f,a,g,h).orThunk(b)})}}});l("ef",["eg","my","s","q"],function(c,d,b,a){var e=function(a,c,d){return b.from(a.caretPositionFromPoint(c,d)).bind(function(c){if(null===c.offsetNode)return b.none();var d=a.createRange();d.setStart(c.offsetNode,
c.offset);d.collapse();return b.some(d)})},f=function(a,c,d){return b.from(a.caretRangeFromPoint(c,d))},g=a.caretPositionFromPoint?e:a.caretRangeFromPoint?f:d.searchForRange;return{find:function(a,b,d){return g(a.document,b,d).map(c.writeFromNative)}}});l("7u",["ef"],function(c){return{find:c.find}});l("gh",["6","4n"],function(c,d){var b=d.generate([{blob:["id","blob","objurl","data"]},{url:["id","url","raw"]}]);return c.merge(b,{cata:function(a,b,c){return a.fold(b,c)}})});l("mz",["2i"],function(c){return function(){return new (c.getOrDie("FileReader"))}});
l("gw",["2i"],function(c){return{createObjectURL:function(d){return c.getOrDie("URL").createObjectURL(d)},revokeObjectURL:function(d){c.getOrDie("URL").revokeObjectURL(d)}}});l("em","b 2z c gh 3s mz gw 1a".split(" "),function(c,d,b,a,e,f,g,h){b=b.detect();var k=function(a){var b=g.createObjectURL(a);return m(a,b)},m=function(b,c){return e.nu(function(e){var g=f();g.onload=function(f){var g=d.generate("image");f=a.blob(g,b,c,f.target);e(f)};g.readAsDataURL(b)})},n=function(a){return 1===a.length&&
c.contains(a,"Files")},p=function(a){return!c.contains(a,"text/_moz_htmlcontext")},q=function(a){return c.contains(a,"Files")},r=function(a){return!0};return{multiple:function(a){return 0===a.length?e.pure([]):e.mapM(a,k)},toFiles:function(a){return a.raw().target.files||a.raw().dataTransfer.files},isFiles:b.browser.isChrome()||b.browser.isSafari()||b.browser.isOpera()?q:b.browser.isFirefox()?p:b.browser.isIE()?n:r,fromImages:function(b){b=c.map(b,function(b){var c=d.generate("image");return a.url(c,
h.get(b,"src"),b)});return e.pure(b)},single:k,singleWithUrl:m}});l("el","b em 55 46 1y 3u".split(" "),function(c,d,b,a,e,f){return{register:function(g,h,k){var m=a.create({dragover:b(["original"]),dragleave:b(["original"]),drop:b(["original"]),dragndropimages:b(["original","files"]),dragndrophtml:b(["original"])});h.each(function(a){var b=function(b){return function(){b(g,a)}};m.registry.dragover.bind(b(e.add));m.registry.dragleave.bind(b(e.remove));m.registry.drop.bind(b(e.remove))});var n=f.bind(g,
"dragover",function(a){!0===k?(a.prevent(),m.trigger.dragover(a)):a.kill()}),p=f.bind(g,"dragleave",m.trigger.dragleave),q=f.bind(g,"drop",function(a){m.trigger.drop(a);a.kill();if(d.isFiles(a.raw().dataTransfer.types)){var b=d.toFiles(a);m.trigger.dragndropimages(a,b)}else c.contains(a.raw().dataTransfer.types,"text/html")&&m.trigger.dragndrophtml(a)});return{destroy:function(){n.unbind();p.unbind();q.unbind()},events:m.registry}}}});l("7w",["el","em","55","46"],function(c,d,b,a){return{forImages:function(e,
f,g){e=c.register(e,f,g);var h=a.create({dragover:b(["original"]),dragleave:b(["original"]),drop:b(["original"]),dragndropimages:b(["assets","x","y"]),dragndrophtml:b(["html","x","y"])});f=function(a,b){a.bind(function(a){b(a.original())})};e.events.dragndropimages.bind(function(a){var b=a.original();d.multiple(a.files()).get(function(a){h.trigger.dragndropimages(a,b.x(),b.y())})});e.events.dragndrophtml.bind(function(a){a=a.original();var b=a.raw().dataTransfer.getData("text/html");h.trigger.dragndrophtml(b,
a.x(),a.y())});f(e.events.dragover,h.trigger.dragover);f(e.events.dragleave,h.trigger.dragleave);f(e.events.drop,h.trigger.drop);return{destroy:e.destroy,events:h.registry}}}});l("n0",["4g"],function(c){return{resolve:c.create("ephox-arcade").resolve}});l("en",["n0","b","1a","21"],function(c,d,b,a){var e="data-"+c.resolve("no-merge"),f="data-"+c.resolve("atomic");return{doNotMerge:function(c){a.isElement(c)&&b.set(c,e,"true")},shouldMerge:function(c){return a.isElement(c)&&!1===b.has(c,e)},setAtomic:function(c){a.isElement(c)&&
b.set(c,f,"true")},isAtomic:function(c){return a.isElement(c)&&"true"===b.get(c,f)},clear:function(c){a.isElement(c)&&d.each([e,f],function(a){b.remove(c,a)})}}});l("v4",["7","s","l","2o","2a"],function(c,d,b,a,e){return{addAfter:function(f){return function(g,h){var k=h.all(),m=f(g,h);d.from(k[k.length-1]).each(function(d){e.nextSibling(d).fold(function(){var c=b.fromTag("p");a.append(c,b.fromTag("br"));a.after(d,c)},c.noop)});return m}}}});l("qr",["7"],function(c){return function(d,b,a,e){return{context:d,
profile:b,action:a,label:c.constant(e)}}});l("zi","b z3 u5 l 2o 21 2q 4e 2a".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(d){var f=k.owner(d);d=h.descendants(d,"td,th");c.each(d,function(c){b.needsCursor(c).each(function(b){e.append(c,a.fromTag("br",f.dom()))})})},n=function(a){b.vacate(a);b.needsCursor(a).each(function(b){g.remove(a)})};return{populate:function(c){b.vacate(c);b.needsCursor(c).each(function(b){var c=a.fromTag("span");d.forceAddBr(b,c)})},purge:function(a){("table"===f.name(a)?
m:n)(a)}}});l("vb",["b","f7","zi","2a"],function(c,d,b,a){var e=function(a,d){var e=f(a),e=c.filter(e,d);c.each(e,b.purge)},f=function(b){var c=function(a){return[a]},d=a.prevSibling(b).map(c).getOr([]),c=a.nextSibling(b).map(c).getOr([]);return d.concat([b]).concat(c)};return{purge:function(a){e(a,d.isBlock)},purgeBy:e}});l("vc","vb b f7 2n 21 6j 4e at 2a".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a){c.purgeBy(a,function(a){var c=b.isBlock(a)||"li"===e.name(a)||"ol"===e.name(a)||"ul"===
e.name(a);if("li"===e.name(a)){var d;if(!(d=0===g.descendants(a,"ul,ol").length)){d=g.descendants(a,"ul,ol,li");var h=g.descendants(a,"*");a=f.descendants(a,e.isText);d=d.length===h.length&&0===a.length}a=d}else a=!0;return c&&a})};return{purge:m,purgeAll:function(a){var b=g.descendants(a,"ol,ul,li");d.each([a].concat(b),m)},nesting:function(b){b=("li"===e.name(b)?[b]:[]).concat(g.descendants(b,"li"));d.each(b,function(b){var c=k.children(b);d.exists(c,function(a){return e.isText(a)?0<h.get(a).length:
!d.contains(["ol","ul"],e.name(a))})||a.set(b,"list-style-type","none")})}}});l("zk","58 7 s l 2o 2q 2a".split(" "),function(c,d,b,a,e,f,g){var h=function(e,g){var h=a.fromText(c.zeroWidth());e(g,h);return b.some({element:d.constant(h),cleanup:function(){f.remove(h)},splits:d.constant([])})},k=function(a,b){return a.map(function(a){return{element:d.constant(a),cleanup:d.noop,splits:d.constant(void 0!==b?b:[])}})},m=function(a,b){return h(e.before,a)},n=function(a,b){return h(e.after,a)},p=function(a,
b){return h(e.append,a)},q=function(a,b){return h(e.prepend,a)},r=function(a,c){return function(d,e){return a(d,e).fold(function(){return c(d,e)},b.some)}},s=function(a,c,d){return k(b.some(c),void 0!==c&&void 0!==d?[{first:c.dom(),second:d.dom()}]:[])};return{before:{text:{none:b.none,start:r(function(a,b){return k(g.prevSibling(a))},m),middle:s,end:s},element:{hasPrevious:function(a,b){return k(g.child(a,b-1))},rightEdge:p,first:q,empty:m,otherwise:q}},after:{text:{none:b.none,start:s,middle:function(a,
c,d){return k(b.some(d),void 0!==c&&void 0!==d?[{first:c.dom(),second:d.dom()}]:[])},end:r(function(a,b){return k(g.nextSibling(a))},n)},element:{hasNext:function(a,b){return k(g.child(a,b+1))},rightEdge:p,first:q,empty:n,otherwise:p}}}});l("vx",["7","uu","zk","9"],function(c,d,b,a){return{prefix:c.curry(d.prefix,b),postfix:c.curry(d.postfix,b)}});l("101","7 s ns vh 2o 37 2q fl".split(" "),function(c,d,b,a,e,f,g,h){var k=function(b){return!f.descendant(b,function(b){return a.hasCursor(b,["hr","img"])})},
m=function(a){var b=h.shallowAs(a,"p");e.before(a,b);g.remove(a);return d.some(b)};return{cleanup:function(a){var e=a.second(),e=(b.isHeading(e)&&k(e)?m(e):d.none()).getOr(a.second());return{first:a.first,second:c.constant(e),mark:a.mark,splits:a.splits}}}});l("vv","58 b 9i ds 80 7 s mg f7 z3 vx u4 u5 101 z4 ns 1b l 2o 21 at 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,v,l,x,y,z){var A=function(a){return x.isElement(a)&&k.isInline(a)&&0===z.children(a).length},D=function(a){var b=v.fromText(c.zeroWidth());
l.append(a,b);return b},B=function(a,b,c){return n.prefix(b,c).bind(function(b){var c=p.breakPath(b.element(),t.stopAt(a));return c.second().map(function(d){return{first:f.constant(a),second:f.constant(d),mark:f.constant(b),splits:f.constant(c.splits().concat(b.splits()))}})})};return{soft:function(c,d,m){var n=function(a){var b;x.isText(a)?(b=y.get(a),b=-1===b.indexOf("\u00a0")&&0===b.trim().length):b=!1;return b?z.nextSibling(a).forall(n):!e.isStart(c,d)&&k.isBlock(a)},p=v.fromTag("br");h.atStartOf(c,
d,p);z.nextSibling(p).fold(function(){return e.getEnd(c)===d&&t.findBlock(c,m).bind(a.lastCursor).fold(f.constant(!1),function(a){var b="br"===x.name(a)?p:c;return u.eq(b,a)})},n)&&l.after(p,v.fromTag("br"));return g.some({start:f.constant(b.after(p)),finish:f.constant(b.after(p))})},hard:function(a,c,e,g,h){return B(a,c,e).map(r.cleanup).map(function(a){d.each([g.getOr(a.first()),a.second()],function(b){q.postprocess(b,a.mark().element(),h)});t.findValidHardBreak(a.second(),h).orThunk(function(){m.rootBr(a.second(),
a.mark().element())});var c=s.plunge(a.second(),f.constant(!1)),c=A(c)?D(c):c;a.mark().cleanup();return{start:f.constant(b.on(c,0)),finish:f.constant(b.on(c,0))}})},rupture:B}});l("vu",["9i","7","s","l","2o"],function(c,d,b,a,e){var f=function(a,c,e){return b.some({start:d.constant(a(c,e)),finish:d.constant(a(c,e))})};return{doubleBr:function(b){e.after(b,a.fromTag("br"));var d=a.fromTag("br");e.after(b,d);return f(c.after,d,0)},emptyParagraph:function(b){var d=a.fromTag("p"),k=a.fromTag("br");e.append(d,
k);e.after(b,d);return f(c.on,k,0)}}});l("12e",[],function(){return{box:function(c){return[c]}}});l("102",["7","12e","ns"],function(c,d,b){return{processes:function(a){return{stopper:b.stopAt(a),wrapper:d.box,post:c.noop}}}});l("103","b s 12e ns 3c 21 2q 2a".split(" "),function(c,d,b,a,e,f,g,h){var k=function(a,b,c){d.from(c[c.length-1]).each(function(a){e.append(a,m(h.children(b)));g.empty(b)})},m=function(b){return c.filter(b,function(b){return!(f.isElement(b)&&a.isList(b)&&0===h.children(b).length)})};
return{processes:function(c){return{stopper:a.stopAt(c),wrapper:b.box,post:k}}}});l("104","b 7 f7 z3 u5 ns 1a 2n l 2o 3c 21 37 2q 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){var t=function(a,b){r.remove(a);return b},u=function(b,c){var d=k.fromTag("p");n.append(d,c);m.before(b,d);r.remove(b);e.needsCursor(d).each(function(b){a.forceAddBr(b,k.fromTag("span"))});return[d]},v=function(a){var d=s.children(a),d=(q.descendant(a,b.isFormatting)?t:u)(a,d);c.each(d,function(b){p.isElement(b)&&(g.transfer(a,
b,["dir"]),h.transfer(a,b,["text-align"]))});return d};return{processes:function(a){return{stopper:f.stopAt(a),wrapper:v,post:d.noop}}}});l("vw","b 9i 7 u4 u5 102 103 104 3c 21 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return{exit:function(p,q){return n.ancestor(p,"ol,ul",q).bind(function(r){var s=n.ancestor(r,"li,ol,ul",q).fold(function(){return h.processes(r)},function(a){return"li"===m.name(a)?g.processes(a):f.processes(r)}),t=a.breakPath(p,s.stopper);return t.second().map(function(a){var f=
t.first(),g=s.wrapper(p);k.before(a,g);s.post(f,a,g);c.each([f,a],e.lists);return{start:b.constant(d.on(g[0],0)),finish:b.constant(d.on(g[0],0))}})})}}});l("nr","s vu vv vw ns 31".split(" "),function(c,d,b,a,e,f){var g=function(d,g,m,n){return f.closest(g,"li",n).fold(function(){return b.hard(d,g,m,c.none(),n)},function(d){d=e.exitList(d)?a.exit(d,n):b.hard(d,g,m,c.some(d),n);return d})};return{hard:function(a,f,m){return e.findValidHardBreak(a,m).fold(function(){return e.findAnchorBreak(a,m).fold(function(){return b.soft(a,
f,m)},function(g){return!0===e.isRightEdge(g,a,f)?d.doubleBr(g):b.hard(g,a,f,c.none(),m)})},function(b){return g(b,a,f,m)})},soft:b.soft,rupture:b.rupture}});l("vy",["2u"],function(c){return c.immutable("cursor","blocks")});l("nt","b 9i 7 s vx u5 vv ns vy uv 1b".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=function(a,c,f,g){return e.postfix(a,c,f,g).map(function(e){var h=m.leftEdge(a,c,f,g);m.makeTo(h.element(),h.offset(),e.element()).deleteContents();return{start:b.constant(d.before(e.element())),
finish:b.constant(d.before(e.element())),mark:e.element}})},q=function(a,b,c,d){return p(a,b,c,d).bind(function(a){return g.soft(a.mark(),0)})},r=function(b,c,d,e,f){return p(b,c,d,e).bind(function(b){return h.findValidHardBreak(b.mark(),f).bind(function(c){return g.hard(c,b.mark(),0,a.none(),f)})})},s=function(a,b){c.each(a,function(a){f.postprocess(a,b)})};return{soft:q,hard:function(a,c,d,e,f){var g=h.findValidHardBreak(a,f),m=h.findValidHardBreak(d,f),l=g.fold(function(){var b=q(a,c,d,e);return k(b,
[])},function(b){return m.fold(function(){var f=q(a,c,d,e);return k(f,[b])},function(g){var h=n.eq(b,g)?r(a,c,d,e,f):p(a,c,d,e);return k(h,[b,g])})});return l.cursor().map(function(a){var c=l.blocks(),d;d=a.start().fold(b.identity,b.identity,b.identity);s(c,d);return a})},rupture:function(a,b,c,d,e){return p(a,b,c,d).bind(function(a){return h.findValidHardBreak(a.mark(),e).bind(function(b){return g.rupture(b,a.mark(),0)})})}}});l("zj","vx vv nr ns nt q".split(" "),function(c,d,b,a,e,f){return{point:function(a,
c,d){return b.rupture(a,c,d)},range:function(a,b,c,d,f){return e.rupture(a,b,c,d,f)},ruptureUntil:function(b,e,k,m,n,p){var q=c.postfix(b,e,k,m);return function(b,c){return a.findValidHardBreak(b,n).map(p).bind(function(a){return d.rupture(a,b,c)})}(b,e).bind(function(a){return q.map(function(b){var c=f.createRange();c.setStartAfter(a.first().dom());c.setEndBefore(b.element().dom());c.deleteContents();b.cleanup();a.mark().cleanup();return a.first()})})}}});l("v5","vb vc b s mg zj 3c 2a".split(" "),
function(c,d,b,a,e,f,g,h){var k=function(b,c,d){if(0<b.length){var f=b[0],h=b.slice(1);e.atStartOf(c,d,f);g.after(f,h);return a.some(b[b.length-1])}return a.none()};return{split:function(e,k,p){var q=void 0===p?c.purge:p;return f.point(e.block(),e.element(),e.offset()).bind(function(c){var e=k.all();g.before(c.second(),e);c.mark().cleanup();q(c.first());q(c.second());b.each([c.first(),c.second()],d.nesting);c=b.reverse(e);c=b.find(c,function(a){return h.parent(a).isSome()});return a.from(c)})},merge:function(a,
b){var c=h.children(b.single());return k(c,a.element(),a.offset())},nest:function(a,b){return k(b.all(),a.element(),a.offset())},insertMany:k,insertChildren:function(a,b){var c=h.children(a);return k(c,b.element(),b.offset())},fallback:function(a,b,c){return k(c,b.startContainer(),b.startOffset())}}});l("v7",["b","7","s","31"],function(c,d,b,a){return{lists:function(e){return c.foldr(e,function(b,c){return b.bind(function(b){return a.closest(c,"ol,ul").map(function(a){return[a].concat(b)})})},b.some([])).map(function(a){return{all:d.constant(a)}})},
from:function(a){return{all:d.constant(a)}}}});l("v8","6 ds 7 s f7 2u 1b 21 4i 31 at 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=f.immutable("left","right"),r=function(a){return e.isFormatting(a)||e.isContainer(a)},s=function(a,b,c,d){return k.closest(c,a,b)},t=function(a){return function(b,c,d){return a(b,c.element(),c.offset()).bind(function(c){return a(b,d.element(),d.offset()).map(function(a){return q(c,a)})})}},u=function(a){var b=t(a);return function(a,c,d){return b(a,c,d).filter(function(a){return g.eq(a.left(),
a.right())})}};return{inline:function(b,c,d){return k.closest(c,r,b).fold(function(){return a.some(c)},function(d){return b(d)?a.some(c):a.none()})},formatter:b.curry(s,e.isFormatting),container:function(a,c,d){return k.closest(c,e.isContainer,a).filter(b.not(a))},inListItem:function(a,b,c){return m.closest(b,"li",a)},inList:function(a,b,c){return m.closest(b,"ol,ul",a)},inTableCell:function(a,b,c){return m.closest(b,"td,th",a)},setBlock:function(a,d){return c.deepMerge(a,{block:b.constant(d)})},
both:t,shared:u,sharedPredicate:function(a){a=b.curry(s,a);return u(a)},entireRoot:function(a,b,c){return k.closest(b.element(),a).filter(function(c){var e=function(a){return g.eq(a,b.element())};return a(b.element())&&0===b.offset()||h.isText(b.element())&&0===b.offset()&&d.firstCursor(c).map(e).getOr(!1)}).filter(function(b){var e=function(a){return g.eq(a,c.element())};return a(c.element())&&c.offset()>=p.children(b).length-1||h.isText(c.element())&&c.offset()>=n.get(c.element()).length&&d.lastCursor(b).map(e).getOr(!1)}).map(function(a){return q(a,
a)})}}});l("v6","vc v5 v7 v8 6o 4e 31".split(" "),function(c,d,b,a,e,f,g){return{insertOne:function(a,g){var m=f.children(g.single(),"li");return 1!==m.length||e.descendant(m[0],"ol,ul")?d.split(a,b.from(m),c.purge):d.insertChildren(m[0],a)},insertMany:function(b,e){return g.ancestor(b.block(),"ol,ul").bind(function(f){f=a.setBlock(b,f);return d.split(f,e,c.purgeAll)})}}});l("v9",["b","7","s","21"],function(c,d,b,a){var e=function(a){return function(c){return(1===c.length?b.some(c[0]):b.none()).filter(a).map(function(a){return{single:d.constant(a)}})}},
f=function(a){return function(e){var f=c.find(e,a);return(void 0!==f&&null!==f?b.some(e):b.none()).map(function(a){return{all:d.constant(a)}})}};return{oneOf:e,anyOf:f,noneOf:function(a){return function(e){var f=c.find(e,a);return(void 0===f||null===f?b.some(e):b.none()).map(function(a){return{all:d.constant(a)}})}},allOf:function(a){return function(e){return c.forall(e,a)?b.some({all:d.constant(e)}):b.none()}},any:b.some,oneOfTag:function(b){return e(function(c){return a.name(c)===b})},anyOfTag:function(b){return f(function(c){return a.name(c)===
b})},single:function(a){return b.some({single:d.constant(a)})},all:function(a){return b.some({all:d.constant(a)})}}});l("va","b 7 s f7 21 4e 31".split(" "),function(c,d,b,a,e,f,g){var h=function(a){return 1===a.length?g.closest(a[0],"ol,ul").map(function(a){return{single:d.constant(a)}}):b.none()};return{list:h,listItem:function(a){return h(a).bind(function(a){a=f.descendants(a.single(),"li");return 1===a.length?b.some({single:d.constant(a[0])}):b.none()})},partialList:function(f){if(2!==f.length)return b.none();
var g=f[0],h=f[1];if(a.isFormatting(g)||a.isContainer(g)||c.contains(["ol","ul","li"],e.name(g))||!c.contains(["ol","ul"],e.name(h)))return b.none();e.name(h);return b.some({all:d.constant(f),list:d.constant(h),inline:d.constant(g)})}}});l("n1","v4 qr en v5 v6 v7 v8 v9 va 7 f7".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=g.formatter,q=g.inline,r=g.container,s=function(a){return n.isFormatting(a)&&!1===b.shouldMerge(a)};c=[d(g.inListItem,k.list,e.insertOne,"List"),d(g.inListItem,f.lists,e.insertMany,
"Many lists"),d(q,h.anyOf(s),a.nest,"Copying formatting (NO MERGE) into root"),d(q,h.oneOf(n.isFormatting),a.merge,"Copying formatting into root"),d(p,h.anyOfTag("hr"),a.split,"insert hr into formatter"),d(p,h.anyOf(s),a.split,"Copying one formatting block (NO MERGE) into formatting"),d(p,h.oneOf(n.isFormatting),a.merge,"Copying one formatting block into formatting"),d(p,h.anyOf(n.isFormatting),a.split,"Copying many formatting blocks into formatting"),d(p,h.anyOfTag("table"),c.addAfter(a.split),"Copying tables into formatting"),
d(p,h.anyOf(n.isContainer),a.split,"Copying container blocks into formatting"),d(r,h.all,a.nest,"Fallback pasting into container.")];return{context:function(a,b,c){return b.context(a.isRoot,c.startContainer(),c.startOffset()).map(function(a){return{block:m.constant(a),element:c.startContainer,offset:c.startOffset}})},rules:m.constant(c),fallback:a.fallback}});l("vd",["7","ex","dl"],function(c,d,b){return{force:function(a){var e=b.after(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset()),
f=e?d.point(a.endContainer(),a.endOffset()):d.point(a.startContainer(),a.startOffset());a=e?d.point(a.startContainer(),a.startOffset()):d.point(a.endContainer(),a.endOffset());return{left:c.constant(f),right:c.constant(a)}}}});l("ve","vb b ds 7 s f7 zj vx uv 1b l 2o 3c 21 2q 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t){var u=function(a,b){var c=a.original(),d=h.postfix(c.left().element(),c.left().offset(),c.right().element(),c.right().offset()),f=b.all();return d.bind(function(b){k.makeTo(c.left().element(),
c.left().offset(),b.element()).deleteContents();b.cleanup();q.append(a.left(),f);b=t.children(a.right());q.append(a.left(),b);s.remove(a.right());return e.from(f[f.length-1])})},v=function(a,c){if(!m.eq(a.left(),a.right()))throw"replaceContents used in the wrong context";var d=a.left();s.empty(d);var f=c.all();q.append(d,f);return b.lastCursor(d).or(e.from(f[f.length-1]))};return{replace:function(a,b){if(m.eq(a.left(),a.right())){var c=b.all();a.canvas().replaceSelection(c);return e.from(c[c.length-
1])}return u(a,b)},replaceContents:v,replaceContentsWrapP:function(b,c){var d=n.fromTag("p");q.append(d,c.all());return v(b,{all:a.constant([d])})},replaceWhole:function(a,b){var c=b.all();q.after(a.left(),c);s.remove(a.left());return e.from(c[c.length-1])},merge:function(a,b){var c=t.children(b.single());a.canvas().replaceSelection(c);return e.from(c[c.length-1])},split:function(a,b,f){var h=void 0===f?c.purge:f;f=a.original().left();var k=a.original().right();return g.range(f.element(),f.offset(),
k.element(),k.offset(),a.canvas().isRoot).bind(function(a){var c=b.all();q.before(a.second(),c);a.mark().cleanup();d.each([a.first(),a.second()],h);return e.from(c[c.length-1])})},fallback:function(a,b,d){a.replaceSelection(d);e.from(d[0]).each(c.purge);e.from(d[d.length-1]).each(c.purge);return e.from(d[d.length-1])}}});l("vf","s l 2o 3c 21 31 2a".split(" "),function(c,d,b,a,e,f,g){return{insertAll:function(b,d){var e=d.all();a.after(b,e);return c.from(e[e.length-1])},insertChildren:function(b,d){var e=
g.children(d.single());a.after(b,e);return c.some(e[e.length-1])},insertSingle:function(a,d){b.after(a,d.single());return c.some(d.single())},insertFlat:function(e,f){var g=d.fromTag("li");a.append(g,[f.inline(),f.list()]);b.after(e,g);return c.some(f.list())},insertNested:function(g,k){var m=d.fromTag("li");a.append(m,[k.inline(),k.list()]);var n=f.ancestor(g,"ol,ul").fold(function(){var a=d.fromTag(e.name(k.list()));b.append(a,m);return a},function(){return m});b.after(g,n);return c.some(k.list())}}});
l("vg","vc b 7 zj 4e 2a".split(" "),function(c,d,b,a,e,f){var g=function(c,d,e,f){f=void 0!==f?f:b.identity;var g=d.original(),r=g.left(),g=g.right();return a.ruptureUntil(r.element(),r.offset(),g.element(),g.offset(),d.canvas().isRoot,f).bind(function(a){var b=c(a,e);h(a);return b},void 0!==f?f:b.identity)},h=function(a){var b=e.ancestors(a,"ol,ul");0<b.length&&d.each([c.purgeAll,c.nesting],function(a){a(b[b.length-1])})};return{postprocess:h,onList:function(a,b,c){return g(a,b,c,function(a){return f.parent(a).getOr(a)})},
onItem:function(a,c,d){return g(a,c,d,b.identity)}}});l("n2","qr en vb vc v8 v9 vd va ve vf vg b 7 f7 vh 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t){var u=e.formatter,v=q.curry(n.onItem,m.insertSingle),l=q.curry(n.onList,m.insertAll),x=q.curry(n.onItem,m.insertChildren),y=q.curry(n.onItem,m.insertFlat);m=q.curry(n.onItem,m.insertNested);c=[c(e.sharedPredicate(d.isAtomic),f.all,k.replaceWhole,"selection: inside something atomic, so just replace the whole thing"),c(e.shared(e.inListItem),
h.listItem,function(a,b){return k.merge(a,b)},"selection: same item, paste: singleton"),c(e.shared(e.inListItem),h.list,function(b,c){return k.split(b,{all:q.constant(t.children(c.single()))},a.purgeAll)},"selection: same item, paste: single list"),c(e.shared(e.inListItem),h.partialList,m,"selection: same item, paste: partial"),c(e.shared(e.inListItem),f.noneOf(r.isBlock),k.replace,"selection: same item, paste: no blocks"),c(e.shared(e.inListItem),f.anyOf(r.isHeading),function(a,c){var d=k.replace(a,
c);p.each(c.all(),function(a){b.purgeBy(a,s.isVacantText)});return d},"selection: same item, paste: heading"),c(e.shared(e.inListItem),f.all,l,"selection: same item, paste: any"),c(e.both(e.inListItem),h.listItem,v,"selection: diff items, paste: singleton"),c(e.both(e.inListItem),h.list,x,"selection: diff items, paste: single list"),c(e.both(e.inListItem),h.partialList,y,"selection: diff items, paste: partial"),c(e.both(e.inListItem),f.all,l,"selection: diff items, paste: any"),c(e.both(u),f.anyOfTag("hr"),
k.split,"selection: inside formatter, paste: split"),c(e.both(u),f.noneOf(r.isBlock),k.replace,"range no blocks"),c(e.both(u),f.anyOf(function(a){return r.isFormatting(a)&&!1===d.shouldMerge(a)}),k.split,"range 1 formatting block"),c(e.both(u),f.oneOf(r.isFormatting),k.merge,"range 1 formatting block"),c(e.both(u),f.all,k.split,"range anything > formatters"),c(e.entireRoot,f.noneOf(r.isBlock),k.replaceContentsWrapP,"complete body, not inserting a block: wrap in P and replace the contents"),c(e.entireRoot,
f.all,k.replaceContents,"complete body: replace the contents")];return{context:function(a,b,c){var d=g.force(c);return b.context(a.isRoot,d.left(),d.right()).map(function(b){return{left:b.left,right:b.right,original:q.constant(d),canvas:q.constant(a)}})},rules:q.constant(c),fallback:k.fallback}});l("eo","n1 n2 b 80 7 s ex".split(" "),function(c,d,b,a,e,f,g){var h=function(a,c,d,g,h){return b.foldl(a,function(a,b){return a.orThunk(function(){return g(c,b,d).bind(function(a){return b.profile(h).map(function(c){return{action:b.action,
target:e.constant(c),ctx:e.constant(a)}})})})},f.none())},k=function(b){var c=a.getEnd(b);return g.point(b,c)},m=function(a,b,e,f,g,m){var u={getSelection:a,replaceSelection:b,isRoot:e};return u.getSelection().bind(function(a){var b=a.collapsed()?c:d,e=a.collapsed()?g.concat(b.rules()):m.concat(b.rules());return h(e,u,a,b.context,f).fold(function(){return b.fallback(u,a,f)},function(a){return a.action(a.ctx(),a.target())}).map(k)})};return{insertAtCursor:function(a,b,c,d){return m(a,b,c,d,[],[])},
insertAtCursorWith:m}});l("7x","en eo b eg 9i 7v s k 1a 21 4i".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=function(a){return m.isElement(a)&&"false"===k.get(a,"contenteditable")},q=function(a){return a().map(function(a){a=b.map([a.startContainer(),a.endContainer()],function(a){return n.closest(a,p)});return h.cat(a)}).getOr([])},r=function(a,d,e){b.each(a,d);d=e();b.each(a,c.clear);return d},s=function(a,b){return r(a,c.setAtomic,b)},t=function(a,b,c,e,f,g){var h=q(a);return s(h,function(){return d.insertAtCursorWith(a,
b,c,e,f,g)})},u=function(a,b,c,d){b=t(a.getSelection,a.replaceSelection,a.isRoot,b,c,d);a.domChanged();a.undoChanged();return b},v=function(a,b){return u(a,b,[],[])};return{insertAtCursorWith:u,insertAtCursor:v,insertAtCursorWithInstructions:function(a,b,c){return r(c,a,function(){return v(b,c)})},insertAt:function(b,c,d){d=t(function(){return g.some(c)},function(d){b.win().each(function(b){var g=a.write(e.on(c.startContainer(),c.startOffset()),e.on(c.endContainer(),c.endOffset()));f.replaceRange(b,
g,d)})},b.isRoot,d,[],[]);b.domChanged();b.undoChanged();return d}}});l("5e","7u 7v 7w s 7x 55 46 48".split(" "),function(c,d,b,a,e,f,g,h){return function(k){var m=g.create({insertAssets:f(["assets"]),insertHtml:f(["html"])}),n=k.content(),p=a.none(),q=function(a){n.win().each(function(b){c.find(b,a.x(),a.y()).each(function(a){d.set(b,a)})})},r=function(a){q(a);m.trigger.insertAssets(a.assets())},s=function(a){q(a);a=a.html();k.undo().save();a=h.fromHtml(a);e.insertAtCursor(n,a)};n.events.ready.bind(function(c){var d=
a.none();p=a.some(b.forImages(c.api().canvas(),d,!0));p.each(function(a){a.events.dragndropimages.bind(r);a.events.dragndrophtml.bind(s)})});return{events:m.registry,destroy:function(a){p.each(function(a){a.destroy()})}}}});l("7z",["3s","7","p"],function(c,d,b){var a=d.compose(c.pure,b.value);c=d.compose(c.pure,b.error);return{pure:a,failed:c,foldSync:function(a,b,c){return a.map(function(a){return a.fold(b,c)})},bindSync:function(a,b){return a.map(function(a){return a.bind(b)})},bindAsync:function(a,
b){return a.bind(function(a){return a.bind(b)})},mapSync:function(a,b){return a.map(function(a){return a.map(b)})},handle:function(a,b,c){return a.get(function(a){return a.fold(b,c)})}}});l("es",["20"],function(c){return{now:function(){return(new c).getTime()}}});l("ep",["a","1o","es","s","2u"],function(c,d,b,a,e){return function(f,g){var h=void 0!==g?g:36E5,k=e.immutable("result","timestamp"),m={},n=function(a,b,c){m[a]=k(b,c)},p=function(a){var c=b.now();d.map(a,function(a,b){c-a.timestamp<h&&n(b,
a.result,a.timestamp)})};c.isObject(f)&&p(f);return{set:n,get:function(b,c){return a.from(m[c]).filter(function(a){return b-a.timestamp()<h}).map(function(a){return a.result()})},dump:function(){return d.map(m,function(a){return{result:a.result(),timestamp:a.timestamp()}})}}}});l("pz",["b","6","p"],function(c,d,b){return{consolidateObj:function(a,e){return c.foldl(a,function(a,c){return a.fold(function(a){return c.fold(function(c){return b.error(a.concat(c))},function(c){return b.error(a)})},function(a){return c.fold(function(a){return b.error(a)},
function(c){return b.value(d.deepMerge(a,c))})})},b.value(e))},consolidateArr:function(a){return c.foldl(a,function(a,c){return a.fold(function(a){return c.fold(function(c){return b.error(a.concat(c))},function(c){return b.error(a)})},function(a){return c.fold(function(a){return b.error(a)},function(c){return b.value(a.concat([c]))})})},b.value([]))}}});l("q0",["b"],function(c){return{narrow:function(d,b){var a={};c.each(b,function(b){void 0!==d[b]&&d.hasOwnProperty(b)&&(a[b]=d[b])});return a},indexOnKey:function(d,
b){var a={};c.each(d,function(c){a[c[b]]=c});return a}}});l("q1",["s"],function(c){var d=function(b){return function(a){return a.hasOwnProperty(b)?c.from(a[b]):c.none()}};return{readOpt:d,readOr:function(b,a){return function(c){return d(b)(c).getOr(a)}},readOptFrom:function(b,a){return d(a)(b)},hasKey:function(b,a){return b.hasOwnProperty(a)&&void 0!==b[a]&&null!==b[a]}}});l("q2",["b"],function(c){return{wrap:function(c,b){var a={};a[c]=b;return a},wrapAll:function(d){var b={};c.each(d,function(a){b[a.key]=
a.value});return b}}});l("i8",["pz","q0","q1","q2"],function(c,d,b,a){return{narrow:function(a,b){return d.narrow(a,b)},readOpt:function(a){return b.readOpt(a)},readOr:function(a,c){return b.readOr(a,c)},readOptFrom:function(a,c){return b.readOptFrom(a,c)},wrap:function(b,c){return a.wrap(b,c)},wrapAll:function(b){return a.wrapAll(b)},indexOnKey:function(a,b){return d.indexOnKey(a,b)},hasKey:function(a,c){return b.hasKey(a,c)},consolidate:function(a,b){return c.consolidateObj(a,b)}}});l("vj",["p"],
function(c){return{nu:function(d,b){return c.error([{path:d,err:b}])},toString:function(c){return"Failed path: ("+c.path.join(" > ")+")\n"+c.err}}});l("q3",["7","4n"],function(c,d){var b=d.generate([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]);return{strict:b.strict,asOption:b.asOption,defaulted:function(a){return b.defaultedThunk(c.constant(a))},defaultedThunk:b.defaultedThunk,asDefaultedOption:function(a){return b.asDefaultedOptionThunk(c.constant(a))},
asDefaultedOptionThunk:b.asDefaultedOptionThunk,mergeWith:function(a){return b.mergeWithThunk(c.constant(a))},mergeWithThunk:b.mergeWithThunk}});l("vl",["2i"],function(c){return{parse:function(d){return c.getOrDie("JSON").parse(d)},stringify:function(d,b,a){return c.getOrDie("JSON").stringify(d,b,a)}}});l("vk","q3 pz q1 q2 vj b 1o 6 vl 7 s p 4n".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=q.generate([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),s=function(a,
c,d){return b.readOptFrom(c,d).fold(function(){return e.nu(a,'Could not find valid *strict* value for "'+d+'" in '+k.stringify(c,null,2))},p.value)},t=function(a,c,d){return p.value(b.readOr(c,d)(a))},u=function(a,c,d){a=b.readOptFrom(a,c).map(function(a){return!0===a?d:a});return p.value(a)},v=function(c,d,e,f){return e.fold(function(e,g,k,m){var q=function(b){return m.extract(c.concat([e]),f,b).map(function(b){return a.wrap(g,f(b))})},r=function(b){return b.fold(function(){var b=a.wrap(g,f(n.none()));
return p.value(b)},function(b){return m.extract(c.concat([e]),f,b).map(function(b){return a.wrap(g,f(n.some(b)))})})};return function(){return k.fold(function(){return s(c,d,e).bind(q)},function(a){a=a();return t(d,e,a).bind(q)},function(){return p.value(b.readOptFrom(d,e)).bind(r)},function(a){a=a();return u(d,e,a).bind(r)},function(a){var b=a();return t(d,e,{}).map(function(a){return h.deepMerge(b,a)}).bind(q)})}()},function(b,c){var e=c(d);return p.value(a.wrap(b,f(e)))})},l=function(a,b,c,e){c=
f.map(c,function(c){return v(a,b,c,e)});return d.consolidateObj(c,{})},x=function(a){return{extract:function(b,c,d){return a(d).fold(function(a){return e.nu(b,a)},p.value)},toString:function(){return"val"}}},y=function(a){return{extract:function(b,c,d){return l(b,d,a,c)},toString:function(){return"obj{\n"+f.map(a,function(a){return a.fold(function(a,b,c,d){return a+" -> "+d.toString()},function(a,b){return"state("+a+")"})}).join("\n")+"}"}}},z=function(a){return{extract:function(b,c,e){e=f.map(e,
function(d,e){return a.extract(b.concat(["["+e+"]"]),c,d)});return d.consolidateArr(e)},toString:function(){return"array("+a.toString()+")"}}};q=x(p.value);var A=m.compose(z,y);return{anyValue:m.constant(q),value:x,obj:y,arr:z,setOf:function(a,b){var d=function(b,c){return z(x(a)).extract(b,m.identity,c)};return{extract:function(a,e,h){var k=g.keys(h);return d(a,k).bind(function(d){d=f.map(d,function(a){return r.field(a,a,c.strict(),b)});return y(d).extract(a,e,h)})},toString:function(){return"setOf("+
b.toString()+")"}}},arrOfObj:A,state:r.state,field:r.field,output:function(a,b){return r.state(a,m.constant(b))},snapshot:function(a){return r.state(a,m.identity)}}});l("vi","i8 vj vk 1o vl p".split(" "),function(c,d,b,a,e,f){var g=function(a,f,g,n,p){return c.readOptFrom(n,p).fold(function(){return d.nu(a,'The chosen schema: "'+p+'" did not exist in branches: '+e.stringify(n,null,2))},function(c){return b.obj(c).extract(a.concat(["branch: "+p]),f,g)})};return{choose:function(b,e){return{extract:function(a,
f,p){return c.readOptFrom(p,b).fold(function(){return d.nu(a,'Choice schema did not contain choice key: "'+b+'"')},function(b){return g(a,f,p,e,b)})},toString:function(){return"chooseOn("+b+"). Possible values: "+a.keys(e)}}}}});l("n3","vi vj vk b vl 7 p n".split(" "),function(c,d,b,a,e,f,g,h){var k=b.value(g.value),m=b.arr,n=b.obj,p=b.setOf,q=function(a,b,c,d){return b.extract([a],c,d).fold(function(a){return g.error({input:d,errors:a})},g.value)},r=function(a,b,c){return q(a,b,f.constant,c)},s=
function(a,b,c){return q(a,b,f.identity,c)},t=function(a){return a.fold(function(a){throw new h(u(a));},f.identity)},u=function(b){return"Errors: \n"+a.map(b.errors,d.toString).join("\n\n")+"\n\nInput object: "+e.stringify(b.input,null,2)};return{anyValue:f.constant(k),arrOfObj:function(a){return b.arrOfObj(a)},arrOf:m,arrOfVal:function(){return b.arr(k)},valueOf:function(a){return b.value(a)},setOf:p,objOf:n,asStruct:r,asRaw:s,asStructOrDie:function(a,b,c){return t(r(a,b,c))},asRawOrDie:function(a,
b,c){return t(s(a,b,c))},getOrDie:t,formatError:u,choose:function(a,b){return c.choose(a,b)}}});l("zl",["3s","mz"],function(c,d){return function(b){return c.nu(function(a){var c=d();c.onload=function(b){a(b.target.result)};c.readAsText(b)})}});l("zm",["2i"],function(c){return function(){return new (c.getOrDie("XMLHttpRequest"))}});l("vm","a 1o 6 zl 3s zm s p v o".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"};
return{ajax:function(p,q,r,s){var t=b.merge({url:p,contentType:"application/json",processData:!1,type:"GET"},s),u=f();u.open(t.type.toUpperCase(),t.url,!0);"blob"===t.responseType&&(u.responseType=t.responseType);c.isString(t.contentType)&&u.setRequestHeader("Content-Type",t.contentType);var l=t.dataType;s=c.isString(l)&&"*"!==l?n[l]+", "+n["*"]+"; q=0.01":n["*"];u.setRequestHeader("Accept",s);void 0!==t.xhrFields&&!0===t.xhrFields.withCredentials&&(u.withCredentials=!0);c.isObject(t.headers)&&d.each(t.headers,
function(a,b){c.isString(b)||c.isString(a)?u.setRequestHeader(b,a):m.error("Request header data was not a string: ",b," -> ",a)});var w=function(){var b;b="blob"===t.responseType?g.from(u.response).map(a).getOr(e.pure("no response content")):e.pure(u.responseText);b.get(function(a){0===u.status?r("Unknown HTTP error (possible cross-domain request)",u.status,a):r('Could not load url "'+p+'": '+u.statusText,u.status,a)})},x=function(){var a;if("json"===l)try{a=h.value(JSON.parse(u.response))}catch(b){a=
h.error({status:u.status,statusText:"Response was not JSON",responseText:u.responseText})}else a=h.value(u.response);a.fold(w,function(a){q(a)})};u.onerror=w;u.onload=function(){0===u.status?k.startsWith(t.url,"file:")?x():w():100>u.status||400<=u.status?w():x()};void 0===t.data?u.send():u.send(t.data)}}});l("n4",["6","vm","vl"],function(c,d,b){var a=function(a){return function(c,d,e){var m;try{m=void 0===e||""===e?e:b.parse(e)}catch(n){m={contents:e}}a(c,d,m)}},e=function(b,e,h,k,m){d.ajax(b,h,a(k),
c.merge({dataType:"json",type:e},m))};return{get:function(a,b,c,d){e(a,"GET",b,c,d)},post:function(a,d,h,k,m){e(a,"POST",h,k,c.merge({data:b.stringify(d)},m))},ajax:e}});l("eq","n3 a 1o n4 3s p v w".split(" "),function(c,d,b,a,e,f,g,h){return{get:function(k,m,n,p){var q={headers:p};return{execute:function(p){p=c.asRawOrDie(k+".ajax.service.get",m,p);p=b.map(p,function(a){return d.isBoolean(a)?h(a):a});var s=g.supplant(n,p);return e.nu(function(b){a.get(s,function(a){b(f.value(a))},function(a,c,e){a=
d.isObject(e)?e:a;b(f.error(a))},q)})}}},post:function(b,g,h,p){var q={headers:p};return{execute:function(p){var s=c.asRawOrDie(b+".ajax.service.post",g,p);return e.nu(function(b){a.post(h,s,function(a){b(f.value(a))},function(a,c,e){a=d.isObject(e)?e:a;b(f.error(a))},q)})}}}}});l("n5",["i8","b","6"],function(c,d,b){return{partition:function(a,e,f,g,h){return!0===h?{known:{},unknown:f}:d.foldl(f,function(d,f){var h=g(f);return a(e,h).fold(function(){return{known:d.known,unknown:d.unknown.concat([f])}},
function(a){a=c.wrap(h,a);return{known:b.merge(d.known,a),unknown:d.unknown}})},{known:{},unknown:[]})}}});l("er",["1o","6","7z","n5","s"],function(c,d,b,a,e){var f=function(a,e,f,m,n,p,q){a=a(m,q);return b.mapSync(a,function(a){a=n(a);c.each(a,function(a,b){e.set(b,a,p)});return d.deepMerge(f,a)})};return{single:function(a,c,d,f,n){return(!0===n?e.none():c.get(f,d)).fold(function(){return a(d,n).map(function(a){return a.map(function(a){c.set(d,a,f);return a})})},function(a){return b.pure(a)})},multiple:function(c,
d,e,m,n,p,q){e=a.partition(d.get,p,e,n,q);return 0===e.unknown.length?b.pure(e.known):f(c,d,e.known,e.unknown,m,p,q)}}});l("n6",["q3","vk"],function(c,d){return{strict:function(b){return d.field(b,b,c.strict(),d.anyValue())},option:function(b){return d.field(b,b,c.asOption(),d.anyValue())},strictArrayOfObj:function(b,a){return d.field(b,b,c.strict(),d.arrOfObj(a))},strictArrayOf:function(b,a){return d.field(b,b,c.strict(),a)},defaulted:function(b,a){return d.field(b,b,c.defaulted(a),d.anyValue())},
field:function(b,a,c,f){return d.field(b,a,c,f)},state:function(b,a){return d.state(b,a)}}});l("eu",["n6","n3","7"],function(c,d,b){var a=d.objOf([c.strict("url"),c.strict("maxWidth"),c.defaulted("fresh",!1)]),e=d.objOf([c.strict("status_code"),c.strict("sub_code"),c.strict("msg")]);c=d.objOf([c.strict("html")]);return{requestOne:b.constant(a),responseFailed:b.constant(e),responseSucceeded:b.constant(c)}});l("et",["n3","eu","7","p"],function(c,d,b,a){return{failed:function(e){return c.asStruct("EmbedResponse.failure",
d.responseFailed(),e).fold(function(d){return a.error({code:b.constant(600),subcode:b.constant(0),msg:b.constant(c.formatError(d))})},function(b){return a.error({code:b.status_code,subcode:b.sub_code,msg:b.msg})})},success:function(e){return c.asStruct("EmbedResponse.success",d.responseSucceeded(),e).fold(function(d){return a.error({code:b.constant(601),subcode:b.constant(0),msg:b.constant(c.formatError(d))})},function(c){return a.value({recommended:b.constant(c)})})}}});ca("ev",encodeURIComponent);
l("7y","7z ep eq er es et eu ev".split(" "),function(c,d,b,a,e,f,g,h){return function(k,m,n){var p=d(n),q=b.get("ephox.media.service.one",g.requestOne(),k+"/1/embed?url=${url}&maxWidth=${maxWidth}",m);return{checkOne:function(b,d,g){var k=e.now();g=a.single(function(a,c){return q.execute({url:h(b),maxWidth:d,fresh:c})},p,d+"&"+b,k,void 0!==g?g:!1);return c.foldSync(g,f.failed,f.success)},dumpCache:p.dump}}});l("81",["7","33","ci"],function(c,d,b){var a=d.resolve("embed-checking");return{configure:function(c){c.add(c.input(),
a,b.removeClass(a));c.add(c.output(),a,b.removeClass(a));c.add(c.history(),a,b.removeClass(a));c.add(c.internal(),a,b.removeClass(a))},embedChecking:c.constant(a)}});l("82",["7","75","1s"],function(c,d,b){var a=function(){return d.translate("link.anchor.top")},e=function(){return d.translate("link.anchor.bottom")},f=function(){var b={};b[a().toLowerCase()]="top";b[e().toLowerCase()]="bottom";return b};return{bookmarkDataAttr:c.constant("data-textbox-bookmark"),bookmarkAnchorDataAttr:c.constant("data-textbox-bookmark-anchor"),
topAnchorUrl:a,bottomAnchorUrl:e,top:c.constant("top"),bottom:c.constant("bottom"),reservedUrls:f,isReservedUrl:function(a){return f().hasOwnProperty(a.toLowerCase())},getReservedUrl:function(b){var c={};c.top=a();c.bottom=e();return c[b.toLowerCase()]}}});l("83",[],function(){return{get:function(c){return c.dom().textContent},set:function(c,d){c.dom().textContent=d}}});l("vn",["2o"],function(c){return{setCss:function(d,b,a){d.dom().styleSheet?d.dom().styleSheet.cssText=b:c.append(d,a)}}});l("zn",
[],function(){return{escape:function(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}}});l("vo",["1o","zn","66"],function(c,d,b){var a=function(a,c,g){c=new b("url\\(\\s*['\"]?"+d.escape(c)+"(.*?)['\"]?\\s*\\)","g");return a.replace(c,'url("'+g+'$1")')};return{replace:a,replaceMany:function(b,d){var g=b;c.each(d,function(b,c){g=a(g,c,b)});return g}}});l("n7","1a l 2o 31 vn vo 9".split(" "),function(c,d,b,a,e,f,g){return{stylesheets:function(a){a=a.dom().styleSheets;return g.prototype.slice.call(a)},
inject:function(g,k,m){var n=d.fromTag("style",m.dom());c.set(n,"type","text/css");g=void 0===k?g:f.replaceMany(g,k);e.setCss(n,g,d.fromText(g,m.dom()));m=a.descendant(m,"head").getOrDie();b.append(m,n)}}});ca("vp",CSSRule);l("n8",["b","2u","vp"],function(c,d,b){var a=d.immutable("selector","style","raw"),e=function(d){return c.bind(d.cssRules,function(c){if(c.type===b.IMPORT_RULE)return e(c.styleSheet);if(c.type===b.STYLE_RULE){var d=c.selectorText,f=c.style.cssText;if(void 0===f)throw"WARNING: Browser does not support cssText property";
return[a(d,f,c.style)]}return[]})};return{extract:e,extractAll:function(a){return c.bind(a,e)}}});(function(c,d,b){c("n9",[],function(){var a=function(){var a;a=function(a){var b=a,c,d={a:0,b:0,c:0},e=[];c=function(c,h){var q,r,s,t,u,l;if(c.test(b))for(q=b.match(c),r=0,s=q.length;r<s;r+=1)d[h]+=1,t=q[r],u=b.indexOf(t),l=t.length,e.push({selector:a.substr(u,l),type:h,index:u,length:l}),b=b.replace(t,Array(l+1).join(" "))};(function(){var a=function(a){var c,d,e;if(a.test(b))for(a=b.match(a),c=0,d=
a.length;c<d;c+=1)e=a[c],b=b.replace(e,Array(e.length+1).join("A"))};a(/\\[0-9A-Fa-f]{6}\s?/g);a(/\\[0-9A-Fa-f]{1,5}\s/g);a(/\\./g)})();(function(){var a=/:not\(([^\)]*)\)/g;a.test(b)&&(b=b.replace(a,"     $1 "))})();(function(){var a=RegExp("{[^]*","gm"),c,d,e;if(a.test(b))for(a=b.match(a),c=0,d=a.length;c<d;c+=1)e=a[c],b=b.replace(e,Array(e.length+1).join(" "))})();c(/(\[[^\]]+\])/g,"b");c(/(#[^\s\+>~\.\[:]+)/g,"a");c(/(\.[^\s\+>~\.\[:]+)/g,"b");c(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,
"c");c(/(:[\w-]+\([^\)]*\))/gi,"b");c(/(:[^\s\+>~\.\[:]+)/g,"b");b=b.replace(/[\*\s\+>~]/g," ");b=b.replace(/[#\.]/g," ");c(/([^\s\+>~\.\[:]+)/g,"c");e.sort(function(a,b){return a.index-b.index});return{selector:a,specificity:"0,"+d.a.toString()+","+d.b.toString()+","+d.c.toString(),specificityArray:[0,d.a,d.b,d.c],parts:e}};return{calculate:function(b){var c,d,k,m=[];b=b.split(",");d=0;for(k=b.length;d<k;d+=1)c=b[d],0<c.length&&m.push(a(c));return m},compare:function(b,c){var d,k,m;if("string"===
typeof b){if(-1!==b.indexOf(","))throw"Invalid CSS selector";d=a(b).specificityArray}else if(Array.isArray(b)){if(4!==b.filter(function(a){return"number"===typeof a}).length)throw"Invalid specificity array";d=b}else throw"Invalid CSS selector or specificity array";if("string"===typeof c){if(-1!==c.indexOf(","))throw"Invalid CSS selector";k=a(c).specificityArray}else if(Array.isArray(c)){if(4!==c.filter(function(a){return"number"===typeof a}).length)throw"Invalid specificity array";k=c}else throw"Invalid CSS selector or specificity array";
for(m=0;4>m;m+=1){if(d[m]<k[m])return-1;if(d[m]>k[m])return 1}return 0}}}();"undefined"!==typeof exports&&(exports.calculate=a.calculate,exports.compare=a.compare);return a})})(ma.define,ma.require,ma.demand);l("ew","b 2u 1a 2n 4e v n7 n8 n9".split(" "),function(c,d,b,a,e,f,g,h,k){var m=d.immutable("selector","raw"),n=function(a,b){var d={};c.each(a,function(e){if(void 0!==a[e]){var f=b.dom().style;c.contains(f,e)||(d[e]=a[e])}});return d},p=function(d,f){var g=c.bind(f,function(b){var f=e.descendants(d,
b.selector());c.each(f,function(c){var d=n(b.raw(),c);a.setAll(c,d)});return f});c.each(g,function(a){b.remove(a,"class")})},q=function(a,b){var d=function(a){return-1!==a.selector().indexOf(",")},e=c.bind(c.filter(a,d),function(a){var b=a.selector().split(",");return c.map(b,function(b){b=b.trim();return m(b,a.raw())})}),e=c.filter(a,function(a){return!d(a)}).concat(e);e.sort(function(a,b){return k.compare(a.selector(),b.selector())}).reverse();p(b,e)};return{inlineStyles:function(a,b){var c=g.stylesheets(a),
c=h.extractAll(c);q(c,b)},inlinePrefixedStyles:function(a,b,d){a=g.stylesheets(a);a=h.extractAll(a);a=c.filter(a,function(a){return f.startsWith(a.selector(),d)});q(a,b)}}});l("84",["ew"],function(c){return{inlineStyles:function(d,b){c.inlineStyles(d,b)},inlinePrefixedStyles:function(d,b,a){c.inlinePrefixedStyles(d,b,a)}}});l("5f","58 b 7y 7z 2b 80 81 82 1a 1y 1b l 2o 21 2q 83 2a 84".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,l){return function(w,x){var y=g.embedChecking(),z=w.internalevents(),
A=b(x.url),D=w.undo(),B=w.content(),C=w.filter();g.configure(C);var F=["img","video","audio"],E=function(a,b){q.after(a,b);s.remove(a)},G=function(b,c){m.add(b,y);var e=A.checkOne(c,400);a.handle(e,function(a){m.remove(b,y)},function(a){m.remove(b,y);D.save();var e=p.fromHtml(a.recommended().html().trim());d.contains(F,r.name(e))||k.set(e,"data-ephox-embed-iri",c);var g=p.fromTag("div");q.append(g,e);x.inlineStyles&&B.doc().each(function(a){l.inlinePrefixedStyles(a,g,".ephox-summary-card")});B.getSelection().fold(function(){E(b,
e)},function(a){E(b,e);var c=u.nextSibling(e).filter(f.isCursorPosition).getOrThunk(function(){var a=p.fromTag("br");q.after(e,a);return a});u.parent(e).each(function(b){a.collapsed()&&(n.eq(a.startContainer(),b)||n.contains(b,a.startContainer()))&&B.setSelection(c,0,c,0)})})})},H=function(a){var b=a.command(),f=a.data();k.has(f,h.bookmarkAnchorDataAttr())||"insertLink"!==b&&"updateLink"!==b||u.parent(f).each(function(a){var b=t.get(a).replace(c.zeroWidth(),""),g=k.get(f,"href");if(b===g||"http://"+
b===g)G(f,g);else{var b=u.children(a),h=d.find(d.reverse(b),function(a){return"br"===r.name(a)&&e.documentPositionPreceding(f.dom(),a.dom())});a=d.find(b,function(a){return"br"===r.name(a)&&e.documentPositionPreceding(a.dom(),f.dom())});b=void 0!==h?b.slice(d.indexOf(b,h)+1,b.length):b;a=void 0!==a?b.slice(0,d.indexOf(b,a)):b;a=d.foldl(a,function(a,b){return a+t.get(b)},"");a!==g&&"http://"+a!==g||G(f,g)}})};z.events.internal.bind(H);return{destroy:function(){z.events.internal.unbind(H)}}}});l("86",
["3u"],function(c){return{handle:function(d,b){return c.bind(d,"click",b)}}});l("87",["7","75"],function(c,d){return{editor:function(b,a){var e=c.curry(d.translate,a?"aria.label.fullscreen":"aria.label.editor");return b.fold(c.identity,e)}}});l("68",["6","7","s"],function(c,d,b){return function(a){var e=function(){return c.merge(null===a.project.apiKey?{}:{headers:{"textbox-api-key":a.project.apiKey}},{xhrFields:{withCredentials:!0}})},f=function(a){var c=a+(-1===a.indexOf("?")?"?":"&")+"url=";return function(a){return b.some(c+
encodeURIComponent(a))}},f=void 0===a.imageEdit.proxy?b.none:f(a.imageEdit.proxy);return{headers:e,mediatorHeaders:function(){var a=e().headers;return void 0===a?{}:a},proxy:f,destroy:d.noop}}});l("f0",["b","7","na","2f"],function(c,d,b,a){return{toText:function(a){return c.map(a,function(a){return b.toText(a,d.constant(!1))}).join("").trim()},toHtml:function(b){return c.map(b,a.getOuter).join("")}}});l("4a",["7"],function(c){return{styleSpan:c.constant("ephox-hare-style-span"),base:c.constant("ephox-candy-mountain"),
active:c.constant("ephox-candy-mountain-active")}});l("zo","b c 4a 3s 7 p 55 46 1a 1y 1b 3u l 2y 2f 4i kz q 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,l,w){var x=d.detect();return function(d){var z="true"===k.get(d,"contenteditable");k.set(d,"contenteditable","true");var A=p.bind(d,"keydown",function(a){L.trigger.keydown(a)}),D=p.bind(d,"keyup",function(a){L.trigger.keyup(a)}),B=p.bind(d,"keypress",function(a){L.trigger.keypress(a)}),C=p.bind(d,"mousedown",function(a){L.trigger.mousedown(a)}),
F=p.bind(d,"mouseout",function(a){L.trigger.mouseout(a)}),E=p.bind(d,"mouseup",function(a){L.trigger.mouseup(a)}),G=p.bind(d,"contextmenu",function(a){L.trigger.contextmenu(a)}),H=p.bind(d,"cut",function(a){L.trigger.cut(a)}),I=p.bind(d,"copy",function(a){L.trigger.copy(a)}),K=p.bind(d,"paste",function(a){L.trigger.paste(a)}),J=p.bind(q.fromDom(l),"selectionchange",function(a){L.trigger.selectionchange(a)}),M=function(){L.trigger.paint()},O=p.capture(d,"load",M);u.bind(d,M);var N=x.browser.isFirefox()?
"focus":"focusin",Q=p.bind(d,N,function(a){L.trigger.focus(a)}),R=p.bind(d,"focusout",function(a){L.trigger.focusOut(a)}),P=p.bind(d,"dblclick",function(a){L.trigger.dblclick(a)}),S=function(a){return n.eq(d,a)},N={loaded:a.pure(f.error("no iframe in inline mode"))},L=h.create({keydown:g(["original"]),keyup:g(["original"]),keypress:g(["original"]),mousedown:g(["original"]),mouseup:g(["original"]),mouseout:g(["original"]),contextmenu:g(["original"]),cut:g(["original"]),copy:g(["original"]),paste:g(["original"]),
focus:g(["original"]),dblclick:g(["original"]),focusOut:g(["original"]),selectionchange:g(["original"]),paint:g([])});return{win:e.constant(w),doc:e.constant(q.fromDom(l)),body:e.constant(d),get:function(){return s.get(d)},set:function(a){s.set(d,a)},focus:function(){x.browser.isIE()?d.dom().setActive(!0):r.focus(d)},focused:function(){return l.activeElement===d.dom()},blur:function(){d.dom().blur()},destroy:function(){z||k.remove(d,"contenteditable");c.each([A,D,B,C,E,F,G,H,I,K,Q,R,P,J,O],function(a){a.unbind()});
u.unbind(d,M)},events:L.registry,futures:N,background:e.noop,foreground:e.noop,hasRange:function(a){return t.closest(a.startContainer(),S).isSome()&&t.closest(a.endContainer(),S).isSome()},isActive:function(){return m.has(d,b.active())}}}});l("12f","c 7u eg 9i 7v 7 j1 4n l 2y 2o 21 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=f.constant(!1),s=c.detect(),t=s.browser.isIE()||s.browser.isSpartan()?2:5,u=h.generate([{above:["element"]},{below:["element"]}]),l=function(a,b,c){return function(b){return e.bounds(a,
b).fold(r,c)}},w=function(a,b){return l(a,b,function(a){return b>a.top+a.height-t})},x=function(a,b){return l(a,b,function(a){return b<a.top+t})};return function(c,f,h){var r=function(a){var b=g.freefallRtl(f).element();return q.ancestor(b,"table").filter(w(c,a)).map(u.above)},t=function(a,b){a.kill();e.set(c,b);h()};return function(e){var h=e.y();r(h).orThunk(function(){var a=g.freefallLtr(f).element();return q.ancestor(a,"table").filter(x(c,h)).map(u.below)}).fold(function(){if("html"===p.name(e.target())){var a=
e.x(),b=e.y();d.find(c,a,b).each(function(a){var b=function(a){return q.closest(a,'[contenteditable="false"]').isSome()},c=a.start().fold(b,b,b),b=a.finish().fold(b,b,b);(c||b)&&s.browser.isIE()||m.focus(f);t(e,a)})}},function(c){var d=k.fromHtml("<p><br /></p>");c.fold(function(a){n.after(a,d)},function(a){n.before(a,d)});t(e,b.write(a.on(d,0),a.on(d,0)))})}}});l("12l",["eg","7v","jl"],function(c,d,b){return{clearAll:function(a){d.clearAll(a)},get:function(a){return d.get(a).map(function(a){return b(a.start(),
a.soffset(),a.finish(),a.foffset())})},set:function(a,b){d.setExact(a,b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset())},setExact:function(a,b,c,g,h){d.setExact(a,b,c,g,h)},setRelative:function(a,b,f){b=c.write(b,f);d.set(a,b)},replace:function(a,b){d.replace(a,b)}}});l("12g",["12l","55","46","6b","3t"],function(c,d,b,a,e){return function(f){var g=null,h=function(){g=null;c.get(f.win()).each(function(a){a.collapsed()&&f.focused()&&k.trigger.loiter(a.startContainer(),a.startOffset())})},
k=b.create({loiter:d(["node","offset"])});return{reset:function(){null!==g&&(a(g),g=null);g=e(h,1E3)},destroy:function(){null!==g&&(a(g),g=null)},events:k.registry}}});l("12h","7 s k bk 55 46 2m 1b 21 4i m".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=function(a,d){var e=c.curry(h.eq,g.body()),f=d.join(", ");return b.findMap(a,function(a){return m.ancestor(a,function(a){return n.is(a,f)},e)}).isSome()};return function(b,c){var g=d.none(),m=a.tap(function(){m.control.block();var a=b();a.each(function(a){var b=
function(){n.trigger.nodeChanged(a.startContainer(),a.startOffset(),g.map(function(a){return a.startContainer()}))};g.fold(b,function(d){var e=h.eq,f=a.startContainer(),g=a.endContainer(),m=d.startContainer(),n=d.endContainer(),q=d.startOffset()!==a.startOffset();d=d.endOffset()!==a.endOffset();e(m,f)&&e(n,g)&&!(!k.isText(f)&&q||!k.isText(g)&&d)||!1!==p([a.startContainer()],c)||b()})});g=a;m.control.unblock()}),n=f.create({nodeChanged:e(["node","offset","prev"])});return{update:function(){m.instance()},
clear:function(){g=d.none()},destroy:function(){g=d.none();m.control.block()},events:n.registry}}});l("12i",["7","1b","l","2y"],function(c,d,b,a){var e=function(b,e){return{toEditor:b,toOld:c.curry(a.focus,e),isSet:function(){return a.active().exists(function(a){return d.eq(a,e)})}}},f=function(a,d,f,m){m=m.dom().activeElement;return a()?{toEditor:d,toOld:c.noop,isSet:c.constant(!0)}:void 0===m||null===m?{toEditor:f,toOld:c.noop,isSet:c.constant(!1)}:e(f,b.fromDom(m))};return{build:f,toEditor:function(a,
b,c,d){f(a,b,c,d).toEditor()}}});l("12j",["s"],function(c){return function(){var d=c.none();return{get:function(){return d},restore:function(b){d.each(b)},update:function(b){d=b.or(d)},clear:function(){d=c.none()}}}});l("12k",["9i","12l","6o","31"],function(c,d,b,a){var e=function(a){return b.closest(a.startContainer(),'[contenteditable="false"]')&&b.closest(a.endContainer(),'[contenteditable="false"]')};return{focus:function(b,g,h){g=g().filter(e);g.each(function(e){a.closest(e.endContainer(),'[contenteditable="false"]').each(function(a){d.setRelative(b.win(),
c.after(a),c.after(a))})});b.focus();g.each(function(a){h(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())})}}});l("zp","c 12f 12g 12h 12i 12j 12k 12l 7 j1 55 46 47 3k 3u l o q 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,l,w){var x=c.detect();return function(c,z){var A=function(){return M().orThunk(C.get)},D=s.bind(c.body(),"click",d(c.win(),c.body(),k.noop)),B=a(A,z),C=f(),F=function(){B.update();J()},E=function(){C.restore(function(a){O(a.startContainer(),a.startOffset(),
a.endContainer(),a.endOffset())})};B.events.nodeChanged.bind(function(a){V.trigger.nodeChanged(a.node(),a.offset(),a.prev());V.trigger.uiStale()});c.events.keyup.bind(function(a){V.trigger.keyup(a.original());F();G.reset();V.trigger.interaction()});c.events.mouseout.bind(function(a){J()});c.events.mouseup.bind(function(a){V.trigger.mouseup(a.original());F();G.reset();V.trigger.interaction()});var G=b(c);G.events.loiter.bind(function(a){V.trigger.loiter(a.node(),a.offset())});var H=function(){M().isNone()?
E():J()},I=function(){c.isActive()&&(H(),g.focus(c,A,Q))},K=function(){V.trigger.domChanged()},J=function(){var a=M();C.update(a)},M=function(){return h.get(w).filter(c.hasRange)},O=function(a,b,c,d){try{h.setExact(w,a,b,c,d)}catch(e){u.log("Skipping restoring invalid cursor position")}},N=function(a){P(function(b){c.isActive()&&a();F()},e.build(c.focused,H,I,t.fromDom(l)))},Q=function(a,b,c,d){N(function(){O(a,b,c,d)})},R=function(a,b){var c=h.get(w);E();var d=a(b);b.toOld();c.each(function(a){O(a.startContainer(),
a.startOffset(),a.endContainer(),a.endOffset());x.browser.isSpartan()&&(b.isSet()||b.toOld())});return d},P=function(a,b){var c=a(b);b.toOld();return c},S=function(a){var b=e.build(c.focused,H,I,t.fromDom(l));return(M().isSome()?P:R)(a,b)},L=function(a){return function(){var b=arguments;return S(function(c){c.toEditor();return a(b)})}}(function(a){l.execCommand.apply(l,a);J()}),U=function(a,b){return r(a,b)},V=p.create({nodeChanged:n(["node","offset","prev"]),loiter:n(["node","offset"]),uiStale:n([]),
domChanged:n([]),interaction:n([]),keyup:n(["original"]),mouseup:n(["original"]),keydown:q(["original"],c.events.keydown),keypress:q(["original"],c.events.keypress),mousedown:q(["original"],c.events.mousedown),contextmenu:q(["original"],c.events.contextmenu),cut:q(["original"],c.events.cut),copy:q(["original"],c.events.copy),paste:q(["original"],c.events.paste),focus:q(["original"],c.events.focus),focusOut:q(["original"],c.events.focusOut),dblclick:q(["original"],c.events.dblclick),selectionchange:n(["original"]),
paint:q([],c.events.paint)});c.events.selectionchange.bind(function(a){M().each(function(){V.trigger.selectionchange(a.original())})});return{win:c.win,doc:c.doc,body:c.body,canvas:c.body,getContent:c.get,setContent:c.set,resetContent:function(a){c.set(a);C.clear();B.clear();a=m.freefallLtr(c.body());Q(a.element(),a.offset(),a.element(),a.offset());K()},blur:c.blur,focus:function(){e.toEditor(c.focused,H,I,t.fromDom(l))},uiChanged:function(){S(function(){V.trigger.uiStale()})},domChanged:K,clearSelection:function(){h.clearAll(w)},
getSelection:A,setSelection:Q,setRelativeSelection:function(a,b){N(function(){h.setRelative(w,a,b)})},backupSelection:J,replaceSelection:function(a){M().fold(function(){E();M().each(function(){h.replace(w,a);F()})},function(b){h.replace(w,a);F()})},execCommand:L,destroy:function(){c.destroy();G.destroy();D.unbind();B.destroy()},events:V.registry,futures:c.futures,background:c.background,foreground:c.foreground,translateScreen:U,translateLocation:U}}});l("zq",["b","2u","1b","4y"],function(c,d,b,a){var e=
d.immutable("doc","href");return function(){var d=[],g=function(a,c){return function(d){return b.eq(a,d.doc())&&c===d.href()}};return{addLinkIfMissing:function(b,k){c.find(d,g(b,k))||(d.push(e(b,k)),a.addStylesheet(k,b))}}}});l("zr",["b","9"],function(c,d){return function(){var b=null,a=[],e=function(){return null!==b},f=function(){c.each(a,function(a){g(a)})},g=function(a){setTimeout(function(){a.apply(null,b)},0)};return{get:function(b){e()?g(b):a.push(b)},set:function(){b=d.prototype.slice.call(arguments);
f();a=[]},isSet:e}}});l("vq","b 85 zo zp zq zr 7 1a 2n l 2f 21 2q 2a 66".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){var t=e();return function(e,l,w){var x=m.fromTag("div");d.presentation(x);k.set(x,"display","none");var y=n.get(e);(function(a){var b=r.owner(e);c.each(a,function(a){t.addLinkIfMissing(b,a)})})(l);l=f();var z=b(e),A=a(z,w);l.set(A);return{element:function(){return e},onCanvas:function(a){a(A.canvas())},initial:g.constant(y),placeholder:function(){return x},tabindex:function(a){h.set(e,
"tabindex",a)},destroy:function(){q.remove(x);A.destroy()},loaded:l.get,extract:function(a){var b=p.name(e),c=new s("^<"+b+" .*?>",""),b=new s("<\\/"+b+">$","");return a.replace(c,"").replace(b,"")},isInline:g.constant(!0)}}});l("12m",["7"],function(c){return function(d,b){var a=d.doc();return{execCommand:function(d){var f=arguments,g=d.toLowerCase(),h=c.die("This should not be in hare."),h={fontsize:h,forecolor:h,fontname:h,bgcolor:h,inserthtml:h,blockquote:h};(void 0!==h[g]?h[g]:function(){a.dom().execCommand.apply(a.dom(),
f)})();b.update()}}}});l("12n",["12k","jl","12l","7","6o"],function(c,d,b,a,e){return function(e){var g=function(){return b.get(e.win())},h=function(a,c,g,h){a=d(a,c,g,h);b.set(e.win(),a)};return{clearSelection:function(){b.clearAll(e.win())},getSelection:g,replaceSelection:function(a){b.replace(e.win(),a)},setSelection:h,setRelativeSelection:function(a,c){b.setRelative(e.win(),a,c)},restore:a.noop,backup:a.noop,nativeCall:a.apply,focus:function(){c.focus(e,g,h)},destroy:a.noop,clear:a.noop}}});l("12o",
"jl 12l 7 s 3u 2y o q".split(" "),function(c,d,b,a,e,f,g,h){var k=function(){g.log("The previous selection could not be restored. Defaulting to the current selection.")};return function(g,n){var p=a.none(),q=e.bind(n,"blur",function(a){s()}),r=function(){p=a.none()},s=function(){d.get(g.win()).fold(b.noop,function(b){p=a.some(b)})},t=function(b,c){try{c(g.win(),b),p=a.some(b)}catch(d){k()}},u=function(a){t(a,d.set)},l=function(){p.each(u)},w=function(a){var b=h.activeElement;a=a();null!==b&&void 0!==
b&&b!==h.activeElement&&void 0!==b.focus&&b.focus();return a};return{clearSelection:function(){f.hasFocus(n)&&d.clearAll(g.win())},getSelection:function(){return f.hasFocus(n)?d.get(g.win()):p},replaceSelection:function(a){f.hasFocus(n)||l();d.replace(g.win(),a)},setSelection:function(a,d,e,g){w(function(){var h=c(a,d,e,g);f.hasFocus(n)?u(h):t(h,b.noop)})},setRelativeSelection:function(a,b){w(function(){r();try{d.setRelative(g.win(),a,b)}catch(c){k()}s()})},restore:l,backup:s,nativeCall:function(a){return w(function(){f.hasFocus(n)||
l();return a()})},focus:function(){if(h.activeElement!==n.dom()){var a=p;g.focus();a.each(u)}else d.get(g.win()).fold(l,b.noop)},destroy:function(){q.unbind()},clear:r}}});l("zs","c 12f 12g 12h 12m 12n 12o a4 j1 55 46 47 3u 3l 29".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){return function(t,u,l){var w=c.detect(),x=w.browser.isIE()||w.browser.isSpartan()?g(t,u):f(t),y=q.bind(t.doc(),"click",d(t.win(),t.body(),x.backup)),z=function(){return x.getSelection()},A=a(z,l),D=e(t,A);(w.browser.isChrome()||
w.browser.isSafari())&&D.execCommand("defaultParagraphSeparator",!1,"p");A.events.nodeChanged.bind(function(a){H.trigger.nodeChanged(a.node(),a.offset(),a.prev());H.trigger.uiStale()});t.events.keyup.bind(function(a){x.backup();A.update(a)});var B=h(A.update,300);t.events.mouseup.bind(function(a){x.backup();B.throttle(a)});var C=b(t);C.events.loiter.bind(function(a){H.trigger.loiter(a.node(),a.offset())});l=function(){C.reset();H.trigger.interaction()};t.events.keyup.bind(l);t.events.mouseup.bind(l);
var F=function(){H.trigger.domChanged()},E=function(a,b,c,d){x.setSelection(a,b,c,d);A.update()},G=function(a,b){return r.absolute(u).translate(a,b)},H=n.create({nodeChanged:m(["node","offset","prev"]),loiter:m(["node","offset"]),uiStale:m([]),domChanged:m([]),interaction:m([]),keydown:p(["original"],t.events.keydown),keyup:p(["original"],t.events.keyup),keypress:p(["original"],t.events.keypress),mousedown:p(["original"],t.events.mousedown),mouseup:p(["original"],t.events.mouseup),contextmenu:p(["original"],
t.events.contextmenu),cut:p(["original"],t.events.cut),copy:p(["original"],t.events.copy),paste:p(["original"],t.events.paste),focus:p(["original"],t.events.focus),focusOut:p(["original"],t.events.focusOut),dblclick:p(["original"],t.events.dblclick),selectionchange:p(["original"],t.events.selectionchange),paint:p([],t.events.paint)});return{win:t.win,doc:t.doc,body:t.body,canvas:t.doc,getContent:t.get,setContent:t.set,resetContent:function(a){t.set(a);x.clear();A.clear();a=k.freefallLtr(t.body());
E(a.element(),a.offset(),a.element(),a.offset());F()},blur:t.blur,focus:function(){x.focus()},uiChanged:function(){H.trigger.uiStale()},domChanged:F,clearSelection:function(){x.clearSelection()},getSelection:z,setSelection:E,setRelativeSelection:function(a,b){x.setRelativeSelection(a,b);A.update()},backupSelection:function(){x.backup()},replaceSelection:function(a){x.replaceSelection(a);A.update()},execCommand:function(){var a=arguments;x.nativeCall(function(){D.execCommand.apply(null,a);H.trigger.uiStale()})},
destroy:function(){x.destroy();t.destroy();C.destroy();y.unbind();A.destroy()},events:H.registry,futures:t.futures,background:t.background,foreground:t.foreground,translateScreen:G,translateLocation:function(a,b){var c=s.get(t.doc());return G(a,b).translate(-c.left(),-c.top())}}}});l("15r",["7","a4","s"],function(c,d,b){return function(a){return{background:c.noop,foreground:c.noop,focus:c.noop,keydown:c.noop,mousedown:b.some,mouseup:b.some,selectionchange:function(a){return d(a,300).throttle}}}});
l("168",["7","29"],function(c,d){return{unbound:function(){return{unbind:c.noop}},saveScroll:function(b,a){var c=d.get(b);a();var f=d.get(b);c.top()===f.top()&&c.left()===f.left()||b.dom().defaultView.scrollTo(c.left(),c.top())}}});l("15s","168 7 s l 2a q 36".split(" "),function(c,d,b,a,e,f,g){return function(h,k){return{background:d.noop,foreground:d.noop,focus:function(b,d,h){c.saveScroll(a.fromDom(f),function(){c.saveScroll(e.owner(h),function(){k.browser.isSpartan()&&g.getSelection().removeAllRanges();
h.dom().focus()})})},keydown:d.noop,mousedown:b.some,mouseup:b.some,selectionchange:d.constant(d.noop)}}});l("15t",["168","7","s","21","2a"],function(c,d,b,a,e){return function(c){var g=function(c){return"body"===a.name(c.target())||"html"===a.name(c.target())?b.none():b.some(c)};return{background:function(a,b,c){e.owner(b).dom().defaultView.focus()},foreground:function(a,b,c){void 0!==a.focus&&a.focus()},focus:d.noop,keydown:function(a){void 0!==a.focus&&a.focus()},mousedown:function(a){return g(a)},
mouseup:function(a){return g(a)},selectionchange:d.constant(d.noop)}}});l("14w",["c","15r","15s","15t"],function(c,d,b,a){var e=c.detect(),f=e.deviceType.isiOS()?a:e.deviceType.isAndroid()?d:b;return{get:function(a){return f(a,e)}}});l("14x",["s","l"],function(c,d){var b=function(a){a=a.dom();try{var b=a.contentWindow?a.contentWindow.document:a.contentDocument;return void 0!==b&&null!==b?c.some(d.fromDom(b)):c.none()}catch(f){return console.log("Error reading iframe: ",a),console.log("Error was: "+
f),c.none()}};return{doc:function(a){return b(a).fold(function(){return a},function(a){return a})}}});l("14b",["14x","2m"],function(c,d){return{write:function(b,a){if(!d.inBody(b))throw"Internal error: attempted to write to an iframe that is not in the DOM";var e=c.doc(b).dom();e.open();e.writeln(a);e.close()}}});l("hw","2l 3s p 3u 6b 3t".split(" "),function(c,d,b,a,e,f){var g=function(c,d,g,n){return c(function(c){var h=a.bind(d,g,function(a){e(r);h.unbind();c(b.value(a))}),r=f(function(){h.unbind();
c(b.error("Event "+g+" did not fire within "+n+"ms"))},n)})};return{cWaitFor:function(a,b,d){return g(c.nu,a,b,d)},waitFor:function(a,b,c){return g(d.nu,a,b,c)}}});l("12p","b c 4a 14w 7 a4 14x 14b 55 46 4b 3u hw 2f 31 q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t){var u=d.detect(),l=function(a){var b=a.base.fold(e.constant(""),function(a){return'<base href="'+a+'" />'}),d=a.editorStyles.concat(a.stylesheets),d=c.map(d,function(a){return'<link rel="stylesheet" type="text/css" href="'+a+'" />'});
a=0===a.documentStyles.length?"":'<style type="text/css">'+a.documentStyles+"</style>";return"<!doctype html><html><head>"+b+d.join("")+a+'</head><body contenteditable="true" spellcheck="false"></body></html>'};return function(d,f){h.write(d,l(f));var y=d.dom().contentWindow,z=g.doc(d),A=s.descendant(z,"body").getOrDie();n.add(A,[b.base(),b.active()]);var D=u.browser.isFirefox(),B=m.create({keydown:k(["original"]),keyup:k(["original"]),keypress:k(["original"]),mousedown:k(["original"]),mouseup:k(["original"]),
contextmenu:k(["original"]),cut:k(["original"]),copy:k(["original"]),paste:k(["original"]),focus:k(["original"]),dblclick:k(["original"]),focusOut:k(["original"]),paint:k([]),selectionchange:k(["original"])}),C=a.get(B),F={loaded:q.cWaitFor(d,"load",1E3)},E=p.bind(z,"keydown",function(a){C.keydown(y);B.trigger.keydown(a)}),G=p.bind(z,"keyup",function(a){B.trigger.keyup(a)}),H=p.bind(z,"keypress",function(a){B.trigger.keypress(a)}),I=p.bind(z,"mousedown",function(a){C.mousedown(a).fold(function(){a.kill()},
B.trigger.mousedown)}),K=p.bind(z,"mouseup",function(a){C.mouseup(a).fold(function(){a.kill()},B.trigger.mouseup)}),J=p.bind(z,"contextmenu",function(a){B.trigger.contextmenu(a)}),M=p.bind(z,"cut",function(a){B.trigger.cut(a)}),O=p.bind(z,"copy",function(a){B.trigger.copy(a)}),N=p.bind(z,"paste",function(a){B.trigger.paste(a)}),Q=p.bind(z,D?"focus":"focusin",function(a){B.trigger.focus(a)}),R=p.bind(z,"focusout",function(a){B.trigger.focusOut(a)}),P=p.bind(z,"dblclick",function(a){B.trigger.dblclick(a)}),
S=C.selectionchange(function(a){B.trigger.mouseup(a)}),L=p.bind(z,"selectionchange",function(a){S(a);B.trigger.selectionchange(a)}),U=p.bind(z,"touchstart",function(a){B.trigger.mousedown(a)}),V=p.bind(z,"touchend",function(a){B.trigger.mouseup(a);da()}),X=function(){B.trigger.paint()},W=p.capture(A,"load",X),Y=function(){y.addEventListener("resize",X,!1);return{unbind:function(){y.removeEventListener&&y.removeEventListener("resize",X,!1)}}}(),da=function(){C.foreground(y,d,A)};return{win:e.constant(y),
doc:e.constant(z),body:e.constant(A),get:function(){return r.get(A)},set:function(a){r.set(A,a)},focus:function(){C.focus(y,d,A)},focused:function(){return t.activeElement===d.dom()},blur:function(){A.dom().blur()},destroy:function(){c.each([E,G,H,I,K,J,M,O,N,Q,R,L,P,U,V,W,Y],function(a){a.unbind()})},events:B.registry,futures:F,background:function(){C.background(y,d,A)},foreground:da}}});l("12q",["4g"],function(c){return{resolve:c.create("ephox-hare").resolve}});l("zt","12p 12q zr 7 s 1a 2m 1y 3u l 2q t5".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p){return function(q){var r=m.fromTag("iframe");h.add(r,d.resolve("content-iframe"));var s=e.none(),t=b(),u=k.bind(r,"load",function(){u.unbind();var b=p.onShow(r,function(){s.each(a.apply);s=e.none();g.inBody(r)&&t.set(c(r,q))});s=e.some(b)});return{element:function(){return r},tabindex:function(a){f.set(r,"tabindex",a)},destroy:function(){n.remove(r);u.unbind();s.each(a.apply)},loaded:t.get}}});l("vr",["zs","zt","zr","7","3t"],function(c,d,b,a,e){return function(f,
g){var h=d(f),k=b(),m=a.noop;h.loaded(function(a){var b=c(a,h.element(),g);e(function(){k.set(b);m=b.destroy},0)});return{element:h.element,onCanvas:function(a){k.get(function(b){a(b.canvas())})},initial:a.constant(""),placeholder:h.element,tabindex:h.tabindex,extract:a.identity,destroy:function(){m();h.destroy()},loaded:k.get,isInline:a.constant(!1)}}});l("nb","c vq vr 7 s bk 55 46 3k".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(b){var d=e.none(),m=f.tap(function(a,b,c){z.trigger.nodeChanged(a,
b,c)});b.loaded(function(a){if(void 0===a.win().window)a.destroy();else{d=e.some(a);if(c.detect().browser.isFirefox()){try{a.execCommand("enableObjectResizing",!1,!1)}catch(b){}try{a.execCommand("enableInlineTableEditing",!1,!1)}catch(f){}}a.events.nodeChanged.bind(function(a){m.instance(a.node(),a.offset(),a.prev())});a.events.loiter.bind(function(a){z.trigger.loiter(a.node(),a.offset())});a.events.uiStale.bind(function(){z.trigger.uiStale()});a.events.domChanged.bind(function(){z.trigger.domChanged()});
a.events.interaction.bind(function(){z.trigger.interaction()});a.events.keyup.bind(function(a){z.trigger.keyup(a.original())});a.events.keydown.bind(function(a){z.trigger.keydown(a.original())});a.events.keypress.bind(function(a){z.trigger.keypress(a.original())});a.events.mousedown.bind(function(a){z.trigger.mousedown(a.original())});a.events.mouseup.bind(function(a){z.trigger.mouseup(a.original())});a.events.contextmenu.bind(function(a){z.trigger.contextmenu(a.original())});a.events.cut.bind(function(a){z.trigger.cut(a.original())});
a.events.copy.bind(function(a){z.trigger.copy(a.original())});a.events.paste.bind(function(a){z.trigger.paste(a.original())});a.events.focus.bind(function(a){z.trigger.focus(a.original())});a.events.focusOut.bind(function(a){z.trigger.focusOut(a.original())});a.events.dblclick.bind(function(a){z.trigger.dblclick(a.original())});a.events.selectionchange.bind(function(a){z.trigger.selectionchange(a.original())});a.futures.loaded.get(function(){void 0!==a.win().window&&z.trigger.loaded()});a.events.paint.bind(function(){z.trigger.paint()});
a.resetContent(t);z.trigger.ready(a);a.uiChanged()}});var r=function(){return d.map(function(a){return a.win()})},s=function(){return d.map(function(a){return a.doc()})},t=b.initial(),u=function(){d.each(function(a){a.focus()})},l=function(){return d.bind(function(a){return a.getSelection()})},w=function(a,b,c,e){d.each(function(d){d.setSelection(a,b,c,e)})},x=function(a,b){d.each(function(c){c.setRelativeSelection(a,b)})},y=function(){var a=arguments;d.each(function(b){b.execCommand.apply(null,a)})},
z=h.create({nodeChanged:g(["node","offset","prev"]),loiter:g(["node","offset"]),uiStale:g([]),domChanged:g([]),interaction:g([]),keydown:g(["original"]),keyup:g(["original"]),keypress:g(["original"]),mousedown:g(["original"]),mouseup:g(["original"]),contextmenu:g(["original"]),cut:g(["original"]),copy:g(["original"]),paste:g(["original"]),focus:g(["original"]),focusOut:g(["original"]),dblclick:g(["original"]),selectionchange:g(["original"]),paint:g([]),ready:g(["api"]),loaded:g([])});return{element:b.element,
tabindex:b.tabindex,onCanvas:b.onCanvas,win:r,doc:s,body:function(){return d.map(function(a){return a.body()})},getContent:function(){return d.fold(function(){return t},function(a){return a.getContent()})},setContent:function(a){d.fold(function(){t=a},function(b){b.setContent(a)})},resetContent:function(a){d.fold(function(){t=a},function(b){b.resetContent(a)})},blur:function(){d.each(function(a){a.blur()})},focus:u,uiChanged:function(){d.each(function(a){a.uiChanged()})},domChanged:function(){d.each(function(a){a.domChanged()})},
clearSelection:function(){d.each(function(a){a.clearSelection()})},getSelection:l,setSelection:w,setRelativeSelection:x,backupSelection:function(){d.each(function(a){a.backupSelection()})},replaceSelection:function(a){d.each(function(b){b.replaceSelection(a)})},execCommand:y,lockdown:function(a){var b=m.control.isBlocked();m.control.block();a();b||m.control.unblock()},destroy:function(){b.destroy();d=e.none()},events:z.registry,background:function(){d.fold(a.identity,function(a){a.background()})},
foreground:function(){d.fold(a.identity,function(a){a.foreground()})},on:function(b){return r().bind(function(c){return s().map(function(d){return b({win:a.constant(c),doc:a.constant(d),execCommand:y,getSelection:l,setSelection:w,setRelativeSelection:x,focus:u})})})},translateScreen:function(a,b){return d.fold(function(){return k(a,b)},function(c){return c.translateScreen(a,b)})},translateLocation:function(a,b){return d.fold(function(){return k(a,b)},function(c){return c.translateLocation(a,b)})},
placeholder:b.placeholder,extract:b.extract,isInline:b.isInline}};return{frame:function(a,c){var d=b(a,c);return m(d)},detached:function(a,b,c){a=d(a,b,c);return m(a)}}});l("is","a 1o 7v 7 53 2n l 2f 2o 2q 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=function(a,b){if(void 0!==a&&c.isFunction(a.setData))try{return d.each(b,function(b,c){a.setData(c,b())}),!0}catch(e){return!1}else return!1},q=function(a,c,d){var e=g.fromTag("div",a.doc().dom());f.setAll(e,{position:"absolute",top:"-1000px"});
c=c["text/html"]();h.set(e,c);k.append(a.body(),e);var p=a.getSelection();b.selectElementContents(a.win(),e);n(function(){m.remove(e);p.each(function(b){a.setSelection(b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset())});n(d,0)},0)},r=function(a){return function(b,d,e){var f=b.raw();if(!c.isString(f.type)||"copy"!==f.type.toLowerCase()&&"cut"!==f.type.toLowerCase())throw"Can only set the clipboard with a cut or copy event";if(!c.isFunction(d["text/html"]))throw"Must provide at least text/html data function when setting clipboard contents";
p(f.clipboardData,d)?(b.kill(),n(e,0)):a(d,e)}},s=e.exactly(["doc","win","body","getSelection","setSelection"]);return{register:function(b){s(b);b=a.curry(q,b);return{setClipboard:r(b)}},textMime:a.constant("text/plain"),htmlMime:a.constant("text/html")}});l("nc",["21","de"],function(c,d){var b=d(c.isComment,"comment");return{get:function(a){return b.get(a)},getOption:function(a){return b.getOption(a)},set:function(a,c){b.set(a,c)}}});l("ir","b 7 r s k is nc 21 v".split(" "),function(c,d,b,a,e,f,
g,h,k){var m={clipboardType:d.constant("x-textbox/html"),findClipboardTags:function(b){b=e.cat(c.map(b,function(b){if(h.isComment(b)){var c=g.get(b);if(k.contains(c,"x-textbox/html"))return a.some(b)}return a.none()}));return 0===b.length?a.none():a.some(b)}};return{intraFlag:d.constant(m),buildClipboardContents:function(a,c){var e={};e["x-textbox/html"]=d.constant("true");e[f.textMime()]=b.cached(a);e[f.htmlMime()]=b.cached(function(){return"\x3c!-- x-textbox/html --\x3e"+c()});return e},ignoreSelectors:d.constant([".ephox-sloth-bin"])}});
l("f1","nb 7 ir 33 4b 2n 2o 31 o".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a,b){return{editable:d.constant(a),connect:b}},n=function(a,d){var e=c.frame(d,b.ignoreSelectors());e.events.ready.bind(function(b){b=b.api().body();a.updateUi(b)});return m(e,function(a){g.append(a,e.element())})},p=function(n,p){0!==p.stylesheets.length&&k.log("You have attempted to declare the following stylesheets for use in textbox.io: ["+p.stylesheets.join(", ")+"]. User stylesheets are not used in inline editing mode and have been ignored.");
0!==p.documentStyles.length&&k.log('You have attempted to declare the following document styles for use in textbox.io: "'+p.documentStyles+'". Document styles are not used in inline editing mode and have been ignored.');p.base.fold(d.noop,function(a){k.log('You have attempted to declare the following content base URL for use in textbox.io: "'+a+'". Content base URL is not used in inline editing mode and has been ignored.')});var s=c.detached(p.inline,p.editorStyles,b.ignoreSelectors());return m(s,
function(b){g.append(b,s.placeholder());b=h.ancestor(b,".ephox-polish-editor-container").getOr(b);f.set(s.placeholder(),"display","none");e.add(b,[a.resolve("inline-editor-container"),a.resolve("layer-editor")])})};return{build:function(a,b){return(void 0!==b.inline?p:n)(a,b)}}});l("f2",["s","29"],function(c,d){return function(b){var a=c.none(),e=c.none(),f=function(){a.each(function(a){b.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())});e.each(function(a){b.win().each(function(b){b.scrollTo(a.left(),
a.top())})})},g=function(){a=c.none();e=c.none()};return{restore:function(){f();g()},save:function(){a=b.getSelection();e=b.doc().map(d.get)},get:function(){return a},clear:g,attempt:function(b){a=b.or(a)}}}});l("nd","58 b c l 2o 2a".split(" "),function(c,d,b,a,e,f){var g=b.detect().browser.isFirefox(),h=function(b){d.each(b,function(b){f.nextSibling(b).isNone()&&e.after(b,a.fromText(c.zeroWidth()))})};return{configure:function(a){g&&a.addSelector(a.input(),"a",h)}}});l("f3","b 7 nd 33 ci du 7h 1a 1y l 2o 2q 31 83".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=a.resolve("content-eph-wrapper"),t=a.resolve("content-eph-extra"),u=a.resolve("content-eph-general"),l=function(a){c.each(a,function(a){k.remove(a,f.styleSpan());h.remove(a,f.overrideSpan());(h.hasNone(a)||g.isTransient(a))&&p.unwrap(a)})},w=function(a){c.each(a,function(a){k.remove(a,f.quasiBlocks)})},x=function(a){c.each(a,function(a){var b=h.get(a,"style");h.set(a,"style",b.replace(/"/g,"'"))})},y=function(a){c.each(a,function(a){if(0===r.get(a).length&&
q.descendant(a,"br,img,hr").isNone()){var b=m.fromTag("br");n.append(a,b)}})};return{configure:function(a){a.add(a.internal(),s,e.unwrap);a.add(a.internal(),t,e.remove);a.add(a.internal(),u,e.remove);a.add(a.internal(),f.quasiBlocks,w);a.add(a.output(),s,e.unwrap);a.add(a.output(),t,e.remove);a.add(a.output(),u,e.remove);a.add(a.output(),f.styleSpan(),l);a.add(a.output(),f.quasiBlocks,w);a.addSelector(a.internal(),"noscript",e.remove);a.addSelector(a.input(),"[style]",x);a.addSelector(a.input(),"td,th",
y);a.addSelector(a.paste(),"[style]",x);a.addSelector(a.paste(),"td,th",y);b.configure(a)},markerWrapper:d.constant(s),markerExtra:d.constant(t),markerGeneral:d.constant(u)}});l("12r",["4g"],function(c){return{resolve:c.create("ephox-cereal").resolve}});l("zu","12r b 7 1a 1y 4b 31 dp".split(" "),function(c,d,b,a,e,f,g,h){var k=c.resolve("start-cursor"),m=c.resolve("finish-cursor"),n="data-"+c.resolve("start-offset"),p="data-"+c.resolve("finish-offset"),q=function(b){a.remove(b,n);a.remove(b,p);f.remove(b,
[k,m]);""===a.get(b,"class")&&a.remove(b,"class")},r=function(b,c){var d=a.get(b,c);return h(d,10)};return{setInfo:function(b,c,f,g){d.each([b,c],q);e.add(b,k);e.add(c,m);a.set(b,n,f);a.set(c,p,g)},clearInfo:q,findStart:function(a){return g.descendant(a,"."+k).map(function(a){return{token:b.constant(a),offset:b.constant(r(a,n))}})},findFinish:function(a){return g.descendant(a,"."+m).map(function(a){return{token:b.constant(a),offset:b.constant(r(a,p))}})}}});l("12s",["2u"],function(c){return c.immutable("token",
"remove","extra")});l("zv",["zu","12s","7"],function(c,d,b){return{use:function(a,c){return d(c,b.noop,[])},extract:function(a){return{remove:b.curry(c.clearInfo,a),element:b.constant(a)}}}});l("zw","12s 12r 7 s 1y 2n l 2o 2q 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=d.resolve("pre-cursor-token"),p=d.resolve("post-cursor-token"),q=d.resolve("first-cursor-token"),r=function(){var a=g.fromTag("span");f.set(a,"display","none");return a},s=function(a){var d=b.curry(k.remove,a);return c(a,d,[a])},
t=function(b){return e.has(b,n)?m.nextSibling(b):e.has(b,p)?m.prevSibling(b):e.has(b,q)?m.parent(b):a.none()};return{pre:function(a,b){var c=r();h.before(b,c);e.add(c,n);return s(c)},post:function(a,b){var c=r();h.after(b,c);e.add(c,p);return s(c)},first:function(a,b){var c=r();h.prepend(a,c);e.add(c,q);return s(c)},extract:function(a){return t(a).map(function(c){return{remove:b.curry(k.remove,a),element:b.constant(c)}})}}});l("12t",["2u"],function(c){var d=c.immutable("element","offset");c=c.immutable("startContainer",
"startOffset","endContainer","endOffset");return{point:d,range:c}});l("12u","12r 7 1y l 2o 4e 2a".split(" "),function(c,d,b,a,e,f,g){var h=c.resolve("text-node-wrapper"),k=function(a){return b.has(a,h)};return{create:function(){var c=a.fromTag("span");b.add(c,h);return c},findIn:function(a){return f.children(a,"."+h)},isWrap:k,inWrap:function(a){return g.parent(a).fold(d.constant(!1),function(a){return k(a)})},child:function(b){return g.child(b,0).fold(function(){var c=a.fromText("");e.append(b,c);
return c},d.identity)}}});l("12v","12u b l 2o 2q 2a".split(" "),function(c,d,b,a,e,f){var g=function(g){g=c.findIn(g);d.each(g,function(c){0===f.children(c).length&&a.before(c,b.fromText(""));e.unwrap(c)})},h=function(a){f.parent(a).each(e.unwrap)};return{unwrap:function(a){(c.inWrap(a)?h:g)(a)}}});l("zx","zu 12t 12u 12v zv zw 7 1b dl 21 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=function(a,b,c,d){return h.eq(a,b)?f.first(a,b):m.isElement(b)&&!d(b)?e.use(a,b):c(a,b)};return{extractFrom:function(c,
e){c.remove();e.remove();var f=function(c){var d=b.isWrap(c)?n.unwrap:a.unwrap,e=b.isWrap(c)?b.child(c):c;return{target:g.constant(e),unwrap:g.curry(d,c)}},h=f(c.element()),k=f(e.element()),m=d.range(h.target(),c.offset(),k.target(),e.offset());return{remove:function(){h.unwrap();k.unwrap()},getSelection:function(){return m}}},same:function(a,b,d,e,g){a=p(a,b,f.pre,g);c.setInfo(a.token(),a.token(),d,e);return[a]},diff:function(a,b,d,e,g,h){var m=k.after(b,d,e,g),n=m?f.pre:f.post;b=p(a,b,m?f.post:
f.pre,h);a=p(a,e,n,h);c.setInfo(b.token(),a.token(),d,g);return[b,a]}}});l("12w","12u b 7 2o 21 2a".split(" "),function(c,d,b,a,e,f){var g=function(a){return f.parent(a).fold(b.constant(!1),function(a){return c.isWrap(a)})},h=function(b){return d.foldr(b,function(b,d){if(e.isText(d)&&!g(d)){var f=c.create();a.wrap(d,f);return[f].concat(b)}return b},[])};return{wrap:function(a){var b=f.children(a),b=0<b.length?b:[a];return c.isWrap(a)?[]:h(b)}}});l("zy",["zu","12v","12w","b","7"],function(c,d,b,a,
e){var f=function(a){a.remove()};return{combine:function(g,h){var k=a.bind(g,b.wrap),m=a.bind(h,function(a){return a.extra()});return{extra:e.constant(m),wrappers:e.constant(k),remove:function(){a.each(h,function(a){c.clearInfo(a.token())});a.each(g,d.unwrap);a.each(h,f)}}}}});l("vs","zu zv zw zx zy 7 1b".split(" "),function(c,d,b,a,e,f,g){var h=function(b,c,d,f,g,h){var k=[c,f];b=a.diff(b,c,d,f,g,h);return e.combine(k,b)},k=function(b,c,d,f,g,h){f=[c];b=a.same(b,c,d,g,h);return e.combine(f,b)},m=
function(a,c){return c(a).map(function(a){var c=b.extract(a.token()).getOrThunk(function(){return d.extract(a.token())});return{remove:c.remove,offset:a.offset,element:c.element}})},n=function(a){return m(a,c.findStart).bind(function(b){return m(a,c.findFinish).map(function(a){return{startMarker:f.constant(b),finishMarker:f.constant(a)}})})};return{insertAt:function(a,b,c,d,e,f){return(g.eq(b,d)?k:h)(a,b,c,d,e,f)},extract:function(b){return n(b).map(function(b){return a.extractFrom(b.startMarker(),
b.finishMarker())})}}});l("ne",["vs"],function(c){return{insert:function(d,b,a){d=c.insertAt(d,b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset(),a);return{extra:d.extra,wrappers:d.wrappers,remove:d.remove}},extract:function(d){return c.extract(d).map(function(b){return{remove:b.remove,getSelection:b.getSelection}})}}});l("f4","ne b eg 9i 80 7 f3 1a 1y nf 2f fl 2a 1s".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=function(a,b){d.each(a,function(a){k.add(a,b)})},t=function(a){var b=
function(){return q.parent(a).map(function(a){return"false"===h.get(a,"contenteditable")}).getOr(!1)};return"false"===h.get(a,"contenteditable")||b()};return{extract:function(a){return c.extract(a)},getSelection:function(c){var d=c.getSelection();c=d.startContainer();var f=d.startOffset(),g=d.endContainer(),d=d.endOffset(),h=e.getEnd(c),k=e.getEnd(g);return 0<=f&&f<=h&&0<=d&&d<=k?b.write(a.on(c,f),a.on(g,d)):b.write(a.before(c),a.before(c))},remove:function(a){a.remove()},serialise:function(a,b){return m.path(a,
b.startContainer()).bind(function(d){return m.path(a,b.endContainer()).bind(function(e){var h=p.deep(a);return m.follow(h,d).bind(function(a){return m.follow(h,e).map(function(d){d={startContainer:f.constant(a),startOffset:f.constant(b.startOffset()),endContainer:f.constant(d),endOffset:f.constant(b.endOffset())};d=c.insert(h,d,t);s(d.wrappers(),g.markerWrapper());s(d.extra(),g.markerExtra());return n.get(h)})})})})}}});l("12x",["2u"],function(c){return c.immutable("word","left","right")});l("12y",
["b","s","12x"],function(c,d,b){var a=["'","\u2018","\u2019"],e=c.bind(a,function(a){return c.map(["twas"],function(b){return a+b})}),f=function(a){var c=a.word();return b(c.substring(1),d.some(c.charAt(0)),a.right())},g=function(b){return c.contains(a,b)},h=function(a){var b=a.word(),d=c.exists(e,function(a){return-1<b.indexOf(a)})?2:1,h=b.substring(0,d);return c.forall(h,g)&&!g(b.charAt(d))?f(a):a},k=function(a){var c=a.word();2<=c.length&&g(c.charAt(c.length-1))&&!g(c.charAt(c.length-2))&&(c=a.word(),
a=b(c.substring(0,c.length-1),a.left(),d.some(c.charAt(c.length-1))));return h(a)};return{scope:k,text:function(a){a=b(a,d.none(),d.none());return k(a).word()}}});l("100","b s 6l hn 12x 12y 66".split(" "),function(c,d,b,a,e,f,g){return{words:function(g){var k=b.unsafetoken(b.wordchar()+"+"),k=a.findall(g,k),m=g.length;return c.map(k,function(a){var b=a.start(),c=a.finish();a=g.substring(b,c);b=0<b?d.some(g.charAt(b-1)):d.none();c=c<m?d.some(g.charAt(c)):d.none();a=e(a,b,c);return f.scope(a)})}}});
l("vt",["zz","100"],function(c,d){return{identify:function(b){return d.words(b)},isWord:function(b,a){return!c.hasBreak(a)}}});l("ng",["e7","vt"],function(c,d){var b=c();return{identify:function(a){return d.identify(a)},isWord:function(a){return d.isWord(b,a)}}});l("f5","c s ex ng dv 21 2a".split(" "),function(c,d,b,a,e,f,g){var h=c.detect(),k=function(a,c){return f.isText(a)?d.some(b.point(a,c)):0===g.children(a).length?d.none():g.child(a,c).bind(function(a){return k(a,0)})},m=function(a,b,c){a.on(function(a){e.expandWord(a,
b,c)})},n=function(b,c){var d=b.dom().createRange();d.setStart(c.startContainer().dom(),c.startOffset());d.setEnd(c.endContainer().dom(),c.endOffset());return a.isWord(d.cloneContents().textContent)};return{correct:function(a){a.getSelection().each(function(b){a.doc().each(function(c){n(c,b)&&k(b.startContainer(),b.startOffset()).each(function(c){(!b.collapsed()||a.isInline()&&h.browser.isIE())&&m(a,c.element(),c.offset())})})})},expand:function(a){a.on(e.expand);a.backupSelection()}}});ca("ni",Image);
l("nh","55 46 1a 3u l ni".split(" "),function(c,d,b,a,e,f){return function(){var a=d.create({fail:c(["url","image"]),success:c(["url","image"]),start:c(["url"])}),h=function(a,b,c){var d=a.dom();d.addEventListener(b,c,!1);return{unbind:function(){d.removeEventListener(b,c,!1)}}},k=function(c){var d=b.get(c,"src"),e=h(c,"load",function(){e.unbind();f.unbind();(!0===c.dom().complete?a.trigger.success:a.trigger.fail)(d,c)}),f=h(c,"error",function(){e.unbind();f.unbind();a.trigger.fail(d,c)})};return{go:function(b){a.trigger.start(b);
var c=new f;c.src=b;k(e.fromDom(c))},monitor:k,events:a.registry}}});l("gx",["b","3s","7","p"],function(c,d,b,a){var e=function(a,b){return a.bind(function(a){return a.fold(function(){return d.pure(a)},function(a){return b(a)})})},f=function(b){return d.pure(a.value(b))},g=function(b){return d.nu(function(c){b.then(function(b){c(a.value(b))},function(b){c(a.error(b))})})},h=function(b){return b.map(a.value)};return{fromPromise:g,error:function(b){return d.pure(a.error(b))},map:function(a,b){return a.map(function(a){return a.map(b)})},
bind:e,pure:f,fromChain:function(a){return function(b){return c.foldl(a,function(a,b){return e(a,function(a){return b(a)})},f(b))}},fromFuture:h,pToFR:function(a){return b.compose(g,a)},fToFR:function(a){return b.compose(h,a)},effect:function(a){return function(b){b.each(function(){a()});return b}}}});l("f6","nh 3s p gx 1a ni".split(" "),function(c,d,b,a,e,f){var g=function(a){return d.nu(function(d){if(!0===a.dom().complete)d(b.value(a));else{var e=c();h(e,d);e.monitor(a)}})},h=function(a,c){a.events.success.bind(function(a){c(b.value(a.image()))});
a.events.fail.bind(function(a){c(b.error("Unable to download image "+a.url()))})};return{load:function(a){return d.nu(function(b){var d=c();h(d,b);d.go(a)})},loadIfNeeded:function(b){return!0===b.dom().complete||void 0===e.get(b,"src")?a.pure(b):g(b)}}});l("88","en 58 c 9i 7v 3s 7 s ex bk 7x f0 f1 f2 f3 f4 f5 f6 c9 55 46 47 f7 1y 1b 3u l 48 2o 21 4e at 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,l,w,x,y,z,A,D,B,C,F,E,G,H,I,K,J){var M=b.detect();return function(b,N,Q,R,P){s.configure(b);
var S=h.none();b={inline:Q.inline,base:h.from(Q.base),editorStyles:[Q.css+"/content.css"],stylesheets:Q.stylesheets,documentStyles:Q.documentStyles};R=q.build(R,b);var L=R.editable();null!==Q.tabindex&&L.tabindex(Q.tabindex);void 0!==P.clean&&L.setContent(P.clean);L.events.ready.bind(function(){if(void 0!==P.clean){var a=L.getContent();P.clean===a&&V(P.marked,!1)}a=L.body().getOrDie();S=h.some(C.bind(a,"dblclick",function(a){u.correct(L)}))});L.events.ready.bind(function(a){w.addClasses(a.api().body())});
var U=function(){return L.getSelection().bind(function(a){var b=L.body().getOrDie("content should not return a selection if body is not yet available");return t.serialise(b,a)}).getOr(L.getContent())},V=function(a,b){L.body().each(function(c){L.setContent(a);t.extract(c).fold(function(){L.setSelection(c,0,c,0)},function(a){var b=t.getSelection(a);t.remove(a);L.setRelativeSelection(b.start(),b.finish())});if(!M.deviceType.isiOS()){var d=I.descendants(c,"img");b?f.mapM(d,l.loadIfNeeded).get(function(){Z()}):
Z()}})},X=y.create({nodeChanged:x(["node","offset","prev"]),undoChanged:x([]),loiter:z(["node","offset"],L.events.loiter),uiStale:z([],L.events.uiStale),domChanged:z([],L.events.domChanged),interaction:z([],L.events.interaction),keydown:z(["original"],L.events.keydown),keyup:z(["original"],L.events.keyup),keypress:z(["original"],L.events.keypress),mousedown:z(["original"],L.events.mousedown),mouseup:z(["original"],L.events.mouseup),contextmenu:z(["original"],L.events.contextmenu),copy:z(["original"],
L.events.copy),paste:z(["original"],L.events.paste),focus:z(["original"],L.events.focus),focusOut:z(["original"],L.events.focusOut),dblclick:z(["original"],L.events.dblclick),selectionchange:z(["original"],L.events.selectionchange),paint:z([],L.events.paint),ready:z(["api"],L.events.ready),loaded:z([],L.events.loaded),background:x([]),foreground:x([]),scrollToCursor:x([]),scrollToElement:x(["element"]),toEditing:x([]),toReading:x([])});L.events.nodeChanged.bind(function(a){X.trigger.nodeChanged(a.node(),
a.offset(),a.prev());Y()});var W=m.tap(function(){X.trigger.undoChanged()}),Y=function(){W.instance()},da=function(a){W.instance();var b=W.control.isBlocked();W.control.block();a=a();b||W.control.unblock();W.instance();return a},Z=function(){X.trigger.scrollToCursor()},aa=m.tap(function(){L.focus()});Q=function(a){return function(){var b=arguments;J.parent(L.element()).fold(function(){a.apply(null,b)},function(c){var d=c.dom().scrollTop;a.apply(null,b);c.dom().scrollTop=d})}}(L.execCommand);var ea=
function(a){return H.isText(a)&&(M.browser.isSafari()||0===K.get(a).length)||H.isElement(a)&&!A.isEmptyTag(a)&&!A.isBlock(a)},ha=function(a){var b=F.fromText(d.zeroWidth());G.after(a,b);return b},fa=function(a,b){var c=J.children(a);if(b>=c.length)return k.point(a,b);var d=c[b];return H.isElement(d)&&!A.isEmptyTag(d)?fa(c[b],0):k.point(a,b)},ia={onCanvas:L.onCanvas,element:L.element,isInline:L.isInline,win:L.win,doc:L.doc,body:L.body,getContent:L.getContent,setContent:L.setContent,resetContent:L.resetContent,
focus:function(){aa.instance()},blur:L.blur,uiChanged:L.uiChanged,domChanged:L.domChanged,undoChanged:Y,clearSelection:L.clearSelection,getSelection:L.getSelection,getSelectionStart:function(){return L.getSelection().map(function(a){return a.startContainer()})},setSelection:L.setSelection,setRelativeSelection:L.setRelativeSelection,backupSelection:L.backupSelection,replaceSelection:L.replaceSelection,execCommand:Q,insertHtmlAtCursor:function(b){var d=E.fromHtml(b);da(function(){n.insertAtCursorWithInstructions(c.doNotMerge,
ia,d).each(function(b){var c=b.element();J.parent(c).each(function(b){b=ea(c)?ha(c):c;L.setRelativeSelection(a.after(b),a.after(b));L.getSelection().each(function(a){a=fa(a.startContainer(),a.startOffset());L.setSelection(a.element(),a.offset(),a.element(),a.offset())});N.input(d)})})})},on:L.on,destroy:function(){S.each(function(a){a.unbind()});L.destroy()},events:X.registry,state:function(){return{clean:L.getContent(),marked:U()}},serialize:U,deserialize:function(a){V(a,!0)},background:function(){L.background();
X.trigger.background()},foreground:function(){L.foreground();X.trigger.foreground()},isRoot:function(a){return L.body().fold(g.constant(!1),function(b){return B.eq(b,a)})},selectWord:function(){u.expand(L)},cursor:function(){return r(L)},activate:function(){aa.control.unblock()},deactivate:function(){aa.control.block()},cursorIntoView:Z,elementIntoView:function(a){X.trigger.scrollToElement(a)},placeholder:L.placeholder,connect:R.connect,translateScreen:L.translateScreen,translateLocation:L.translateLocation,
extract:L.extract,runOrOnLoaded:function(a){L.body().fold(function(){L.events.ready.bind(function(b){a(b.api().body())})},function(b){a(b)})},getSelectedText:function(){return L.getSelection().bind(function(a){if(a.collapsed())return h.none();a=e.cloneFragment(L.win().getOrDie(),a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset());a=J.children(a);return h.some(p.toText(a))})},toEditing:function(){X.trigger.toEditing()},toReading:function(){X.trigger.toReading()},undoOperation:da,markAsEphemeral:function(a){D.add(a,
s.markerGeneral())},hideInlineSelection:function(){L.isInline()&&(L.backupSelection(),L.clearSelection())}};return ia}});l("fa",["7"],function(c){return{get:c.constant({onShortcut:function(c,b){c.bind(b)}})}});l("nj",["gi","33","1a"],function(c,d,b){var a="data-"+d.resolve("context-type");return{nu:function(d,f,g){d=c.item(d,g.value(),g.text());b.set(d,a,f);b.setAll(d,g.attrs());return d},type:function(c){return b.get(c,a)}}});l("nk","77 b 85 gi kc s nj 4b".split(" "),function(c,d,b,a,e,f,g,h){return{derive:function(k,
m,n){m=d.map(m,function(a){var e=n[a],m=e.primary(),s=e.submenus();return d.map(m,function(d){var e=g.nu(k,a,d),m=s.hasOwnProperty(d.value())&&void 0!==s[d.value()]?[c.resolve("menu-more")]:[],n=void 0!==s[d.value()];b.menuItem(e,f.some(d.text()),f.some(n));h.add(e,m);return e})});m=d.filter(m,function(a){return 0<a.length});return d.flatten(e.intersperseThunk(m,function(){return[a.separator(k)]}))}}});l("nl","b 85 gi s nj 75 3c".split(" "),function(c,d,b,a,e,f,g){return{derive:function(h,k,m){return c.bind(k,
function(k){var p=m[k].secondary();return c.map(p,function(m){var p=b.submenu(h,m.value(),[]);d.menu(p,f.get(m.textkey()));m=c.map(m.items(),function(b){var c=e.nu(h,k,b);d.menuItem(c,a.some(b.text()),a.none());return c});g.append(p,m);return p})})}}});l("fb","b 1o 85 gi 6 s nj nk nl 75 33 4m 1y 3c 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){return function(t){var u=p({}),l=p([]),w={},x=f.none();return{structure:u.get,all:l.get,main:function(){return l.get()[0]},update:function(g){c.each(l.get(),
function(a){s.remove(a)});x=f.some(g);var p=d.keys(w);d.each(w,function(a){a.assign(x)});var A=d.tupleMap(w,function(a,b){return{k:b,v:a.situation(g)}}),D=h.derive(t,p,A),B=k.derive(t,p,A),p=c.foldr(p,function(a,b){return e.merge(a,A[b].submenus())},{});if(0===D.length)l.set([]);else{var C=a.mainmenu(t,n.resolve("main-context-menu"),[]);r.append(C,D);b.menu(C,m.translate("aria.context.menu.generic"));D=[C].concat(B);c.each(D,function(a){q.add(a,n.resolve("layer-menus"))});l.set(D);u.set(p)}},handle:function(a){var b=
g.type(a),b=w[b];void 0!==b&&b.handle(a)},register:function(a,b){w[a]=b}}}});l("nm",["kg"],function(c){return{mainmenu:function(d,b,a,e,f,g){return c.main(d,b,a,e,f,g)},submenu:function(d,b,a,e,f){return c.submenu(d,b,a,e,f)}}});l("fc","nm 7 nn 6z no np nq 3k l q".split(" "),function(c,d,b,a,e,f,g,h,k,m){return{makeshift:function(c,p,q,r,s,t,u,l,w){return{recalculate:d.noop,isAnchored:d.constant(!1),place:function(d){var p=c.doc().getOr(k.fromDom(m)),p=c.isInline()?h(q,r):f.translate(b.fixedOrigin(),
p,q,r),z=a(p.left(),p.top(),s,t),p=u.isRtl()?e.allRtl():e.all(),z=b.box(z);d=d.panel();g.fixed(z,d,l,p,void 0===w?{}:w)}}},mainmenu:function(a,b,d,e){return c.mainmenu(a.uiContainer,a.bounds,b,d,e)},submenu:function(a,b,d){return c.submenu(a.uiContainer,a.bounds,b,d)}}});l("89","ae af b f8 c 4z 7 s f9 fa fb 7c fc as fd 2u 3k 2n 3l 21 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,u,l,w,x,y){var z=t.immutable("target","x","y"),A=e.detect().browser,D=function(e,t,D,E,G,H){D=t.doc().getOrDie();
var I=n(D),K=u(0,0);D=m.get();var J=k.fromUnsafe(t),M=c.menuSystem(G.uiContainer,g.constant("context"),d.menu({focusActive:!0})),O=c.popup(M.sandbox,G.bounds,e,[],r.editorContainer());H=f.div();var N=O.initMenu(H),Q=function(a){I.update(a.target());var b=U(),c=[M.sandbox()];if(0<b.all.length){var d=a.x(),e=a.y();K=u(d,e);N.setContent(b.main);S(N);N.open();M.open(c,b.main);return h.some(a)}return h.none()},R=function(a){return t.getSelection().bind(function(a){return function(){return p.selectionContains(a).fold(function(){return x.isText(a.startContainer())?
y.parent(a.startContainer()):h.some(a.startContainer())},function(a){return h.some(a)})}().map(function(a){var b=w.viewport(a),b=t.translateScreen(b.left(),b.top());return z(a,b.left(),b.top())})})},P=function(a){var b;b=a.original();b=A.isIE()&&10>=A.version.major?u(b.raw().clientX,b.raw().clientY):u(b.x(),b.y());b=t.translateScreen(b.left(),b.top());return z(a.original().target(),b.left(),b.top())},S=function(a){var b;b=s(14,10);b=q.makeshift(t,G,K.left(),K.top(),0,0,e.uiDirection(),b);G.show(a,
b)},L=function(){N.close();var a=U();b.each(a.all,function(a){l.set(a,"display","none")});J.end()};N.events.close.bind(function(){M.close()});var U=function(){var a=I.all();return{all:a,main:a[0],submenus:a.slice(1)}};t.events.contextmenu.bind(function(a){var b=P(a);Q(b).orThunk(function(){return R().bind(Q)}).each(function(b){a.original().raw().preventDefault()})});D.onShortcut(E.events.context,function(){R().each(Q)});M.events.open.bind(function(){var a=I.structure(),b=U();M.update(a);O.registerMenus(b.submenus);
S(N);M.setActiveMenu(b.main)});M.events.itemAction.bind(function(a){I.handle(a.item())});M.events.itemHover.bind(function(a){J.begin()});M.events.reveal.bind(function(b){a.expanded(b.trigger());O.expandMenu(b.menu(),b.trigger(),N);S(N)});M.events.collapse.bind(function(b){O.hideMenu(b.menu());b.item().each(a.collapsed)});M.events.itemAction.bind(L);M.events.escaped.bind(function(){L();t.focus()});t.events.mousedown.bind(L);return{register:I.register,destroy:function(){N.destroy();M.destroy()}}};return function(a,
c,d,e,f){var h=[],k={register:function(a,b){h=h.concat([{name:a,feature:b}])},destroy:g.noop};c.events.ready.bind(function(g){k=D(a,c,d,e,f);b.each(h,function(a){k.register(a.name,a.feature)})});return{register:function(a,b){k.register(a,b)},destroy:function(){k.destroy()}}}});l("fe","c 7 s 1a l 2o 21 2q 2a 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=c.detect().browser,p=function(a){var c=e.fromHtml("<p><br></p>");f.append(a,c);return b.some(c)},q=function(a){var c=k.children(a);return 0===
c.length?p(a):1===c.length&&"br"===g.name(c[0])?(h.empty(a),p(a)):b.none()},r=function(b){return 1===b.dom().childNodes.length?k.firstChild(b).fold(d.constant(!1),function(b){return"br"===g.name(b)&&a.has(b,"_moz_editor_bogus_node")}):!1},s=function(a){return q(a).orThunk(function(){var c;n.isFirefox()&&r(a)?(h.empty(a),c=p(a)):c=b.none();return c})};return{listen:function(a){a.events.nodeChanged.bind(function(b){b=b.node();a.isRoot(b)&&s(b).each(function(b){a.setSelection(b,0,b,0)})})}}});l("ff",
[],function(){return function(){var c=!0;return{isHandled:function(){return c},handle:function(){c=!1}}}});l("8g",["7","7h","2a"],function(c,d,b){return{onNodeChange:function(a,b){a.events.nodeChanged.bind(function(c){c.prev().each(function(c){d.withinTransient(c,c).each(function(c){b.atomic(function(){d.cleanup(a.isRoot,c)})})})});return{destroy:c.noop}},preLinebreak:function(a){a.getSelection().each(function(c){b.parent(c.startContainer()).each(function(b){d.withinTransient(b,b).each(function(b){d.cleanupNonEmpty(a.isRoot,
b)})})})}}});l("aa",["b","ah","7"],function(c,d,b){var a=function(a,b){var d=b.original(),d=d.raw().which||d.raw().keycode;return c.contains(a,d)},e=b.curry(a,d.ENTER()),f=b.curry(a,d.SPACE()),g=b.curry(a,d.BACKSPACE()),h=b.curry(a,d.DEL()),k=b.curry(a,d.LEFT().concat(d.UP())),m=b.curry(a,d.RIGHT().concat(d.DOWN())),n=b.curry(a,d.TAB());d=b.curry(a,d.ESCAPE());return{isEnter:e,isSpace:f,isBackspace:g,isDel:h,isTab:n,isLeftOrUp:k,isRightOrDown:m,isEscape:d}});l("fg",["nr","ns","nt"],function(c,d,b){var a=
function(a,b,c,h){return d.isCollapsed(a)?b(a.startContainer(),a.startOffset(),h):c(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset(),h)};return{soft:function(d,f){return a(d,c.soft,b.soft,f)},hard:function(d,f){return a(d,c.hard,b.hard,f)}}});l("8a","7 fe ff 8g aa 55 46 fg".split(" "),function(c,d,b,a,e,f,g,h){return function(k,m){var n=g.create({preLinebreak:f(["handler"]),postLinebreak:f([])});d.listen(k);var p=function(c){m.save();k.getSelection().each(function(d){var e=b();n.trigger.preLinebreak(e);
k.getSelection().each(function(b){e.isHandled()&&(a.preLinebreak(k),(c?h.soft:h.hard)(b,k.isRoot).each(function(a){k.setRelativeSelection(a.start(),a.finish());k.domChanged();k.cursorIntoView()}));n.trigger.postLinebreak()})})};k.events.keydown.bind(function(a){e.isEnter(a)&&(a.original().raw().preventDefault(),p(a.original().raw().shiftKey))});return{linebreak:p,destroy:c.noop,events:n.registry}}});l("fh",["4e"],function(c){return function(d,b){return{find:function(a){return c.descendants(a,d)},
cleaner:b}}});l("ho",["b","l","2f"],function(c,d,b){var a=function(a,b){c.each(b,function(b){var c=b.find(a);b.cleaner(c,a)})};return{filterHtml:function(c,f){var g=d.fromTag("div");g.dom().innerHTML=c;a(g,f);return b.get(g)},filterDom:a}});l("nu",[],function(){return function(){var c=[];return{add:function(d){c.push(d)},get:function(){return c.slice(0)}}}});l("fi",["s","ho","nu"],function(c,d,b){return function(){var a={},e=function(b){return c.from(a[b])};return{get:e,getOrInit:function(c){var d=
a[c];void 0===d&&(a[c]=b(),d=a[c]);return d},filterDom:function(a,b){e(a).each(function(a){d.filterDom(b,a.get())})},filterHtml:function(a,b){return e(a).fold(function(){return b},function(a){return d.filterHtml(b,a.get())})}}}});l("fj",["6j"],function(c){return function(d,b){return{find:function(a){return c.descendants(a,d)},cleaner:b}}});l("8b",["7","6r","fh","fi","fj"],function(c,d,b,a,e){return function(f){var g=a(),h=c.constant("internal"),k=c.constant("output"),m=c.constant("input"),n=c.constant("history"),
p=c.constant("paste"),q=function(a,c,d){a=g.getOrInit(a);c=b(c,d);a.add(c)},r=function(a,b,c){a=g.getOrInit(a);b=e(b,c);a.add(b)};f=d(f,q,r);return{add:function(a,b,c){q(a,"."+b,c)},addSelector:q,addPredicate:r,filterHtml:g.filterHtml,filterDom:g.filterDom,internal:h,output:k,input:m,paste:p,history:n,customFilters:c.constant(f),state:f.state,destroy:c.noop}}});l("8c","7 75 6v 76 55 46".split(" "),function(c,d,b,a,e,f){return function(g,h,k){var m=!1,n=f.create({maximize:e(["layout"]),restore:e(["layout"]),
analytics:e(["message"]),select:e([]),deselect:e([])}),p=function(){n.trigger.maximize(k.alternate)},q=function(){n.trigger.restore(k.alternate)},r=function(a){m?a.select():a.deselect()},s=function(){n.trigger.analytics("fullscreen_"+(m?"off":"on"));g.focus();(m?q:p)()},t=function(b,c){var e=d.key(m?"action.toggle.fullscreen":"action.fullscreen");return a.get(e,c)};h.events.fullscreen.bind(s);h=b.ui({"fullscreen.general":function(){return{toggle:!0,value:"fullscreen",textkey:d.key("action.fullscreen"),
tooltip:t,action:s,updateGeneral:r,icon:!0,shortcut:!0,selected:m}}},c.identity);var u=b.actions({maximize:p,restore:q});return{ui:h,actions:u,select:function(){m=!0},deselect:function(){m=!1},destroy:c.noop,events:n.registry}}});l("vz",["58","b","s","2u","66"],function(c,d,b,a,e){var f=a.immutable("ch","offset"),g=function(a,b){return f(a.charAt(b),b)};return{previous:function(a,d){for(var e=d.getOr(a.length)-1;0<=e;e--)if(a.charAt(e)!==c.zeroWidth())return b.some(g(a,e));return b.none()},next:function(a,
d){for(var e=d.getOr(0)+1;e<a.length;e++)if(a.charAt(e)!==c.zeroWidth())return b.some(g(a,e));return b.none()},rfind:function(a,c){c.lastIndex=-1;var e=d.reverse(a).join(""),f=e.match(c);return void 0!==f&&null!==f&&0<=f.index?b.some(e.length-1-f.index):b.none()},lfind:function(a,c){c.lastIndex=-1;var d=a.match(c);return void 0!==d&&null!==d&&0<=d.index?b.some(d.index):b.none()}}});l("w0","7 s ex lw ij o3 lx 4n".split(" "),function(c,d,b,a,e,f,g,h){var k=e.walkers().left(),m=e.walkers().right(),n=
h.generate([{abort:[]},{kontinue:[]},{finish:["info"]}]),p=h.generate([{aborted:[]},{edge:["element"]},{success:["info"]}]),q=function(a,b){return g.isEmptyTag(a,b)||a.property().isBoundary(b)},r=function(a,b,c,f,g,h,k){var m=function(){return k.fold(p.aborted,p.edge)},s=function(f){return e.walk(a,b,c,h).fold(m,function(b){return r(a,b.item(),b.mode(),d.none(),g,h,f)})};if(q(a,b))return m();if(a.property().isText(b)){var t=a.property().getText(b);return g(a,n,b,t,f).fold(m,function(){return s(d.some(b))},
p.success)}return s(k)},s=function(c,e,g,h){g=a.toLeaf(c,e,g);return c.property().isText(e)?d.none():f.left(c,g.element(),c.property().isText,h).map(function(a){return b.point(a,c.property().getText(a).length)})},t=function(c,e,g,h){g=a.toLeaf(c,e,g);return c.property().isText(e)?d.none():f.right(c,g.element(),c.property().isText,h).map(function(a){return b.point(a,0)})},u=function(a,d,e){var f=c.curry(q,a);return s(a,d,e,f).orThunk(function(){return t(a,d,e,f)}).getOr(b.point(d,e))};return{repeatLeft:function(a,
b,c,f){b=u(a,b,c);return r(a,b.element(),e.sidestep,d.some(b.offset()),f,k,d.none())},repeatRight:function(a,b,c,f){b=u(a,b,c);return r(a,b.element(),e.sidestep,d.some(b.offset()),f,m,d.none())}}});l("nv","7 s ex ij vz w0 53".split(" "),function(c,d,b,a,e,f,g){var h=g.exactly(["regex","attempt"]),k=function(a,b,c,d){return f.repeatLeft(a,b,c,d)},m=function(a,b,c,d){return f.repeatRight(a,b,c,d)},n=function(e,f,g){var h=c.constant(!1);if(!e.property().isText(f))return d.none();var k=e.property().getText(f);
return g<=k.length?d.some(b.point(f,g)):a.seekRight(e,f,e.property().isText,h).bind(function(a){return n(e,a,g-k.length)})};return{previousChar:function(a,b){return e.previous(a,b)},nextChar:function(a,b){return e.next(a,b)},repeatLeft:k,repeatRight:m,expandLeft:function(a,b,c,d){var f=h(d);return k(a,b,c,function(a,b,c,d,g){a=g.getOr(d.length);return e.rfind(d.substring(0,a),f.regex()).fold(function(){return b.kontinue()},function(a){return f.attempt(b,c,d,a)})})},expandRight:function(a,b,c,d){var f=
h(d);return m(a,b,c,function(a,b,c,d,g){var h=g.getOr(0);return e.lfind(d.substring(h),f.regex()).fold(function(){return b.kontinue()},function(a){return f.attempt(b,c,d,h+a)})})},scanRight:n}});l("ik",["e7","nv"],function(c,d){var b=c();return{previousChar:function(a,b){return d.previousChar(a,b)},nextChar:function(a,b){return d.nextChar(a,b)},repeatLeft:function(a,c,f){return d.repeatLeft(b,a,c,f)},repeatRight:function(a,c,f){return d.repeatRight(b,a,c,f)},expandLeft:function(a,c,f){return d.expandLeft(b,
a,c,f)},expandRight:function(a,c,f){return d.expandRight(b,a,c,f)},scanRight:function(a,c){return d.scanRight(b,a,c)}}});l("fk","7v 7 s ex j1 6l ik 2u 1b 21 2a 66".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=h.immutable("before","after"),r=function(a,b,c,d,e){return y(c).fold(function(){var c=B(a,b,d);return q(c,e)},function(f){var g=C(c,f);return g.length>a?q(d,e):z(b).fold(function(){var b=D(a-g.length,f,e+g);return q(d,b)},function(c){var h=C(c,b);return h.length>a-g.length?q(d,e+g):r(a-
g.length-h.length,c,f,h+d,e+g)})})};h=function(b,c,d,e){return b.finish(a.point(c,e))};var s={regex:function(){return new p(f.wordchar(),"i")},attempt:h},t={regex:function(){return new p(f.wordbreak(),"i")},attempt:h},u=function(a,b){return a.offset()===b.offset()&&k.eq(a.element(),b.element())},l=function(b){return a.point(b,m.value(b).length)},w=function(b){return a.point(b,0)},x=function(a,c,d){var e=function(c){c=d(c);return u(a,c)?b.none():b.some(c)};return c(a.element(),a.offset(),s).fold(b.none,
e,function(a){return c(a.element(),a.offset(),t).fold(b.none,e,function(a){return b.some(a)})})},y=function(a){return x(a,g.expandRight,l)},z=function(a){return x(a,g.expandLeft,w)},A=function(a,b,c,e,f,g){return a(c).fold(d.constant(e),function(d){var h=f(c,d);return h.length+e.length>b||0===h.length?e:A(a,b,d,g(e,h),f,g)})},D=function(a,b,c){return A(y,a,b,c,C,function(a,b){return a+b})},B=function(a,b,c){return A(z,a,b,c,function(a,b){return C(b,a)},function(a,b){return b+a})},C=function(a,b){var d=
n.defaultView(a.element()).dom();return c.stringAt(d,a.element(),a.offset(),b.element(),b.offset())};return{beforeAfter:q,anchorText:function(a,b){var c=e.freefallLtr(b);return y(c).map(function(b){var d=C(c,b);return d+D(a-d.length,b,"")}).getOr("")},flankingText:function(a,b){if(0===a)return q("","");var c=e.freefallLtr(b),d=e.freefallRtl(b);return r(a,c,d,"","")},extendRightAndLeft:r,extendWordsSearch:A,extendWordsRight:D,extendWordsLeft:B,wordSearch:x,wordLeft:z,wordRight:y,pointEq:u,boundaryPointRight:l,
boundaryPointLeft:w,textBetweenPoints:C,wordSeeker:s,wordBreakSeeker:t}});l("a1","b ds s fk 7c f7 2u 1a 1b l fl 31 m 83 2a 1s".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t){var u=function(a,b){try{return a()}catch(c){if(12===c.code)return b();throw c;}},l=function(a){return p.closest(a,"a[href]")},w=function(a,b){return l(a).bind(function(a){return l(b).filter(function(b){return k.eq(a,b)})})},x=g.immutable("element","innerText","before","after"),y=function(a){return q.is(a,"a[href]")?[a]:
q.all("a[href]",a)};return{contentLink:function(a){return a.getSelection().bind(function(a){return e.detect(a).fold(function(){return w(a.startContainer(),a.endContainer())},function(a){return b.some(a.image()).bind(l)})})},sharedLink:w,sharedLinkOrClosest:function(a,b,c){var e=d.firstCursor(a).getOr(a);a=d.lastCursor(b).getOr(b);return w(e,a).orThunk(function(){return p.closest(e,"a[href]",c)})},findLinkTargets:function(a){return q.all("h1,h2,h3,h4,h5,h6,div[id],p[id],span[id],a[id],a[name]",a)},
linkTargetText:function(b,c){var d=r.get(c).length,e=n.deep(c),d=a.anchorText(d,e);if(f.isBlock(c))return x(c,d,"","");e=a.flankingText(t.max(0,b-d.length),c);return x(c,d,e.before(),e.after())},linkTargetFastText:function(a,b){var c=r.get(b),c=50<c.length?c.substr(0,50):c;return x(b,c,"","")},all:y,many:function(a){return c.bind(a,y)},hrefUrl:function(a,b){return u(function(){return q.all('a[href="'+b+'"]',a)},function(){var d=y(a);return c.filter(d,function(a){return h.get(a,"href")===b})})},anchorTarget:function(a,
d){return u(function(){return q.one("#"+d+',a[name="'+d+'"]',a)},function(){var e=s.owner(a).dom();return b.from(e.getElementById(d)).map(m.fromDom).orThunk(function(){var e=q.all("[name]",a);return b.from(c.find(e,function(a){return h.get(a,"id")===d||h.get(a,"name")===d}))})})}}});l("8d","b 7 s a1 55 46 n".split(" "),function(c,d,b,a,e,f,g){return function(){var h={inputLinks:"insertLink"},k=f.create({internal:e(["command","data"])}),m=function(a,d){b.from(h[a]).fold(function(){throw new g("invalid internal event:",
a);},function(a){c.each(d,function(b){k.trigger.internal(a,b)})})};return{input:function(b){b=a.many(b);m("inputLinks",b)},destroy:d.noop,events:k.registry}}});l("fm",["nw","3u","q"],function(c,d,b){return function(a,b){var f=c(),g=d.bind(b,"keydown",f.keydown),h=d.bind(b,"keypress",f.keypress),k=function(a){f.keydown(a.original())},m=function(a){f.keypress(a.original())};a.events.keydown.bind(k);a.events.keypress.bind(m);return{off:f.off,on:f.on,swallowShortcuts:f.swallowShortcuts,yieldShortcuts:f.yieldShortcuts,
swallowChars:f.swallowChars,yieldChars:f.yieldChars,swallowKeys:f.swallowKeys,yieldKeys:f.yieldKeys,destroy:function(){g.unbind();h.unbind();a.events.keydown.unbind(k);a.events.keypress.unbind(m)},events:f.events}}});l("fn",["nw"],function(c){return function(d){var b=c(),a=function(a){b.keydown(a.original())},e=function(a){b.keypress(a.original())};d.events.keydown.bind(a);d.events.keypress.bind(e);return{off:b.off,on:b.on,swallowShortcuts:b.swallowShortcuts,yieldShortcuts:b.yieldShortcuts,swallowChars:b.swallowChars,
yieldChars:b.yieldChars,swallowKeys:b.swallowKeys,yieldKeys:b.yieldKeys,events:b.events,destroy:function(){d.events.keydown.unbind(a);d.events.keypress.unbind(e)}}}});l("fo",["nw","3u"],function(c,d){return function(b){var a=c(),e=d.bind(b,"keydown",a.keydown),f=d.bind(b,"keypress",a.keypress);return{off:a.off,on:a.on,swallowShortcuts:a.swallowShortcuts,yieldShortcuts:a.yieldShortcuts,swallowChars:a.swallowChars,yieldChars:a.yieldChars,swallowKeys:a.swallowKeys,yieldKeys:a.yieldKeys,destroy:function(){e.unbind();
f.unbind()},events:a.events}}});l("8e",["7","fm","fn","fo"],function(c,d,b,a){return function(e,f){return{all:function(){return d(e,f.element())},container:function(b){return a(b)},editor:function(){return b(e)},destroy:c.noop}}});l("fq",["jl","ex","ik","21"],function(c,d,b,a){var e=function(c,e){var h=d.point(c,e);return a.isText(c)?b.scanRight(c,e).getOr(h):h};return{handle:function(a){var b=e(a.startContainer(),a.startOffset());a=e(a.endContainer(),a.endOffset());return c(b.element(),b.offset(),
a.element(),a.offset())}}});l("12z",["80","4n","21","2a"],function(c,d,b,a){var e=d.generate([{onText:["element","offset"]},{firstText:["parent","child","offset"]},{beforeText:["parent","child","offset"]},{afterText:["parent","child"," offset"]},{lastText:["parent","child","offset"]},{onElement:["element","offset"]}]);return{detect:function(d,g){if(b.isText(d))return e.onText(d,g);var h=a.children(d);return 0===h.length?e.onElement(d,g):0===g&&b.isText(h[0])?(0,e.firstText)(d,h[0],0):g===h.length&&
b.isText(h[h.length-1])?(h=h[g-1],(0,e.lastText)(d,h,c.getEnd(h))):g<h.length&&b.isText(h[g])?(0,e.beforeText)(d,h[g],0):0<g&&b.isText(h[g-1])?(h=h[g],(0,e.afterText)(d,h,c.getEnd(h))):e.onElement(d,g)},cata:function(a,b,c,d,e,n,p){return a.fold(b,c,d,e,n,p)}}});l("14y",["7","s"],function(c,d){return function(b){return{backup:c.identity,restore:c.constant(d.none()),element:c.constant(b)}}});l("14z",["2u"],function(c){return c.immutable("startContainer","startOffset","endContainer","endOffset")});
l("133",["4g"],function(c){return{resolve:c.create("ephox-newt").resolve}});l("106",["133","1y","2n","l"],function(c,d,b,a){var e=c.resolve("cursor-marker");return{generator:function(c){var g=null;return{getOrInit:function(){var h;null===g?(h=a.fromTag("span",c.dom()),d.add(h,e),b.set(h,"display","none")):h=g;return g=h}}},isCursor:function(a){return d.has(a,e)}}});l("130","b 14y 14z 106 7 s 1b 2o 2q 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(a,c){return{element:e.constant(c),backup:e.identity,
restore:function(){var c=b(a,0,a,0);return f.some(c)}}},p=function(b){b=m.children(b);return c.filter(b,e.not(a.isCursor))},q=function(a,c){return{element:e.constant(c),backup:e.identity,restore:function(){var c=p(a).length,c=b(a,c,a,c);return f.some(c)}}},r=function(a){return m.parent(a).bind(function(d){var e=p(d),e=c.findIndex(e,function(b){return g.eq(a,b)});return-1<e?f.some(b(d,e,d,e)):f.none()})},s=function(a,c){return{backup:function(){h.before(a,c)},restore:function(){var a=m.nextSibling(c);
k.remove(c);return a.map(function(a){return r(a).getOrThunk(function(){return b(a,0,a,0)})})},element:e.constant(c)}};return{place:function(a,b,c){var e=m.children(a);return 0===e.length?n(a,c):e.length===b?q(a,c):0===b?n(a,c):b>e.length?d(c):s(e[b],c)}}});l("131",["14z","106","7","s"],function(c,d,b,a){var e=function(a,b){return b().fold(function(){return d.generator(a).getOrInit()},function(a){return a.element()})},f=function(b){b=b();b.backup();return a.some(b)},g=function(a,b){var d=a.or(b),e=
b.or(a);return d.bind(function(a){return e.map(function(b){return c(a.startContainer(),a.startOffset(),b.startContainer(),b.startOffset())})})};return{ltr:function(c,d,m){var n=a.none(),p=a.none();return{backup:function(){p=f(d);n=f(m)},restore:function(){return n.bind(function(a){return p.bind(function(b){var c=a.restore();b=b.restore();return g(c,b)})})},element:b.curry(e,c,function(){return p})}},rtl:function(c,d,m){var n=a.none(),p=a.none();return{backup:function(){n=f(m);p=f(d)},restore:function(){return p.bind(function(a){return n.bind(function(b){var c=
a.restore();b=b.restore();return g(b,c)})})},element:b.curry(e,c,function(){return n})}}}});l("132","14y 14z 80 7 j8 hk 2o 2q".split(" "),function(c,d,b,a,e,f,g,h){var k=function(b,c,f){return{backup:function(){g.before(c,f)},restore:function(){var a=e.after(f,b).map(function(a){return d(a,0,a,0)});h.remove(f);return a},element:a.constant(f)}},m=function(c,f,k){return{backup:function(){g.after(f,k)},restore:function(){var a=e.before(k,c).map(function(a){var c=b.getEnd(a);return d(a,c,a,c)});h.remove(k);
return a},element:a.constant(k)}};return{place:function(a,b,d,e){b=f.split(b,d);return f.position(b).fold(function(){return c(e)},function(b){return k(a,b,e)},function(b,c){return m(a,b,e)},function(b){return m(a,b,e)})}}});l("ps",["2u"],function(c){return c.immutable("result","cursor")});l("105","12z 130 131 132 ps 106 dl 2a".split(" "),function(c,d,b,a,e,f,g,h){var k=function(b,e,f){var g=function(c,d,e){return a.place(b,d,e,f)};return c.cata(e,function(c,d){return a.place(b,c,d,f)},g,g,g,g,function(a,
b){return d.place(a,b,f)})},m=function(a,b,d,e){e=e.getOrInit();b=c.detect(b,d);return k(a,b,e)},n=function(a,b){a.backup();var c=b(a.element());return e(c,a.restore())};return{inspect:m,runOnRange:function(a,c,d,e,k,l){var v=h.owner(c),w=(g.after(c,d,e,k)?b.rtl:b.ltr)(v,function(){return m(a,e,k,f.generator(v))},function(){return m(a,c,d,f.generator(v))});return n(w,l)},runOnCursor:n}});l("w6",["105","106","1b","2a"],function(c,d,b,a){var e=function(a,b,d,e,f,p){return c.runOnRange(a,b,f>d?d:f,b,
f>d?f:d,p)},f=c.runOnRange;return{point:function(b,e,f,m){var n=a.owner(e),n=d.generator(n);b=c.inspect(b,e,f,n);return c.runOnCursor(b,m)},range:function(a,c,d){return(b.eq(c.startContainer(),c.endContainer())?e:f)(a,c.startContainer(),c.startOffset(),c.endContainer(),c.endOffset(),d)}}});l("nx","w6 ps s 2m 1y 2y 2a".split(" "),function(c,d,b,a,e,f,g){var h=function(a,c){return function(a,e){var f=e(c);return d(f,b.none())}},k=function(a,b){return function(d,e){return c.point(a,b.startContainer(),
b.startOffset(),n(d,e))}},m=function(a,b){return function(d,e){return c.range(a,b,n(d,e))}},n=function(a,b){return function(c){e.add(c,a);return b(c)}};return{diagnose:function(b,c){var d=c.startContainer(),e=c.endContainer(),n=g.owner(d);return a.inBody(d)&&a.inBody(e)&&f.active(n).forall(a.inBody)?c.collapsed()?k(b,c):m(b,c):h(b,c.startContainer())}}});l("fr",["7","nx","33","ci","2m"],function(c,d,b,a,e){return function(f,g){var h=b.resolve("ops-eph-cursor");f.add(f.internal(),h,a.remove);f.add(f.output(),
h,a.remove);var k=function(a){var b=function(b){b=d.diagnose(g.isRoot,b)(h,a);b.cursor().each(function(a){e.inBody(a.startContainer())&&e.inBody(a.endContainer())&&g.getSelection().each(function(b){g.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())})});return b.result()};return function(){return g.getSelection().fold(a,b)}};return{destroy:c.noop,run:function(a){return k(a)()}}}});l("8f","fp fq fr 7c 1b 21".split(" "),function(c,d,b,a,e,f){return function(g,h){var k=
b(g,h),m=function(a,b){var c=a(),f=d.handle(b);h.getSelection().forall(function(a){return!e.eq(a.startContainer(),f.startContainer())||!e.eq(a.endContainer(),f.endContainer())||a.startOffset()!==f.startOffset()||a.endOffset()!==f.endOffset()})&&h.setSelection(f.startContainer(),f.startOffset(),f.endContainer(),f.endOffset());return c};return{destroy:function(){},run:k.run,preserve:function(a){h.getSelection().each(function(b){var d=c.descend(b.startContainer(),b.startOffset());b=c.descend(b.endContainer(),
b.endOffset());a(d.element(),b.element());h.setSelection(d.element(),d.offset(),b.element(),b.offset())})},lightweightWith:function(b,c){return f.isText(c.startContainer())&&f.isText(c.endContainer())||a.detect(c).isSome()?m(b,c):k.run(b)},adapt:function(a){h.getSelection().each(function(b){k.run(function(){a(b.startContainer(),b.endContainer())})})},pure:function(a){h.getSelection().each(function(b){a(b.startContainer(),b.endContainer())})},atomic:function(a){return k.run(a)}}}});l("ny",["7","75",
"6v","55","46"],function(c,d,b,a,e){return function(){var f=e.create({back:a([]),abort:a([])});return{ui:b.ui({"back.general":{toggle:!1,value:"mobile-back",textkey:d.key("toolbar.backbutton"),action:function(){f.trigger.back()},updateGeneral:c.noop,icon:!0,label:!0}}),events:f.registry,destroy:c.noop}}});l("107",["7","p"],function(c,d){return function(b,a){return d.error({small:c.constant(b),big:c.constant(a)})}});l("108",["b","p"],function(c,d){return{fold:function(b,a){return c.foldr(b,function(b,
c){return b.bind(function(b){return a(c).map(function(a){return[a].concat(b)})})},d.value([]))}}});l("109",["a","1o","107","108","p"],function(c,d,b,a,e){var f=function(a,c){var f=c.groups(),g=f[a];return void 0===g?b("Unknown group: "+a,["No binding for group: "+a+". Known groups: "+d.keys(f)]):e.value(g)},g=function(a,b){var d=c.isArray(a)?{label:"",items:a}:a;return e.value(d)},h=function(b,c,d,e,f){return a.fold(c,function(a){return f.item(a,d,e,f)}).map(function(a){return{category:b,items:a}})};
return{build:function(a,b,d,e){return(c.isString(a)?f:g)(a,b).bind(function(a){return h(a.label,a.items,b,d,e)})}}});l("10a",["a","1o","107","p"],function(c,d,b,a){var e=function(c,e,f,g){e=e.commands();f=e[c];return void 0===f?b("Unknown command: "+c,["No binding for command: "+c+". Known commands: "+d.keys(e)]):a.value(f)},f=function(a,b,c,d){return(void 0===a.items?g:d.menu)(a,b,c,d)},g=function(a,c,d,e){return void 0===d?b("You need a custom action factory to use this",[]):d(a)};return{build:function(a,
b,d,g){return(c.isString(a)?e:f)(a,b,d,g)}}});l("10b","a b 107 108 p vl".split(" "),function(c,d,b,a,e,f){var g=function(a){return d.forall(a,c.isArray)?e.value(a):d.exists(a,c.isArray)?b("Menu items must be a single array or an array where every element is an array",["Menu items must be a single array or an array where every element is an array.","Contents of menu: "+f.stringify(a)]):e.value([a])};return{build:function(c,d,e,n){if(void 0===c.label||void 0===c.items||0===c.items.length)return b("Invalid toolbar configuration for menu",
["Invalid menu. Must be an object containing label and items.","Contents of menu: "+f.stringify(c)]);var p=c.menuLabel?c.menuLabel:c.label;return g(c.items).bind(function(b){return a.fold(b,function(a){return n.group(a,d,e,n)})}).map(function(a){return{name:c.id,textkey:c.label,menuTextkey:p,type:"submenu",contentFocus:!1,enabled:!0,icon:c.icon,commands:a}})}}});l("w7","a b 1o 107 108 109 10a 10b p vl".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=b.map({group:f.build,item:g.build,menu:h.build},
function(a,b){return function(){if(4!==arguments.length)throw"Incorrect usage of builder ["+b+"]. Only given: "+arguments.length;return a.apply(null,arguments)}}),p=function(b){if(void 0===b.items)return a("Invalid group, no items specified",["Invalid group, no items specified: "+b.label]);var e=b.items;return c.isArray(e)?(b=d.bind(e,function(a,b){return c.isString(a)||c.isArray(a)||void 0!==a.label&&c.isArray(a.items)?[]:["Invalid group at index: "+b+". Must be either a string, an array or an object containing label and items. Was: "+
m.stringify(a)]}),0===b.length?k.value(e):a("Invalid toolbar configuration for groups",b)):a("Invalid toolbar, items is not an array",["Invalid toolbar, items is not an array: "+m.stringify(b)])};return{build:function(a,b,c){return p(a).bind(function(a){return e.fold(a,function(a){return n.group(a,b,c,n)})})}}});l("wb",["b","7","ig"],function(c,d,b){var a=function(){return b.isSmallTouch()},e=function(a,b){return{feature:a.feature,command:a.command,type:"pre_flatmenu",items:b}};return{shouldFlatten:a,
never:d.constant("never_flatten"),streamline:function(a){var b=function(a){return c.bind(a,function(a){return"never_flatten"===a.flatten?[a]:"submenu"===a.type?c.bind(a.commands,function(a){return b(a.items)}):"pre_flatmenu"===a.type?c.map(a.items,function(b){return{feature:a.feature,type:"general",command:b}}):[a]})};return c.map(a,function(a){var c=b(a.items);return{category:a.category,items:c}})},setup:function(c,g){var h=e(c,g);return b.choice([{predicate:a,value:d.constant(h)}],c)},make:e}});
l("w8",["7","s","75","wb","ig"],function(c,d,b,a,e){var f=function(a,b){return{predicate:a,value:c.constant(b)}};return function(c,h,k,m,n){var p=function(a,b){return a()?b:{feature:d.none()}};k=p(function(){return!c&&e.isLargeDesktop()},{feature:k.ui(),command:"fullscreen",type:"general",unsupported:"Fullscreen is not supported in inline mode"});n=e.choice([f(e.isLargeDesktop,{feature:m.fileupload().ui(),command:"fileupload",type:"general"}),f(e.isLargeTouch,{feature:m.fileupload().ui(),command:"fileupload",
type:"menu"})],a.make({feature:m.fileupload().ui(),command:"fileupload"},n.allowLocalImages?["camera"]:[]));var q=p(e.isLargeDesktop,{feature:m.accessibility().ui(),command:"a11ycheck",type:"general"}),p=p(e.isLarge,{feature:m.specialchar().ui(),command:"specialchar",type:"general"}),r=e.choice([f(e.isLarge,{feature:m.blocktag().ui(),command:"bullist",type:"split-widget"})],{feature:m.blocktag().ui(),command:"bullist",type:"general"}),s=e.choice([f(e.isLarge,{feature:m.blocktag().ui(),command:"numlist",
type:"split-widget"})],{feature:m.blocktag().ui(),command:"numlist",type:"general"}),t={feature:m.formatting().ui(),command:"superscript",type:"general"},l={feature:m.formatting().ui(),command:"subscript",type:"general"},v={feature:m.formatting().ui(),command:"strikethrough",type:"general"},w={feature:m.font().ui(),command:"fontface",type:"dropdown"},x=e.choice([f(e.isTouch,{feature:m.font().ui(),command:"fontsize",type:"general"})],{feature:m.font().ui(),command:"fontsize",type:"inline-widget"}),
y={feature:m.font().ui(),command:"fontcolor",type:"widget"},z={feature:m.spelling().hasAutocorrect()?m.macros().ui():d.none(),command:"autocorrect",type:"general"},A={feature:m.spelling().ui(),command:"spelling",type:m.spelling().hasDropdown()?"dropdown":"general"},D={feature:m.macros().ui(),command:"capitalisation",type:"general"},B={feature:m.help().ui(),command:"help",type:"general"},C={feature:m.wordcount().ui(),command:"wordcount",type:"general"};return{link:{feature:m.link().ui(),command:"link",
type:"general"},wordcount:C,media:{feature:m.media().ui(),command:"media",type:"general"},hr:{feature:m.horizontalrule().ui(),command:"horizontalrule",type:"general"},specialchar:p,fileupload:n,table:{feature:m.table().ui(),command:"table",type:"widget"},undo:{feature:h.ui(),command:"undo",type:"general"},redo:{feature:h.ui(),command:"redo",type:"general"},styles:{feature:m.blocktag().ui(),command:"blocktag",type:"dropdown"},language:{feature:m.parlance().ui(),command:"parlance",type:"dropdown"},
ltrdir:{feature:m.directionality().ui(),command:"ltrdir",type:"general"},rtldir:{feature:m.directionality().ui(),command:"rtldir",type:"general"},bold:{feature:m.formatting().ui(),command:"bold",type:"general"},italic:{feature:m.formatting().ui(),command:"italic",type:"general"},underline:{feature:m.formatting().ui(),command:"underline",type:"general"},strikethrough:v,superscript:t,subscript:l,ul:r,ol:s,removeformat:{feature:m.formatting().ui(),command:"removeformat",type:"general"},alignment:{feature:m.alignindent().ui(),
command:"alignment",type:"dropdown"},outdent:{feature:m.alignindent().ui(),command:"outdent",type:"general"},indent:{feature:m.alignindent().ui(),command:"indent",type:"general"},blockquote:{feature:m.alignindent().ui(),command:"blockquote",type:"general"},"font-menu":{name:"font",textkey:b.key("font.menu-button"),menuTextkey:b.key("font.menu"),type:"submenu",contentFocus:!0,commands:[{category:"Font-menu",items:[w,x,y,t,l,v]}]},"font-face":w,"font-size":x,"font-color":y,fullscreen:k,find:{feature:m.findreplace().ui(),
command:"find",type:"general"},accessibility:q,usersettings:{name:"usersettings",textkey:b.key("cog.menu-button"),menuTextkey:b.key("cog.menu"),type:"submenu",flatten:a.never(),contentFocus:!0,commands:[{category:"a",items:[C]},{category:"b",items:[A,z,D]},{caetgory:"",items:[B]}]}}}});l("w9","a 1o 107 vl 7 s p kd 75".split(" "),function(c,d,b,a,e,f,g,h,k){return function(){return{make:function(m){var n=function(c){return b(k.translate("errors.toolbar.missing.custom.string",c),['The required property "'+
c+'" for a custom command must be a string. It was: '+a.stringify(m[c]),"Properties specified in custom command: "+d.keys(m).join(", "),"Definition specified for custom command: "+a.stringify(m)])};if(!c.isString(m.id))return n("id");if(!c.isString(m.text))return n("text");n={};n[m.id]=e.constant({general:function(){return{toggle:!1,value:h.cssSanitise(m.id),textkey:k.raw(m.text),action:m.action,updateGeneral:e.identity,icon:void 0!==m.icon?m.icon:!1}}});return g.value({feature:f.some(n),command:m.id,
type:"general"})}}}});l("wa",["75"],function(c){return function(){var d={id:"insert",label:c.key("insert.menu-button"),menuLabel:c.key("insert.menu"),items:[["link","fileupload","media","table"],["specialchar","hr"]]};return{undo:{label:c.key("category.undo"),items:["undo","redo"]},insert:{label:c.key("category.insert"),items:[d]},style:{label:c.key("category.style"),items:["styles"]},language:{label:c.key("category.language"),items:["language","ltrdir","rtldir"]},emphasis:{label:c.key("category.emphasis"),
items:["bold","italic","underline"]},align:{label:c.key("category.align"),items:["alignment"]},listindent:{label:c.key("category.listindent"),items:["ul","ol","outdent","indent","blockquote"]},format:{label:c.key("category.format"),items:["font-menu","removeformat"]},tools:{label:c.key("category.tools"),items:["find","accessibility","fullscreen","usersettings"]},"table-tools":{label:c.key("category.table"),items:["table-tools"]},"image-tools":{label:c.key("category.image"),items:["image-tools","crop-tools"]}}}});
l("nz","w7 c 6 7 w8 w9 wa wb".split(" "),function(c,d,b,a,e,f,g,h){var k=f(),m=function(a,b){return a.bind(function(a){return b.map(function(b){return a.concat(b)})})};return{config:function(f,p,q){return function(r,s,t,l){r=e(r,s,t,l,q);r=b.deepMerge(r,p);l={"table-tools":{feature:l.table().ui(),command:"cell",type:"palette"},"image-tools":{feature:l.imageEdit().ui(),command:"edit",type:"palette"},"crop-tools":{feature:l.imageEdit().ui(),command:"crop",type:"palette"}};r={forItems:a.constant({commands:a.constant(r),
groups:g}),forContextual:a.constant({commands:a.constant(l),groups:g})};l=c.build({items:f.items},r.forItems(),k.make);r=c.build({items:f.contextual},r.forContextual(),k.make);s=d.detect().deviceType.isTouch()?h.streamline:a.identity;return m(l,r).map(s)}}}});l("134","b 7 l 2y 21 3t".split(" "),function(c,d,b,a,e,f){var g=function(a){return function(a){f(function(){a()},0)}};return{resume:function(f){f.focus();var k=b.fromDom(f.document.body);(a.active().exists(function(a){return c.contains(["input",
"textarea"],e.name(a))})?g(k):d.apply)(function(){a.active().each(a.blur);a.focus(k)})}}});l("135",["1a","1u","dp"],function(c,d,b){return{safeParse:function(a,e){var f=b(c.get(a,e),10);return d(f)?0:f}}});l("136",["b","7v","80","l","2a"],function(c,d,b,a,e){var f=function(a){return{left:a.left,top:a.top,width:2,height:a.height}},g=function(g){if(g.collapsed){var k=a.fromDom(g.startContainer);return e.parent(k).bind(function(a){return d.rectangleAt(g.startContainer.ownerDocument.defaultView,k,g.startOffset,
a,b.getEnd(a)).map(f).map(c.pure)}).getOr([])}return g.getClientRects()};return{getRectangles:function(a){a=a.getSelection();return void 0!==a&&0<a.rangeCount?g(a.getRangeAt(0)):[]}}});l("137",["4g"],function(c){return{resolve:c.create("ephox-nomad").resolve}});l("10c","134 135 136 137 7 s 1a 3u l 1s 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p="data-"+a.resolve("last-outer-height"),q=function(a){return{top:e.constant(a.top),bottom:e.constant(a.top+a.height)}},r=function(a){a=b.getRectangles(a);
return 0<a.length?f.some(a[0]).map(q):f.none()},s=function(a){a=d.safeParse(a,p);var b=n.innerHeight;return a>b?f.some(a-b):f.none()};return{setup:function(a,b){var d=k.fromDom(b.document.body),e=h.bind(k.fromDom(a),"resize",function(){s(d).each(function(a){r(b).each(function(c){c=c.top()>b.innerHeight||c.bottom()>b.innerHeight?m.min(a,c.bottom()-b.innerHeight+50):0;0!==c&&b.scrollTo(b.pageXOffset,b.pageYOffset+c)})});g.set(d,p,n.innerHeight)});g.set(d,p,n.innerHeight);return{toEditing:function(){c.resume(b)},
destroy:function(){e.unbind()}}}}});l("ok",["2i"],function(c){return function(d){return new (c.getOrDie("Event"))(d)}});l("gj",["ok"],function(c){var d=function(b){var a=c("Event");a.initEvent(b,!0,!0);return a};return{event:function(b,a){var c=d(a);b.target().dom().dispatchEvent(c)},target:function(b,a){var c=d(a);b.dom().dispatchEvent(c)}}});l("hg",["gj"],function(c){return function(d){return{closeMenus:function(b){b=b?b.target():d;c.target(b,"mousedown")}}}});l("10d","7 s 55 46 3u l 1s 2s 2t 36".split(" "),
function(c,d,b,a,e,f,g,h,k,m){var n=function(){var a=m.matchMedia("(orientation: portrait)").matches;return{isPortrait:c.constant(a)}};return{get:n,onChange:function(){var c=a.create({ready:b(["orientation"]),change:b(["orientation"])}),g=f.fromDom(m),r=null,s=e.bind(g,"orientationchange",function(){h(r);var a=n();c.trigger.change(a);t(function(){c.trigger.ready(a)})}),t=function(a){h(r);var b=m.innerHeight,c=0;r=k(function(){b!==m.innerHeight?(h(r),a(d.some(m.innerHeight))):20<c&&(h(r),a(d.none()));
c++},50)};return{onAdjustment:t,events:c.registry,destroy:function(){s.unbind()}}}}});l("10e",["1a","l","2o","31"],function(c,d,b,a){return{tag:function(){var e=a.first("head").getOrDie(),f=a.first('meta[name="viewport"]').getOrThunk(function(){var a=d.fromTag("meta");c.set(a,"name","viewport");b.append(e,a);return a}),g=c.get(f,"content");return{maximize:function(){c.set(f,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){void 0!==g&&null!==
g&&0<g.length?c.set(f,"content",g):c.remove(f,"content")}}}}});l("10f",["7","3u"],function(c,d){return function(b){return function(a,e){var f=d.bind(b,"touchmove",a.move),g=d.bind(b,"touchend",a.drop);return{element:c.constant(b),start:c.noop,stop:c.noop,destroy:function(){f.unbind();g.unbind()}}}}});l("138","7 s 2n 31 2r 1s".split(" "),function(c,d,b,a,e,f){var g=function(a,b){var c=e.get(a);return f.floor(b/100*c)},h=function(b,c){return a.ancestor(c,"td,th").fold(function(){return g(b,98)},function(a){return g(a,
94)})},k=function(a,b,c){var d=b.dom().width;a=h(a,b);return f.max(0,f.min(a,d+c))},m=function(a,b,c){return b.dom().height+c};return{compare:function(a,b){var d=b.deltaX()-a.deltaX(),e=b.deltaY()-a.deltaY(),f=b.deltaDistance()-a.deltaDistance();return{deltaX:c.constant(d),deltaY:c.constant(e),deltaDistance:c.constant(f)}},extract:function(a){var b=a.raw().touches;if(2>b.length)return d.none();a=f.abs(b[0].clientX-b[1].clientX);var b=f.abs(b[0].clientY-b[1].clientY),e=f.sqrt(f.pow(a,2)+f.pow(b,2));
return d.some({deltaX:c.constant(a),deltaY:c.constant(b),deltaDistance:c.constant(e)})},resize:function(a,c,d){var g=b.getRaw(c,"height"),s=b.getRaw(c,"width"),t=0<d.deltaDistance()?1:-1,l=t*f.abs(d.deltaX()),v=t*f.abs(d.deltaY());d=k(a,c,l);t=m(a,c,v);l=f.abs(l)>f.abs(v);b.setAll(c,{height:l?"auto":t+"px",width:l?d+"px":"auto",transform:"translate3d(0, 0, 0)"});e.get(c)>h(a,c)&&(g.each(function(a){b.set(c,"height",a)}),s.each(function(a){b.set(c,"width",a)}))}}});l("10g","x8 in s 138 4m 2n 3u 21".split(" "),
function(c,d,b,a,e,f,g,h){return function(k,m,n,p){var q=e(b.none());n=c.mode({compare:a.compare,extract:a.extract,sink:n,mutate:function(b,c){q.get().each(function(b){a.resize(m,b,c)})}});var r=d.transform({},{mode:n}),s=g.bind(k,"touchstart",function(a){"img"===h.name(a.target())&&2===a.raw().touches.length&&(q.set(b.some(a.target())),r.on(),r.go(m))});r.events.stop.bind(function(){q.get().each(function(a){f.remove(a,"transform")});p()});return{destroy:function(){s.unbind();r.destroy()}}}});l("wc",
"b c 10c hg 10d 10e 7 s 73 10f 10g 1y 2n 3u l 2y q 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,l,v){var w=6<=d.detect().os.version.major;return function(d,y,z){var A=z.toolbar.element(),D=f.tag(),B=[],C=s.fromDom(l),F=a(A),E=null,G=k.api(),H=h.none(),I=function(){G.run(function(a){a.toEditing()})},K=function(){F.closeMenus()},J=function(){d.getSelection().each(function(a){a=a.collapsed()?"0px":"23px";q.set(A,"margin-top",a)})},M=function(a){q.set(A,"margin-top","0px")},O=function(){var a=
[r.bind(A,"touchmove",F.closeMenus)];B=d.doc().map(function(a){return y||!0===w?[]:[r.bind(a,"selectionchange",J),r.bind(C,"focusin",M)]}).getOr([]).concat(a)},N=function(){c.each(B,function(a){a.unbind()})};return{enter:function(){d.body().each(function(a){d.doc().each(function(c){d.win().each(function(f){t.focus(a);E=e.onChange();var k=m(c),k=n(c,a,k,g.noop);H=h.some(k);f=b.setup(v,f);G.set(f);d.events.toEditing.bind(I);E.events.change.bind(K)})})});p.add(A,"ephox-polish-mobile-show");z.toolbar.refresh();
D.maximize();O()},exit:function(){G.clear();d.events.toEditing.unbind(I);E.events.change.unbind(K);null!==E&&E.destroy();D.restore();N()},destroy:function(){H.each(function(a){a.destroy()});N()}}}});l("wd","b 85 4z 7 75 33 55 46 1y 2n 3u l 2o 2q 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){return function(){var s=p.fromTag("div");k.add(s,f.resolve("disabled-mask"));var l=!1,v=b.div();k.add(v,f.resolve("content-container"));var w=b.div();d.hidden(w,!0);k.add(w,f.resolve("tap-icon"));q.append(v,
w);var x=b.div();k.add(x,f.resolve("disclosure"));q.append(x,p.fromText(e.translate("taptoedit")));q.append(v,x);q.append(s,v);d.textButton(s,v);var y=h.create({fullscreen:g([])}),z=function(a){var b=s.dom().getClientRects()[0];return c.forall(a,function(a){return a.pageY>=b.top&&a.pageY<=b.top+b.height&&a.pageX>=b.left&&a.pageX<=b.left+b.width})},A=[n.bind(s,"touchmove",function(a){l=!0}),n.bind(s,"touchend",function(a){var b=a.raw().changedTouches;z(b)&&!l&&(a.kill(),y.trigger.fullscreen())}),n.bind(s,
"touchstart",function(a){l=!1}),n.bind(s,"click",function(a){a.kill();y.trigger.fullscreen()})];return{element:a.constant(s),events:y.registry,destroy:function(){c.each(A,function(a){a.unbind()});r.remove(w);r.remove(x);r.remove(v);r.remove(s)},show:function(){m.remove(s,"display")},hide:function(){m.set(s,"display","none")}}}});l("o0","cj 33 wc wd 1y 2y 2o".split(" "),function(c,d,b,a,e,f,g){return function(h,k,m,n,p,q){var r=q.element(),s=b(h,p.fillscreen,q),t=function(){s.enter();n.actions().maximize()},
l=function(){var b=a();g.append(q.element(),b.element());b.events.fullscreen.bind(function(a){n.actions().maximize()})};return{init:function(){q.socket(h);h.events.scrollToCursor.bind(function(){c.cursorIntoView(h)})},loaded:function(){var a=!0===p.fillscreen;(e.has(r,d.resolve("fullscreen-maximized"))||a?t:l)()},restoreEditor:function(){n.actions().restore();s.exit()},destroy:function(){h.body().each(f.blur)}}}});l("fs",["7","ny","nz","o0"],function(c,d,b,a){return function(e,f,g,h,k){var m=h.toolbar.items,
n=function(c){var n=a(e,f,g,k,h,c),r=d();c=b.config({items:[["back"]].concat(m),contextual:[]},{back:{feature:r.ui(),command:"back",type:"general"}},{allowLocalImages:h.allowLocalImages});r.events.back.bind(function(){n.restoreEditor()});return{init:n.init,loaded:n.loaded,config:c,destroy:function(){n.destroy();r.destroy()}}};return{tabbed:n,full:n,destroy:c.noop}}});l("ft",["7","nz","o0"],function(c,d,b){return function(a,e,f,g,h){var k=g.toolbar.items,m=function(c){var m=b(a,e,f,h,g,c);c=d.config({items:k,
contextual:[]},{},{allowLocalImages:g.allowLocalImages});return{init:m.init,loaded:m.loaded,config:c,destroy:function(){m.destroy()}}};return{tabbed:m,full:m,destroy:c.noop}}});l("fu",["7","cj","nz"],function(c,d,b){return function(a,e,f,g){e=function(e){return{init:function(){e.socket(a);a.events.scrollToCursor.bind(function(){d.cursorIntoView(a)});a.events.toEditing.bind(a.focus)},loaded:c.noop,config:b.config(g.toolbar,{},{allowLocalImages:g.allowLocalImages}),destroy:c.noop}};return{tabbed:e,
full:e,destroy:c.noop}}});l("10h",["b","1a","2n","4e"],function(c,d,b,a){var e=function(a){return a.body().map(function(a){a=b.get(a,"background-color");return void 0!==a&&""!==a?"background-color:"+a+"!important":"background-color:rgb(255,255,255)!important;"}).getOr("background-color:rgb(255,255,255)!important;")};return{clobberStyles:function(b,g){var h=function(a){return function(b){var c=d.get(b,"style"),c=void 0===c?"no-styles":c.trim();c!==a&&(d.set(b,"data-ephox-mobile-fullscreen-style",c),
d.set(b,"style",a))}},k=a.ancestors(b,"*"),m=c.bind(k,function(b){return a.siblings(b,"*")}),n=e(g);c.each(m,h("display:none!important;"));c.each(k,h("position:absolute!important;top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;"+n))},restoreStyles:function(){var b=a.all("[data-ephox-mobile-fullscreen-style]");c.each(b,function(a){var b=d.get(a,"data-ephox-mobile-fullscreen-style");"no-styles"!==b?d.set(a,
"style",b):d.remove(a,"style");d.remove(a,"data-ephox-mobile-fullscreen-style")})}}});l("we","10e 7 s 33 wd 10h 1y 2n q".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m,n){var p=c.tag(),q=b.none(),r=e();return{maximize:function(){q=b.some(k.body.scrollTop);h.set(r.element(),"display","none");g.add(m,a.resolve("fullscreen-maximized"));f.clobberStyles(m,n);p.maximize()},restore:function(){f.restoreStyles();g.remove(m,a.resolve("fullscreen-maximized"));p.restore();h.remove(r.element(),"display");
q=q.bind(function(a){k.body.scrollTop=a;return b.none()})},destroy:function(){r.destroy()},mask:d.constant(r)}}});l("139",["2n","l","2y","2o","2q"],function(c,d,b,a,e){return{input:function(f,g){var h=d.fromTag("input");c.setAll(h,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"});a.append(f,h);b.focus(h);g(h);e.remove(h)}}});l("h6",["2y","3t"],function(c,d){return{refreshInput:function(b){var a=b.dom().selectionStart,e=b.dom().selectionEnd,f=b.dom().selectionDirection;d(function(){b.dom().setSelectionRange(a,
e,f);c.focus(b)},50)},refresh:function(b){var a=b.getSelection();if(0<a.rangeCount){var c=a.getRangeAt(0);b=b.document.createRange();b.setStart(c.startContainer,c.startOffset);b.setEnd(c.endContainer,c.endOffset);a.removeAllRanges();a.addRange(b)}}}});l("13a",["h6","1b","l","2y"],function(c,d,b,a){return{resume:function(e,f){a.active().each(function(b){d.eq(b,f)||a.blur(b)});e.focus();a.focus(b.fromDom(e.document.body));c.refresh(e)}}});l("10i","b hg 139 13a 7 2m 3u 2y 21".split(" "),function(c,d,
b,a,e,f,g,h,k){return{stubborn:function(e,n,p,q,r){var s=d(r),t=function(){a.resume(e,p)},l=g.bind(n,"keydown",function(a){c.contains(["input","textarea"],k.name(a.target()))||(s.closeMenus(void 0),t())});return{toReading:function(){b.input(f.body(),h.blur)},toEditing:t,onToolbarTouch:function(a){},destroy:function(){l.unbind()}}},timid:function(b,c,d,f,g){return{toReading:function(){h.blur(d)},toEditing:function(){a.resume(b,d)},onToolbarTouch:function(){h.blur(d)},destroy:e.noop}}}});l("13b",["s",
"55","46","3u"],function(c,d,b,a){return{touch:function(e){var f=b.create({touchstart:d(["raw"]),touchend:d(["raw"])}),g=!1,h=c.none(),k=a.capture(e,"touchstart",function(b){g=!0;h=c.some(a.capture(e,"touchend",function(a){g=!1;f.trigger.touchend(a.raw());m()}));f.trigger.touchstart(b.raw())}),m=function(){h.each(function(a){a.unbind()})};return{isTouching:function(){return g},events:f.registry,destroy:function(){k.unbind();m()}}}}});l("150","7v 139 137 2m 3l 31 2a".split(" "),function(c,d,b,a,e,
f,g){var h=function(a){a=g.documentElement(a);var c=b.resolve("unfocused-selection");return f.descendant(a,"."+c).bind(function(a){return e.absolute(a).top})};return{switchSelection:function(b,e,f){var g=f.isActive,h=!1;return{on:function(){g()||(h=!1,f.update(),e.save(),c.clearAll(b))},off:function(){g()&&!h&&(f.clear(),e.restore())},fakeOut:function(){h=!0;d.input(a.body(),e.restore)}}},inView:function(a,b,c){return function(){return h(b).map(function(b){var c=a.dom().scrollTop;return 0<b()-c})}}}});
l("151",[],function(){return{onScroll:function(c,d,b,a){var e=function(){c()||f()},f=function(){a.events.touchend.unbind(e);a.isTouching()?a.events.touchend.bind(e):(b().getOr(!0)?d.off:d.fakeOut)()};return{start:function(){a.events.touchend.unbind(e);d.on()},stop:f,destroy:function(){a.events.touchend.unbind(e)}}}}});l("13c",["150","151"],function(c,d){return{toFake:c.switchSelection,inView:c.inView,onScroll:d.onScroll}});l("15u",["s","k"],function(c,d){return{findDevice:function(b,a){return d.findMap([{width:320,
height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],function(d){return b<=d.width&&a<=d.height?c.some(d.keyboard):c.none()}).getOr({portrait:a/5,landscape:b/4})}}});l("152",["10d","15u","2n","64",
"36"],function(c,d,b,a,e){var f=d.findDevice(e.screen.width,e.screen.height),g=function(b){b=a.get(b);var d=c.get().isPortrait(),g=d?f.portrait:f.landscape;return b-((d?e.screen.height:e.screen.width)-e.innerHeight>g?0:g)};return{getGreenzone:g,updatePadding:function(c,d){var e=g(d),e=a.get(d)-e;b.set(c,"padding-bottom",e+"px")}}});l("13g","b 3m 135 152 137 7 4n 1a 2n 64 4e 1u dp 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){var s=g.generate([{fixed:["element","offsetY"]},{scroller:["element",
"offsetY"]}]),t="data-"+e.resolve("position-y-fixed"),l="data-"+e.resolve("scrolling"),v="data-"+e.resolve("last-window-height"),w=function(a){return b.safeParse(a,t)},x=function(a){var b=w(a);return("true"===h.get(a,l)?s.scroller:s.fixed)(a,b)},y=function(a){var b=h.get(a,"style");k.setAll(a,{position:"absolute",top:"0px"});h.set(a,t,"0px");return{restore:function(){h.set(a,"style",b||"");h.remove(a,t)}}},z=function(a,b,c){var e=h.get(c,"style");d.register(c);k.setAll(c,{position:"absolute",height:b+
"px",width:"100%",top:a+"px"});h.set(c,t,a+"px");h.set(c,l,"true");return{restore:function(){d.deregister(c);h.set(c,"style",e||"");h.remove(c,t);h.remove(c,l)}}},A=function(a,b){var c=r.innerHeight;h.set(a,v,c+"px");return c-b};return{findFixtures:function(a){a=n.descendants(a,"["+t+"]");return c.map(a,x)},takeover:function(c,d,e){var g=y(e),n=m.get(e),p=A(c,n),q=z(n,p,c),n=function(){var a=r.innerHeight,d=b.safeParse(c,v);return a>d},s=function(){var b=m.get(e),f=A(c,b);h.set(c,t,b+"px");k.set(c,
"height",f+"px");a.updatePadding(d,c)};a.updatePadding(d,c);return{setViewportOffset:function(a){h.set(c,t,a+"px");s()},isExpanding:n,isShrinking:f.not(n),refresh:s,restore:function(){g.restore();q.restore()}}},getYFixedData:w}});l("153",["s","1s","2s","2t"],function(c,d,b,a){var e=function(a,b,e){return d.abs(a-b)<=e?c.none():a<b?c.some(a+e):c.some(a-e)};return{create:function(){var c=null;return{animate:function(g,h,k,m,n,p){b(c);var q=function(a){b(c);n(a)};c=a(function(){var a=g();e(a,h,k).fold(function(){b(c);
n(h)},function(e){m(e,q);var k=g();if(k!==e||d.abs(k-h)>d.abs(a-h))b(c),n(h)})},p)}}},adjust:e}});l("13e","3s 135 13g 153 137 7 1a 2n 1s dp 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=a.create(),q="data-"+e.resolve("last-scroll-top"),r=function(a){a=h.getRaw(a,"top").getOr(0);return m(a,10)},s=function(a){return m(a.dom().scrollTop,10)},t=function(a,c){var d=c+b.getYFixedData(a)+"px";h.set(a,"top",d)};return{moveScrollAndTop:function(a,b,d){return c.nu(function(c){var e=f.curry(s,a);p.animate(e,
b,15,function(b){a.dom().scrollTop=b;h.set(a,"top",r(a)+15+"px")},function(e){a.dom().scrollTop=b;h.set(a,"top",d+"px");c(b)},10)})},moveOnlyScroll:function(a,b){return c.nu(function(c){var e=f.curry(s,a);g.set(a,q,e());var h=k.abs(b-e()),h=k.ceil(h/10);p.animate(e,b,h,function(b,c){d.safeParse(a,q)!==a.dom().scrollTop?c(a.dom().scrollTop):(a.dom().scrollTop=b,g.set(a,q,b))},function(d){a.dom().scrollTop=b;g.set(a,q,b);c(b)},10)})},moveOnlyTop:function(a,b){return c.nu(function(c){var d=f.curry(r,
a),e=function(b){h.set(a,"top",b+"px")},g=k.abs(b-d()),g=k.ceil(g/10);p.animate(d,b,g,e,function(a){e(b);c(b)},10)})},moveWindowScroll:function(a,b,d){return c.nu(function(c){var e=function(c){t(a,c);t(b,c);n.scrollTo(0,c)};p.animate(function(){return n.pageYOffset},d,15,e,function(a){e(a);c(a)},10)})}}});l("13d",["h6","152","13e","7","dp"],function(c,d,b,a,e){return{scrollIntoView:function(e,g,h,k){var m=d.getGreenzone(g);e=a.curry(c.refresh,e);h>m||k>m?b.moveOnlyScroll(g,g.dom().scrollTop-m+k).get(e):
0>h&&b.moveOnlyScroll(g,g.dom().scrollTop+h).get(e)}}});l("13f","b 3s 13e 13g 2n dp".split(" "),function(c,d,b,a,e,f){var g=function(a,c){return a.fold(function(a,b){e.set(a,"top",c+b+"px");return d.pure(b)},function(a,d){var g=c+d,h=e.getRaw(a,"top").getOr(d),h=g-f(h,10),h=a.dom().scrollTop+h;return b.moveScrollAndTop(a,h,g)})};return{updatePositions:function(b,e){var f=a.findFixtures(b),f=c.map(f,function(a){return g(a,e)});return d.par(f)}}});l("13h","b 136 13a 137 1y 4b 2n 3u l 2o 3c 2q 2a".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q){return function(r,s){var t=r.document,l=k.fromTag("div");e.add(l,a.resolve("unfocused-selections"));m.append(k.fromDom(t.documentElement),l);var v=h.bind(l,"touchstart",function(a){a.prevent();b.resume(r,s);x()}),w=function(b){var c=k.fromTag("span");f.add(c,[a.resolve("layer-editor"),a.resolve("unfocused-selection")]);g.setAll(c,{left:b.left+"px",top:b.top+"px",width:b.width+"px",height:b.height+"px"});return c},x=function(){p.empty(l)};return{update:function(){x();
var a=d.getRectangles(r),a=c.map(a,w);n.append(l,a)},isActive:function(){return 0<q.children(l).length},destroy:function(){v.unbind();p.remove(l)},clear:x}}});l("13i",["2l","7","4m"],function(c,d,b){return function(a){var e=b(c.pure({}));return{start:function(b){var g=c.nu(function(c){return a(b).get(c)});g.get(d.identity);e.set(g)},idle:function(a){e.get().get(function(){a()})}}}});l("10j","13b 10d 13c 136 13d 13e 13f 13g 13h 13i 7 a4 s 2m 2n 3u l 1s 2s 6b o dp 2t 3t 36".split(" "),function(c,d,
b,a,e,f,g,h,k,m,n,p,q,r,s,t,l,v,w,x,y,z,A,D,B){var C=function(b,c,d,e,h,k){var r=m(function(a){return f.moveWindowScroll(b,c,a)}),s=function(){var b=a.getRectangles(k);return q.from(b[0]).bind(function(a){var b=a.top-c.dom().scrollTop;return b>B.innerHeight+5||-5>b?q.some({top:n.constant(b),bottom:n.constant(b+a.height)}):q.none()})},v=p(function(){r.idle(function(){g.updatePositions(d,e.pageYOffset).get(function(a){s().each(function(a){c.dom().scrollTop=c.dom().scrollTop+a.top()});r.start(0);h.refresh()})})},
1E3),w=t.bind(l.fromDom(e),"scroll",function(){0>e.pageYOffset||v.throttle()});g.updatePositions(d,e.pageYOffset).get(n.identity);return{unbind:w.unbind}};return{setup:function(a){var g=a.cWin(),m=a.ceBody(),p=a.socket(),q=a.toolstrip(),v=a.toolbar(),w=a.contentElement(),x=a.cursor(),y=a.keyboardType();a=a.isScrolling();var z=h.takeover(p,m,q),A=y(g,r.body(),w,q,v),D=d.onChange();D.events.ready.bind(z.refresh);D.onAdjustment(function(){z.refresh()});var P=t.bind(l.fromDom(B),"resize",function(){z.isExpanding()&&
z.refresh()}),S=C(q,p,r.body(),B,z,g),L=k(g,w),U=function(){L.clear()},q=b.toFake(g,x,L),m=b.inView(p,m,v),V=c.touch(l.fromDom(g)),X=b.onScroll(a,q,m,V);return{toEditing:function(){A.toEditing();U()},toReading:function(){A.toReading()},onToolbarTouch:function(a){A.onToolbarTouch(a)},refreshSelection:function(){L.isActive()&&L.update()},clearSelection:U,highlightSelection:function(){L.update()},scrollIntoView:function(a,b){e.scrollIntoView(g,p,a,b)},updateToolbarPadding:n.noop,setViewportOffset:function(a){z.setViewportOffset(a);
f.moveOnlyTop(p,a).get(n.identity)},syncHeight:function(){s.set(w,"height",w.dom().contentWindow.document.body.scrollHeight+"px")},selectionScrollStarted:function(){X.start()},selectionScrollStopped:function(){X.stop()},destroy:function(){z.restore();D.destroy();S.unbind();P.unbind();A.destroy();X.destroy();V.destroy();L.destroy()}}}}});l("13j",["137","1a"],function(c,d){var b="data-"+c.resolve("horizontal-scroll"),a=function(a){var b;(b=0<a.dom().scrollTop)||(a.dom().scrollTop=1,b=0!==a.dom().scrollTop,
a.dom().scrollTop=0);return b},e=function(a){var b;(b=0<a.dom().scrollLeft)||(a.dom().scrollLeft=1,b=0!==a.dom().scrollLeft,a.dom().scrollLeft=0);return b};return{markAsHorizontal:function(a){d.set(a,b,"true")},hasScroll:function(c){return"true"===d.get(c,b)?e:a}}});l("10k",["13j","7","s","3u","31"],function(c,d,b,a,e){var f=function(a){var c=a.dom().scrollTop,d=a.dom().scrollHeight;a=a.dom().offsetHeight;return 0>=c?b.some(1):c+a>=d?b.some(d-a-1):b.none()},g=function(a){f(a).each(function(b){a.dom().scrollTop=
b})},h=function(b,c){return a.bind(b,"touchstart",function(a){c(a.target()).each(g)})};return{fixEdges:g,exclusive:function(b,f){return a.bind(b,"touchmove",function(a){e.closest(a.target(),f).filter(c.hasScroll).fold(function(){a.raw().preventDefault()},d.noop)})},link:function(a,b){return h(a,d.constant(b))},ancestor:function(a,b){return h(a,function(a){return e.closest(a,b)})},indirect:h,markAsHorizontal:function(a){c.markAsHorizontal(a)}}});l("pt",["58","l","2o","2q","2a"],function(c,d,b,a,e){var f=
function(a){return d.fromText(c.zeroWidth(),a.dom())};return{runAndRemove:function(c,h){var k=e.owner(c),m=d.fromTag("span",k.dom());b.append(m,f(k));b.prepend(c,m);k=h(m);a.remove(m);return k},enrichAndRemove:function(c,d){var k=f(e.owner(c));b.append(c,k);var m=d(c);a.remove(k);return m}}});l("i0","ps 7 s cf pt nx 2u 3k 2m 2n 64 3l 21 2a au 2r dp".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,l){var v=g.immutable("left","top","width","height","direction","absolute"),w=function(b){return{position:d.constant(a.find(b)),
width:d.constant(t.getOuter(b)),height:d.constant(n.getOuter(b))}},x=function(a){var b=m.get(a,"display");return{backup:function(){m.set(a,"display","inline-block")},restore:function(){m.set(a,"display",b)}}},y={backup:d.noop,restore:d.noop},z=function(a){return q.isElement(a.startContainer())?b.some(a.startContainer()):q.isElement(a.endContainer())?b.some(a.endContainer()):r.parent(a.startContainer()).filter(q.isElement).orThunk(function(){return r.parent(a.endContainer()).filter(q.isElement)})},
A=function(b,c){return z(c).fold(function(){return v(0,0,0,b.uiDirection(),h(0,0))},function(c){var d=a.find(c),e=t.get(c),f=n.get(c),g=p.absolute(c);return v(d.left(),d.top(),e,f,b.directionAt(c),g)})},D=function(a,b,c,d){return f.diagnose(a,c)(d,function(a){var d=s.isVisible(a)||"br"===q.name(a)?y:x(a);d.backup();var f;if(k.inBody(a)){var g=e.enrichAndRemove(a,w);f=g.position();var h=g.width(),g=g.height(),m=b.directionAt(a);a=p.absolute(a);f=v(f.left(),f.top(),h,g,m,a)}else f=A(b,c);d.restore();
return f})},B=function(a,d,f,g){var h=f.startContainer(),k=f.startOffset();if("body"===q.name(h)&&0===k){var n=f.startContainer();a=l(m.get(n,"padding-top"),10);g=l(m.get(n,"padding-left"),10);var r=e.runAndRemove(n,w),h=r.position(),k=r.width(),r=r.height();d=d.directionAt(n);n=p.absolute(n);f=c(v(h.left()+g,h.top()+a,k,r,d,n),b.some(f))}else f=D(a,d,f,g);return f},C=function(a,b,c,d,e){b.focus();a=B(b.isRoot,a,c,e);a.cursor().each(function(a){b.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),
a.endOffset())});a=a.result();d(a)};return{insertAt:C,insertAtCursor:function(a,b,c,d){b.getSelection().each(function(e){C(a,b,e,c,d)})}}});l("10l",["7","3u","21"],function(c,d,b){return function(a){return function(e,f){var g=d.bind(a,"touchmove",e.move),h=d.bind(a,"touchend",e.drop),k=d.bind(a,"gesturestart",function(a){"img"===b.name(a.target())&&a.prevent()});return{element:c.constant(a),start:c.noop,stop:c.noop,destroy:function(){g.unbind();h.unbind();k.unbind()}}}}});l("wf","b 3m 7u 7v 10i 10j hg 10d 10k a4 s 86 73 i0 33 10g 10l 2u 1y 1b 2n 3u l 2y 64 3l 31 2s 6b q 2t 3t 36".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,t,l,v,w,x,y,z,A,D,B,C,F,E,G,H,I,K,J){return function(G,K,N,Q,R,P,S,L){var U=[],V=P.toolbar.element(),X=P.banners(),W=P.viewport(),Y=n.none(),da=g(V),Z=null,aa=q.api(),ea=n.none(),ha=d.event(W),fa=v.immutableBag("cWin ceBody socket toolstrip toolbar contentElement cursor keyboardType isScrolling".split(" "),[]),ia=function(){aa.run(function(a){a.highlightSelection()})},ga=function(){aa.run(function(a){a.refreshSelection()})},ca=function(a){var b=C.absolute(a).top()-
W.dom().scrollTop;aa.run(function(c){c.scrollIntoView(b,b+B.get(a))})},la=function(){r.insertAtCursor(Q,G,function(a){var b=a.absolute().top()-W.dom().scrollTop;aa.run(function(c){c.scrollIntoView(b,b+a.height())})})},$=function(a){la();aa.run(function(a){a.syncHeight()})},ka=function(a){var b=B.get(V);aa.run(function(a){a.setViewportOffset(b)});ga();$()},pa=function(a){ca(a.element())},ba=m($,300),T=function(){da.closeMenus()},ra=function(){ja();var a=I(function(){0===J.pageYOffset&&(E(a),$())},
100)},Fa=function(){aa.run(function(a){a.clearSelection()})},sa=function(){Fa();ba.throttle()},ya=function(){aa.run(function(a){a.toEditing()})},za=function(){aa.run(function(a){a.toReading()})},ma=function(a){aa.run(function(b){b.onToolbarTouch(a)})},ja=function(){(h.get().isPortrait()?w.remove:w.add)(P.element(),s.resolve("mobile-landscape"))},oa=function(a){var b=y.get(a,"background-color");void 0!==b&&""!==b&&y.set(a,"-webkit-tap-highlight-color",b)},qa=function(c){var d=G.win().getOrDie(),e=
function(e){D.focus(c);e=e.raw().changedTouches[0];b.find(d,e.pageX,e.pageY).each(function(b){a.set(d,b)})},f=G.doc().map(function(a){var b=l(a),b=t(a,c,b,$);ea=n.some(b);var d=A.fromDom(a.dom().documentElement);return[z.bind(a,"touchend",function(a){(x.eq(d,a.target())||x.eq(c,a.target()))&&e(a)})]}).getOr([]),g=[z.capture(V,"touchstart",function(a){ia();ma(a)}),z.bind(c,"touchstart",Fa),p.handle(c,Aa),z.bind(V,"touchmove",da.closeMenus)];U=f.concat(g)},Aa=function(a){a.kill()};return{exit:function(){G.body().each(function(a){y.remove(X,
"display");y.set(P.viewport(),"overflow","hidden");Y=Y.bind(function(a){a.unbind();return n.none()});w.remove(V,s.resolve("mobile-show"));aa.clear();D.blur(a);y.remove(a,"padding-top");c.each(U,function(a){a.unbind()});S.restore();G.events.keyup.unbind(sa);G.events.domChanged.unbind(ba.throttle);G.events.scrollToCursor.unbind(ba.throttle);G.events.scrollToElement.unbind(pa);G.events.domChanged.unbind(ga);G.events.nodeChanged.unbind(ga);G.events.toEditing.unbind(ya);G.events.toReading.unbind(za);Z.events.change.unbind(T);
Z.events.ready.unbind(ra);P.toolbar.events.transitionend.unbind(ka);null!==Z&&Z.destroy()})},enter:function(a){G.body().each(function(a){G.win().each(function(b){Z=h.onChange();S.maximize();qa(a);D.focus(a);Y=n.some(k.exclusive(N,"."+d.scrollable()));y.getRaw(V,"overflow-x").is("auto")&&F.descendant(V,".ephox-chameleon-toolbar").each(function(a){k.markAsHorizontal(a);d.register(a)});oa(a);ja();H.body.scrollTop=0;w.add(V,s.resolve("mobile-show"));P.toolbar.refresh();y.set(X,"display","block");F.descendant(V,
".ephox-chameleon-toolbar").each(function(c){aa.set(f.setup(fa({cWin:b,ceBody:a,socket:W,toolstrip:V,toolbar:c,contentElement:G.element(),cursor:G.cursor(),keyboardType:e.stubborn,isScrolling:ha.isScrolling})))});G.events.keyup.bind(sa);G.events.domChanged.bind(ba.throttle);G.events.scrollToCursor.bind(ba.throttle);G.events.scrollToElement.bind(pa);G.events.domChanged.bind(ga);G.events.nodeChanged.bind(ga);G.events.toEditing.bind(ya);G.events.toReading.bind(za);Z.events.change.bind(T);Z.events.ready.bind(ra);
P.toolbar.events.transitionend.bind(ka);$()})})},destroy:function(){ea.each(function(a){a.destroy()});Y.each(function(a){a.unbind()});ha.destroy()}}}});l("o1","7 we wf l 2y 2f 2o 2a q".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m,n,p,q,r){var s=d(r.element(),m),t=a.fromDom(k),l=m.element(),v=c.constant(!0===q.fillscreen),w=b(m,n,t,p,l,r,s,v),x=function(b){var c=h.children(b),d;if(!(d=0===c.length)){if(c=1===c.length)c=f.get(b),c=10===c.charCodeAt(0)&&10===c.charCodeAt(1);d=c}d&&(c=a.fromHtml("<p><br></p>"),
g.append(b,c));w.enter()},y=function(a){g.append(r.element(),s.mask().element());s.mask().events.fullscreen.bind(function(a){w.enter()})},z=function(a){(v()?x:y)(a)};return{init:function(){r.socket(m)},loaded:function(){m.body().each(z)},restoreEditor:function(){m.body().each(e.blur);m.element().dom().focus();m.element().dom().blur();w.exit();e.focus(s.mask().element())},destroy:function(){m.body().each(e.blur);w.destroy();s.destroy()}}}});l("fv",["7","ny","nz","o1"],function(c,d,b,a){return function(e,
f,g,h){var k=h.toolbar.items;return{tabbed:function(c){var n=a(e,f,g,h,c),p=d();c=b.config({items:[["back"]].concat(k),contextual:[]},{back:{feature:p.ui(),command:"back",type:"general"}},{allowLocalImages:h.allowLocalImages});p.events.back.bind(function(){n.restoreEditor()});return{init:n.init,loaded:n.loaded,config:c,destroy:function(){n.destroy();p.destroy()}}},full:c.die("mobile does not support fullscreen layout"),destroy:c.noop}}});l("fw",["7","nz","o1"],function(c,d,b){return function(a,e,
f,g){var h=g.toolbar.items;return{tabbed:function(c){var m=b(a,e,f,g,c);c=d.config({items:h,contextual:[]},{},{allowLocalImages:g.allowLocalImages});return{init:m.init,loaded:m.loaded,config:c,destroy:function(){m.restoreEditor();m.destroy()}}},full:c.die("mobile does not support fullscreen layout"),destroy:c.noop}}});l("8h","c fs ft fu fv fw".split(" "),function(c,d,b,a,e,f){var g=c.detect();return function(c,k,m,n,p){return(g.deviceType.isiOS()?!0===p.fillscreen?f:e:g.deviceType.isAndroid()?!0===
p.fillscreen?b:d:a)(c,k,m,p,n)}});l("o2",["1","vl","7","s","o"],function(c,d,b,a,e){var f=function(){try{var b=c.localStorage;b.setItem("__storage_test__","__storage_test__");b.removeItem("__storage_test__");return a.some(b)}catch(d){return a.none()}}().fold(function(){var a={};return{getItem:function(b){return a[b]},setItem:function(b,c){a[b]=c}}},function(a){return{getItem:function(b){return a.getItem("ephox.textboxio."+b)},setItem:function(b,c){a.setItem("ephox.textboxio."+b,c)}}}),g=function(b,
c){return a.from(f.getItem(b)).map(d.parse).getOr(c)},h=function(a){return g(a,{})},k=function(a,b){var c=d.stringify(b);f.setItem(a,c)};return{read:h,readOr:g,write:k,access:function(a){return{read:b.curry(h,a),write:b.curry(k,a)}}}});l("fx",["o2","4m"],function(c,d){return function(b,a){var e=c.readOr(b,a),f=d(e),g=function(a){f.set(a)};return{setAndCache:function(a){g(a);c.write(b,a)},set:g,get:function(){return f.get()}}}});l("8i",["7","fx"],function(c,d){return function(b){var a=d("native.spelling",
b.nativeSpelling),e=d("spelling",b.spelling),f=d("autocorrect",b.autocorrect),g=d("linkpreviews",b.linkpreviews),h=d("capitalisation",b.capitalisation);return{spelling:c.constant(e),nativeSpelling:c.constant(a),autocorrect:c.constant(f),linkpreviews:c.constant(g),capitalisation:c.constant(h),state:function(){return{nativeSpelling:a.get(),spelling:e.get(),autocorrect:f.get(),linkpreviews:g.get(),capitalisation:h.get()}},destroy:c.noop}}});l("fy",["58","9i","7","l","2o"],function(c,d,b,a,e){var f=function(b,
d,e){d.body().each(function(f){e.save();var n=a.fromHtml(c.zeroWidth());b(f,n);d.setSelection(n,0,n,0)})};return{upOrLeft:function(a,c,k){a.setRelativeSelection(d.before(k),d.before(k));a.getSelection().fold(function(){f(e.prepend,a,c)},b.noop)},right:function(a,c,k){a.setRelativeSelection(d.after(k),d.after(k));a.getSelection().fold(function(){f(e.append,a,c)},b.noop)}}});l("fz","80 s j8 1b 6o 2a".split(" "),function(c,d,b,a,e,f){return{left:function(a,h,k){return a(h)&&c.isStart(h,k)?d.none():c.isStart(h,
k)?b.before(h,a).filter(function(a){return!e.ancestor(a,"head")}):a(h)&&0<k?f.child(h,k-1):d.none()},right:function(a,h,k){return a(h)&&c.isEnd(h,k)?d.none():c.isEnd(h,k)?b.after(h,a).filter(function(b){return a(b)||e.ancestor(b,"body")}):a(h)&&k<c.getEnd(h)?f.child(h,k+1):d.none()},isFirstInContent:function(b,c){return b.body().map(function(b){b=f.children(b);return a.eq(b[0],c)}).getOr(!1)},isLastInContent:function(b,c){return b.body().map(function(b){b=f.children(b);return 0<b.length&&a.eq(b[b.length-
1],c)}).getOr(!1)}}});l("g0",["b","s"],function(c,d){var b=function(a,b){return a.getSelection().bind(function(c){return c.collapsed()?b(a.isRoot,c.startContainer(),c.startOffset()):d.none()})},a=function(a,b){return c.foldr(a,function(a,c){return c(b).or(a)},d.none())};return{get:function(c,d,g){return b(c,g).bind(function(b){return a(d,b)})}}});l("8j",["fy","fz","g0","2q"],function(c,d,b,a){return function(e,f,g){var h=f.all();h.on();var k=[];h.events.backspace.bind(function(){b.get(e,k,d.left).each(a.remove)});
f=function(a){var f=a.stopper();b.get(e,k,d.left).each(function(a){f();c.upOrLeft(e,g,a)})};h.events.right.bind(function(a){var f=a.stopper();b.get(e,k,d.right).each(function(a){f();c.right(e,g,a)})});h.events.left.bind(f);h.events.up.bind(f);return{registerSkip:function(a){k.push(a)},destroy:function(){h.destroy()}}}});l("8k",["7","s","c1","90"],function(c,d,b,a){return function(e,f){(f.error?d.some(f.error):d.none()).map(function(c){return b(a.get(c.name,[c]))}).each(e.displayBanner);return{destroy:c.noop}}});
l("o6",["2u"],function(c){return{response:c.immutable("selection","kill")}});l("g2",[],function(){var c=function(a){return function(b){return b===a}},d=c(38),b=c(40);return{ltr:{isBackward:c(37),isForward:c(39)},rtl:{isBackward:c(39),isForward:c(37)},isUp:d,isDown:b,isNavigation:function(a){return 37<=a&&40>=a}}});l("o7",["7u","eg","7v"],function(c,d,b){return function(a){return{getRect:function(a){return a.dom().getBoundingClientRect()},getRangedRect:function(c,d,g,h){return b.rectangleAt(a,c,d,
g,h)},getSelection:function(){return b.get(a)},fromSitus:function(c){return b.deriveExact(a,c)},situsFromPoint:function(b,d){return c.find(a,b,d)},clearSelection:function(){b.clearAll(a)},setSelection:function(c){b.setExact(a,c.start(),c.soffset(),c.finish(),c.foffset())},setRelativeSelection:function(c,f){b.set(a,d.write(c,f))},selectContents:function(c){b.selectElementContents(a,c)},getInnerHeight:function(){return a.innerHeight},getScrollY:function(){return a.scrollY},scrollBy:function(b,c){a.scrollBy(b,
c)}}}});l("of",["4g"],function(c){return{resolve:c.create("ephox-darwin").resolve}});l("iq",["of","7"],function(c,d){var b=c.resolve("selected"),a=c.resolve("last-selected"),e=c.resolve("first-selected");return{selectedClass:d.constant(b),lastSelectedClass:d.constant(a),firstSelectedClass:d.constant(e)}});l("10m",["7","s","qn"],function(c,d,b){var a=function(a,b){return b.column()>=a.startCol()&&b.column()+b.colspan()-1<=a.finishCol()&&b.row()>=a.startRow()&&b.row()+b.rowspan()-1<=a.finishRow()};
return{inSelection:function(a,b){var c=b.column(),d=b.column()+b.colspan()-1,k=b.row(),m=b.row()+b.rowspan()-1;return c<=a.finishCol()&&d>=a.startCol()&&k<=a.finishRow()&&m>=a.startRow()},isWithin:a,isRectangular:function(e,f){for(var g=!0,h=c.curry(a,f),k=f.startRow();k<=f.finishRow();k++)for(var m=f.startCol();m<=f.finishCol();m++)g=g&&b.getAt(e,k,m).exists(h);return g?d.some(f):d.none()}}});l("wh",["g7","qn","10m","1b","1s"],function(c,d,b,a,e){var f=function(b,f,k){f=d.findItem(b,f,a.eq);var m=
d.findItem(b,k,a.eq);return f.bind(function(a){return m.map(function(b){return c.bounds({startCol:e.min(a.column(),b.column()),finishCol:e.max(a.column()+a.colspan()-1,b.column()+b.colspan()-1),startRow:e.min(a.row(),b.row()),finishRow:e.max(a.row()+a.rowspan()-1,b.row()+b.rowspan()-1)})})})};return{getAnyBox:f,getBox:function(a,c,d){return f(a,c,d).bind(function(c){return b.isRectangular(a,c)})}}});l("wg","b 7 qn 10m wh 1b".split(" "),function(c,d,b,a,e,f){return{moveBy:function(a,c,d,e){return b.findItem(a,
c,f.eq).bind(function(c){var f=0<d?c.row()+c.rowspan()-1:c.row();c=0<e?c.column()+c.colspan()-1:c.column();return b.getAt(a,f+d,c+e).map(function(a){return a.element()})})},intercepts:function(f,h,k){return e.getAnyBox(f,h,k).map(function(e){e=b.filterItems(f,d.curry(a.inSelection,e));return c.map(e,function(a){return a.element()})})},parentCell:function(a,c){return b.findItem(a,c,function(a,b){return f.contains(b,a)}).bind(function(a){return a.element()})}}});l("od","bf qm qn wg wh 1b".split(" "),
function(c,d,b,a,e,f){var g=function(a){a=d.fromTable(a);return b.generate(a)};return{moveBy:function(b,d,e){return c.table(b).bind(function(c){c=g(c);return a.moveBy(c,b,d,e)})},intercepts:function(b,c,d){b=g(b);return a.intercepts(b,c,d)},nestedIntercepts:function(b,c,d,e,p){var q=g(b);c=f.eq(b,d)?c:a.parentCell(q,c);b=f.eq(b,p)?e:a.parentCell(q,e);return a.intercepts(q,c,b)},getBox:function(a,b,c){a=g(a);return e.getBox(a,b,c)}}});l("oc","b iq 7 s g6 od 1y 1b 6m 4e 31".split(" "),function(c,d,
b,a,e,f,g,h,k,m,n){var p="."+d.selectedClass(),q=k.addClass(d.selectedClass()),r=k.removeClasses([d.selectedClass(),d.lastSelectedClass(),d.firstSelectedClass()]),s=function(a){a=m.descendants(a,p);c.each(a,r)},t=function(a){return n.ancestor(a,"table")},l=function(b,c){return h.eq(b,c)?a.some([b]):t(b).bind(function(a){return t(c).bind(function(d){return h.eq(a,d)?f.intercepts(a,b,c):h.contains(a,d)?f.nestedIntercepts(a,b,a,c,d):h.contains(d,a)?f.nestedIntercepts(d,b,a,c,d):e.ancestors(b,c).shared().bind(function(e){return n.closest(e,
"table").bind(function(e){return f.nestedIntercepts(e,b,a,c,d)})})})})},v=function(b){b=c.find(b,k.hasClass(d.lastSelectedClass()));return a.from(b)},w=function(a){return n.ancestor(a,"table").bind(function(c){return n.descendant(c,"."+d.firstSelectedClass()).bind(function(c){return l(c,a).map(function(d){return{boxes:b.constant(d),start:b.constant(c),finish:b.constant(a)}})})})};return{clear:s,identify:l,retrieve:function(b){b=m.descendants(b,p);return 0<b.length?a.some(b):a.none()},shiftSelection:function(a,
b,c){return v(a).bind(function(a){return f.moveBy(a,b,c).bind(w)})},isSelected:function(a){return g.has(a,d.selectedClass())},selectRange:function(a,b,e,f){s(a);c.each(b,q);g.add(e,d.firstSelectedClass());g.add(f,d.lastSelectedClass())},getEdges:function(a){return n.descendant(a,"."+d.firstSelectedClass()).bind(function(c){return n.descendant(a,"."+d.lastSelectedClass()).bind(function(a){return e.sharedOne(t,[c,a]).map(function(d){return{first:b.constant(c),last:b.constant(a),table:b.constant(d)}})})})}}});
l("o8","o6 oc eg 9i 7v 80 s 1b 31".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(e,k,m,r){return!h.eq(m,r)&&(k=d.identify(m,r).getOr([]),0<k.length)?(d.selectRange(e,k,m,r),g.some(c.response(g.some(b.write(a.on(m,0),a.on(m,f.getEnd(m)))),!0))):g.none()};return{sync:function(a,b,c,d,f,h){return e.isCollapsed(c,d,f,h)?g.none():k.closest(c,"td,th").bind(function(c){return k.closest(f,"td,th").bind(function(d){return m(a,b,c,d)})})},detect:m,update:function(a,b,c,e){return d.shiftSelection(e,
a,b).map(function(a){d.clear(c);d.selectRange(c,a.boxes(),a.start(),a.finish());return a.boxes()})}}});l("10n",["2u"],function(c){var d=c.immutableBag(["left","top","right","bottom"],[]);return{nu:d,moveUp:function(b,a){return d({left:b.left(),top:b.top()-a,right:b.right(),bottom:b.bottom()-a})},moveDown:function(b,a){return d({left:b.left(),top:b.top()+a,right:b.right(),bottom:b.bottom()+a})},moveBottomTo:function(b,a){var c=b.bottom()-b.top();return d({left:b.left(),top:a-c,right:b.right(),bottom:a})},
moveTopTo:function(b,a){var c=b.bottom()-b.top();return d({left:b.left(),top:a,right:b.right(),bottom:a+c})},getTop:function(b){return b.top()},getBottom:function(b){return b.bottom()},translate:function(b,a,c){return d({left:b.left()+a,top:b.top()+c,right:b.right()+a,bottom:b.bottom()+c})},toString:function(b){return"("+b.left()+", "+b.top()+") -> ("+b.right()+", "+b.bottom()+")"}}});l("10o",["10n","80","s","21"],function(c,d,b,a){var e=function(a){return c.nu({left:a.left,top:a.top,right:a.right,
bottom:a.bottom})};return{getBoxAt:function(c,g,h){return a.isElement(g)?b.some(c.getRect(g)).map(e):a.isText(g)?(c=0<=h&&h<d.getEnd(g)?c.getRangedRect(g,h,g,h+1):0<h?c.getRangedRect(g,h-1,g,h):b.none(),c.map(e)):b.none()},getEntireBox:function(c,g){return a.isElement(g)?b.some(c.getRect(g)).map(e):a.isText(g)?c.getRangedRect(g,0,g,d.getEnd(g)).map(e):b.none()}}});l("wj","10n 10o 7 s j8 f7 4n 4i 1s".split(" "),function(c,d,b,a,e,f,g,h,k){var m=g.generate([{none:[]},{retry:["caret"]}]),n=function(a,
c,e){return h.closest(c,f.isBlock).fold(b.constant(!1),function(b){return d.getEntireBox(a,b).exists(function(a){return e.left()<a.left()||1>k.abs(a.right()-e.left())||e.left()>a.right()})})};g={point:c.getBottom,adjuster:function(a,b,d,e,f){var g=c.moveDown(f,5);return 1>k.abs(d.bottom()-e.bottom())?m.retry(g):d.top()>f.bottom()?m.retry(g):d.top()===f.bottom()?m.retry(c.moveDown(f,1)):n(a,b,f)?m.retry(c.translate(g,5,0)):m.none()},move:c.moveDown,gather:e.after};var p=function(b,c,e,f,g){return 0===
g?a.some(f):b.situsFromPoint(f.left(),c.point(f)).bind(function(h){return h.start().fold(a.none,function(h,k){return d.getEntireBox(b,h,k).bind(function(d){return c.adjuster(b,h,d,e,f).fold(a.none,function(a){return p(b,c,e,a,g-1)})}).orThunk(function(){return a.some(f)})},a.none)})},q=function(b,c,d){return b.point(c)>d.getInnerHeight()?a.some(b.point(c)-d.getInnerHeight()):0>b.point(c)?a.some(-b.point(c)):a.none()},r=function(a,b,c){var d=a.move(c,5),e=p(b,a,c,d,100).getOr(d);return q(a,e,b).fold(function(){return b.situsFromPoint(e.left(),
a.point(e))},function(c){b.scrollBy(0,c);return b.situsFromPoint(e.left(),a.point(e)-c)})};return{tryUp:b.curry(r,{point:c.getTop,adjuster:function(a,b,d,e,f){var g=c.moveUp(f,5);return 1>k.abs(d.top()-e.top())?m.retry(g):d.bottom()<f.top()?m.retry(g):d.bottom()===f.top()?m.retry(c.moveUp(f,1)):n(a,b,f)?m.retry(c.translate(g,5,0)):m.none()},move:c.moveUp,gather:e.before}),tryDown:b.curry(r,g),ieTryUp:function(a,b){return a.situsFromPoint(b.left(),b.top()-5)},ieTryDown:function(a,b){return a.situsFromPoint(b.left(),
b.bottom()+5)},getJumpSize:b.constant(5)}});l("wk",["80","g6","4n","1b","31"],function(c,d,b,a,e){var f=b.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),g=function(a){return e.closest(a,"tr")};return{verify:function(b,k,m,n,p,q){return e.closest(n,"td,th").bind(function(m){return e.closest(k,"td,th").map(function(e){return a.eq(m,e)?a.eq(n,m)&&c.getEnd(m)===p?q(e):f.none("in same cell"):d.sharedOne(g,[m,e]).fold(function(){var a=b.getRect(e),c=b.getRect(m);return c.right>
a.left&&c.left<a.right?f.success():q(e)},function(a){return q(e)})})}).getOr(f.none("default"))},cata:function(a,b,c,d,e){return a.fold(b,c,d,e)},adt:f}});l("13k","b 7 s 2u 1b 4i 4e 31 2a".split(" "),function(c,d,b,a,e,f,g,h,k){var m=a.immutable("ancestor","descendants","element","index"),n=a.immutable("parent","children","element","index"),p=function(a,f){var g=c.findIndex(a,d.curry(e.eq,f));return-1<g?b.some(g):b.none()};return{childOf:function(a,b){return f.closest(a,function(a){return k.parent(a).exists(function(a){return e.eq(a,
b)})})},indexOf:p,indexInParent:function(a){return k.parent(a).bind(function(b){var c=k.children(b);return p(c,a).map(function(d){return n(b,c,a,d)})})},selectorsInParent:function(a,b){return k.parent(a).bind(function(c){var d=g.children(c,b);return p(d,a).map(function(b){return n(c,d,a,b)})})},descendantsInAncestor:function(a,b,c){return h.closest(a,b).bind(function(b){var d=g.descendants(b,c);return p(d,a).map(function(c){return m(b,d,a,c)})})}}});l("10p","wk eg 9i 80 s ex 13k 21 at 2a".split(" "),
function(c,d,b,a,e,f,g,h,k,m){var n=function(a){return"br"===h.name(a)},p=function(a,b,c){return b(a,c).bind(function(a){return h.isText(a)&&0===k.get(a).trim().length?p(a,b,c):e.some(a)})},q=function(a,b,c){return c.traverse(b).orThunk(function(){return p(b,c.gather,a)}).map(c.relative)},r=function(a,b){return m.child(a,b).filter(n).orThunk(function(){return m.child(a,b-1).filter(n)})},s=function(a,c,d,e){return r(c,d).bind(function(c){return e.traverse(c).fold(function(){return p(c,e.gather,a).map(e.relative)},
function(a){return g.indexInParent(a).map(function(a){return b.on(a.parent(),a.index())})})})};return{tryBr:function(a,b,c,e){return(n(b)?q(a,b,e):s(a,b,c,e)).map(function(a){return d.write(a,a)})},process:function(b){return c.cata(b,function(a){return e.none("BR ADT: none")},function(){return e.none()},function(a){return e.some(f.point(a,0))},function(b){return e.some(f.point(b,a.getEnd(b)))})}}});l("wi","10n 10o wj wk 10p c 80 s ex 1b 21".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=f.detect(),
q=function(b,c,d){return b.getSelection().bind(function(f){return e.tryBr(c,f.finish(),f.foffset(),d).fold(function(){return h.some(k.point(f.finish(),f.foffset()))},function(c){c=b.fromSitus(c);c=a.verify(b,f.finish(),f.foffset(),c.finish(),c.foffset(),d.failure);return e.process(c)})})},r=function(b,d,e,f,k,n){return 0===n?h.none():u(b,d,e,f,k).bind(function(p){var q=b.fromSitus(p),q=a.verify(b,e,f,q.finish(),q.foffset(),k.failure);return a.cata(q,function(){return h.none()},function(){return h.some(p)},
function(a){return m.eq(e,a)&&0===f?s(b,e,f,c.moveUp,k):r(b,d,a,0,k,n-1)},function(a){return m.eq(e,a)&&f===g.getEnd(a)?s(b,e,f,c.moveDown,k):r(b,d,a,g.getEnd(a),k,n-1)})})},s=function(a,c,e,f,g){return d.getBoxAt(a,c,e).bind(function(c){return l(a,g,f(c,b.getJumpSize()))})},l=function(a,b,c){return p.browser.isChrome()||p.browser.isSafari()||p.browser.isFirefox()||p.browser.isSpartan()?b.otherRetry(a,c):p.browser.isIE()?b.ieRetry(a,c):h.none()},u=function(a,b,c,e,f){return d.getBoxAt(a,c,e).bind(function(b){return l(a,
f,b)})};return{handle:function(a,b,c){return q(a,b,c).bind(function(d){return r(a,b,d.element(),d.offset(),c,20).map(a.fromSitus)})}}});l("o9","o6 o8 wi c eg 9i 7 s 1b 37 31 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var q=a.detect(),r=function(a,b){return m.ancestor(a,function(a){return p.parent(a).exists(function(a){return k.eq(a,b)})})},s=function(a,c,d,e,f){return n.closest(e,"td,th").bind(function(e){return n.closest(e,"table").bind(function(k){return r(f,k)?b.handle(a,c,d).bind(function(a){return n.closest(a.finish(),
"td,th").map(function(b){return{start:g.constant(e),finish:g.constant(b),range:g.constant(a)}})}):h.none()})})};return{navigate:function(a,b,d,g,k){return q.browser.isIE()?h.none():s(a,b,d,g,k).map(function(a){a=a.range();return c.response(h.some(e.write(f.on(a.start(),a.soffset()),f.on(a.finish(),a.foffset()))),!0)})},select:function(a,b,c,e,f,g){return s(a,c,e,f,g).bind(function(a){return d.detect(b,c,a.start(),a.finish())})}}});l("oa",["oc","7","s","1b","31"],function(c,d,b,a,e){var f=function(a){return e.closest(a,
"td,th")};return function(d,e){var k=b.none(),m=function(){k=b.none()};return{mousedown:function(a){c.clear(e);k=f(a.target())},mouseover:function(b){k.each(function(k){c.clear(e);f(b.target()).each(function(b){var f=c.identify(k,b).getOr([]);if(1<f.length||1===f.length&&!a.eq(k,b))c.selectRange(e,f,k,b),d.selectContents(b)})})},mouseup:function(){k.each(m)}}}});l("ob",["wj","wk","9i","j8","2a"],function(c,d,b,a,e){return{down:{traverse:e.nextSibling,gather:a.after,relative:b.before,otherRetry:c.tryDown,
ieRetry:c.ieTryDown,failure:d.adt.failedDown},up:{traverse:e.prevSibling,gather:a.before,relative:b.before,otherRetry:c.tryUp,ieRetry:c.ieTryUp,failure:d.adt.failedUp}}});l("g1","o6 g2 o7 o8 o9 oa ob oc 9i 7 s k 2u".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=q.immutable("rows","cols");return{mouse:function(a,c){var d=b(a),d=f(d,c);return{mousedown:d.mousedown,mouseover:d.mouseover,mouseup:d.mouseup}},keyboard:function(f,q,l){var v=b(f),w=function(){h.clear(q);return n.none()};return{keydown:function(b,
f,s,A,D,B){var C=b.raw().which,F=!0===b.raw().shiftKey;return h.retrieve(q).fold(function(){return d.isDown(C)&&F?m.curry(e.select,v,q,l,g.down,A,f):d.isUp(C)&&F?m.curry(e.select,v,q,l,g.up,A,f):d.isDown(C)?m.curry(e.navigate,v,l,g.down,A,f):d.isUp(C)?m.curry(e.navigate,v,l,g.up,A,f):n.none},function(b){var e=function(e){return function(){return p.findMap(e,function(c){return a.update(c.rows(),c.cols(),q,b)}).fold(function(){return h.getEdges(q).map(function(a){var b=d.isDown(C)||B.isForward(C)?k.after:
k.before;v.setRelativeSelection(k.on(a.first(),0),b(a.table()));h.clear(q);return c.response(n.none(),!0)})},function(a){return n.some(c.response(n.none(),!0))})}};return d.isDown(C)&&F?e([r(1,0)]):d.isUp(C)&&F?e([r(-1,0)]):B.isBackward(C)&&F?e([r(0,-1),r(-1,0)]):B.isForward(C)&&F?e([r(0,1),r(1,0)]):d.isNavigation(C)&&!1===F?w:n.none})()},keyup:function(b,c,e,f,g){return h.retrieve(q).fold(function(){var h=b.raw().which;return!0===b.raw().shiftKey===!1?n.none():d.isNavigation(h)?a.sync(q,l,c,e,f,
g):n.none()},n.none)}}}}});l("g3",["oc","od"],function(c,d){return{retrieve:function(b){return c.retrieve(b)},retrieveBox:function(b){return c.getEdges(b).bind(function(a){return d.getBox(a.table(),a.first(),a.last())})},clear:function(b){c.clear(b)}}});l("g4","jl 80 j6 s ex j1 j8 f7 oe 1b dl 21 4i at 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s){return function(l){var u=function(a){return!l.isRoot(a)&&(k.isBlock(a)||"li"===p.name(a))},v=function(a){return p.isText(a)&&0===r.get(a).trim().length},
w=function(a,b,c,d){return q.closest(a,function(a){return s.parent(a).exists(l.isRoot)},l.isRoot).fold(function(){return e.point(a,b)},function(f){return c(f,a,b)?d(f):e.point(a,b)})},x=function(a,c){var f=function(b){return g.before(b,l.isRoot).fold(function(){return e.point(a,c)},function(a){return v(a)?f(a):e.point(a,d.getEnd(a))})};return q.closest(a,function(a){return u(a)&&s.prevSibling(a).isSome()},l.isRoot).fold(function(){return w(a,c,b.isAtLeftEdge,f)},function(d){return u(a)||b.isAtLeftEdge(d,
a,c)?f(d):e.point(a,c)})},y=function(a,c){var d=function(b){return g.after(b,l.isRoot).fold(function(){return e.point(a,c)},function(a){return v(a)?d(a):e.point(a,0)})};return q.closest(a,function(a){return u(a)&&s.nextSibling(a).isSome()},l.isRoot).fold(function(){return w(a,c,b.isAtRightEdge,d)},function(f){return u(a)||b.isAtRightEdge(f,a,c)?d(f):e.point(a,c)})};return{getSelection:function(b){return b.getSelection().bind(function(b){var g;g=b.startContainer();var k=b.endContainer();m.eq(g,k)?
(k=s.child(g,b.startOffset()),g=s.child(g,b.endOffset()),g=k.filter(h.isList).isSome()||g.filter(h.isList).isSome()):g=!0;if(g){if(n.after(b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset()))return g=f.toLeaf(b.startContainer(),b.startOffset()),b=f.toLeaf(b.endContainer(),b.endOffset()),g=d.isStart(g.element(),g.offset())?x(g.element(),g.offset()):e.point(g.element(),g.offset()),b=d.isEnd(b.element(),b.offset())?y(b.element(),b.offset()):e.point(b.element(),b.offset()),a.some(c(g.element(),
g.offset(),b.element(),b.offset()));g=f.toLeaf(b.startContainer(),b.startOffset());b=f.toLeaf(b.endContainer(),b.endOffset());g=d.isEnd(g.element(),g.offset())?y(g.element(),g.offset()):e.point(g.element(),g.offset());b=d.isStart(b.element(),b.offset())?x(b.element(),b.offset()):e.point(b.element(),b.offset());return a.some(c(g.element(),g.offset(),b.element(),b.offset()))}return a.some(b)})}}}});l("g5",["b","iq","4b","6m"],function(c,d,b,a){return{configure:function(b){c.each([b.output(),b.internal()],
function(f){var g=[d.lastSelectedClass(),d.firstSelectedClass(),d.selectedClass()],h=c.map(g,function(a){return"."+a}).join(",");b.addSelector(f,h,function(b){c.each(b,a.removeClasses(g))})})}}});l("g9",["4x"],function(c){var d=function(a){return 0===a.button},b=function(a,b){return{bind:function(d,g){return c.bind(d,a,b,g)}}};return{realClick:b("click",function(a){return 6===a.mozInputSource||0===a.mozInputSource?!1:void 0!==a.isTrusted&&!0!==a.isTrusted?!1:!0}),leftDown:b("mousedown",d),leftPressedOver:b("mouseover",
function(a){return void 0===a.buttons?!0:0!==(a.buttons&1)}),leftUp:b("mouseup",d)}});l("8l","b g1 g2 g3 c ds 80 7 s 7f g4 g5 55 46 g6 4m bf 3u g9 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,s,l,u,v,w,x){var y=e.detect();return function(e,A,D){p.configure(A);var B=n(D),C=r.create({beforeScan:q([]),afterScan:q([])});A=function(){D.body().each(function(b){D.getSelection().each(function(c){s.sharedOne(u.table,[c.startContainer(),c.endContainer()]).fold(function(){a.clear(b)},h.noop)})})};(y.browser.isChrome()||
y.browser.isSafari())&&D.events.contextmenu.bind(A);D.events.nodeChanged.bind(A);var F=l([]);D.runOrOnLoaded(function(a){var c=x.defaultView(a).dom(),f=d.mouse(c,a),g=d.keyboard(c,a,D.isRoot);F.set([w.leftDown.bind(a,f.mousedown),w.leftPressedOver.bind(a,f.mouseover),w.leftUp.bind(a,f.mouseup),v.bind(a,"keyup",function(a){a.raw().shiftKey&&b.isNavigation(a.raw().which)&&D.getSelection().each(function(b){g.keyup(a,b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset()).each(function(b){k(a,
b)})},h.noop)}),v.bind(a,"keydown",function(a){D.getSelection().each(function(c){C.trigger.beforeScan();var d=e.directionAt(c.endContainer()).isRtl()?b.rtl:b.ltr;g.keydown(a,c.startContainer(),c.startOffset(),c.endContainer(),c.endOffset(),d).each(function(b){k(a,b)});C.trigger.afterScan()})})]);var k=function(a,b){b.kill()&&a.kill();b.selection().each(function(a){D.setRelativeSelection(a.start(),a.finish())})}});var E=function(a){return{win:a.win,doc:a.doc,execCommand:a.execCommand,getSelection:function(){return B.getSelection(a)},
setSelection:a.setSelection,setRelativeSelection:a.setRelativeSelection,focus:a.focus}},G=function(a,b){return{doc:b.doc,win:b.win,execCommand:b.execCommand,focus:b.focus,setSelection:h.noop,setRelativeSelection:h.noop,getSelection:function(){return k.some(H(a))}}},H=function(a){var b=f.firstCursor(a).getOr(a);a=f.lastCursor(a).getOr(a);return{startContainer:h.constant(b),startOffset:h.constant(0),endContainer:h.constant(a),endOffset:h.constant(g.getEnd(a))}};return{get:function(){return D.on(function(b){return D.body().fold(m.none,
function(d){return a.retrieve(d).fold(function(){return D.getSelection().fold(m.none,function(a){return m.single(a,E(b))})},function(a){var d=c.map(a,function(a){return G(a,b)});return m.multiple(a,d)})})}).getOrThunk(m.none)},surround:H,events:C.registry,destroy:function(){var a=F.get();c.each(a,function(a){a.unbind()})}}}});l("ga","b 6 nw 7 3u l".split(" "),function(c,d,b,a,e,f){return function(g){g=d.merge({scopes:[f.fromDom(document)],shortcuts:[],swallow:!1},g);var h=b(g),k=[],m=[];c.each(g.scopes,
function(a){k.push(e.bind(a,"keydown",h.keydown).unbind);m.push(e.bind(a,"keypress",h.keypress).unbind)});return{off:h.off,on:h.on,destroy:function(){c.each(k,a.apply);c.each(m,a.apply)},events:h.events,swallowShortcuts:h.swallowShortcuts,yieldShortcuts:h.yieldShortcuts,swallowChars:h.swallowChars,yieldChars:h.yieldChars,swallowKeys:h.swallowKeys,yieldKeys:h.yieldKeys}}});l("8m","b c ga ah 7 s k 55 46 2u".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(b){var c=d.detect(),e=c.os.isOSX(),f=
c.os.isLinux(),g=e?a.META():a.CTRL(),c=[[g,"Z"]],h=e?[[a.META(),a.SHIFT(),"Z"]]:f?[[a.CTRL(),"Y"],[a.CTRL(),a.SHIFT(),"Z"]]:[[a.CTRL(),"Y"]],k=[[a.SHIFT(),121]],n=e?[[a.ALT(),121]]:[[121]],p=[[g,a.SHIFT(),"F"]],f=e?[[a.META(),a.ALT(),"U"]]:f?[[a.CTRL(),a.ALT(),"U"]]:[[a.CTRL(),a.SHIFT(),"U"]],e=e?[[a.CTRL(),a.ALT(),"H"]]:[[a.CTRL(),a.SHIFT(),"H"]],l=[[g,"B"]],A=[[g,"I"]],D=[[g,"U"]],B=[[g,221],[g,"M"]],C=[[g,219],[g,a.SHIFT(),"M"]],F=[[g,a.SHIFT(),"9"]],E=[[g,"K"]],g=[[g,"F"]],G=m.immutable("keys",
"trigger");return{undo:G(c,b.trigger.undo),redo:G(h,b.trigger.redo),context:G(k,b.trigger.context),toolbar:G(n,b.trigger.toolbar),bold:G(l,b.trigger.bold),italic:G(A,b.trigger.italic),underline:G(D,b.trigger.underline),indent:G(B,b.trigger.indent),outdent:G(C,b.trigger.outdent),link:G(E,b.trigger.link),search:G(g,b.trigger.search),blockquote:G(F,b.trigger.blockquote),help:G(e,b.trigger.help),fullscreen:G(p,b.trigger.fullscreen),plaincode:G(f,b.trigger.plaincode)}},p=function(a,b){return function(d){return c.contains(a,
d)?f.some(b):f.none()}};return function(a,d){var m=k.create({undo:h([]),redo:h([]),context:h([]),toolbar:h([]),plaincode:h([]),bold:h([]),italic:h([]),underline:h([]),indent:h([]),outdent:h([]),link:h([]),blockquote:h([]),search:h([]),help:h([]),fullscreen:h([])}),l=n(m),u=[l.undo,l.redo,l.context,l.toolbar],v=[l.plaincode,l.bold,l.italic,l.underline,l.indent,l.outdent,l.link,l.search,l.blockquote,l.help,l.fullscreen],u=(l=!0===d.features)?u.concat(v):u,w=c.bind(u,function(a){return a.keys()}),x=
c.map(u,function(a){return p(a.keys(),a.trigger())}),y=f.none();a.onCanvas(function(a){a=b({scopes:[a],shortcuts:w});y=f.some(a);a.swallowShortcuts(w);a.events.command.bind(function(a){var b=a.command();g.findMap(x,function(a){return a(b)}).each(e.apply)});a.on()});return{isHelpShortcutEnabled:e.constant(l),events:m.registry,destroy:function(){y.each(function(a){a.destroy()})}}}});l("og",["b","s","2u"],function(c,d,b){var a=function(a){return function(b){return b.key()===a}},e=b.immutable("key","value");
return{put:function(b,d,h,k,m){var n=void 0!==k?k:e,p=void 0!==m?m:a(d);b=c.foldl(b,function(a,b){var c=p(b)?n(d,h):b;return{updated:p(b)||a.updated,acc:a.acc.concat([c])}},{updated:!1,acc:[]});return b.updated?b.acc:b.acc.concat([n(d,h)])},get:function(b,e,h){e=void 0!==h?h:a(e);b=c.find(b,e);return d.from(b)}}});l("oh",["2u"],function(c){return c.immutable("popup","anchor")});l("gb",["b","og","oh","au"],function(c,d,b,a){return function(){var e=[],f=function(){e=c.filter(e,function(b){return a.isVisible(b.popup().panel())})};
return{recalculate:function(){f();c.map(e,function(a){a.anchor().recalculate(a.popup())})},dismiss:function(){f();c.map(e,function(a){a.anchor().isAnchored()||a.popup().close()})},update:function(a,c){e=d.put(e,a,c,b,function(b){return b.popup()===a})},destroy:function(){}}}});l("gc",["7","3u","29"],function(c,d,b){return{bind:function(a,c){var f=b.get(a);return{unbind:d.bind(a,"scroll",function(d){d=b.get(a);d.top()===f.top()&&d.left()===f.left()||c(d);f=d}).unbind}}}});l("8n","b ah 4z 7 r gb 33 1y 3u 2o gc 31 m 2a".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){return function(s,l,u){var v=f(),w=s.isInline()?a.noop:e.cached(function(){x=n.bind(s.doc().getOrDie(),function(a){v.dismiss();s.focus()})}),x=null,y=b.div();h.add(y,g.resolve("ui-container"));u.updateUi(y);s.events.ready.bind(function(){var a=s.placeholder(),a=p.ancestor(a,"."+g.resolve("socket")).bind(r.parent).getOr(a);m.prepend(a,y)});var z=k.bind(y,"keydown",function(b){var e;if(e=c.contains(d.BACKSPACE(),b.raw().which))e=b.target(),e=a.curry(q.is,e),e=!c.exists(["textarea",
"input",'[contenteditable="true"]'],e);e&&b.kill()});return{uiContainer:a.constant(y),refresh:v.recalculate,bounds:l,show:function(a,b){w();v.update(a,b);b.place(a)},destroy:function(){null!==x&&x.unbind();v.destroy();z.unbind()}}}});l("gd","7 jz 55 46 6b 3t".split(" "),function(c,d,b,a,e,f){return function(g,h,k){g=d(k,g);k=function(){var a=f(function(){e(a);m.trigger.expired()},h);return{clear:function(){e(a)}}};var m=a.create({expired:b([]),close:b([])}),n=0<h?k():{clear:c.noop};g.events.close.bind(function(){n.clear();
m.trigger.close()});return{element:g.element,action:g.action,destroy:g.destroy,events:m.registry}}});l("8o","7 gd 7t 33 1y 3u 6o".split(" "),function(c,d,b,a,e,f,g){return function(h,k,m,n,p,q,r,s){var l=r.layout.build(h,k,m,n,p,q,r,s),u=f.bind(l.element(),"mousedown",function(a){g.closest(a.target(),'input,div[contenteditable="true"],textarea,.ephox-polish-dialog.ephox-polish-help-modal,select,.ephox-polish-bottom-bar,.ephox-polish-side-bar')||a.prevent()});(function(){var d=e.toggler(l.element(),
a.resolve("content-ltr")),f=e.toggler(l.element(),a.resolve("content-rtl")),g=function(){var a=q.uiDirection().isRtl(),b=a?f.on:f.off;(a?d.off:d.on)();b()};h.events.uiStale.bind(function(){b.readDir(h).fold(g,function(a){a.ltrdir().fold(d.off,c.noop,d.on);a.rtldir().fold(f.off,c.noop,f.on);d.isOn()===f.isOn()&&g()})})})();return{element:l.element,connect:l.connect,viewport:l.viewport,socket:l.socket,showMessage:function(a,b,e){a=d(a,b,e);b=c.curry(l.hideBanner,a);a.events.expired.bind(b);l.displayBanner(a);
return b},displayBanner:l.displayBanner,hideBanner:l.hideBanner,init:l.init,refocus:l.tabstrip.refocus,tabstrip:l.tabstrip,refresh:l.refresh,position:l.position,state:l.state,destroy:function(){l.destroy();u.unbind()}}}});l("ge",[],function(){return{isDefaultEmpty:function(c){return/^\s*<p>\s*<br\s?\/?>\s*<\/p>\s*$/.test(c)}}});l("wl",["s"],function(c){return function(d){var b=void 0!==d?d.slice(0):[];return{pop:function(){return c.from(b.pop())},push:function(a){b.push(a)},peek:function(){return c.from(b[b.length-
1])},pushAll:function(a){b=b.concat(a)},clear:function(){b=[]},isEmpty:function(){return 0===b.length},size:function(){return b.length},state:function(){return b.slice(0)}}}});l("oi",["b","wl","55","46"],function(c,d,b,a){return function(e){var f=a.create({changed:b([])}),g=e.initial,h=d(e.undo),k=d(e.redo),m=function(a){h.isEmpty()&&h.push(g);h.push(a);f.trigger.changed()},n=function(a,b){b(h.peek().getOr(g),a)?(h.pop(),h.push(a)):(m(a),k.clear())};return{save:n,checkChanged:function(a,b){return!b(h.peek().getOr(g),
a)},undo:function(a,b){n(a,b);return h.pop().bind(function(a){h.isEmpty()||(k.push(a),f.trigger.changed());return h.peek()})},redo:function(a,b){b(h.peek().getOr(g),a)||k.clear();return k.pop().bind(function(a){m(a);return h.peek()})},reset:function(a){g=a;h.clear();k.clear()},state:function(){return{initial:g,undo:h.state(),redo:k.state()}},rewrite:function(a){var b=a(g),e=c.map(h.state(),a);a=c.map(k.state(),a);g=b;h=d(e);k=d(a)},events:f.registry}}});l("gf",["oi"],function(c){return{fromInitial:function(d){return c({initial:d,
undo:[],redo:[]})},fromState:function(d){return c(d)}}});l("8p","b 7 bk 75 ge 6v 76 55 46 47 2u 2m gf".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){var r=n.immutable("clean","marked"),l=function(a){return r(a.clean,a.marked)},t=function(a,b){return{initial:b(a.initial),undo:c.map(a.undo,b),redo:c.map(a.redo,b)}},u=function(a){return{clean:a.clean(),marked:a.marked()}};return function(c,n,x,y,z){var A=q.fromState(t(z,l)),D=k.create({changed:m([],A.events.changed),undo:h([]),redo:h([])}),B=function(a,
b){var d;if(!(d=""===a.clean()&&e.isDefaultEmpty(b.clean()))){d=c.filterHtml(c.internal(),a.clean());var f=c.filterHtml(c.internal(),b.clean());d=d===f}return d},C=function(){var a=c.filterHtml(c.history(),n.getContent()),b=c.filterHtml(c.history(),n.serialize());return r(a,b)},F=function(a){return n.deserialize(a.marked())};z=function(){var a=C();A.undo(a,B).each(F);n.domChanged();n.toEditing();D.trigger.undo()};var E=function(){var a=C();A.redo(a,B).each(F);n.domChanged();n.toEditing();D.trigger.redo()},
G=b.tap(function(a,b){if(a()){var c=C();A.save(c,b)}}),H=function(){G.instance(function(){return n.getSelectionStart().exists(p.inBody)},B)},I=function(a){var b=G.control.isBlocked();G.control.block();a=a();b||G.control.unblock();return a};x.editor().events.space.bind(H);x.editor().events.enter.bind(H);y.events.undo.bind(z);y.events.redo.bind(E);n.events.undoChanged.bind(H);n.events.loiter.bind(H);x=f.ui({"undo.general":{toggle:!1,value:"undo",textkey:a.key("action.undo"),action:z,shortcut:!0,updateGeneral:d.identity,
tooltip:g.get},"redo.general":{toggle:!1,value:"redo",textkey:a.key("action.redo"),action:E,shortcut:!0,updateGeneral:d.identity,tooltip:g.get}});return{undo:z,redo:E,save:H,checkChanged:function(){var a=C();return A.checkChanged(a,B)},reset:function(a){A.reset(r(a,a))},destroy:d.noop,state:function(){return t(A.state(),u)},rewrite:function(a,b){var c=function(c){return c.replace(a,b)};A.rewrite(function(a){return r(c(a.clean()),c(a.marked()))})},transaction:function(a){H();a=I(a);H();return a},disable:I,
replaceTop:function(){G.instance(d.constant(!0),d.constant(!0))},ui:x,events:D.registry}}});l("a8",["4n"],function(c){c=c.generate([{aboveView:["item"]},{inView:["item"]},{belowView:["item"]}]);return{aboveView:c.aboveView,inView:c.inView,belowView:c.belowView,cata:function(c,b,a,e){return c.fold(b,a,e)}}});l("8q","b 73 55 46 a8 3u 21 2a 6b 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(a,b){var c=null;return{throttle:function(){var d=arguments;null!==c&&k(c);c=m(function(){a.apply(null,
d);d=c=null},b)},destroy:function(){null!==c&&(k(c),c=null)}}};return function(k){var m=d.unbindable(),r=a.create({onChange:b([])}),l=n(function(){r.trigger.onChange()},1E3),t=function(){k.runOrOnLoaded(function(a){k.doc().each(function(a){m.set(f.bind(a,"scroll",function(a){l.throttle()}));l.throttle()})})};k.isInline()||t();var u=function(){return k.body().bind(function(a){return k.win().map(function(b){var d=b.innerHeight;b=h.children(a);var e=c.findIndex(b,function(a){if(!g.isElement(a))return!1;
a=a.dom().getBoundingClientRect();return a.top<d&&0<a.bottom});if(-1===e)return[a];var f=c.findIndex(b.slice(e+1),function(a){if(!g.isElement(a))return!1;a=a.dom().getBoundingClientRect();return!(a.top<d&&0<a.bottom)});return b.slice(e,-1<f?e+1+f:b.length)})}).getOr([])};return{sections:function(){return u()},setOn:t,setOff:function(){m.clear()},viewport:function(){return{assess:function(a){if(!g.isElement(a))return e.inView(a);var b=k.win().map(function(a){return a.innerHeight}).getOr(0),c=a.dom().getBoundingClientRect();
b=0>c.bottom?e.aboveView:c.top>b?e.belowView:e.inView;return b(a)}}},destroy:function(){m.clear();l.destroy()},events:r.registry}}});l("5g","b 85 c 7 s 86 87 68 88 89 8a 8b 8c 8d 8e 6q 8f 8g 8h 8i 8j 8k 8l 8m 8n 8o 8p 8q 54 75 3u 31 o".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,l,t,u,v,w,x,y,z,A,D,B,C,F,E,G,H,I,K,J){return function(I,O,N){var Q=h(I),R=x(N.profile),P=p(N.filters),S=r(),L=k(P,S,I.content,O,N.content),U=A(O,P,L),V=D(L,I.shortcuts),X=I.ui.layout.bounds(I.ui),W=B(L,X,O),Y=!1!==I.fullscreen.bundled?
q(L,V,I.fullscreen):G.fullscreen(),da=w(L,W,O,Y,I.platform),Z=C(L,V,W,da,Y,O,I.ui,N.ui),aa=l(L,Z),ea=F(P,L,aa,V,N.undo),ha=y(L,aa,ea),fa=u(P,L),ia=n(L,ea,I.editorcontext),ga=E(L),ca=z(Z,I.registration),la=m(O,L,aa,V,W,I.contextmenu),$=v.onNodeChange(L,fa),ka=t(N.laundry);ea.events.changed.bind(function(){ka.setDirty(!0)});L.events.interaction.bind(function(a){!ka.isDirty()&&ea.checkChanged()&&ka.setDirty(!0)});var pa=b.detect(),ba=pa.deviceType.isTouch(),X=V.isHelpShortcutEnabled();N=!L.isInline()&&
!ba&&I.ui.showHelpHint;I=g.editor(I.ui.editorName,I.ui.isFullScreen);var pa=H.translate(pa.os.isOSX()?"aria.help.mac":"aria.help.ctrl"),X=X?e.some(pa):e.none(),T=(L.isInline()?d.inline:d.editor)(Z.element(),L.element(),I,X,N),ra=e.none();L.runOrOnLoaded(function(a){var b=f.handle(a,function(a){K.closest(a.target(),"a").each(function(b){K.closest(b,'[contenteditable="false"]').each(a.kill)})});ra=e.some(b);ba&&(d.label(a,H.translate("aria.label.content")),d.region(Z.viewport()),d.region(Z.tabstrip.element()))});
return{region:a.constant(O),communication:a.constant(Q),profile:a.constant(R),filter:a.constant(P),internalevents:a.constant(S),content:a.constant(L),keyboard:a.constant(aa),shortcuts:a.constant(V),smartview:a.constant(W),undo:a.constant(ea),proximity:a.constant(ha),operations:a.constant(fa),context:a.constant(ia),fullscreen:a.constant(Y),platform:a.constant(da),registration:a.constant(ca),contextmenu:a.constant(la),ui:a.constant(Z),selections:a.constant(U),insertFilteredHtmlAtCursor:function(a){a=
P.filterHtml(P.input(),a);L.insertHtmlAtCursor(a)},viewablearea:a.constant(ga),laundry:a.constant(ka),state:function(){return{ui:Z.state(),undo:ea.state(),content:L.state(),profile:R.state(),laundry:ka.state()}},destroy:function(){ra.each(function(a){a.unbind()});c.each([L,ga,$,la,ca,da,Y,ia,fa,ha,ea,W,V,aa,U,P,R,Q,Z],function(a){a.destroy?a.destroy():J.log("Feature missing destroy method: ",a)});T.destroy()}}}});l("oj",["4g"],function(c){return{resolve:c.create("ephox-hermes").resolve}});l("gg",
"oj em 7 55 46 1a 1y 3u l 32".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(){var n=e.create({upload:a(["files"])}),q=k.fromTag("input");g.add(q,c.resolve("hidden"));g.add(q,c.resolve("file-selector-input"));f.setAll(q,{type:"file",accept:"image/*"});var r=h.bind(q,"change",function(a){a=d.toFiles(a);n.trigger.upload(a)});return{element:b.constant(q),open:function(){m.set(q,"");q.dom().click()},destroy:function(){r.unbind()},events:n.registry}};return{single:n,multiple:function(){var a=
n();f.set(a.element(),"multiple","multiple");return{element:a.element,open:a.open,destroy:a.destroy,events:a.events}}}});l("8r",["gg","em","55","46"],function(c,d,b,a){return function(){var e=c.single(),f=a.create({upload:b(["assets"])});e.events.upload.bind(function(a){d.multiple(a.files()).get(function(a){f.trigger.upload(a)})});return{element:e.element,open:e.open,destroy:e.destroy,events:f.registry}}});l("8t",["s","c1","90"],function(c,d,b){return function(a){var e=c.none(),f=function(b){g();
b=d(b);b.events.close.bind(function(){e=c.none()});e=c.some(b);a().displayBanner(b)},g=function(){e.each(a().hideBanner);e=c.none()};return{show:f,showKey:function(a){var c=b.get.apply(void 0,arguments);f(c)},hide:g,reset:function(){e=c.none()}}}});l("8u","b gh 7x 1a 3u l".split(" "),function(c,d,b,a,e,f){var g=function(b,g){return c.map(g,function(c){var g=f.fromTag("img"),k=e.bind(g,"load",function(){k.unbind();b.domChanged()});c=d.cata(c,function(a,b,c,d){return c},function(a,b,c){return b});a.set(g,
"src",c);return g})};return{insertMobileAssets:function(a,c,d,e){var f=g(a,e);return a.undoOperation(function(){var g=b.insertAt(a,c,f);d.uploadAssets(e);return g})},insertAssets:function(a,c,d){var e=g(a,d);a.focus();a.undoOperation(function(){b.insertAtCursor(a,e).each(function(b){a.setSelection(b.element(),b.offset(),b.element(),b.offset())});c.uploadAssets(d)})}}});l("wm",["4g"],function(c){return{resolve:c.create("ephox-gel").resolve}});l("rx","85 wm 6 55 46 1y 2n l 2o 2q 31".split(" "),function(c,
d,b,a,e,f,g,h,k,m,n){return function(p,q){var r=b.merge({layerClass:void 0,zindex:void 0,padding:"0px"},p),l=e.create({exiting:a([])}),t=h.fromTag("div");c.presentation(t);f.add(t,d.resolve("modal"));f.add(t,d.resolve("modal-hidden"));g.setAll(t,{position:"fixed",left:r.padding,top:r.padding,right:r.padding,bottom:r.padding});void 0!==r.background&&g.set(t,"background",r.background);void 0!==r.zindex&&g.set(t,"z-index",r.zindex);void 0!==r.layerClass&&f.add(t,r.layerClass);var u=void 0!==q?q:n.first("body").getOrDie();
k.append(u,t);return{element:function(){return t},content:function(a){m.empty(t);k.append(t,a)},show:function(){f.add(u,d.resolve("modal-active"));f.remove(t,d.resolve("modal-hidden"));f.add(t,d.resolve("modal-show"))},hide:function(){f.remove(u,d.resolve("modal-active"));f.add(t,d.resolve("modal-hidden"));f.remove(t,d.resolve("modal-show"))},destroy:function(){m.remove(t);f.remove(u,d.resolve("modal-active"))},events:l.registry}}});l("wn","85 wm 6 10d 7 55 46 1y 2n 3u l 2o 2q 31 36".split(" "),function(c,
d,b,a,e,f,g,h,k,m,n,p,q,r,l){return function(t,u){var v=a.onChange(),w=g.create({exiting:f([])}),x=b.merge({layerClass:null,zindex:null,padding:"0px",background:"rgba(0, 0, 0, 0.5)"},t),y=n.fromTag("div");c.presentation(y);h.add(y,d.resolve("moodal"));h.add(y,d.resolve("moodal-hidden"));k.setAll(y,{left:x.padding,top:x.padding,right:x.padding,bottom:x.padding});x.background&&k.set(y,"background",x.background);x.zindex&&k.set(y,"z-index",x.zindex);x.layerClass&&h.add(y,x.layerClass);var z=void 0!==
u?u:r.first("body").getOrDie();p.append(z,y);var A=n.fromTag("div");c.presentation(A);h.add(A,d.resolve("moodal-flexor"));p.append(y,A);var D=function(){k.setAll(A,{top:l.scrollY+"px",height:l.innerHeight+"px"})},B=function(){C.unbind();v.destroy();q.remove(y);h.remove(z,d.resolve("modal-active"))},C=m.bind(y,"click",function(){w.trigger.exiting();B()});v.events.ready.bind(function(){D()});return{element:e.constant(y),content:function(a){q.empty(A);p.append(A,a)},show:function(){h.add(z,d.resolve("moodal-active"));
h.remove(y,d.resolve("moodal-hidden"));h.add(y,d.resolve("moodal-show"));D()},hide:function(){h.remove(z,d.resolve("moodal-active"));h.add(y,d.resolve("moodal-hidden"));h.remove(y,d.resolve("moodal-show"))},destroy:B,events:w.registry}}});l("ol","c rx wn wm 6 46 47 1y 2n 2o 2q 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){return function(q){var r=e.deepMerge({layerClass:void 0,zindex:void 0,modal:{}},q);q=void 0!==q.container?q.container:p.first("body").getOrDie();var l=(c.detect().os.isiOS()?
b:d)(r.modal,q),t=l.element(),u=f.create({exiting:g([],l.events.exiting)});void 0!==r.zindex&&k.set(t,"z-index",r.zindex);void 0!==r.layerClass&&h.add(t,r.layerClass);h.add(t,a.resolve("centered-dialog"));m.append(q,t);return{content:l.content,show:function(){l.show()},hide:function(){l.hide()},destroy:function(){n.remove(t);l.destroy()},events:u.registry}}});l("om","85 2z c 4z 75 33 55 46 1a 1y 3u l 2y 2o 3c 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,l,t){var u=b.detect().deviceType.isiOS();
return function(){var b=function(a,b){m.add(a,f.resolve(b));return a},w=b(a.div(),"dialog"),x=b(a.div(),"top"),y=b(a.span(),"dialog-title"),z=b(a.span(),"dialog-close"),A=b(a.div(),"dialog-content"),D=b(a.div(),"dialog-controls");k.set(w,"tabindex",-1);k.set(z,"tabindex",-1);c.button(z,e.translate("button.close"));var B=n.bind(z,"click",function(){C.trigger.close()});l.append(w,[x,A,D]);l.append(x,[y,z]);var C=h.create({close:g([])});return{element:function(){return w},focus:function(){q.focus(w)},
setTitle:function(a){t.empty(y);r.append(y,p.fromText(a));u||(c.dialog(w,a),a=d.generate("ephox-aria"),k.set(y,"id",a),c.labelledBy(w,a))},setContent:function(a){t.empty(A);r.append(A,a);a=d.generate("ephox-aria");k.set(A,"id",a);c.describedBy(w,a)},setControls:function(a){t.empty(D);r.append(D,a)},close:function(){C.trigger.close()},destroy:function(){t.remove(w);B.unbind()},events:C.registry}}});l("gl","c ol s om 3m 33 2m 3u".split(" "),function(c,d,b,a,e,f,g,h){var k=c.detect();return function(c){var n=
a(),p=b.none(),q=d({container:c,layerClass:f.resolve("layer-dialog"),modal:{layerClass:f.resolve("layer-below-dialog")}});q.content(n.element());q.events.exiting.bind(function(){e.unlock([g.body()]);n.close()});var r=function(){q.hide();e.unlock([g.body()])};return{element:n.element,destroy:function(){n.destroy();p.each(function(a){a.unbind()});r();q.destroy()},setTitle:n.setTitle,setContent:n.setContent,setControls:n.setControls,show:function(){q.content(n.element());q.show();n.focus();k.deviceType.isTouch()&&
(p=b.some(h.bind(n.element(),"click",function(a){a.stop()})));e.lock([g.body()])},hide:r,events:n.events}}});l("gm","gk 8s 7 s 31 m".split(" "),function(c,d,b,a,e,f){var g=function(b){b.dom().click();return a.some(b)};return{setup:function(a,b,e){b=c.dialog({execute:function(a){a.dom().click()},ok:b.ok().element(),cancel:b.cancel().element()});a=d.dialog(a.element(),e,b);return{enter:a.enter,exit:a.exit,destroy:a.destroy}},button:function(b){return(f.is(b,".ephox-pastry-button")?a.some(b):e.descendant(b,
".ephox-pastry-button")).bind(g)},click:g,radio:function(a,e,f){e={item:b.constant(e),selected:b.constant(f)};return d.radio(a,e,c.radio({one:function(a,b){b.dom().click()}}))}}});l("8w","85 c gk gl gm 75 gn 33 55 46 1y 3u l 3t 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,l){return function(t,u,v,w,x,y){var z=g.okCancel("file-upload"),A=w(x),D=null,B=d.detect(),C=m.create({close:k([]),analytics:k(["message"]),escaped:k([]),insertAssets:k(["assets"]),opened:k([])}),F=function(){D.unbind();G.hide();
C.trigger.close();C.trigger.analytics("insert_image_closed");E()},E=function(){A.reset();z.ok().disable()},G=a(v);G.setTitle(f.translate("fileupload.title"));G.setContent(A.element());G.setControls(z.element());G.events.close.bind(F);n.add(G.element(),h.resolve("imageupload-dialog"));var H=y(G.element(),A.keylayouts(),b.dialog({cancel:z.cancel().element(),ok:z.ok().element(),execute:e.click,index:0}));A.events.upload.bind(function(a){C.trigger.insertAssets(a.assets());F()});A.events.dragndrop.bind(function(a){C.trigger.insertAssets(a.assets());
F()});A.events.success.bind(function(a){z.ok().enable()});A.events.lookup.bind(function(a){z.ok().disable()});A.events.setActive.bind(function(a){E()});z.events.ok.bind(function(){A.selected().each(function(a){C.trigger.insertAssets([a]);F()})});z.events.cancel.bind(F);E();return{show:function(){B.deviceType.isiOS()&&(c.hidden(u.element(),!0),r(function(){A.focus();c.hidden(u.element(),!1)},250));G.show();H.enter();C.trigger.analytics("insert_image_opened");C.trigger.opened();var a=q.fromDom(l);D=
p.bind(a,"orientationchange",function(){t.foreground()})},element:G.element,events:C.registry,destroy:function(){H.exit();H.destroy();G.hide();G.destroy();A.destroy();z.destroy()}}}});l("on","gh oj 7 1a 1y 1s".split(" "),function(c,d,b,a,e,f){return{previewAsset:function(f,h){c.cata(f,b.die("asset should not be a file type"),function(b,c,f){e.add(h,d.resolve("fluid-image"));a.set(h,"src",c)})}}});l("oo","85 2z c nh oj em 4z 7 a4 s 55 46 1a 1y 3u l 2y 2o 3c 32 ni".split(" "),function(c,d,b,a,e,f,g,
h,k,m,n,p,q,r,l,t,u,v,w,x,y){var z=b.detect();return function(b){var y=p.create({success:n(["assets"]),invalidUrl:n(["url"]),empty:n([]),lookup:n([])}),B=[],C=g.div(),F=r.toggler(C,e.resolve("url-indicator-loading")),E=a();E.events.start.bind(function(){F.on()});E.events.fail.bind(function(a){F.off();y.trigger.invalidUrl(a.url());B=[]});E.events.success.bind(function(a){F.off();var b=x.get(K);a.url()===b?f.fromImages([a.image()]).get(function(a){B=a;y.trigger.success(B)}):E.go(b)});var G=g.div();
r.add(G,e.resolve("url-selector"));var H=t.fromTag("label");b=t.fromText(b("fileupload.web.url"));var I=d.generate(e.resolve("input-id"));q.set(H,"for",I);r.add(H,e.resolve("url-input-label"));v.append(H,b);var K=t.fromTag("input");q.setAll(K,{id:I,type:"url",placeholder:"http://www.example.com/image.jpg"});r.add(K,e.resolve("url-input"));z.os.isAndroid()&&q.set(K,"autofocus","true");c.required(K);b=t.fromHtml("<span role=presentation>*</span>");r.add(b,e.resolve("url-input-required"));v.append(H,
b);w.append(G,[H,K,C]);var J=k(function(a){""!==a&&E.go(a)},1E3),M=l.bind(K,"input",function(){var a=x.get(K);""===a.trim()?(y.trigger.empty(),J.throttle("")):(y.trigger.lookup(),J.throttle(a))});return{element:h.constant(G),input:h.constant(K),events:y.registry,reset:function(){F.off();x.set(K,"")},focus:function(){u.focus(K)},selected:function(){return m.from(B[0])},destroy:function(){M.unbind()}}}});l("gq","b 85 2z oj on oo 4z 7 55 46 1a 1y l 2o 3c 2q ni".split(" "),function(c,d,b,a,e,f,g,h,k,
m,n,p,q,r,l,t,u){return function(u){var w=m.create({lookup:k([]),success:k([])}),x=g.span(),y=q.fromHtml('<div role=presentation><span role=presentation class="'+a.resolve("url-input-required")+'">*</span> '+u("fileupload.weburlhelp")+"</div>"),z=b.generate(a.resolve("help-message"));n.set(y,"id",z);p.add(y,a.resolve("fileupload-weburl-help"));var A=q.fromHtml("<div role=presentation><div role=presentation>"+u("fileupload.invalid1")+"</div><div role=presentation>"+u("fileupload.invalid2")+"</div><div role=presentation>"+
u("fileupload.invalid3")+"</div></div>");p.add(A,a.resolve("fileupload-weburl-help"));p.add(A,a.resolve("fileupload-weburl-help-invalid"));var D=function(a){t.empty(E);r.append(E,a)},B=function(a){var b=q.fromTag("img");r.append(E,b);e.previewAsset(a,b)},C=g.div();p.add(C,a.resolve("web-url-container"));var F=f(u),E=g.div();p.add(E,a.resolve("image-preview-container"));u=b.generate("ephox-hermes-url-state");d.live(E,u,"polite");d.controls(F.input(),u);d.describedBy(F.input(),z);z=g.div();p.add(z,
a.resolve("hbox"));l.append(z,[F.element(),E,y]);r.append(C,z);F.events.lookup.bind(function(a){w.trigger.lookup();t.empty(E)});F.events.success.bind(function(a){c.each(a.assets(),B);w.trigger.success()});F.events.invalidUrl.bind(function(){D(A)});F.events.empty.bind(function(){D(x)});D(x);return{element:h.constant(C),selected:F.selected,input:F.input,events:w.registry,focus:F.focus,reset:function(){D(x);F.reset()},destroy:function(){F.destroy()}}}});l("go","gq gk 8s 4z 7 75 55 46 47 2o".split(" "),
function(c,d,b,a,e,f,g,h,k,m){return function(n){n=a.div();var p=c(f.translate),q=h.create({upload:g(["assets"]),dragndrop:g(["assets"]),dragover:g([]),dragleave:g([]),drop:g([]),setActive:g(["item"]),lookup:k([],p.events.lookup),success:k([],p.events.success)}),r=[function(){var a=p.input();return b.input(a,d.input({}))}()];m.append(n,p.element());return{element:e.constant(n),events:q.registry,keylayouts:e.constant(r),reset:function(){p.reset()},focus:p.focus,selected:p.selected,destroy:function(){p.destroy()}}}});
l("8v","ae af b 85 gi 8r 8s 6 gj 7 s 8w go 75 76 55 46 l 3c q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,l,t,u,v,w,x){return function(y,z,A,D,B){var C=u.create({insertAsset:t(["asset"]),open:t([]),done:t([]),abort:t([])}),F=v.fromDom(x);D=e.mainmenu(F,"file-upload-menu",[]);var E=function(b,c){var d=e.item(F,b,r.get(c)+"...");a.menuItem(d,n.some(r.get(c)),n.none());return d},G=E("from-url",r.key("image.from-url")),E=E("from-camera",r.key("image.from-camera")),G=!0===B.allowLocalImages?[G,E]:
[G],H=f();H.events.upload.bind(function(a){n.from(a.assets()[0]).each(function(a){K();C.trigger.insertAsset(a)})});var I=function(a){a=a.assets();b.each(a,function(a){C.trigger.insertAsset(a)})},K=function(){k.target(A.uiContainer(),"mousedown")};w.append(D,G);D={name:"image",textkey:r.key("image.menu-button"),menuTextkey:r.key("image.menu"),icon:n.none,tooltip:l.get,contentFocus:!1,toggle:!1};G=[[{handlers:m.constant({"from-url":function(a){C.trigger.open();var b=p(y,z,A.uiContainer(),q,B,g.dialog);
b.events.insertAssets.bind(I);a=function(){y.focus();b.destroy()};b.events.opened.bind(K);b.events.close.bind(a);b.events.escaped.bind(a);b.show()},"from-camera":function(){C.trigger.open();H.open()}}),destroyer:m.noop,refreshMenu:m.noop,structure:m.constant({}),submenus:m.constant([]),items:m.constant(G),events:C.registry}]];D=c.menu(D,G,r.get,d.menu({focusActive:!0}));G={label:m.constant(!1),hasDialog:!0};return h.merge(D,G)}});l("wo","l9 la s 1a 1y l".split(" "),function(c,d,b,a,e,f){return function(g){var h=
f.fromTag("button");a.set(h,"type","button");e.add(h,d.resolve("independent-button"));return c(h,b.none(),g)}});l("op","f8 el gg oj 4z wo e4 7 s 1y l 2y 2o 3c".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){return function(l){var t=b.multiple(),u=e.div();m.add(u,a.resolve("drop-container"));var v=d.register(u,k.some(a.resolve("drop-active")),!1),w=f();w.content(g(l("fileupload.chooseimage")));m.add(w.element(),a.resolve("default-action"));m.add(w.element(),a.resolve("file-selector-trigger"));var x=
n.fromTag("p");m.add(x,a.resolve("help-text-drop-icon"));var y=n.fromTag("p");m.add(y,a.resolve("help-text-drop"));c.disable(y);q.append(y,n.fromText(l("fileupload.dropimages")));r.append(u,[x,y,w.element(),t.element()]);return{container:h.constant(u),dropper:h.constant(v),picker:h.constant(t),button:h.constant(w),focus:function(){p.focus(w.element())},destroy:function(){t.destroy();v.destroy();w.destroy()}}}});l("gp","op em 7 55 46 47".split(" "),function(c,d,b,a,e,f){return function(g){var h=c(g);
g=h.picker();var k=h.container(),m=h.dropper(),n=h.button(),p=e.create({upload:a(["assets"]),dragndrop:a(["assets"]),dragover:f([],m.events.dragover),dragleave:f([],m.events.dragleave),drop:f([],m.events.drop)}),q=function(a){return function(b){d.multiple(b.files()).get(function(b){a(b)})}};g.events.upload.bind(q(p.trigger.upload));m.events.dragndropimages.bind(q(p.trigger.dragndrop));n.events.click.bind(g.open);return{element:b.constant(k),button:b.constant(n),input:g.element,focus:h.focus,events:p.registry,
destroy:function(){h.destroy()}}}});l("gr","b 4z oq e4 la 7 55 46 2u 1a 1y l 2o 3c".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r){return function(l,t,u){var v=[],w=k.immutable("view","item","container"),x=h.create({setActive:g(["item"])}),y=d.div();n.add(y,e.resolve("tablayout-wrapper"));n.add(y,e.resolve("tablayout-wrapper-"+l));void 0!==u&&n.add(y,u);var z=d.div();n.add(z,e.resolve("tablayout-body"));var A=p.fromTag("div");n.add(A,e.resolve("tablayout-menu"));r.append(y,[A,z]);var D=function(c){var d=
b(c);d.content(a(c));n.add(d.element(),e.resolve("tablayout-item"));return d},B=[],C=c.map(t,function(a){var b=D(a.heading());m.set(b.element(),"data-ephox-pastry-tablayout-tab",a.heading());q.append(A,b.element());var c=p.fromTag("div");n.add(c,e.resolve("tablayout-content"));m.set(c,"data-ephox-pastry-tablayout-view",a.heading());q.append(z,c);B.push(c);var d=w(a,b,c);v.push(d);b.events.click.bind(function(){F(d)});return b}),F=function(a){c.each(v,function(b){var c=b.view(),d=b.item(),f=b.container();
b===a?(n.add(f,e.resolve("tablayout-active")),d.select(),c.renderer().render(f),x.trigger.setActive(d)):(n.remove(f,e.resolve("tablayout-active")),d.deselect())})};F(v[0]);return{element:function(){return y},tabs:f.constant(C),body:f.constant(z),menu:f.constant(A),tabContent:f.constant(B),destroy:function(){c.each(C,function(a){a.destroy()})},events:x.registry}}});l("gs",["2o","2q"],function(c,d){return function(b){return{render:function(a){d.empty(a);c.append(a,b)}}}});l("gt",["2u"],function(c){return c.immutable("heading",
"renderer")});l("gu",["7"],function(c){return{left:c.constant("left"),top:c.constant("top")}});l("8x","b 85 2z c gp gq gk 8s 6 4z gr gs gt gu 7 gm 75 33 46 47 1a 1y 2o".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,r,l,t,u,v,w,x,y,z,A){return function(D){var B=m.div(),C=e(u.translate),F=f(u.translate),E=function(a,b){var c=u.translate(a),d=p(b);return q(c,d)},G=E("fileupload.tabweburl",F.element());D=(D.allowLocalImages?[E("fileupload.tablocal",C.element())]:[]).concat(G);var H=n(r.top(),D,"file-upload");
d.hidden(C.input(),!0);E=function(){var b=C.button();z.add(b.element(),v.resolve("dialog-button-default"));var c=a.detect().browser.isFirefox(),d={execute:t.button},c=c?k.merge(d,{process:l.noop}):d,c=g.button(c);return h.button(b.element(),c)}();d.tabList(H.menu());var G=function(){var a=F.input();return h.input(a,g.input({}))}(),I=h.flow(H.menu(),{item:l.constant(".ephox-pastry-statebutton")},g.flow({trigger:t.button,executeOnArrow:!0})),E=[I].concat(E).concat(G),K=H.tabs();c.each(H.tabContent(),
function(a){d.tabPanel(a)});c.each(D,function(a,b){var c=K[b];d.tabButton(c.element(),a.heading());z.add(c.element(),v.resolve("tab-button"));c.events.click.bind(function(){I.clickFocus(c.element())})});c.each(H.tabContent(),function(a,c){var e=K[c],f=b.generate("ephox-aria");y.set(e.element(),"id",f);d.labelledBy(a,f)});D=w.create({upload:x(["assets"],C.events.upload),dragndrop:x(["assets"],C.events.dragndrop),dragover:x([],C.events.dragover),dragleave:x([],C.events.dragleave),drop:x([],C.events.drop),
lookup:x([],F.events.lookup),success:x([],F.events.success),setActive:x(["item"],H.events.setActive)});H.events.setActive.bind(function(a){a=y.get(a.item().element(),"data-ephox-pastry-tablayout-tab");a===u.translate("fileupload.tablocal")?C.focus():a===u.translate("fileupload.tabweburl")&&F.focus()});A.append(B,H.element());return{element:l.constant(B),events:D.registry,focus:F.focus,keylayouts:l.constant(E),reset:function(){F.reset()},selected:F.selected,destroy:function(){H.destroy();C.destroy();
F.destroy()}}}});l("8y",["a","b","gh","7"],function(c,d,b,a){var e=["image"],f=function(a,b,f,m){return d.exists(e,function(a){return c.isString(b.type)&&-1<b.type.indexOf(a)})};return{validate:function(c){c=d.foldl(c,function(c,d){return!1===b.cata(d,f,a.constant(!0))?{assets:c.assets,failure:!0}:{assets:c.assets.concat([d]),failure:c.failure}},{assets:[],failure:!1});return{assets:a.constant(c.assets),failure:a.constant(c.failure)}}}});l("gv",["em"],function(c){return{multiple:function(d){return c.multiple(d)},
single:function(d){return c.single(d)},singleWithUrl:function(d,b){return c.singleWithUrl(d,b)}}});l("wp",[],function(){function c(c,b,a){c.width=b;c.height=a;return c}return{create:function(d,b){return c(document.createElement("canvas"),d,b)},resize:c,get2dContext:function(c){return c.getContext("2d")},get3dContext:function(c){var b=null;try{b=c.getContext("webgl")||c.getContext("experimental-webgl")}catch(a){}b||(b=null);return b}}});l("wq",[],function(){return{getWidth:function(c){return c.naturalWidth||
c.width},getHeight:function(c){return c.naturalHeight||c.height}}});l("wr",[],function(){function c(a,b){return function(){a.apply(b,arguments)}}function d(b){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof b)throw new TypeError("not a function");this._value=this._state=null;this._deferreds=[];h(b,c(a,this),c(e,this))}function b(a){var b=this;null===this._state?this._deferreds.push(a):k(function(){var c=b._state?a.onFulfilled:a.onRejected;
if(null===c)(b._state?a.resolve:a.reject)(b._value);else{var d;try{d=c(b._value)}catch(e){a.reject(e);return}a.resolve(d)}})}function a(b){try{if(b===this)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"===typeof b||"function"===typeof b)){var d=b.then;if("function"===typeof d){h(c(d,b),c(a,this),c(e,this));return}}this._state=!0;this._value=b;f.call(this)}catch(g){e.call(this,g)}}function e(a){this._state=!1;this._value=a;f.call(this)}function f(){for(var a=0,c=this._deferreds.length;a<
c;a++)b.call(this,this._deferreds[a]);this._deferreds=null}function g(a,b,c,d){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.resolve=c;this.reject=d}function h(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){d||(d=!0,c(e))}}if(window.Promise)return window.Promise;var k=d.immediateFn||"function"===typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},m=Array.isArray||function(a){return"[object Array]"===
Object.prototype.toString.call(a)};d.prototype["catch"]=function(a){return this.then(null,a)};d.prototype.then=function(a,c){var e=this;return new d(function(d,f){b.call(e,new g(a,c,d,f))})};d.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&m(arguments[0])?arguments[0]:arguments);return new d(function(b,c){function d(f,g){try{if(g&&("object"===typeof g||"function"===typeof g)){var h=g.then;if("function"===typeof h){h.call(g,function(a){d(f,a)},c);return}}a[f]=g;0===--e&&b(a)}catch(k){c(k)}}
if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})};d.resolve=function(a){return a&&"object"===typeof a&&a.constructor===d?a:new d(function(b){b(a)})};d.reject=function(a){return new d(function(b,c){c(a)})};d.race=function(a){return new d(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})};return d});l("ws",[],function(){return{guessMimeType:function(c){var d=document.createElement("a");d.href=c;c=d.pathname.split(".");(c=c[c.length-1])&&(c=c.toLowerCase());
return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png"}[c]}}});l("pm",["wr","wp","ws","wq"],function(c,d,b,a){function e(a){return new c(function(b){function c(){a.removeEventListener("load",c);b(a)}a.complete?b(a):a.addEventListener("load",c)})}function f(b){return e(b).then(function(b){var c;c=d.create(a.getWidth(b),a.getHeight(b));d.get2dContext(c).drawImage(b,0,0);return c})}function g(a){return new c(function(b){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="blob";c.onload=function(){200==
this.status&&b(this.response)};c.send()})}function h(a){return new c(function(b){var c,d,e,f,g;a=a.split(",");(c=/data:([^;]+)/.exec(a[0]))&&(f=c[1]);c=atob(a[1]);if(window.WebKitBlobBuilder){g=new WebKitBlobBuilder;d=new ArrayBuffer(c.length);for(e=0;e<d.length;e++)d[e]=c.charCodeAt(e);g.append(d);b(g.getBlob(f))}else{d=new Uint8Array(c.length);for(e=0;e<d.length;e++)d[e]=c.charCodeAt(e);b(new Blob([d],{type:f}))}})}function k(a){return new c(function(b){var c=new FileReader;c.onloadend=function(){b(c.result)};
c.readAsDataURL(a)})}return{blobToImage:function(a){return new c(function(b){function c(){d.removeEventListener("load",c);b(d)}var d=new Image;d.addEventListener("load",c);d.src=URL.createObjectURL(a);d.complete&&c()})},imageToBlob:function(a){return e(a).then(function(a){var c=a.src;return 0===c.indexOf("blob:")?g(c):0===c.indexOf("data:")?h(c):f(a).then(function(a){return h(a.toDataURL(b.guessMimeType(c)))})})},blobToDataUri:k,blobToBase64:function(a){return k(a).then(function(a){return a.split(",")[1]})},
imageToCanvas:f,canvasToBlob:function(a,b){return h(a.toDataURL(b))},revokeImageUrl:function(a){URL.revokeObjectURL(a.src)},uriToBlob:function(a){return 0===a.indexOf("blob:")?g(a):0===a.indexOf("data:")?h(a):null}}});l("wt",[],function(){function c(a,b,c){a=parseFloat(a);a>c?a=c:a<b&&(a=b);return a}function d(a,b){var c,d,k,m,n=[],p=Array(10);for(c=0;5>c;c++){for(d=0;5>d;d++)n[d]=b[d+5*c];for(d=0;5>d;d++){for(k=m=0;5>k;k++)m+=a[d+5*k]*n[k];p[d+5*c]=m}}return p}function b(a,b){b=c(b,0,1);return a.map(function(a,
d){a=0===d%6?1-(1-a)*b:a*b;return c(a,0,1)})}var a=[0,0.01,0.02,0.04,0.05,0.06,0.07,0.08,0.1,0.11,0.12,0.14,0.15,0.16,0.17,0.18,0.2,0.21,0.22,0.24,0.25,0.27,0.28,0.3,0.32,0.34,0.36,0.38,0.4,0.42,0.44,0.46,0.48,0.5,0.53,0.56,0.59,0.62,0.65,0.68,0.71,0.74,0.77,0.8,0.83,0.86,0.89,0.92,0.95,0.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];return{identity:function(){return[1,
0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:b,multiply:d,adjustContrast:function(b,f){var g;f=c(f,-1,1);f*=100;0>f?g=127+f/100*127:(g=f%1,g=0===g?a[f]:a[Math.floor(f)]*(1-g)+a[Math.floor(f)+1]*g,g=127*g+127);return d(b,[g/127,0,0,0,0.5*(127-g),0,g/127,0,0,0.5*(127-g),0,0,g/127,0,0.5*(127-g),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function(a,b){b=c(255*b,-255,255);return d(a,[1,0,0,0,b,0,1,0,0,b,0,0,1,0,b,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function(a,b){var g;b=c(b,-1,1);g=1+(0<b?
3*b:b);return d(a,[0.3086*(1-g)+g,0.6094*(1-g),0.082*(1-g),0,0,0.3086*(1-g),0.6094*(1-g)+g,0.082*(1-g),0,0,0.3086*(1-g),0.6094*(1-g),0.082*(1-g)+g,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function(a,b){var g,h;b=c(b,-180,180)/180*Math.PI;g=Math.cos(b);h=Math.sin(b);return d(a,[0.213+0.787*g+-0.213*h,0.715+-0.715*g+-0.715*h,0.072+-0.072*g+0.928*h,0,0,0.213+-0.213*g+0.143*h,0.715+g*(1-0.715)+0.14*h,0.072+-0.072*g+-0.283*h,0,0,0.213+-0.213*g+-0.787*h,0.715+-0.715*g+0.715*h,0.072+0.928*g+0.072*h,0,0,0,0,
0,1,0,0,0,0,0,1])},adjustColors:function(a,b,g,h){b=c(b,0,2);g=c(g,0,2);h=c(h,0,2);return d(a,[b,0,0,0,0,0,g,0,0,0,0,0,h,0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function(a,f){f=c(f,0,1);return d(a,b([0.393,0.769,0.189,0,0,0.349,0.686,0.168,0,0,0.272,0.534,0.131,0,0,0,0,0,1,0,0,0,0,0,1],f))},adjustGrayscale:function(a,f){f=c(f,0,1);return d(a,b([0.33,0.34,0.33,0,0,0.33,0.34,0.33,0,0,0.33,0.34,0.33,0,0,0,0,0,1,0,0,0,0,0,1],f))}}});l("or",["wp","wq","pm","wt"],function(c,d,b,a){function e(a,e){return b.blobToImage(a).then(function(a){var f=
c.create(d.getWidth(a),d.getHeight(a)),g=c.get2dContext(f);g.drawImage(a,0,0);m(a);a=g.getImageData(0,0,f.width,f.height);var h=a.data,k,n,l,x,y,z=e[0],A=e[1],D=e[2],B=e[3],C=e[4],F=e[5],E=e[6],G=e[7],H=e[8],I=e[9],K=e[10],J=e[11],M=e[12],O=e[13],N=e[14],Q=e[15],R=e[16],P=e[17],S=e[18],L=e[19];for(y=0;y<h.length;y+=4)k=h[y],n=h[y+1],l=h[y+2],x=h[y+3],h[y]=k*z+n*A+l*D+x*B+C,h[y+1]=k*F+n*E+l*G+x*H+I,h[y+2]=k*K+n*J+l*M+x*O+N,h[y+3]=k*Q+n*R+l*P+x*S+L;g.putImageData(a,0,0);return b.canvasToBlob(f)})}function f(a,
e){return b.blobToImage(a).then(function(a){var f=c.create(d.getWidth(a),d.getHeight(a)),g=c.get2dContext(f),h;g.drawImage(a,0,0);m(a);a=g.getImageData(0,0,f.width,f.height);h=g.getImageData(0,0,f.width,f.height);h=function(a,b,c){function d(a,b,c){a>c?a=c:a<b&&(a=b);return a}var e,f,g,h,k,m,n,p,q,l,r,s,t,M;g=Math.round(Math.sqrt(c.length));h=Math.floor(g/2);e=a.data;f=b.data;t=a.width;M=a.height;for(k=0;k<M;k++)for(a=0;a<t;a++){for(l=m=n=p=0;l<g;l++)for(q=0;q<g;q++)r=d(a+q-h,0,t-1),s=d(k+l-h,0,M-
1),r=4*(s*t+r),s=c[l*g+q],m+=e[r]*s,n+=e[r+1]*s,p+=e[r+2]*s;r=4*(k*t+a);f[r]=d(m,0,255);f[r+1]=d(n,0,255);f[r+2]=d(p,0,255)}return b}(a,h,e);g.putImageData(h,0,0);return b.canvasToBlob(f)})}function g(a){return function(e,f){return b.blobToImage(e).then(function(e){var g=c.create(d.getWidth(e),d.getHeight(e)),h=c.get2dContext(g),k,p=Array(256);for(k=0;k<p.length;k++)p[k]=a(k,f);h.drawImage(e,0,0);m(e);e=h.getImageData(0,0,g.width,g.height);k=e.data;var l;for(l=0;l<k.length;l+=4)k[l]=p[k[l]],k[l+1]=
p[k[l+1]],k[l+2]=p[k[l+2]];h.putImageData(e,0,0);return b.canvasToBlob(g)})}}function h(b){return function(c,d){return e(c,b(a.identity(),d))}}function k(a){return function(b){return f(b,a)}}var m=b.revokeImageUrl;return{invert:function(a){return function(b){return e(b,a)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:h(a.adjustBrightness),hue:h(a.adjustHue),saturate:h(a.adjustSaturation),contrast:h(a.adjustContrast),grayscale:h(a.adjustGrayscale),sepia:h(a.adjustSepia),colorize:function(b,
c,d,f){return e(b,a.adjustColors(a.identity(),c,d,f))},sharpen:k([0,-1,0,-1,5,-1,0,-1,0]),emboss:k([-2,-1,0,-1,1,1,0,1,2]),gamma:g(function(a,b){return 255*Math.pow(a/255,1-b)}),exposure:g(function(a,b){return 255*(1-Math.exp(-(a/255)*b))}),colorFilter:e,convoluteFilter:f}});l("wu",["wr","pm","wp","wq"],function(c,d,b,a){function e(b,c,d){var m=a.getWidth(b),n=a.getHeight(b),m=c/m,p=d/n,n=!1;if(0.5>m||2<m)m=0.5>m?0.5:2,n=!0;if(0.5>p||2<p)p=0.5>p?0.5:2,n=!0;b=f(b,m,p);return n?b.then(function(a){return e(a,
c,d)}):b}function f(d,e,f){return new c(function(c){var n=a.getWidth(d),p=a.getHeight(d),q=Math.floor(n*e),l=Math.floor(p*f),s=b.create(q,l);b.get2dContext(s).drawImage(d,0,0,n,p,0,0,q,l);c(s)})}return{scale:e}});l("os",["pm","wp","wq","wu"],function(c,d,b,a){var e=c.revokeImageUrl,f=function(a){return function(b){e(a);return b}};return{rotate:function(a,f){return c.blobToImage(a).then(function(k){var m=d.create(b.getWidth(k),b.getHeight(k)),n=d.get2dContext(m),p=0,q=0;f=0>f?360+f:f;90!=f&&270!=f||
d.resize(m,m.height,m.width);if(90==f||180==f)p=m.width;if(270==f||180==f)q=m.height;n.translate(p,q);n.rotate(f*Math.PI/180);n.drawImage(k,0,0);e(k);return c.canvasToBlob(m,a.type)})},flip:function(a,f){return c.blobToImage(a).then(function(a){var g=d.create(b.getWidth(a),b.getHeight(a)),n=d.get2dContext(g);"v"==f?(n.scale(1,-1),n.drawImage(a,0,-g.height)):(n.scale(-1,1),n.drawImage(a,-g.width,0));e(a);return c.canvasToBlob(g)})},crop:function(a,b,f,m,n){return c.blobToImage(a).then(function(a){var g=
d.create(m,n);d.get2dContext(g).drawImage(a,-b,-f);e(a);return c.canvasToBlob(g)})},resize:function(b,d,e){return c.blobToImage(b).then(function(m){var n=f(m);return a.scale(m,d,e).then(function(a){return c.canvasToBlob(a,b.type)}).then(n,n)})}}});l("gy",["or","os"],function(c,d){return{invert:function(b){return c.invert(b)},sharpen:function(b){return c.sharpen(b)},emboss:function(b){return c.emboss(b)},brightness:function(b,a){return c.brightness(b,a)},hue:function(b,a){return c.hue(b,a)},saturate:function(b,
a){return c.saturate(b,a)},contrast:function(b,a){return c.contrast(b,a)},grayscale:function(b,a){return c.grayscale(b,a)},sepia:function(b,a){return c.sepia(b,a)},colorize:function(b,a,d,f){return c.colorize(b,a,d,f)},gamma:function(b,a){return c.gamma(b,a)},exposure:function(b,a){return c.exposure(b,a)},flip:function(b,a){return d.flip(b,a)},crop:function(b,a,c,f,g){return d.crop(b,a,c,f,g)},resize:function(b,a,c){return d.resize(b,a,c)},rotate:function(b,a){return d.rotate(b,a)}}});l("9n",["gx",
"gy"],function(c,d){var b=function(a){return function(b){return d.rotate(b,a)}},a=function(a){return function(b){return d.flip(b,a)}},e=function(a){return function(b){return d.resize(b,a.width(),a.height())}},f=c.pToFR(d.sharpen),g=c.pToFR(b(-90)),b=c.pToFR(b(90)),h=c.pToFR(a("v")),a=c.pToFR(a("h"));return{rotateLeft:g,rotateRight:b,flipVertical:h,flipHorizontal:a,sharpen:f,crop:function(a,b,e,f){return c.pToFR(function(c){return d.crop(c,a,b,e,f)})},resizeTo:function(a){return c.pToFR(e(a))}}});
l("gz",["gx"],function(c){return{mapIfSet:function(d,b){return c.map(d,function(a){return a.map(b)})},applyIfSet:function(d){return function(b){return c.bind(d,function(a){return a.fold(function(){return c.pure(b)},function(a){return a(b)})})}}}});l("a5",["b"],function(c){return{partition:function(d){var b=[],a=[];c.each(d,function(c){c.fold(function(a){b.push(a)},function(b){a.push(b)})});return{errors:b,values:a}}}});l("ot",["2u"],function(c){return c.immutable("width","height")});l("wv",["4n",
"p2"],function(c,d){var b=c.generate([{special:["size"]},{regular:["value","size","unit"]}]);return{identify:function(a){a=a.match(/(\d*\.?\d*)(.*)/);return""!==a[1]?b.regular(a[0],d(a[1]),a[2]):b.special(a[0])}}});l("ou","s ot wv 2u 1a 2n 64 2r dp".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a,d){return f.getRaw(a,d).orThunk(function(){return e.has(a,d)?c.some(e.get(a,d)):c.none()}).bind(function(a){return b.identify(a).fold(function(a){return c.none()},function(a,b,d){switch(d){case "":case "px":return c.some(k(b,
10));default:return c.none()}})})},n=function(a,b,d){b=b(a);return 0<b?c.some(b):m(a,d)};return{get:function(a){return n(a,h.get,"width").bind(function(b){return n(a,g.get,"height").map(function(a){return d(b,a)})})},measure:n}});l("ov",[],function(){var c=function(a,b){var c=b/a;return 1>c?c:1},d=function(a,b){var d=c(a.height,b.height);return 1===d?a:{width:a.width*d,height:b.height}},b=function(a,b){var d=c(a.width,b.width);return 1===d?a:{width:b.width,height:a.height*d}};return{max:function(a,
c){var f=0<c.height?c.height:0,g=0<c.width?c.width:0;if(!(a.height>f||a.width>g)||f===g&&0===f)return a;var f={width:g,height:f},g=a.width>a.height,h=0<f.height,k=(h?a.height/f.height:0)>(0<f.width?a.width/f.width:0);return(f.width===f.height&&g||!h||!k?b:d)(a,f)}}});l("h0","gw s ot gx ou f6 ov".split(" "),function(c,d,b,a,e,f,g){var h=function(b){var d=c.createObjectURL(b);return a.map(f.load(d),function(a){a=k(a);c.revokeObjectURL(d);return a})},k=function(a){return b(a.dom().naturalWidth,a.dom().naturalHeight)},
m=function(a){var b=k(a);return e.get(a).filter(function(a){return a.width()!==b.width()||a.height()!==b.height()})};return{restrain:function(c){var e=c.width(),f=c.height(),k=function(a){var c=g.max({width:a.width(),height:a.height()},{width:e,height:f});return a.height()>f||a.width()>e?d.some(b(c.width,c.height)):d.none()};return function(b){b=h(b);return a.map(b,k)}},changedBounds:function(b){return a.map(f.loadIfNeeded(b),m)}}});l("8z","gh gv gw 9n gx gz a5 h0 o".split(" "),function(c,d,b,a,e,
f,g,h,k){var m=function(b){b=f.mapIfSet(b,a.resizeTo);return f.applyIfSet(b)},n=function(a,b,c){return e.fromChain([m(a),c])(b)};return{instance:function(a){var f=h.restrain(a);return function(a){return c.cata(a,function(c,g,h,k){c=f(g);return n(c,g,function(c){if(c===g)return e.pure(a);b.revokeObjectURL(h);return e.fromFuture(d.single(c))})},function(){return e.pure(a)})}},processResults:function(a){return function(b){b=g.partition(b);0<b.errors.length&&(a("imageedit.generic"),k.error("Image resample errors: ",
b.errors));return b.values}},resampleAction:n}});l("5h","8r 8s 7 8t 8u 8v 8w 8x 8y 75 8z 90 6v 55 46".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,l,s){return function(t,u,v,w,x){var y=t.content(),z=t.smartview(),A=t.ui().tabstrip,D=a(t.ui),B=n.processResults(D.showKey),C=function(a){t.undo().save();a=k.validate(a);(a.failure()?b.curry(D.showKey,"fileupload.invalidimages"):D.hide)();v.assets(a.assets()).map(B).get(function(a){e.insertAssets(y,u,a)})},F=function(a){C(a.assets())};w.events.insertAssets.bind(function(a){x.allowLocalImages?
C(a.assets()):p.getOrLog("errors.dragdrop.images.disallowed")});var E=y.cursor();w=s.create({analytics:l(["message"])});return{ui:q.ui({"fileupload.general":b.constant({value:"image",textkey:m.key("insert.image"),icon:!0,updateGeneral:b.identity,action:function(){var a=g(y,A,z.uiContainer(),h,x,d.dialog);a.events.insertAssets.bind(F);a.events.close.bind(function(){y.focus();a.destroy()});a.events.escaped.bind(function(){y.focus();a.destroy()});t.content().hideInlineSelection();a.show()},hasDialog:!0}),
"fileupload.menu":function(){var a=f(y,A,z,t.ui(),x);a.events.insertAsset.bind(function(a){E.get().bind(function(b){e.insertMobileAssets(y,b,u,[a.asset()])})});a.events.open.bind(function(a){y.getSelection().each(E.save)});return a},"camera.general":function(){var a=c();a.events.upload.bind(function(a){E.get().bind(function(b){e.insertMobileAssets(y,b,u,a.assets())})});return{value:"image",textkey:m.key("image.from-camera"),icon:!0,updateGeneral:b.identity,action:function(){y.getSelection().each(E.save);
y.toReading();a.open()},hasDialog:!0}}},b.identity),events:w.registry,destroy:function(){}}}});l("91",["7","33","ci"],function(c,d,b){var a=d.resolve("find-match");d=d.resolve("find-mark");var e="."+a+", ."+d;return{configure:function(a){a.addSelector(a.output(),e,b.unwrap);a.addSelector(a.history(),e,b.unwrap);a.addSelector(a.internal(),e,b.unwrap)},matchClass:c.constant(a),markClass:c.constant(d),findIdAttr:c.constant("data-ephox-find-id"),shiftKeyState:function(a){return{isShift:c.constant(a)}}}});
l("ww",[],function(){var c=function(c){return{fold:c}};return{created:function(d){return c(function(b,a){return a(d)})},preserved:function(d){return c(function(b,a){return b(d)})}}});l("10q",["2u"],function(c){return c.immutable("id","match","current")});l("13l",["4g"],function(c){return{resolve:c.create("data.ephox.cram").resolve}});l("13m",["4g"],function(c){return{resolve:c.create("ephox-cram").resolve}});l("10r","13l 13m 7 s 1a 1y 4e 31 2a".split(" "),function(c,d,b,a,e,f,g,h,k){var m=c.resolve("highlight-id"),
n=d.resolve("highlight-wrap"),p=function(a,b){return h.closest(a,"."+b)},q=function(b){return a.from(e.get(b,m))};return{marker:p,idMarker:function(a){return p(a,n)},id:q,set:function(a,b){e.set(a,m,b);f.add(a,b)},all:function(a){return q(a).fold(b.constant([a]),function(b){var c=k.owner(a);return g.descendants(c,"."+b)})}}});l("ox",["2u"],function(c){return c.immutable("word","pattern")});l("15v",["b","7","uq","hm"],function(c,d,b,a){return{separate:function(e,f,g){var h=c.bind(g,function(a){return[a.start(),
a.finish()]}),k=a.splits(f,h,function(a,c){return b.subdivide(e,a.element(),c)});return c.map(g,function(b){var f=a.sublist(k,b.start(),b.finish()),f=c.map(f,function(a){return a.element()}),g=c.map(f,e.property().getText).join("");return{elements:d.constant(f),word:b.word,exact:d.constant(g)}})}}});l("154","b s ox ex zd 12b 15v 6l hm hn".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=function(b,c){return k.generate(c,function(c,e){var f=e+b.property().getText(c).length;return d.from(a.range(c,e,
f))})},p=function(a,b,d,h){b=e.group(a,b,h);return c.bind(b,function(b){b=f.justText(b);var e=c.map(b,a.property().getText).join(""),e=m.findmany(e,d);b=n(a,b);return g.separate(a,b,e)})};return{safeWords:function(a,d,e,f){e=c.map(e,function(a){var c=h.safeword(a);return b(a,c)});return p(a,d,e,f)},safeToken:function(a,c,d,e){d=b(d,h.safetoken(d));return p(a,c,[d],e)},run:p}});l("13n",["154"],function(c){return{safeWords:function(d,b,a,e){return c.safeWords(d,b,a,e)},safeToken:function(d,b,a,e){return c.safeToken(d,
b,a,e)},run:function(d,b,a,e){return c.run(d,b,a,e)}}});l("10s",["e7","13n"],function(c,d){var b=c();return{safeWords:function(a,c,f){return d.safeWords(b,a,c,f)},safeToken:function(a,c,f){return d.safeToken(b,a,c,f)},run:function(a,c,f){return d.run(b,a,c,f)}}});l("wx","b 10q 10r 2z 7 s 10s".split(" "),function(c,d,b,a,e,f,g){var h=function(g,h){var n=c.bind(g.elements(),function(a){return b.marker(a,h).fold(e.constant([]),function(a){return[a]})}),p=a.generate("ephox-cram");return d(p,g,f.from(n[0]))};
return{matchWords:function(a,b,c){return g.safeWords(a,b,c)},matchToken:function(a,b,c){return g.safeToken(a,b,c)},matchPattern:function(a,b,c){return g.run(a,[b],c)},annotates:function(a,b){return c.map(a,function(a){return h(a,b)})}}});l("ow",["b","ww","wx","7","hl"],function(c,d,b,a,e){var f=function(f,h,k,m){h=b.annotates(m,k.label());return c.bind(h,function(b){return b.current().fold(function(){var h=b.match();if(f.ignore(h))return[];h=e.wrapper(h.elements(),k.nu)||[];c.each(h,a.curry(k.tag,
b));return[d.created(h)]},function(a){return[d.preserved(a)]})})};return{highlight:function(a,c,d,e){d=b.matchToken(c,d,a.optimise);return f(a,c,e,d)},highlightPattern:function(a,c,d,e){d=b.matchPattern(c,d,a.optimise);return f(a,c,e,d)}}});l("h1","b ow 7 s ox 6l 91 f7 1a 1y l 2o 21 2q 4e 83 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,l,s,t,u){var v=function(a,b){return q.isElement(b)&&h.isBlock(b)?0>t.get(b).toLowerCase().indexOf(a):!1},w=function(a){return{ignore:b.constant(!1),optimise:b.curry(v,
a.toLowerCase())}},x=b.constant("."+g.matchClass()),y={label:g.matchClass,tag:function(a,b){m.add(b,g.matchClass());k.set(b,g.findIdAttr(),a.id())},nu:function(){var a=n.fromTag("span");return{element:b.constant(a),wrap:b.curry(p.append,a)}}},z=function(a){c.each(a,function(a){m.add(a,g.markClass())})},A=function(a){c.each(a,function(a){m.remove(a,g.markClass())})},D=function(b,d){var e=c.groupBy(s.descendants(b,d),function(a){return k.get(a,g.findIdAttr())});return 0===e.length?a.none():a.some(e)},
B=function(a,c){var d=f.custom(f.sanitise(a),b.constant(0),b.constant(0),c);return e(a,d)},C=function(a,b,d){return D(a,x()).map(function(e){var f=c.filter(e,function(a){return m.has(a[0],g.markClass())}),h=c.findIndex(e,function(a){return c.contains(f,a)});return{pos:d(e,c.flatten(f),h,b(h,e.length)),all:D(a,x())}})},F=function(a,b,c,d){A(b);z(a[d]);return d},E=function(a,b){return a===b-1?0:a+1},G=function(a,b){return 0===a?b-1:a-1},H=function(a,b){return C(a,E,function(a,d,e,f){F(a,d,e,f);p.before(d[0],
n.fromText(b));c.each(d,l.remove);return 0===f?f:e})};return{search:function(b,c,e){if(0===c.length)return a.none();var f=w(c),g=u.children(b);c=!0===e?B(c,a.none()):B(c,a.some("gi"));d.highlightPattern(f,g,c,y);return D(b,x()).map(function(b){z(b[0]);return{all:a.some(b),pos:0}})},clear:function(b){b=s.descendants(b,x());c.each(b,l.unwrap);return a.none()},next:function(a){return C(a,E,F)},prev:function(a){return C(a,G,F)},replace:H,replaceAll:function(b,c){for(;H(b,c).isSome(););return a.none()}}});
l("h2",["7","s","h1","2a"],function(c,d,b,a){return function(e,f,g){var h=function(){f.counter.update(0,0)},k=function(b){b.all.fold(h,function(c){f.counter.update(b.pos+1,c.length);var d=c[b.pos];c=d[0];d=d[d.length-1];e.setSelection(c,0,d,a.children(d).length);g.element(c)})},m=function(){g.cursor();h()},n=function(a,c,e){b.clear(a);b.search(a,c,e).fold(m,k);return d.some(c)},p=function(a,c){var d=(!0===c?b.prev:b.next)(a);d.fold(m,k);return d},q=function(a){e.body().each(function(c){b.replace(c,
a).fold(m,k);e.domChanged();e.undoChanged()})},l=d.none(),s=function(){l=d.none()};f.events.search.bind(function(a){e.body().each(function(b){n(b,a.term(),a.matchcase())})});f.events.next.bind(function(){e.body().each(function(a){p(a,!1)})});f.events.prev.bind(function(){e.body().each(function(a){p(a,!0)})});f.events.replace.bind(function(a){q(a.value())});f.events.replaceAll.bind(function(a){e.body().each(function(c){b.replaceAll(c,a.value()).fold(m,k);e.undoChanged()})});f.events.interactive.bind(function(a){e.body().each(function(b){l=
n(b,a.term(),a.matchcase())})});f.events.encase.bind(function(a){e.body().each(function(b){l.each(function(c){n(b,c,a.matchcase())})})});f.events.clear.bind(function(a){e.body().each(function(a){b.clear(a);s()})});return{zeroCount:h,updateMatch:k,enterSearchAction:function(a,b){e.body().each(function(d){var e=f.getCase();l=l.filter(function(b){return a===b}).fold(function(){return n(d,a,e)},function(f){return p(d,b.isShift()).fold(function(){return n(d,a,e)},c.constant(l))})});(0===a.length?f.counter.hide:
f.counter.show)()},enterReplaceAction:q,clearLastSearch:s}}});l("h3",["c","7","cj"],function(c,d,b){var a=c.detect().deviceType.isiOS();return function(c){var f=c.content();c=function(a){f.elementIntoView(a)};var g=function(){f.cursorIntoView()};c={element:a?c:d.curry(b.elementIntoView,f),cursor:a?g:d.curry(b.cursorIntoView,f)};return{get:d.constant(c)}}});l("oz","85 ag 4z h7 e4 lb 7 75 33 55 46 47 1a 2m 1y 4b 2n 3u l 2y 2o 3c ig 2q au".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,l,s,t,u,v,w,x,
y,z,A,D,B){var C=function(a,b,d){a=a();var e=a.element();t.add(e,b);c.button(e,d);q.set(e,"tabindex","-1");a.events.click.bind(function(){x.focus(e)});return a},F=function(b,c){var d=C(a,b,c);q.set(d.element(),"title",c);return d},E=function(b,c){var d=k.resolve("inline-main-button"),d=b.concat([d]),d=C(a,d,c);d.content(e(c));return d},G=function(a,b,c){var d=k.resolve("inline-main-button-toggle");a=a.concat([d]);c=C(f,a,c);q.set(c.element(),"title",b);return c},H=function(a,b,d){var e=w.fromTag("input");
t.add(e,a);q.set(e,"placeholder",b);c.label(e,d);return{element:g.constant(e),destroy:g.curry(D.remove,e)}};return{counter:function(a){var c=b.div(),e=b.span();s.add(c,k.resolve("search-widget-counter"));s.add(e,k.resolve("search-widget-counter-text"));y.append(c,e);return{element:g.constant(c),update:function(a,b){var c=h.translate("units.amount-of-total",a,b);D.empty(e);y.append(e,w.fromText(c));B.isVisible(e)&&d.speak(l.body(),c)},hide:function(){u.set(c,"display","none")},show:function(){u.remove(c,
"display")},destroy:function(){D.remove(e);D.remove(c)}}},dummyCounter:function(a){a=b.div();s.add(a,k.resolve("search-widget-counter"));return{element:g.constant(a),update:g.noop,hide:g.noop,show:g.noop,destroy:g.curry(D.remove,a)}},searchField:function(){var a=b.span(),c=F([k.resolve("stepper-button"),k.resolve("search-widget-previous")],h.translate("search.previous")),d=F([k.resolve("stepper-button"),k.resolve("search-widget-next")],h.translate("search.next")),e=G([k.resolve("search-widget-more")],
h.translate("aria.label.more"),h.translate("aria.label.more"));s.add(a,k.resolve("search-widget-searchField"));var f=H([k.resolve("search-widget-input"),k.resolve("search-widget-input-search")].concat(A.isSmallTouch()?[k.resolve("search-widget-small-touch")]:[]),h.translate("search.search"),h.translate("search.field.search")),q=n.create({next:p([],d.events.click),previous:p([],c.events.click),more:p([],e.events.click),input:m(["raw"])}),l=v.bind(f.element(),"input",q.trigger.input);z.append(a,[f.element(),
c.element(),d.element(),e.element()]);return{events:q.registry,element:g.constant(a),input:f.element,focus:function(){x.focus(f.element())},previous:c.element,next:d.element,moreToggle:e,destroy:function(){l.unbind();f.destroy();c.destroy();d.destroy();e.destroy()}}},replaceDrawer:function(){var a=H([k.resolve("search-widget-input"),k.resolve("search-widget-input-replace")],h.translate("search.replace"),h.translate("search.field.replace")),d=G([k.resolve("search-widget-matchcase")],h.translate("search.matchcase"),
h.translate("search.matchcase")),e=E([k.resolve("search-widget-replace")],h.translate("search.replace")),f=E([k.resolve("search-widget-replace-all")],h.translate("search.replace-all")),m=w.fromTag("div");c.group(m);var n=b.div();s.add(m,k.resolve("search-widget-replace-drawer"));s.add(n,k.resolve("search-widget-replace-drawer-tools"));z.append(n,[d.element(),e.element(),f.element()]);z.append(m,[a.element(),n]);return{element:g.constant(m),replace:e,replaceAll:f,input:a,matchcase:d,destroy:function(){d.destroy();
e.destroy();f.destroy();D.remove(n);D.remove(m)}}},button:F,input:H}});l("h4","oy 85 f8 4z 7 a4 oz 33 55 46 47 1y 2n 3u 64 3c ig 2q 32".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,l,s,t,u,v,w){var x=function(a,c,e){a?(b.expanded(c),d.hidden(e,!1)):(b.collapsed(c),d.hidden(e,!0))};return function(){var y=a.div();p.add(y,h.resolve("search-widget"));var z=g.searchField(),A=(u.isSmallTouch()?g.dummyCounter:g.counter)(z.input()),D=g.replaceDrawer(),B=D.element(),C=m.create({next:n([],z.events.next),
prev:n([],z.events.previous),replace:k(["value"]),replaceAll:k(["value"]),search:k(["term","matchcase","isShift"]),interactive:k(["term","matchcase"]),encase:k(["matchcase"]),clear:k([])});b.setPressed(D.matchcase.element(),D.matchcase.selected());var F=c(B);d.linkElements(z.moreToggle.element(),B);x(F.visible(),z.moreToggle.element(),B);z.moreToggle.events.click.bind(function(){(F.visible()?F.hide:F.show)()});z.events.input.bind(function(){var a=w.get(z.input()),b=s.get(z.element());q.set(A.element(),
"height",b+"px");3<=a.length?G.throttle(a):(C.trigger.clear(),A.hide(),A.update(0,0))});D.replace.events.click.bind(function(){var a=w.get(D.input.element());C.trigger.replace(a)});D.replaceAll.events.click.bind(function(){var a=w.get(D.input.element());C.trigger.replaceAll(a)});D.matchcase.events.click.bind(function(){b.setPressed(D.matchcase.element(),D.matchcase.selected());C.trigger.encase(E())});var E=function(){return D.matchcase.selected()},G=f(function(a){A.show();C.trigger.interactive(a,
E())},500),H=l.bind(B,"transitionend",function(a){"opacity"===a.raw().propertyName&&p.remove(B,"ephox-chameleon-toolbar-more-open");x(F.visible(),z.moreToggle.element(),B)});t.append(y,[A.element(),z.element(),D.element()]);return{element:e.constant(y),search:z,focus:function(){z.focus()},drawer:D,counter:A,getCase:E,destroy:function(){H.unbind();z.destroy();D.destroy();A.destroy();F.destroy();v.remove(y)},events:C.registry}}});l("92","gk 8s 7 h1 gm h2 91 h3 h4 55 46 32".split(" "),function(c,d,b,
a,e,f,g,h,k,m,n,p){return function(q){var l=q.content(),s=k();q=h(q);var t=f(l,s,q.get()),u=function(a){var b=a.endContainer();a=a.endOffset();l.setSelection(b,a,b,a)};q=c.button({execute:e.button});q=[d.input(s.search.input(),c.input({execute:function(a,b){t.enterSearchAction(a,b)}})),d.button(s.search.previous(),q),d.button(s.search.next(),q),d.button(s.search.moreToggle.element(),q),d.input(s.drawer.input.element(),c.input({execute:function(a,b){t.enterReplaceAction(a)}})),d.button(s.drawer.matchcase.element(),
q),d.button(s.drawer.replace.element(),q),d.button(s.drawer.replaceAll.element(),q)];var v=n.create({done:m([])});return{element:s.element,anchorName:b.constant("search-widget-anchor"),textkey:b.constant("action.search"),dialogTextkey:b.constant("search.menu"),destroy:function(){s.destroy()},keylayouts:b.constant(q),openWidget:function(){t.enterSearchAction(p.get(s.search.input()),g.shiftKeyState(!1))},closeWidget:function(){l.body().each(function(b){l.getSelection().each(u);a.clear(b)});t.clearLastSearch()},
events:v.registry}}});l("h5",["4n"],function(c){return{text:c.generate([{text:["field","input"]}]).text,cata:function(c,b){return c.fold(b)}}});l("93","7 h1 h2 91 h3 h5 h4 55 46 2y 2o 32 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q){return function(l,s){var t=l.content(),u=g(),v=e(l),w=b(t,u,v.get()),v=k.create({toEditor:h([])}),x=f.text(u.search.element(),u.search.input());return{element:u.element,addEscape:function(a){n.append(u.search.element(),a.element())},open:function(){w.enterSearchAction(p.get(u.search.input()),
a.shiftKeyState(!1));q(u.focus,250)},close:function(){t.body().each(function(a){d.clear(a).fold(w.zeroCount,w.updateMatch)});w.clearLastSearch()},execute:function(b){if(m.hasFocus(u.search.input())){b=a.shiftKeyState(!0===b.raw().shiftKey);var c=p.get(u.search.input());w.enterSearchAction(c,b)}else b=p.get(u.drawer.input.element()),w.enterReplaceAction(b)},type:c.constant(x),events:v.registry,destroy:function(){u.destroy()}}}});l("94","77 b 85 h6 h7 h8 7 r s h9 h5 75 aa 33 55 46 4m 53 1a 1y 3u l 2y 2o 4i 4e 3t".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,q,l,s,t,u,v,w,x,y,z,A,D,B,C,F){var E=v.ensureWith("element addEscape open close execute type events destroy".split(" "),m.isFunctionOrEvents(["toEditor"]));return function(m,v){E(v);var F=m.content(),K=m.ui().tabstrip.element();x.add(v.element(),l.resolve("slick-widget"));var J=n.cata(v.type(),function(b,c){x.add(b,l.resolve("slick-widget-field"));x.add(c,l.resolve("slick-widget-input"));var e=y.bind(v.element(),"keydown",function(a){var b={original:g.constant(a)};
if(q.isEnter(b))v.execute(a),a.kill();else if(q.isTab(b)){var b=C.descendants(v.element(),"input,textarea"),c=d.findIndex(b,A.hasFocus);-1<c&&(c=(c+1)%b.length,0<=c&&c<b.length&&A.focus(b[c]));a.kill()}else q.isEscape(b)&&(P(),a.kill())}),f=y.bind(c,"blur",function(b){k.from(b.raw().relatedTarget).each(function(b){!0===B.ancestor(z.fromDom(b),function(a){return x.has(a,"ephox-polish-mobile-toolbar-hide")}).isSome()&&a.refreshInput(c)})});return{destroy:function(){e.unbind();f.unbind()}}}),M=e("shizniz"),
O=p.translate("toolbar.backbutton"),N=f([c.resolve("icon")]);M.content(N);w.set(M.element(),"title",O);b.toolbarButton(M.element(),O,!1,!1);v.addEscape(M);var Q=u(!1);D.prepend(K,v.element());var R=t.create({done:s([]),abort:s([]),open:s([]),close:s([])}),P=function(){L();F.toEditing()};v.events.toEditor.bind(P);var S=h.cached(function(a){return C.children(K,"."+c.resolve("toolbar"))}),L=function(){v.close();Q.set(!1);d.each(S(),function(a){x.remove(a,l.resolve("mobile-toolbar-hide"))});x.remove(v.element(),
l.resolve("mobile-toolbar-show"));x.add(v.element(),l.resolve("mobile-toolbar-hide"));R.trigger.close()};F.events.mousedown.bind(L);L();M.events.click.bind(function(){P();R.trigger.abort()});return{element:v.element,destroy:function(){F.events.mousedown.unbind(L);J.destroy();v.destroy()},events:R.registry,open:function(){var a=y.bind(K,"transitionend",function(){v.open();R.trigger.open();a.unbind()});Q.set(!0);d.each(S(),function(a){x.remove(a,l.resolve("mobile-toolbar-show"));x.add(a,l.resolve("mobile-toolbar-hide"))});
x.remove(v.element(),l.resolve("mobile-toolbar-hide"));x.add(v.element(),l.resolve("mobile-toolbar-show"))},close:L,isOpen:function(){return Q.get()}}}});l("5i","c r 91 92 93 74 94 75 33 6v 76 55 46 1y".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,l){var s=k.resolve("toolbar-dialog"),t=function(b){var c=a(b);return f(b,c,"search",s)},u=function(a){var b=e(a);return g(a,b,s)},v=function(a){return(c.detect().deviceType.isTouch()?u:t)(a)};return function(a){var c=a.filter();b.configure(c);var e=q.create({analytics:p(["message"])}),
f=d.cached(function(){var b=v(a);b.events.open.bind(function(){e.trigger.analytics("search_tool_open")});b.events.abort.bind(b.close);return b}),c=function(){var a=f();(a.isOpen()?a.close:a.open)()};a.shortcuts().events.search.bind(c);return{ui:m.ui({"find.general":{toggle:!1,hasPopup:!1,value:"search",textkey:h.key("action.search"),action:c,updateGeneral:function(a){l.add(a.element(),k.resolve("search"))},icon:!0,tooltip:n.get}}),events:e.registry,destroy:function(){f().destroy()}}}});l("95","7 e0 7f 7q du e2 1a".split(" "),
function(c,d,b,a,e,f,g){var h=function(b){return a.isAnnotation(b)||g.has(b,e.overrideSpan())},k=function(a,e,f,g,k,m){var l=function(b){a(b,k,h)};b.cata(g.get(),c.noop,d.multiple(e,f,l,m),d.single(e,f,l,m))},m=function(a,b,c,d,e){k(a,b,c,d,e,b.toEditing)};return{face:c.curry(m,f.face),background:c.curry(m,f.background),foreground:c.curry(m,f.foreground),size:c.curry(m,f.size),partialSize:c.curry(function(a,b,d,e,f){k(a,b,d,e,f,c.noop)},f.size)}});l("97",["2u"],function(c){return{color:c.immutable("hex",
"classes","name"),face:c.immutable("textkey","value","icon"),size:c.immutable("name","size")}});l("96",["7","r","s","97","75"],function(c,d,b,a,e){var f=a.color,g=a.face,h=a.size;a=d.cached(function(){return[f("#FFF",["color-highlight-dark","color-option-white"],e.key("color.white")),f("#000",["color-highlight-light"],e.key("color.black")),f("#444",["color-highlight-light"],e.key("color.gray")),f("#777",["color-highlight-light"],e.key("color.metal")),f("#CCC",["color-highlight-light"],e.key("color.smoke")),
f("#FC1D00",["color-highlight-light"],e.key("color.red")),f("#C81500",["color-highlight-light"],e.key("color.darkred")),f("#FF8C00",["color-highlight-dark"],e.key("color.darkorange")),f("#FEBE00",["color-highlight-dark"],e.key("color.orange")),f("#FFFC00",["color-highlight-dark"],e.key("color.yellow")),f("#22AE50",["color-highlight-dark"],e.key("color.green")),f("#006400",["color-highlight-dark"],e.key("color.darkgreen")),f("#3CB371",["color-highlight-dark"],e.key("color.mediumseagreen")),f("#8FCD4E",
["color-highlight-dark"],e.key("color.lightgreen")),f("#00FF00 ",["color-highlight-dark"],e.key("color.lime")),f("#0000CD",["color-highlight-dark"],e.key("color.mediumblue")),f("#002360",["color-highlight-light"],e.key("color.navy")),f("#0173C1",["color-highlight-light"],e.key("color.blue")),f("#14B2F2",["color-highlight-dark"],e.key("color.lightblue")),f("#ee82ee",["color-highlight-light"],e.key("color.violet"))]});d=d.cached(function(){return[g(e.key("font.arial"),"Arial",b.none()),g(e.key("font.comicsans"),
"Comic Sans MS",b.none()),g(e.key("font.consolas"),"Consolas",b.none()),g(e.key("font.courier"),"Courier",b.none()),g(e.key("font.georgia"),"Georgia",b.none()),g(e.key("font.impact"),"Impact",b.none()),g(e.key("font.tahoma"),"Tahoma",b.none()),g(e.key("font.timesnr"),"Times New Roman",b.none()),g(e.key("font.trebuchet"),"Trebuchet MS",b.none()),g(e.key("font.verdana"),"Verdana",b.none())]});h=[h("font.small","10px"),h("font.medium","13px"),h("font.large","18px"),h("font.huge","32px")];return{colors:a,
faces:d,sizes:c.constant(h)}});l("if",["85","h7","75","1a","4b"],function(c,d,b,a,e){return function(f,g){var h=d();e.add(h.element(),f);c.button(h.element(),b.translate(g));a.set(h.element(),"title",b.translate(g));return h}});l("he",["7"],function(c){return{configuration:c.constant({i18nNamespace:"font",cssNamespace:"font",property:"font-size",tag:"span",specials:["xx-small x-small small medium large x-large xx-large".split(" ")]})}});l("67",["a"],function(c){return{isEmpty:function(d){return null===
d||void 0===d||""===d||c.isArray(d)&&0===d.length}}});l("p1","7 s p 67 wv 2n 1k 1s p2".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a){var b=g.pNum(a)?"px":"";return a+b},n=function(a,c,e){return(f.isValidValue(a,c,e)?d.some(e):d.none()).fold(function(){return b.error("Invalid value: "+e)},function(a){return a===e?b.value(e):b.error("Invalid value: "+e)})},p=function(a){return e.identify(a).fold(function(a){return a},function(a,b,c){return h.round(10*b)/10+c})};return{identify:e.identify,
validate:function(d,e,f){return(a.isEmpty(d)?b.error("can not use empty value for font size."):b.value(d)).map(m).map(p).bind(c.curry(n,e,f))},sanitise:function(a){return p(a)}}});l("p0","a b 7 s p1 1s p2".split(" "),function(c,d,b,a,e,f,g){var h={px:1,em:0.1,"%":10,pt:1,rem:"0.1"},k=function(b,c,e){c=d.find(c,function(a){return d.contains(a,e)});return a.from(c).bind(function(c){var f=d.indexOf(c,e);return-1<f?a.from(c[b(f,c)]):a.none()}).getOr(e)};g=function(a,b,d,g){return e.identify(g).fold(function(b){return k(a,
d,b)},function(a,d,e){a=void 0!==h[e]?h[e]:1;var g=b*(void 0!==h[e]?h[e]:1);return(c.isNumber(d)&&0<=d?f.max(a,d+g):a)+e})};return{decrease:b.curry(g,function(a,b){return f.max(0,a-1)},-1),increase:b.curry(g,function(a,b){return f.min(b.length-1,a+1)},1)}});l("ha","85 ag 4z 7 95 if h5 he 75 p0 p1 33 55 46 2u 2m 1y l 2y 2o 3c 32 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,q,l,s,t,u,v,w,x,y,z,A){var D=s.immutableBag(["i18nNamespace","cssNamespace","property","tag","specials"],[]);return function(s,
A){var F=D(h.configuration()),E=F.i18nNamespace(),G=F.cssNamespace(),H=b.div();u.add(H,p.resolve("fontsize-widget"));var I=b.span();u.add(I,p.resolve("fontsize-widget-field"));var K=b.div();u.add(K,p.resolve("fontsize-widget-exit"));var J=v.fromTag("input");u.add(J,p.resolve("fontsize-widget-input"));c.label(J,k.translate(E+".stepper.input"));var M=function(a){u.remove(J,p.resolve("slick-widget-invalid-input"));c.invalid(J,!1);z.set(J,a);e.partialSize(s.content(),s.undo(),s.selections(),a);d.speak(t.body(),
a)},O=function(){u.add(J,p.resolve("slick-widget-invalid-input"));c.invalid(J,!0);d.speak(t.body(),k.translate("aria.input.invalid"));w.focus(J)},N=function(a){return function(){var b=z.get(J),b=a(F.specials(),b);n.validate(b,F.tag(),F.property()).fold(O,M)}},Q=N(m.decrease),N=N(m.increase),R=function(a,b){return f([p.resolve(G+a),p.resolve("stepper-button")],E+b)},P=R("-stepper-decrease",".stepper.decrease"),R=R("-stepper-increase",".stepper.increase");P.events.click.bind(Q);R.events.click.bind(N);
y.append(I,[P.element(),J,R.element()]);x.append(H,I);x.append(H,K);var I=g.text(I,J),S=l.create({toEditor:q([]),size:q(["value"])}),L=function(){z.set(J,"")},U=function(a){a=n.sanitise(a);n.validate(a,F.tag(),F.property()).fold(O,function(a){u.remove(J,p.resolve("slick-widget-invalid-input"));c.invalid(J,!1)});z.set(J,a)};return{element:a.constant(H),addEscape:function(a){x.append(K,a.element())},open:function(){w.focus(J)},close:a.noop,execute:function(){var a=z.get(J);n.validate(a,F.tag(),F.property()).fold(O,
function(a){M(a);S.trigger.toEditor()})},destroy:a.noop,type:a.constant(I),represent:function(a){a.fold(L,U,U)},events:S.registry}}});l("hb","s 7f 67 7d 2u 2n 21 4i 2a p2".split(" "),function(c,d,b,a,e,f,g,h,k,m){var n=e.immutable("size"),p=function(b){b=d.toSelection(b.get()).fold(a.off,function(b){b=s(b.startContainer());return a.on(b)});return n(b)},q=function(a){return a.body().bind(function(a){a=f.get(a,"font-size");return c.from(a)})},l=function(a){var c=a.dom();if(!c.style)return!1;c=c.style.fontSize;
return"body"!==g.name(a)&&!b.isEmpty(c)},s=function(a){var b=g.isText(a)?k.parent(a).getOrDie():a;return(l(b)?c.some(b):h.ancestor(b,l)).fold(function(){return f.get(b,"font-size")},function(a){return a.dom().style.fontSize})};return{getState:function(a,b){return{readState:p(a),fallbackSize:q(b).getOr("12px")}}}});l("98","7 s ha 94 75 hb 4m 3t".split(" "),function(c,d,b,a,e,f,g,h){return function(h,m){var n=h.content(),p=g(d.none()),q=function(){var c=b(h,m),e=a(h,c),c={represent:c.represent,refreshValue:c.refreshValue,
open:e.open,close:e.close,isOpen:e.isOpen};p.set(d.some(c));return c},l={toggle:!1,value:"size",textkey:e.key("font.size"),action:function(){var a=p.get().getOrThunk(q);if(a.isOpen())a.close();else{var b=f.getState(h.selections(),n);a.open();a.represent(b.readState.size())}},updateGeneral:c.noop,icon:!0,shortcut:!1,hasPopup:!1,hasDialog:!1};return{general:c.constant(l)}}});l("p5","85 7 75 33 55 46 1a 1y 3u l 2y 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){return function(l){var r=l.hex(),s=m.fromTag("span");
h.add(s,a.resolve("palette-detail-action"));g.set(s,"title",b.get(l.name()));c.option(s,b.get(l.name()),!1,!1);var t=f.create({selected:e(["value"])}),u=k.bind(s,"click",function(){n.focus(s);t.trigger.selected(r)});return{element:function(){return s},value:d.constant(r),destroy:function(){u.unbind();p.remove(s)},events:t.registry}}});l("p6","b 85 f8 4z 7 75 33 3e 55 46 1y 2n l 2o 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s){return function(){var t=[],u=a.div(),v=l.fromTag("span");d.listBox(v);
n.add(v,g.resolve("palette-detail-actions"));n.add(v,g.resolve("palette-color-options"));d.label(v,f.translate("aria.font.palette"));r.append(u,v);var w=h.create(),x=m.create({selected:k(["value"])});return{element:function(){return u},add:function(a){t.push(a.destroy);r.append(v,a.element());w.bind(a.events.selected,function(a){x.trigger.selected(a.value())})},remove:function(a){s.remove(a.element());w.unbind(a.events.selected)},show:function(){n.add(u,g.resolve("palette-detail-active"));b.showPanel(u);
p.remove(u,"display")},hide:function(){n.remove(u,g.resolve("palette-detail-active"));b.hidePanel(u);p.set(u,"display","none")},destroy:function(){c.each(t,e.apply);s.remove(u);t=[]},events:x.registry}}});l("ja","b gk 8s 6 7 s 96 p5 p6 33 1y 4b 2n 64 3l 4e 1s".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u){var v=function(a){a.dom().click();return f.some(a)},w=function(a,b){var d=t.descendants(a,b);if(0<r.get(a)&&0<d.length){var g=s.absolute(d[0]).top(),h=c.findIndex(d.slice(1),function(a){return s.absolute(a).top()!==
g});return-1<h?f.some({rows:e.constant(u.ceil(d.length/(h+1))),columns:e.constant(h+1)}):f.none()}return f.none()};return{create:function(a){var b=void 0!==a?a:g.colors();a=k();b=c.map(b,function(a){var b=h(a);p.add(b.element(),c.map(a.classes(),m.resolve));n.add(b.element(),m.resolve("palette-color-option"));l.set(b.element(),"background-color",a.hex());return b});c.each(b,a.add);return a},makeLayout:function(c,f,g){g=d.grid(a.deepMerge({trigger:v},g));var h=b.grid(c,{cell:e.constant(f)},4,5,g);
return{layout:e.constant(h),refresh:function(){h.clear();w(c,f).each(function(a){h.resize(a.rows(),a.columns())})}}}}});l("p3",["ja","6o","1s"],function(c,d,b){var a=function(a){return d.closest(a,".ephox-polish-palette-detail-active")};return function(b,d){var g=c.makeLayout(d,".ephox-polish-palette-detail-action.ephox-polish-palette-color-option",{isValid:a}),h=g.layout();return{isFocused:h.isFocused,enterGrid:h.enter,grid:h,refresh:g.refresh,destroy:h.destroy,clear:h.clear}}});l("p4","85 c e4 lb 7 s 75 33 1y l 2o 2q".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p){var l=d.detect().deviceType.isTouch;return function(){var d=m.fromTag("div");l()?c.presentation(d):c.menuItem(d,f.none(),f.none());k.add(d,h.resolve("color-widget"));var s=m.fromTag("div");k.add(s,h.resolve("color-widget-controls"));c.tabList(s);var t=m.fromTag("div");k.add(t,h.resolve("color-widget-palettes"));c.toolbarGroup(t);var u=a("text-color");k.add(u.element(),h.resolve("tab-button"));u.content(b(g.translate("font.color")));c.tabButton(u.element(),g.translate("aria.font.color"));
var v=a("highlight-color");k.add(v.element(),h.resolve("tab-button"));v.content(b(g.translate("font.highlight")));c.tabButton(v.element(),g.translate("aria.font.highlight"));n.append(s,u.element());n.append(s,v.element());n.append(d,s);n.append(d,t);return{element:e.constant(d),colorToggle:e.constant(u),highlightToggle:e.constant(v),content:e.constant(t),controls:e.constant(s),destroy:function(){u.destroy();v.destroy();p.remove(t);p.remove(s)}}}});l("hc","85 f8 gk 8s 7 96 p3 p4 ja 55 46 47 2o 31 1s".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s){return function(){var s=k.create(f.colors()),u=k.create(f.colors()),v=n.create({color:p(["value"],s.events.selected),highlight:p(["value"],u.events.selected),abort:m([])}),w=h(),x=w.colorToggle(),y=w.highlightToggle();c.linkTabToPanel(x.element(),s.element());c.linkTabToPanel(y.element(),u.element());l.append(w.content(),s.element());l.append(w.content(),u.element());var z=g(w,s.element()),A=g(w,u.element()),D=a.flow(w.controls(),{item:e.constant(".ephox-pastry-statebutton")},
b.flow({trigger:function(a,b){return r.descendant(a,".ephox-pastry-button").map(function(a){a.dom().click();return a})},executeOnArrow:!0})),B=a.multiple(w.element(),[D,z.grid,A.grid]);B.events.exit.bind(function(a){v.trigger.abort()});var C=function(){B.exit()},F=function(){u.hide();x.select();y.deselect();d.tabSelected(x.element(),[y.element()]);s.show()};x.events.click.bind(function(){D.clickFocus(x.element());F()});y.events.click.bind(function(){D.clickFocus(y.element());s.hide();x.deselect();
d.tabSelected(y.element(),[x.element()]);u.show()});return{element:w.element,destroy:function(){C();s.destroy();B.destroy();u.destroy();w.destroy()},open:function(){B.clear();B.refresh();x.click();F();B.enter()},close:C,events:v.registry}}});l("99","7 50 95 hc 75 55 46 47".split(" "),function(c,d,b,a,e,f,g,h){return{widget:function(k){var m=k.content(),n=k.undo(),p=k.selections(),l=a(),r=g.create({color:h(["value"],l.events.color),highlight:h(["value"],l.events.highlight),done:f([]),abort:h([],l.events.abort)});
l.events.color.bind(function(a){r.trigger.done();b.foreground(m,n,p,a.value());m.toEditing()});l.events.highlight.bind(function(a){r.trigger.done();b.background(m,n,p,a.value());m.toEditing()});return{element:l.element,name:c.constant("color"),textkey:c.constant(e.key("font.coloroption")),menuTextkey:c.constant(e.key("aria.color.menu")),open:l.open,close:l.close,updateWidget:function(a){d.isHighContrast(k.smartview())?a.disable():l.open()},ability:c.noop,destroy:l.destroy,events:r.registry,label:c.constant(!1)}}}});
l("wy",["7","s"],function(c,d){return function(){var b=d.none(),a=function(a){b.bind(function(b){b[a]()})};return{enter:c.curry(a,"enter"),exit:c.curry(a,"exit"),destroy:c.curry(a,"destroy"),set:function(a){b=d.some(a)}}}});l("p7","85 ag gk 8s kp ah 4z h7 h8 7 s wy 75 33 55 46 1a 1y 1b 3u l 2y 2o 3c 2q 2a 32 1s".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w,x,y,z,A,D,B,C,F,E){return function(E,H){var I=H.i18nNamespace(),K=H.cssNamespace(),J=t.create({plus:s([]),minus:s([]),validate:s([]),
abort:s([])}),M=h(),O=h(),N=g.div(),Q=g.div(),R=y.fromTag("input");c.label(R,l.translate(I+".stepper.input"));c.toolbarButton(M.element(),l.translate(I+".stepper.increase"),!1,!1);c.toolbarButton(O.element(),l.translate(I+".stepper.decrease"),!1,!1);u.set(R,"tabindex","-1");u.set(M.element(),"tabindex","-1");u.set(O.element(),"tabindex","-1");v.add(Q,r.resolve(K+"-stepper-input"));v.add(N,r.resolve(K+"-stepper-options"));v.add(M.element(),r.resolve("stepper-button"));M.content(k([r.resolve(K+"-stepper-increase")]));
v.add(O.element(),r.resolve("stepper-button"));O.content(k([r.resolve(K+"-stepper-decrease")]));A.append(Q,R);D.append(N,[M.element(),O.element()]);D.append(E,[Q,N]);M.events.click.bind(function(){z.focus(M.element());J.trigger.plus()});O.events.click.bind(function(){z.focus(O.element());J.trigger.minus()});var P=function(){R.dom().setSelectionRange(0,F.get(R).length)},S=x.capture(E,"click",function(a){w.eq(a.target(),Q)&&L.enter()}),L=p(),U=v.toggler(R,r.resolve("invalid-"+K+"-size"));return{destroy:function(){M.destroy();
O.destroy();L.exit();L.destroy();S.unbind();B.remove(R)},highlight:function(){U.on();u.set(R,"title",l.translate("aria.stepper.input.invalid"));d.shout(R,l.translate("aria.stepper.input.invalid"))},dehighlight:function(){U.off();u.remove(R,"title")},input:m.constant(R),focus:function(){z.focus(R);P()},enter:L.enter,exit:L.exit,initLayout:function(){var c=a.single(R,[e.basic(f.ENTER()[0],function(){J.trigger.validate();return n.some(!0)})],n.none());c.events.enter.bind(P);var d=b.button({execute:function(a){a.dom().click();
z.focus(a);return n.some(a)}}),c=a.multiple(E,[c,a.button(M.element(),d),a.button(O.element(),d)]);c.events.exit.bind(function(){C.parent(Q).each(z.focus);J.trigger.abort()});L.set(c)},events:J.registry}}});l("hf","4z 7 p7 p0 p1 33 55 46 47 2u 1y 1b 3u 2q 32".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s){var t=m.immutableBag(["i18nNamespace","cssNamespace","property","tag","specials"],[]);return function(m){var v=t(m),w=c.div(),x=b(w,v);n.add(w,f.resolve(v.cssNamespace()+"-size-widget"));var y=
function(){return s.get(x.input())},z=function(a){var b=y();a=a(b);a=e.sanitise(a);s.set(x.input(),a);A.trigger.action(a);x.dehighlight()};x.events.validate.bind(function(a){a=y();e.validate(a,v.tag(),v.property()).fold(function(){x.highlight()},function(a){s.set(x.input(),a);A.trigger.action(a);x.dehighlight();A.trigger.close()})});x.events.plus.bind(function(b){z(d.curry(a.increase,v.specials()))});x.events.minus.bind(function(b){z(d.curry(a.decrease,v.specials()))});var A=h.create({close:g([]),
action:g(["value"]),abort:k([],x.events.abort)}),D=l.bind(w,"click",function(a){(p.eq(a.target(),w)||p.eq(a.target(),x.input()))&&x.enter()});return{element:d.constant(w),input:x.input,getCurrentValue:y,focus:x.focus,enter:x.enter,initLayout:x.initLayout,destroy:function(){D.unbind();x.destroy();r.remove(w)},updateInlineWidget:function(a,b){var c=function(a){e.validate(a,v.tag(),v.property()).each(function(a){s.set(x.input(),a);x.dehighlight()})};a.size().fold(function(){c(b);n.add(w,f.resolve("default-"+
v.cssNamespace()+"-size"))},d.noop,function(a){c(a);n.remove(w,f.resolve("default-"+v.cssNamespace()+"-size"))})},open:d.noop,close:d.noop,events:A.registry}}});l("9a","85 7 95 hd he hf 75 hb 55 46 47 2y".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){return{widget:function(c,l){var s=a.cata(l,d.constant(d.noop),d.constant(function(a){a.initLayout()})),t=c.content(),u=c.undo(),v=f(e.configuration());s(v);var w=m.create({done:k([]),abort:n([],v.events.abort)});v.events.close.bind(function(a){w.trigger.done()});
v.events.action.bind(function(a){var d=p.active();t.focus();b.size(t,u,c.selections(),a.value());d.each(p.focus)});return{element:v.element,item:v.item,name:d.constant("size"),textkey:d.constant(g.key("font.size")),open:v.open,close:v.close,updateInlineWidget:function(){var a=h.getState(c.selections(),t);v.updateInlineWidget(a.readState,a.fallbackSize)},ability:d.noop,destroy:v.destroy,events:w.registry}}}});l("hh","gl 75 gn 33 55 46 1y 3u l 36".split(" "),function(c,d,b,a,e,f,g,h,k,m){return function(n,
p,l,r){var s=l();l=b.okCancel("font-size");var t=c(p),u=null,v=f.create({close:e([]),open:e([]),analytics:e(["message"]),ok:e(["value"])});p=function(){u.unbind();t.hide();v.trigger.close()};t.setTitle(d.translate("font.size"));t.setContent(s.element());t.setControls(l.element());t.events.close.bind(p);l.events.ok.bind(function(){v.trigger.ok(s.getCurrentValue())});l.events.cancel.bind(p);g.add(t.element(),a.resolve("widget-dialog"));return{show:function(){t.show();var a=k.fromDom(m);u=h.bind(a,"orientationchange",
function(){n.foreground()});v.trigger.open()},element:t.element,contents:s,events:v.registry,destroy:function(){t.hide();t.destroy();s.destroy()}}}});l("9b","hg 7 95 hh he hf 75 hb 55 46 47 1a 3u 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r){return{widget:function(r,t){var u=r.content(),v=r.smartview().uiContainer(),w=r.ui().tabstrip.element,x=r.undo(),y=f(e.configuration()),z=y.input(),A=c(w());p.set(z,"disabled","true");var D=l.bind(z,"touchstart",function(c){c.kill();A.closeMenus();var g=
a(u,v,d.curry(f,e.configuration()));g.show();c=g.contents;var k=h.getState(r.selections(),u),m=function(){g.destroy();u.cursorIntoView()};c.updateInlineWidget(k.readState,k.fallbackSize);c.events.close.bind(m);c.events.action.bind(function(a){b.size(u,x,r.selections(),a.value())});g.events.close.bind(g.destroy);g.events.ok.bind(function(a){b.size(u,x,r.selections(),a.value());m()})}),B=m.create({done:k([]),abort:n([],y.events.abort)});y.events.close.bind(function(a){B.trigger.done()});y.events.action.bind(function(a){b.size(u,
x,r.selections(),a.value())});return{element:y.element,item:y.item,name:d.constant("size"),textkey:d.constant(g.key("font.size")),open:y.open,close:y.close,updateInlineWidget:function(){var a=h.getState(r.selections(),u);y.updateInlineWidget(a.readState,a.fallbackSize)},ability:d.noop,destroy:function(){D.unbind();y.destroy()},events:B.registry}}}});l("9c",["7f","67","7d","hi"],function(c,d,b,a){return{face:function(e){return c.toSelection(e.get()).map(function(c){c=a.value(c.startContainer(),"font-family");
return d.isEmpty(c)?b.off():b.on(c)}).getOrThunk(b.unchanged)}}});l("5j","b c 7 s 95 79 7m 96 97 98 99 9a 9b 75 9c 6v 7d 55 46".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w){return function(x,y){var z=x.content(),A=x.undo(),D=function(a){return c.map(a.split(/,\s?/g),function(a){return a.trim().replace(/^[\'\"](.*)[\'\"]$/,"$1")}).join(",")},B=(0===y.faces.length?a.none():a.some(y.faces)).fold(h.faces,function(b){return c.map(b,function(b){return k.face(r.raw(b.text),D(b.value),a.none())})}),
C=d.detect().deviceType.isiOS(),F=w.create({analytics:v(["message","properties"])}),E=a.some(g.face),G=function(b){var d=D(b);b=c.find(B,function(a){return a.value()===d});var e=k.face(r.raw(d),d,a.none());return void 0!==b&&null!==b?b:e},C=C?l:p,H=m(x,y);return{ui:t.ui({"fontface.dropdown":b.constant({name:"fontface",textkey:r.key("font.face"),menuTextkey:r.key("font.menu"),updateDropdown:function(c){var d=s.face(x.selections()).map(G);c.populate([{label:a.none,items:b.constant(B)}]);f.updateMenu(c,
d,u.on(),B,E)},action:function(a){e.face(z,A,x.selections(),a)},values:B,render:E,describe:function(a){return r.translate("font.describe",r.get(a.textkey()))},hasPopup:!0}),"fontcolor.widget":b.curry(n.widget,x),"fontsize.widget":b.curry(C.widget,x),"fontsize.general":H.general},b.identity),events:F.registry,destroy:b.noop}}});l("p8","b 85 2z gr 33 1a 1y 2y 31".split(" "),function(c,d,b,a,e,f,g,h,k){return function(h,n,p){var l=a(h,n,p);d.tabList(l.menu());c.map(l.tabs(),function(a){var c='.ephox-pastry-tablayout-content[data-ephox-pastry-tablayout-view="'+
a.name()+'"]';f.set(a.element(),"tabindex","-1");g.add(a.element(),e.resolve("tab-button"));k.descendant(l.body(),c).each(function(c){var e=b.generate("ephox-aria");f.set(a.element(),"id",e);d.tabButton(a.element(),a.name());d.tabPanel(c);d.linkTabToPanel(a.element(),c);d.labelledBy(c,e)})});return{element:l.element,tabs:l.tabs,body:l.body,menu:l.menu,destroy:l.destroy,events:l.events}}});l("wz","b 1o 7 1j 2n 31".split(" "),function(c,d,b,a,e,f){return function(g){var h=2===d.keys(g.integration).length,
k=a.aboutTags(h,g.integration);return{content:function(a){return c.foldl(k,function(a,b){return a.replace(b.str(),b.replace())},a)},dom:h?function(a){f.descendant(a,".ephox-polish-help-integration").each(function(a){e.set(a,"display","block")})}:b.noop}}});l("x0","85 7 s 33 1y 3u l 2o 2q 31 o 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var l=function(a){var b=a.baseUrl;!0===a.source&&(b+="/licenses");return b+"/textbox-licenses.html"};return function(r,s,t){var u=b.none(),v=b.none(),w=l(t),x=
function(a,c){var d=s.content(c.trim());u=b.some(d);y(a,d)},y=function(b,d){var f=g.fromHtml(d.trim());s.dom(f);k.empty(b);e.remove(b,a.resolve("tablayout-loading"));z(f);var m=g.fromTag("div");c.document(m);h.append(m,f);h.append(b,m)},z=function(a){D();v=m.descendant(a,".ephox-license-link").map(function(a){return f.bind(a,"click",function(a){p.open(w,"","height=700,width=620,resizable=yes,scrollbars=yes")})})},A=function(a){r.get(function(b){b.fold(function(b){a("&nbsp;");n.error("Unable to download help article",
b)},a)})},D=function(){v.each(function(a){a.unbind()})};return{render:function(b){u.fold(function(){e.add(b,a.resolve("tablayout-loading"));A(d.curry(x,b))},function(a){y(b,a)})},destroy:function(){D()}}}});l("pl",["6","vm","vl"],function(c,d,b){return{get:function(a,b,f,g){d.ajax(a,b,f,c.merge({dataType:"text",type:"GET"},g))},post:function(a,e,f,g,h){d.ajax(a,f,g,c.merge({dataType:"text",data:b.stringify(e),type:"POST"},h))}}});l("hs",["pl","2l","p"],function(c,d,b){return{get:function(a,e){return d.nu(function(d){c.get(a,
function(a){d(b.value(a))},function(a,c,e){d(b.error({message:a,status:c,text:e}))},e)})}}});l("x1","a 1o 4l hs 7 p 1f 1j o".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a,b){return a.map(function(a){return a.bind(function(a){var e=a[b];return void 0===e?f.error("Cannot find method "+b+" in help article list: "+d.keys(a)):c.isFunction(e)?f.value(e()):f.error("Key "+b+" in help article list was not a function")})})},n=function(a){a=b.addScript(a,e.identity);a.get(function(a){a.each(function(a){h.weakMatch(a.version,
"Help articles").each(function(a){k.warn(a)})})});return{about:m(a,"about"),accessibility:m(a,"accessibility"),a11ycheck:m(a,"a11ycheck"),markdown:m(a,"markdown"),shortcuts:m(a,"shortcuts")}};return function(b){!0===b.source?(b=b.baseUrl+"/help/"+g.get()+"/",b={about:a.get(b+"about.html"),accessibility:a.get(b+"accessibility.html"),a11ycheck:a.get(b+"a11ycheck.html"),markdown:a.get(b+"markdown.html"),shortcuts:a.get(b+"shortcuts.html")}):b=n(b.baseUrl+"/help_"+g.get()+".js?"+h.resourceParam());return b}});
l("p9","c gt 7 s k wz x0 x1 75".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(b,c){return b?a.some(c):a.none()};return function(a){var p={content:b.identity,dom:b.noop},l=c.detect(),r=h(a),l=!l.deviceType.isTouch();a=[m(l,d(k.translate("help.dialog.shortcuts"),g(r.shortcuts,p,a))),m(l,d(k.translate("help.dialog.accessibility"),g(r.accessibility,p,a))),m(!0,d(k.translate("help.dialog.markdown"),g(r.markdown,p,a))),m(l,d(k.translate("help.dialog.a11ycheck"),g(r.a11ycheck,p,a))),m(!0,d(k.translate("help.dialog.about"),
g(r.about,f(a),a)))];return e.cat(a)}});l("hj","b gk 8s gu 7 gl gm p8 p9 75 3m 33 55 46 1a 1y 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u){var v=function(a){var c={item:e.constant(".ephox-pastry-statebutton.ephox-pastry-tablayout-item")},f=d.flow({trigger:g.button,executeOnArrow:!0});return b.flow(a.menu(),c,f)},w=function(a){var c={stops:e.constant(["a"])},f=d.page({trigger:g.click,first:".ephox-pastry-tablayout-active"});return b.page(a.body(),c,f)};return function(d,e){var g=r.create({close:l([])}),
A=f(d),D=k(e),B=h(a.left(),D,"help");s.set(B.body(),"tabindex","-1");t.add(A.element(),p.resolve("help-modal"));var C=u.children(B.element());c.each(C,n.register);A.setTitle(m.translate("cog.help"));A.setContent(B.element());var F=v(B),C=w(B),E=b.multiple(A.element(),[F,C]);B.events.setActive.bind(function(a){F.clickFocus(a.item().element())});var G=function(){A.hide()};A.events.close.bind(function(){E.exit();G()});E.events.exit.bind(function(){G();g.trigger.close()});return{element:A.element,open:function(){A.show();
E.enter()},destroy:function(){B.destroy();A.destroy();E.destroy();c.each(D,function(a){a.renderer().destroy()})},hide:G,events:g.registry}}});l("9d",["hj","55","46","q"],function(c,d,b,a){return function(a,f){var g=c(a,f),h=function(){k.trigger.analytics("help_screen_hide");k.trigger.close();m()},k=b.create({close:d([]),analytics:d(["message"])});g.events.close.bind(h);var m=function(){g.events.close.unbind(h);g.destroy()};return{show:function(){k.trigger.analytics("help_screen_show");g.open()},destroy:m,
events:k.registry}}});l("5k","7 73 9d 75 6v 76 55 46 3t".split(" "),function(c,d,b,a,e,f,g,h,k){return function(k,n){var p=k.content(),l=k.smartview(),r=k.shortcuts(),s=h.create({analytics:g(["message"])}),t=d.destroyable(),u=function(){var a=b(l.uiContainer(),n);t.set(a);a.events.close.bind(function(){p.toEditing();t.clear()});a.events.analytics.bind(function(a){s.trigger.analytics(a.message())});p.toReading();k.content().hideInlineSelection();a.show()};r.events.help.bind(u);return{ui:e.ui({"help.general":{toggle:!1,
value:"help",textkey:a.key("cog.help"),action:u,updateGeneral:c.noop,icon:!0,hasPopup:!1,hasDialog:!0,tooltip:f.get}}),events:s.registry,destroy:function(){t.clear()}}}});l("9f",["2u"],function(c){return c.immutable("prefix","suffix","style")});l("9g","b s 9e 4b 2n l 2o 3c 21 2q at 2a v".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l){return{rehighlight:function(r,s,t){var u=p.children(t),v=c.bind(u,function(a){return k.isText(a)?n.get(a):""}).join("");d.from(c.find(s,function(a){return l.startsWith(v,
a.prefix())&&l.endsWith(v,a.suffix())})).fold(function(){r.preserve(function(){m.unwrap(t)})},function(c){var d=f.fromTag("span");a.add(d,[b.highlightClass()]);e.setAll(d,c.style());r.preserve(function(){g.before(t,d);h.append(d,u);m.remove(t)})})},unhighlight:function(c,d){var e=p.children(d),k=f.fromTag("span");a.add(k,[b.placeholderClass()]);c.preserve(function(){g.before(d,k);m.unwrap(d);h.append(k,e)})}}});l("9h","b 7 hk hl 6l hm hn 9e ho fh ci 4b 2n l 21 6j at".split(" "),function(c,d,b,a,e,
f,g,h,k,m,n,p,l,r,s,t,u){var v=function(a,b){var f=c.bind(b,function(a){var b=e.sanitise(a.prefix()),c=e.sanitise(a.suffix()),b=e.unsafetoken(b+"[^"+c+"]*"+c);return{pattern:d.constant(b),style:a.style}});return g.findmany(a,f)},w=m("."+h.highlightClass(),n.unwrap);return{run:function(d,e){d.body().each(function(d){k.filterDom(d,[w]);d=t.descendants(d,s.isText);c.each(d,function(d){var g=u.get(d),g=v(g,e),k=c.bind(g,function(a){return[a.start(),a.finish()]}),m=b.subdivide(d,k);c.each(g,function(b){var d=
f.sublist(m,b.start(),b.finish()),d=c.map(d,function(a){return a.element()});a.wrapper(d,function(){var c=r.fromTag("span");p.add(c,[h.highlightClass()]);l.setAll(c,b.style());return a.nu(c)})})})})}}});l("5l","b 7 9e 9f 9g 9h 3i 4b 2n l 2f 2o 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l){return function(r,s,t){var u=r.filter(),v=r.content(),w=r.operations();b.configure(u);var x=void 0===t.external?[]:c.map(t.external,function(b){return a(b.prefix,b.suffix,b.style)});c.each(x,function(a){var c=
g(a.prefix(),a.suffix(),function(c){var d=m.fromTag("span");h.add(d,[b.highlightClass()]);k.setAll(d,a.style());var e=m.fromTag("div");p.append(d,m.fromText(a.prefix()+c+a.suffix()));p.append(e,d);return n.get(e)});s.customMacros().add(c)});r=function(a){v.getSelection().each(function(c){a.prev().each(function(a){l.ancestor(a,"."+b.placeholderClass()).each(function(a){e.rehighlight(w,x,a)})});l.ancestor(c.startContainer(),"."+b.highlightClass()).each(function(a){e.unhighlight(w,a)})})};return 0<x.length?
(v.events.nodeChanged.bind(r),{run:function(){f.run(v,x)},destroy:d.noop}):{run:d.noop,destroy:d.noop}}});l("5m","9i 7 7x 75 6v l".split(" "),function(c,d,b,a,e,f){return function(g){var h=g.content();return{ui:e.ui({"horizontalrule.general":{toggle:!1,value:"horizontalrule",textkey:a.key("insert.horizontalrule"),action:function(){b.insertAtCursor(h,[f.fromTag("hr")]).each(function(a){a=c.after(a.element());h.setRelativeSelection(a,a);h.toEditing()})},updateGeneral:d.noop,icon:!0,shortcut:!1,hasPopup:!1}}),
destroy:d.noop}}});l("pi","b ag 6 7 p 75 33 2u 1y 2n l 4e 32 dp".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r){var s=g.resolve("input-invalid-field"),t=function(a){return r(a,10).toString()===a&&0<=r(a,10)},u=function(a,b,c){var d=l.get(a);if(""===d)return e.value("");var f=n.fromTag("img");c=t(d)?d+c.getOr(""):d;m.set(f,b,c);c=m.getRaw(f,b);m.remove(f,b);return c.fold(function(){return e.error(a)},e.value)},v=function(a){k.remove(a,s)};return{highlight:function(a){d.shout(a,f.translate("aria.input.invalid"));
k.add(a,s)},dehighlight:v,clearHighlights:function(a){a=p.descendants(a,"."+s);c.each(a,v)},validate:function(d){return c.foldr(d,function(c,d){return c.bind(function(c){return u(d.input(),d.property(),d.defaultUnit()).map(function(e){l.set(d.input(),e);var f={};f[d.property()]=a.constant(e);return b.deepMerge(f,c)})})},e.value({}))},validateField:u,rule:h.immutable("input","property","defaultUnit")}});l("pj","b 85 f8 2z c 4z h7 7 gm 75 33 1a 1y l 2y 2o 3c 31 2a".split(" "),function(c,d,b,a,e,f,g,
h,k,m,n,p,l,r,s,t,u,v,w){e.detect().browser.isFirefox();return function(e){var y=n.resolve("dialog-float-selected"),z=r.fromTag("fieldset");p.set(z,"role","radiogroup");e=r.fromHtml("<legend>"+m.translate(e)+"</legend>");var A=a.generate("ephox-aria");p.set(e,"id",A);p.set(z,"aria-labelledby",A);var D=f.div();l.add(D,n.resolve("dialog-float-options"));u.append(z,[e,D]);var B=function(){c.each(C,function(a){l.remove(a.element(),y);b.checked(a.element(),!1)})},C=c.map(["none","center","left","right"],
function(a){var c=g(),e=m.translate("align."+a);p.setAll(c.element(),{tabindex:"-1","data-float-value":a,title:e,"aria-label":e,role:"radio"});a=f.div();var e=f.div(),h=f.div(),k=f.div();d.hidden(a,!0);l.add(e,n.resolve("dialog-float-icon-inner-left"));l.add(h,n.resolve("dialog-float-icon-inner-center"));l.add(k,n.resolve("dialog-float-icon-inner-right"));u.append(a,[e,h,k]);c.events.click.bind(function(){B();l.add(c.element(),y);b.checked(c.element(),!0);s.focus(c.element())});l.add(c.element(),
n.resolve("dialog-float-container"));l.add(a,n.resolve("dialog-float-icon"));t.append(c.element(),a);return c});u.append(D,c.map(C,function(a){return a.element()}));var F=k.radio(z,"."+n.resolve("dialog-float-container"),"."+n.resolve("dialog-float-selected"));return{element:function(){return z},get:function(){return v.child(D,"."+y).map(function(a){return p.get(a,"data-float-value")})},select:function(a){B();a.each(function(a){v.child(D,'span[data-float-value="'+a+'"]').or(w.firstChild(D)).each(function(a){l.add(a,
y);b.checked(a,!0)})});F.refresh()},keylayout:h.constant(F),destroy:function(){c.each(C,function(a){a.destroy()})}}}});l("pk",["s","wv","2u","1s"],function(c,d,b,a){var e=b.immutable("size","unit"),f=function(a){return d.identify(a).fold(c.none,function(a,b,d){return c.some(e(b,d))})};return{fromHeight:function(b,c){return f(c).map(function(c){return a.ceil(b*c.size())+c.unit()})},fromWidth:function(b,c){return f(c).map(function(c){return a.ceil(1/b*c.size())+c.unit()})},calculate:function(a,b){return f(a).fold(c.none,
function(a){return f(b).fold(c.none,function(b){return c.some((a.size()+0)/(b.size()+0))})})}}});l("hp","85 f8 2z gk 8s 4z h8 lb 7 s gm lc pi pj 9k 75 pk 33 1a 1y 1b 3u l 2y 3c 32 1v dp".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w,x,y,z,A,D,B,C,F,E){return function(){var G=f.div(),E=f.div(),I=f.div(),K=f.div();x.add(I,v.resolve("image-url-controls"));x.add(K,v.resolve("image-size-controls"));var J=r("image.dialog.fields.align"),M=p.input("image-url","image.dialog.fields.url"),O=p.input("image-alt",
"image.dialog.fields.alt"),N=p.input("image-width","image.dialog.fields.width"),Q=p.input("image-height","image.dialog.fields.height"),R=A.fromTag("input");w.set(R,"type","hidden");var P=h("lock");x.add(P.element(),v.resolve("dialog-button"));var S=g([v.resolve("icon"),v.resolve("image-lock-button")]);w.set(P.element(),"title",t.translate("image.dialog.fields.constrain.on"));c.toolbarButton(P.element(),t.translate("image.dialog.fields.constrain.label"),!1,!0);d.press(P.element());P.select();P.content(S);
P.events.click.bind(function(){D.focus(P.element());var a=P.selected()?"on":"off";w.set(P.element(),"title",t.translate("image.dialog.fields.constrain."+a));(P.selected()?d.press:d.release)(P.element())});S=f.div();x.add(S,v.resolve("form-group"));x.add(S,v.resolve("form-group-lock"));var L=A.fromHtml("<label>"+t.translate("image.dialog.fields.constrain.label")+"</label>"),U="constrain"+b.generate("");w.set(P.element(),"id",U);w.set(L,"for",U);var V=function(a){a.isLocal()?(w.set(M.input(),"disabled",
"disabled"),C.set(M.input(),t.translate("image.dialog.fields.urllocal"))):(w.remove(M.input(),"disabled"),C.set(M.input(),a.url()))},X=function(a,b,c){var d=F(C.get(R),10);a=C.get(a);C.set(b,c(d,a).getOrThunk(function(){return C.get(b)}));l.dehighlight(b)},U=function(a){l.validateField(a.target(),"width",m.some("px")).fold(function(){l.highlight(a.target())},function(b){l.dehighlight(a.target());b=a.target();P.selected()&&(y.eq(b,N.input())?X(N.input(),Q.input(),u.fromWidth):y.eq(b,Q.input())&&X(Q.input(),
N.input(),u.fromHeight))})},W=function(a){if(w.has(a.target(),"placeholder")){var b=w.get(a.target(),"placeholder");""===C.get(a.target())&&C.set(a.target(),b)}},Y=z.bind(N.input(),"input",U),da=z.bind(Q.input(),"input",U),Z=z.bind(N.input(),"focus",W),aa=z.bind(Q.input(),"focus",W);B.append(S,[L,P.element()]);B.append(E,[J.element()]);B.append(I,[M.element(),O.element()]);B.append(K,[N.element(),Q.element(),S]);B.append(G,[I,K,E]);E=[e.input(M.input(),a.input({})),e.input(O.input(),a.input({})),
e.input(N.input(),a.input({})),e.input(Q.input(),a.input({})),e.button(P.element(),a.button({execute:n.button})),J.keylayout()];return{element:k.constant(G),destroy:function(){P.destroy();Y.unbind();da.unbind();Z.unbind();aa.unbind();J.destroy()},dehighlight:k.curry(l.clearHighlights,G),highlight:l.highlight,keylayouts:k.constant(E),set:function(a){V(a);C.set(O.input(),a.alt());C.set(N.input(),a.width());C.set(Q.input(),a.height());var b=a.computedWidth().bind(function(b){return a.computedHeight().bind(function(a){return u.calculate(b,
a)})}).getOr(1);a.computedWidth().each(k.curry(w.set,N.input(),"placeholder"));a.computedHeight().each(k.curry(w.set,Q.input(),"placeholder"));C.set(R,b);J.select(a.align())},get:function(){return l.validate([l.rule(N.input(),"width",m.some("px")),l.rule(Q.input(),"height",m.some("px"))]).map(function(a){return s.properties({url:C.get(M.input()),alt:C.get(O.input()),width:a.width(),height:a.height(),isLocal:w.has(M.input(),"disabled"),align:J.get()})})}}}});l("9j","s gl gm 9k hp 75 gn 33 55 46 4m 1y".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p){return function(l){var r=m.create({ok:k(["image","properties"]),close:k([])}),s=n(c.none()),t=d(l),u=g.okCancel("image-properties"),v=e();t.setContent(v.element());p.add(t.element(),h.resolve("dialog-narrow"));l=function(){var a=v.get();v.dehighlight();a.fold(function(a){v.highlight(a)},function(a){s.get().each(function(b){r.trigger.ok(b,a)})})};u.events.ok.bind(l);u.events.cancel.bind(function(){t.hide();r.trigger.close()});t.setTitle(f.translate("image.dialog.title"));
t.setControls(u.element());t.events.close.bind(function(){r.trigger.close()});var w=b.setup(t,u,v.keylayouts());return{element:t.element,open:function(){t.show();w.enter()},hide:function(){w.exit();t.hide()},destroy:function(){t.destroy();w.destroy();u.destroy();v.destroy()},represent:function(b){var d=a.divine(b);s.set(c.some(b));v.set(d)},execute:l,events:r.registry}}});l("9l","b 7 s 75 55 46 2u 1a 21".split(" "),function(c,d,b,a,e,f,g,h,k){var m=g.immutable("value","text","attrs"),n=function(a){return"img"===
k.name(a)};return{image:function(){var c=b.none(),g=f.create({properties:e(["image"]),contextmenu:e(["image"])});return{situation:function(b){b=c.map(function(b){return[m("imagemenu-properties",a.translate("image.context.properties"),{})]}).getOr([]);return{primary:d.constant(b),secondary:d.constant([]),submenus:d.constant([])}},handle:function(a){c.each(function(a){g.trigger.properties(a)})},assign:function(a){c=a.filter(n);c.each(g.trigger.contextmenu)},events:g.registry}},imageEdit:function(e,
f,g){var k=b.none(),l=function(b){return c.map(b,function(b){return m(b.spec.value,a.get(b.spec.textkey),{})})};return{situation:function(a){a=k.map(l).getOr([]);return{primary:d.constant(a),secondary:d.constant([]),submenus:d.constant([])}},handle:function(a){k.each(function(b){var d=h.get(a,"data-ephox-gopher-item-value");b=c.find(b,function(a){return a.spec.value===d});void 0!==b&&b.spec.action()})},assign:function(a){k=e()?b.some(f):a.filter(n).map(d.constant(g))}}}}});l("9m",["55","46","47"],
function(c,d,b){return{generate:function(a,e,f){a=function(){h();g.trigger.close()};var g=d.create({ok:b(f,e.events.ok),close:c([])});e.events.close.bind(a);var h=function(){e.destroy()};return{open:function(){e.open()},hide:a,destroy:h,represent:e.represent,events:g.registry}}}});l("5n","7 9j 9k 9l 9m 55 46 47".split(" "),function(c,d,b,a,e,f,g,h){return function(k,m){var n=a.image(k.content()),p=g.create({changed:f(["image"]),contextmenu:h(["image"],n.events.contextmenu)}),l=function(a){var c=k.content(),
f=d(k.smartview().uiContainer()),g=e.generate(k.keyboard(),f,["image","properties"]);g.events.ok.bind(function(a){b.apply(a.image(),a.properties());p.trigger.changed(a.image());g.destroy();c.domChanged();c.focus();c.uiChanged()});g.events.close.bind(function(a){g.destroy();c.focus()});g.represent(a);g.open()};n.events.properties.bind(function(a){l(a.image())});return{destroy:c.noop,situation:n.situation,handle:n.handle,assign:n.assign,events:p.registry}}});l("9o","b 1o 7 gx 4n 1a 2n".split(" "),function(c,
d,b,a,e,f,g){var h=e.generate([{html:["key","value"]},{css:["key","value"]}]),k=function(a,b){return c.flatten(d.mapToArray(a,function(a,c){var d=[];if(f.has(b,c)){var e=f.get(b,c);d.push(h.html(a,e))}g.getRaw(b,c).each(function(b){d.push(h.css(a,b))});return d}))},m=function(a){g.remove(a,"width");g.remove(a,"height");f.remove(a,"width");f.remove(a,"height")};e=b.curry(k,{width:"width",height:"height"});k=b.curry(k,{width:"height",height:"width"});b=b.constant([]);return{keepCrop:b,keepFlip:e,keepRotate:k,
keepResample:b,updater:function(b,d){var e=b(d);return a.effect(function(){m(d);c.each(e,function(a){a.fold(function(a,b){f.set(d,a,b)},function(a,b){g.set(d,a,b)})})})}}});l("hr",["6"],function(c){var d={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@\/]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},b=function(a,b){for(var c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},h=14;h--;)d[b.key[h]]=c[h]||"";d[b.q.name]={};d[b.key[12]].replace(b.q.parser,function(a,c,f){c&&(d[b.q.name][c]=f)});return d};return{parse:function(a,e){var f=c.merge(d,e);return b(a,f)}}});l("hq",["v","hr","w"],
function(c,d,b){var a=function(a){return""!==a.trim()&&!c.contains(a,"://")};return{local:function(a){return c.startsWith(a,"data:")||c.startsWith(a,"blob:")||c.startsWith(a,"file:")},relative:a,sameDomain:function(b,c){if(""===b.trim()||""===c.trim())return!1;if(a(b))return!0;var g=d.parse(c),h=d.parse(b);return g.host===h.host&&g.port===h.port}}});l("9p",["hq","90","2u","hr"],function(c,d,b,a){var e=b.immutable("bannerMessage","consoleMessage"),f=function(a){return void 0!==a.message&&void 0!==
a.status&&void 0!==a.text};return{diagnoseImageEdit:function(b,h){var k=18===b.code||"SecurityError"===b.name?"imageedit.needsproxy":f(b)&&0===b.status?"imageedit.proxyerror":"imageedit.generic",m;m=a.parse(h);m=""===m.host||c.relative(h)?h:""===m.port?m.host:m.host+":"+m.port;k=d.get(k,[m]);m=f(b)?b.message+". Response code "+b.status+". Error details: "+b.text:b;return e(k,m)}}});l("ht",["pm"],function(c){return{blobToImage:function(d){return c.blobToImage(d)},imageToBlob:function(d){return c.imageToBlob(d)},
blobToDataUri:function(d){return c.blobToDataUri(d)},blobToBase64:function(d){return c.blobToBase64(d)}}});l("9q","1 6 hs s gx hq 1a ht w".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m){var n={responseType:"blob"},p=function(a,c){var e=d.merge(c||{},m.headers(),n);return b.get(a,e)},l=function(a){return!(f.local(a)||f.sameDomain(a,k(c.location)))};return{getImage:function(b){var c=g.get(b,"src");return(l(c)?m.proxy(c):a.none()).fold(function(){return e.fromPromise(h.imageToBlob(b.dom()))},
p)}}}});l("9r",["7","75","76"],function(c,d,b){return{make:function(a,e,f){return{type:"general",spec:{value:a,textkey:d.key(e),action:f,updateGeneral:c.noop,icon:!0,hasPopup:!1,toggle:!1,tooltip:b.get}}}}});l("6i",["4g","7"],function(c,d){var b=d.constant(4);return{resolve:c.create("ephox-clipper").resolve,CORNER_SIZE:b}});l("pn","6i 3s 7 1a 1y 2n 3u l 3c 1s dp".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=function(a,c){var d={left:"0px",top:"0px",width:a.width()+"px",height:a.height()+"px"},
e={left:f.get(c,"left"),top:f.get(c,"top"),width:f.get(c,"width"),height:f.get(c,"height")};return{outside:b.constant(d),inside:b.constant(e)}};return{snap:function(b,l){var s=p(b,l),t=h.fromTag("div");e.add(t,c.resolve("dynamic-box"));f.setAll(t,s.outside());var u=h.fromTag("div");e.add(u,c.resolve("opaque-box"));f.setAll(u,s.outside());var v=function(a,b){return 2<m.abs(n(a,10)-n(b,10))},w=function(a){return d.nu(function(b){b(a)})},x=function(a,b){return d.nu(function(c){var d=g.bind(a,"transitionend",
function(){d.unbind();c(a)});f.setAll(a,b.inside())})};return{prepare:function(b,d,g){var h=a.get(d,"src"),m=f.get(d,"width");d=f.get(d,"height");f.setAll(l,{"background-image":"url("+h+")","background-size":m+" "+d,"background-position-x":-g.left()+"px","background-position-y":-g.top()+"px"});e.add(l,c.resolve("snapshot"));e.add(t,c.resolve("dynamic-box-animate"));k.append(b,[t,u]);f.reflow(b)},showcase:function(){var a=s.outside(),b=s.inside();return v(a.left,b.left)||v(a.top,b.top)||v(a.right,
b.right)||v(a.bottom,b.bottom)?x(t,s):w(t)}}}}});l("hu",["pn","3s","7"],function(c,d,b){return{slide:function(){return{animate:function(a,d,f,g){f=c.snap(f.box(),f.shade());f.prepare(a,d,{left:g.cropX,top:g.cropY,width:g.cropWidth,height:g.cropHeight});return f.showcase().map(b.constant(g))}}},none:function(){return{animate:function(a,b,c,g){return d.pure(g)}}}}});l("po",["2u"],function(c){return c.immutableBag("displayWidth displayHeight cropX cropY cropWidth cropHeight".split(" "),[])});l("x2",
["3u","3t"],function(c,d){return{bind:function(b,a){return c.bind(b,"mousedown",function(b){b.kill();var f=b.target(),g=!1,h=c.bind(f,"mouseup",function(){g=!0;h.unbind()});d(function(){g||(h.unbind(),a(f))},250)})}}});l("pq",["2u"],function(c){var d=c.immutableBag(["top","left","width","height"],[]),b=c.immutableBag(["top","left"],[]);c=c.immutableBag(["top","left"],[]);return{boxModel:d,delta:b,cornersMovements:c}});l("x3",["pq","1s"],function(c,d){var b=function(a,b){var c=d.min(a.top()+a.height(),
d.max(0,a.top()+b.top())),e=c-a.top(),e=a.height()-e;return{top:c,height:e}},a=function(a,b,c){a=d.min(a.width(),d.max(b.left(),b.left()+b.width()+c.left()))-b.left()-b.width();return{width:b.width()+a}},e=function(a,b,c){return d.min(a.height(),d.max(b.top(),b.top()+c.top()+b.height()))-b.top()},f=function(a,b){var c=d.min(a.width()+a.left(),d.max(0,a.left()+b.left())),e=c-a.left(),e=a.width()-e;return{left:c,width:e}};return{nw:function(a,d,e){a=b(d,e);d=f(d,e);return c.boxModel({left:d.left,width:d.width,
top:a.top,height:a.height})},n:function(a,d,e){a=b(d,e);return c.boxModel({left:d.left(),width:d.width(),top:a.top,height:a.height})},ne:function(d,e,f){var m=b(e,f);d=a(d,e,f);return c.boxModel({left:e.left(),width:d.width,top:m.top,height:m.height})},e:function(b,d,e){b=a(b,d,e);return c.boxModel({left:d.left(),width:b.width,top:d.top(),height:d.height()})},se:function(b,d,f){var m=a(b,d,f);b=e(b,d,f);return c.boxModel({left:d.left(),width:m.width,top:d.top(),height:b})},s:function(a,b,d){a=e(a,
b,d);return c.boxModel({left:b.left(),width:b.width(),top:b.top(),height:a})},sw:function(a,b,d){a=e(a,b,d);d=f(b,d);return c.boxModel({left:d.left,width:d.width,top:b.top(),height:a})},w:function(a,b,d){a=f(b,d);return c.boxModel({left:a.left,width:a.width,top:b.top(),height:b.height()})},translate:function(a,b,e){var f=d.min(d.max(0,b.top()+e.top()),d.max(0,a.height()-b.height()));a=d.min(d.max(0,b.left()+e.left()),d.max(0,a.width()-b.width()));return c.boxModel({top:f,left:a,width:b.width(),height:b.height()})}}});
l("x4",["kp","ah","s","3k"],function(c,d,b,a){return{navigation:function(e,f){var g=function(c,d,e){return function(){f(c,a(d,e));return b.some(!0)}};return[c.rule(c.and([c.isShift,c.inSet(d.LEFT())]),g(e,-1,0)),c.rule(c.and([c.isShift,c.inSet(d.RIGHT())]),g(e,1,0)),c.rule(c.and([c.isShift,c.inSet(d.UP())]),g(e,0,-1)),c.rule(c.and([c.isShift,c.inSet(d.DOWN())]),g(e,0,1)),c.basic(d.LEFT()[0],g(e,-10,0)),c.basic(d.RIGHT()[0],g(e,10,0)),c.basic(d.UP()[0],g(e,0,-10)),c.basic(d.DOWN()[0],g(e,0,10))]}}});
l("10t",["6i","pq","1o","6","7"],function(c,d,b,a,e){var f=function(a,b,c){var f=b.top(),n=b.left()+b.width()/2-c.middle(),p=f+b.height()/2-c.middle(),l=b.left()+b.width()-c.right();a=b.left()-c.left();c=f+b.height()-c.bottom();b=d.cornersMovements({top:f,left:n});var n=d.cornersMovements({top:c,left:n}),r=d.cornersMovements({top:p,left:l}),p=d.cornersMovements({top:p,left:a}),s=d.cornersMovements({top:f,left:a}),f=d.cornersMovements({top:f,left:l}),l=d.cornersMovements({top:c,left:l});a=d.cornersMovements({top:c,
left:a});return{n:e.constant(b),s:e.constant(n),e:e.constant(r),w:e.constant(p),nw:e.constant(s),ne:e.constant(f),se:e.constant(l),sw:e.constant(a)}};return{calculate:function(a,b){var d={middle:e.constant(2*c.CORNER_SIZE()+1),right:e.constant(c.CORNER_SIZE()),left:e.constant(0),bottom:e.constant(c.CORNER_SIZE())};return f(a,b,d)},limitBounds:function(c,d){var f={};if(20>d.width()){var m=20-d.width();f.width=d.width()+m;f.left=d.left()===c.left()?c.left():d.left()-m}20>d.height()&&(m=20-d.height(),
f.height=d.height()+m,f.top=d.top()===c.top()?c.top():d.top()-m);return a.merge(d,b.map(f,e.constant))},doCalculate:f}});l("x7",["10t","6i","pq","1a","2n"],function(c,d,b,a,e){var f=function(c){return b.boxModel({left:parseInt(a.get(c,"data-"+d.resolve("image-left")),10),top:parseInt(a.get(c,"data-"+d.resolve("image-top")),10),width:parseInt(a.get(c,"data-"+d.resolve("image-width")),10),height:parseInt(a.get(c,"data-"+d.resolve("image-height")),10)})},g=function(b,c){a.set(b,"data-"+d.resolve("image-left"),
c.left());a.set(b,"data-"+d.resolve("image-top"),c.top());a.set(b,"data-"+d.resolve("image-width"),c.width());a.set(b,"data-"+d.resolve("image-height"),c.height())};return{readPosition:f,writePosition:g,updatePosition:function(a,b){var d=f(a),e=b(d),d=c.limitBounds(d,e);g(a,d);return d},drawAtOrigin:function(a){var b=f(a);e.setAll(a,{left:b.left()+"px",top:b.top()+"px",width:b.width()+"px",height:b.height()+"px"})}}});l("x5",["pq","x7","s"],function(c,d,b){return function(a,e,f){var g=b.none();return{setTarget:function(a){g=
b.some(a)},clearTarget:function(){g=b.none()},mutate:function(b,k){g.each(function(g){var n=c.delta({top:k,left:b}),p=d.updatePosition(f,function(b){return g(a,b,n)});d.drawAtOrigin(f,a);e.update(p)})}}}});l("49",["6i","7"],function(c,d){var b=c.resolve("magic-box");return{magicBox:d.constant(b)}});l("xb",["1a"],function(c){return{grab:function(d,b){c.set(d,"aria-grabbed",b)},effect:function(d,b){c.set(d,"aria-dropeffect",b)}}});l("xc","85 cq 2z 2u 1a 1y l 2o".split(" "),function(c,d,b,a,e,f,g,h){var k=
a.immutable("help","ids"),m=function(a){e.set(a,"role","gridcell")};return{base:function(a,b){e.setAll(a,{role:"grid","aria-label":b})},row:function(a){e.set(a,"role","row")},cell:function(a,b){m(a);e.set(a,"aria-label",b)},gridcell:m,createHelp:function(a,m,l){var r=g.fromTag("div");c.presentation(r);f.add(r,d.resolve("aria-help"));for(var s=[],t=0;t<m;t++){var u=b.generate("ephox-aria"),v=g.fromTag("span");c.presentation(v);e.set(v,"id",u);f.add(v,d.resolve("aria-help"));h.append(v,g.fromText(l.col(t+
1)));h.append(r,v);s[t]=u}t=[];for(u=0;u<a;u++){var v=b.generate("ephox-aria"),w=g.fromTag("span");c.presentation(w);e.set(w,"id",v);f.add(w,d.resolve("aria-help"));h.append(w,g.fromText(l.row(u+1)));h.append(r,w);t[u]=[];for(w=0;w<m;w++)t[u][w]=s[w]+" "+v}return k(r,t)}}});l("10u","10t x4 6i b xb xc 8s 2l 7 s 55 46 1a 4b 2n l 64 2o 2r 3t w".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w,x,y){var z=function(a,c,d){var g=t.fromTag("div");s.set(g,"position","absolute");var h=t.fromTag("div");
v.append(g,h);d.each(function(a){f.cell(g,a);e.grab(g,!1)});r.add(g,[b.resolve("corner-wrapper"),b.resolve("corner-wrapper-"+c)]);r.add(h,[b.resolve("corner-element"),b.resolve("corner-"+a)]);l.set(g,"data-"+b.resolve("direction"),c);return g},A=function(a,b){s.setAll(a,{top:b.top()+"px",left:b.left()+"px"})},D=function(b,c,d){var e=c()<d()?0:1;a.each(b,function(a){s.set(a,"opacity",y(e))})};return function(a){var b=p.create({reposition:n(["direction","delta"])}),e=z("top","n",m.none()),f=z("bottom",
"s",m.none()),l=z("right","e",m.none()),q=z("left","w",m.none()),r=z("top-left","nw",m.some(a("image.crop.handle.nw"))),t=z("top-right","ne",m.some(a("image.crop.handle.ne"))),v=z("bottom-right","se",m.some(a("image.crop.handle.se"))),y=z("bottom-left","sw",m.some(a("image.crop.handle.sw"))),O=h.nu(function(a){x(function(){s.reflow(e);var b=w.get(e),c=u.get(e);a(k.constant(3*b+2*c))},0)}),N=b.trigger.reposition;a=[e,f,l,q,t,r,v,y];N=[g.single(r,d.navigation("nw",N),m.none()),g.single(t,d.navigation("ne",
N),m.none()),g.single(v,d.navigation("se",N),m.none()),g.single(y,d.navigation("sw",N),m.none())];return{elements:k.constant(a),keylayouts:k.constant(N),events:b.registry,refresh:function(a,b){var d=c.calculate(a,b);A(e,d.n());A(f,d.s());A(l,d.e());A(q,d.w());A(r,d.nw());A(y,d.sw());A(v,d.se());A(t,d.ne());O.get(function(a){D([e,f],b.width,a);D([l,q],b.height,a)})}}}});l("13o",["pq","7"],function(c,d){return{derive:function(b,a){return{leftRim:function(){var d=a.left(),f=b.height();return c.boxModel({top:0,
left:0,width:d,height:f})},topRim:function(){var d=a.left(),f=b.width()-a.left(),g=a.top();return c.boxModel({top:0,left:d,width:f,height:g})},rightRim:function(){return c.boxModel({top:a.top(),left:a.left()+a.width(),width:b.width()-a.width()-a.left(),height:b.height()-a.top()})},bottomRim:function(){return c.boxModel({top:a.top()+a.height(),left:a.left(),width:a.width(),height:b.height()-a.height()-a.top()})},shadeBox:d.constant(a)}}}});l("10v","13o 6i 7 4b 2n l".split(" "),function(c,d,b,a,e,f){var g=
function(b){var c=f.fromTag("div");a.add(c,[d.resolve("panel-"+b),d.resolve("side-panel")]);return c},h=function(a,b){e.setAll(a,{top:b.top()+"px",left:b.left()+"px",width:b.width()+"px",height:b.height()+"px"})};return function(){var a=g("left"),d=g("top"),e=g("right"),f=g("bottom");return{elements:b.constant([a,d,e,f]),refresh:function(b,g){var l=c.derive(b,g);h(a,l.leftRim());h(d,l.topRim());h(e,l.rightRim());h(f,l.bottomRim())}}}});l("x6","49 x3 6i 10u 10v b xb xc 7 s 55 46 47 1a 1y 2n l 2o 3c 2q 31".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w,x,y){return function(z,A,D,B){var C=u.fromTag("div");s.add(C,c.magicBox());h.base(C,B("image.crop.begin"));g.effect(C,"execute");var F=u.fromTag("div");r.set(F,"role","row");var E=e(),G=a(B),H=function(a){t.setAll(C,{top:a.top()+"px",left:a.left()+"px"})};B=function(a){var b=z();H(b);E.refresh(b,a);G.refresh(b,a);I.trigger.updated(a)};w.append(F,f.flatten([E.elements(),[A],G.elements()]));v.append(C,F);var I=p.create({updated:n(["newBounds"]),reposition:l(["direction",
"delta"],G.events.reposition)});B(D);A=G.keylayouts();return{element:k.constant(C),bitsbox:k.constant(F),keylayouts:k.constant(A),move:H,update:B,destroy:function(){x.remove(C)},events:I.registry,tryMovement:function(a){return y.closest(a,"."+b.resolve("corner-wrapper")).bind(function(a){a=r.get(a,"data-"+b.resolve("direction"));return void 0!==d[a]?m.some(d[a]):m.none()})}}}});l("pp","x2 x3 x4 x5 6i pq x6 x7 b in xb xc 8s 7 s 55 46 47 1a 4b 3u l 2y 2o 31 2a 1s".split(" "),function(c,d,b,a,e,f,g,
h,k,m,n,p,l,r,s,t,u,v,w,x,y,z,A,D,B,C,F){var E=function(a){var b=a.width();a=a.height();var c=F.floor(0.125*a),d=F.floor(0.125*b);return f.boxModel({top:c,left:d,width:b-2*d,height:a-2*c})};return function(f,F,I,K){var J=z.fromTag("div");x.add(J,[e.resolve("panel-central"),e.resolve("side-panel")]);w.set(J,"tabindex","-1");p.cell(J,K("image.crop.handle.shade"));n.grab(J,!1);var M=E(f());h.writePosition(J,M);h.drawAtOrigin(J);var O=g(f,J,M,K);D.append(F,O.element());var N=a(f(),O,J),Q=m.transform(N),
R=y.bind(J,"dblclick",function(){W.trigger.apply()}),P=c.bind(O.element(),function(a){O.tryMovement(a).orThunk(function(){return B.closest(a,"."+e.resolve("panel-central")).map(function(){return d.translate})}).each(S)}),S=function(a){Q.off();N.clearTarget();N.setTarget(a);Q.on();Q.go(I)},L=function(a,b){var c=h.updatePosition(J,function(c){return d[a](f(),c,b)});h.drawAtOrigin(J);O.update(c)};K=k.flatten([O.keylayouts(),[l.single(J,b.navigation("translate",L),s.none())]]);var U=function(){var a=
f();return y.bind(C.defaultView(F),"resize",function(){var b=f();if(b.height()!==a.height()||b.width()!==a.width())W.trigger.cancel();else if(b.top()!==a.top()||b.left()!==a.left())O.move(b),a=b})}(),M=function(a){return function(){A.active(C.owner(F)).each(function(b){n.grab(b,a)})}},V=M("true"),X=M("false");k.each(K,function(a){a.events.enter.bind(V);a.events.exit.bind(X)});O.events.reposition.bind(function(a){L(a.direction(),a.delta())});var W=u.create({updated:v(["newBounds"],O.events.updated),
apply:t([]),cancel:t([])});return{element:O.element,keylayouts:r.constant(K),destroy:function(){Q.destroy();U.unbind();P.unbind();R.unbind();O.destroy()},boxes:function(){return{box:f,magic:O.element,shade:r.constant(J)}},get:function(){return h.readPosition(J)},events:W.registry}}});l("hv","po pp pq 7 64 3l 2r".split(" "),function(c,d,b,a,e,f,g){var h=function(a){var c=f.absolute(a),d=c.top(),h=e.get(a),c=c.left();a=g.get(a);return b.boxModel({top:d,left:c,width:a,height:h})};return function(b,f,
n,p,l){var r=a.curry(h,b),s=d(r,f,n,l);return{element:s.element,keylayouts:s.keylayouts,crop:function(){var a;a=s.get();var d=g.get(b),f=e.get(b);a=c({cropX:a.left(),cropY:a.top(),cropWidth:a.width(),cropHeight:a.height(),displayWidth:d,displayHeight:f});return p.animate(s.boxes().magic(),b,s.boxes(),a)},destroy:function(){s.destroy()},events:s.events}}});l("9s","hu hv ag 9i gk 8s 7 a4 9n 73 75 h0 8z 7c 3e 55 46 2m 3u 2a 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w,x,y){var z=function(b,
c){b.getSelection().bind(r.detect).fold(function(){b.setRelativeSelection(a.before(c),a.before(c))},function(c){b.setRelativeSelection(a.on(c.image()),a.on(c.image()))})};return function(a){var D=a.content(),B=u.create({ok:t(["cropAction","image","cleanup"])}),C=m.value(),F=m.value(),E=function(a){var g=D.body().getOrDie();b.speak(v.body(),n.translate("image.crop.announce"));var t=x.documentElement(a),u=d(a,t,t,c.slide(),n.translate),A=h(function(a,c){b.speak(v.body(),n.translate("aria.image.crop.size",
a,c))},500);u.events.updated.bind(function(a){a=a.newBounds();A.throttle(a.width(),a.height())});var E=function(){C.clear();S.exit();S.destroy();L.unbindAll();P.clear()},O=function(){E();F.clear();u.destroy()},N=function(){O();r.select(D,a)},Q=function(){E();u.crop().get(function(c){P.clear();b.speak(v.body(),n.translate("image.crop.apply"));var d=k.crop(c.cropX(),c.cropY(),c.cropWidth(),c.cropHeight()),e=p.changedBounds(a);B.trigger.ok(function(a){return l.resampleAction(e,a,d)},a,function(a){O();
return a})})};C.set(Q);F.set(O);z(D,a);var R=function(){b.speak(v.body(),n.translate("image.crop.cancel"));N()},P=m.unbindable();y(function(){P.set(w.bind(g,"focus",function(a){R()}))});var S=f.inlineDialog(t,u.keylayouts(),e.inlineDialog({ok:Q,cancel:R}));S.enter();var L=s.create();L.bind(D.events.domChanged,N);L.bind(D.events.nodeChanged,function(a){v.inBody(a.node())&&N()});L.bind(u.events.apply,Q);L.bind(u.events.cancel,N)};return{apply:function(){C.on(g.apply)},open:function(){a.content().getSelection().bind(r.detect).each(function(a){E(a.image())})},
destroy:function(){F.on(g.apply)},isActive:C.isSet,events:B.registry}}});l("9t",["gh","gv","gx","1a","hw"],function(c,d,b,a,e){var f=b.fToFR(d.single);return{run:function(a,c,d){return b.fromChain([a.getImage,c,f,d])},applyEdit:function(d){return function(f){var k=c.cata(f,function(a,b,c,d){return c},function(a,b,c){return b});a.set(d,"src",k);k=e.waitFor(d,"load",1E3);return b.map(k,function(){return f})}}}});l("hx",["s","ot"],function(c,d){var b=function(a){return 20<=a},a=function(a){return c.from(a).filter(b)};
return{ensureMin:a,parse:function(b,f){var g=a(b).getOr(0),h=a(f).getOr(0);return 0===g&&0===h?c.none():c.some(d(g,h))}}});l("9u","gh 3s 7 gx f6 hx 8z 1a".split(" "),function(c,d,b,a,e,f,g,h){var k=function(a){return function(d){var f=d.image(),g=d.asset(),k=function(a){a.fold(function(){h.remove(f,"src")},function(a){c.cata(a,function(a,b,c,d){h.set(f,"src",c)},b.noop)})};return e.loadIfNeeded(f).bind(function(){return a(g).map(function(a){k(a);return a})})}},m=b.constant(a.pure),n=b.constant(function(b){return a.pure(b.asset())});
return function(a){a=f.parse(a.preferredWidth,a.preferredHeight);var b=a.fold(m,g.instance),c=a.fold(n,function(){return k(b)});return{assets:function(a){return d.mapM(a,b)},correlated:function(a){return d.mapM(a,c)}}}});l("9v",["7","s","75"],function(c,d,b){return{edit:function(a,e,f,g){return{items:g,updatePalette:function(g){if(f())g.hide(d.none())&&a();else{var k=c.curry(g.show,d.some(b.translate("image.context.palette.show")));g=c.curry(g.hide,d.some(b.translate("image.context.palette.hide")));
(e().isSome()?k:g)()&&a()}}}},crop:function(a,b,c){return{items:c,updatePalette:function(c){(b()?c.show:c.hide)(d.none())&&a()}}}}});l("5o","7 8t 9n 9o 9p 9q 9r 9l 9s 9t 9u 9v 7c 6v 1a o".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t){return function(u,v,w){var x=f(u.communication()),y=d(u.ui),z=u.content(),A=function(a){return function(b){b.fold(function(b){b=e.diagnoseImageEdit(b,s.get(a,"src"));y.show(b.bannerMessage());t.error("Image edit operation failed: ",b.consoleMessage())},function(a){v.uploadAssets([a]);
z.focus();u.undo().save();z.domChanged()});l.select(z,a);return b}},D=function(a,b){u.undo().save();var c=m.applyEdit(a);return m.run(x,b,c)(a)},B=k(u);B.events.ok.bind(function(b){var c=b.image(),d=b.cropAction();b=b.cleanup();var e=a.updater(a.keepCrop,c);D(c,d).map(e).map(b).get(A(c))});var C=function(){return z.getSelection().bind(l.detect)},F=function(b,d){return function(){C().each(function(e){e=e.image();var f=c.identity,g=a.updater(d,e);D(e,b).map(g).map(f).get(A(e))})}},E=[g.make("crop-begin",
"image.crop.begin",B.open),g.make("rotate-left","image.toolbar.rotateleft",F(b.rotateLeft,a.keepRotate)),g.make("rotate-right","image.toolbar.rotateright",F(b.rotateRight,a.keepRotate)),g.make("flip-horizontal","image.toolbar.fliphorizontal",F(b.flipHorizontal,a.keepFlip)),g.make("flip-vertical","image.toolbar.flipvertical",F(b.flipVertical,a.keepFlip))],G=[g.make("crop-apply","image.crop.apply",B.apply)],F=r.ui({"edit.palette":c.curry(p.edit,u.ui().refresh,C,B.isActive,E),"crop.palette":c.curry(p.crop,
u.ui().refresh,B.isActive,G)},c.identity),E=h.imageEdit(B.isActive,G,E);w=n(w);return{destroy:function(){B.destroy()},ui:F,insertResample:c.constant(w),situation:E.situation,handle:E.handle,assign:E.assign,name:c.constant("imageEdit")}}});l("pr",["7","v"],function(c,d){var b=function(a){var b=d.startsWith(a,"www.")?"http://"+a:a;return{text:c.constant(a),href:c.constant(b)}};return{preprocess:b,auto:function(a){return b(a).href()}}});l("hy","b 9i 6 7 s 7x dm pr df 7c l 2o 83".split(" "),function(c,
d,b,a,e,f,g,h,k,m,n,p,l){var r=function(a,b){a.setRelativeSelection(d.after(b),d.after(b))},s=function(a,b,c,d){var e=a.getSelection();return e.bind(m.detect).fold(function(){return e.fold(function(){return[]},function(a){return(a.collapsed()?c:d)(a)})},function(a){return b(a.image())})},t=function(c,d,f){var g=n.fromTag("a");u(g,b.deepMerge(d,{text:a.constant(e.none())}));p.wrap(f,g);m.select(c,f);return[g]},u=function(a,b){b.url().each(function(b){b=h.auto(b);g.attr(a,"href",b)});b.title().each(function(b){g.attr(a,
"title",b)});b.target().each(function(b){g.attr(a,"target",b)});b.action().each(function(b){b(a)});return b.text().map(function(b){return l.get(a)!==b?(l.set(a,b),!0):!1}).getOr(!1)},v=function(a){return function(b){return{link:b,properties:a}}},w=function(c){return function(d){return{link:d,properties:b.deepMerge(c,{text:a.constant(e.some(l.get(d)))})}}},x=function(a){return function(b){var d=k.findDescendants(b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset(),"a");b=0<d.length?d:
k.findAncestors(b.startContainer(),b.endContainer(),"a");return c.map(b,1===b.length?v(a):w(a))}},y=function(b,d){return s(b,a.curry(t,b,d),function(a){var c=n.fromTag("a");u(c,d);f.insertAtCursor(b,[c]);d.action().each(function(a){a(c)});r(b,c);return[c]},function(a){b.execCommand("CreateLink",!1,h.auto(d.url().getOr("")));a=b.getSelection().map(x(d)).getOr([]);c.each(a,function(a){u(a.link,a.properties);d.action().each(function(b){b(a.link)});r(b,a.link)});return c.map(a,function(a){return a.link})})};
return{hyperlink:function(c,d){var f=d.text().fold(a.constant(d),function(c){return b.deepMerge(d,{text:a.constant(e.some(0<c.trim().length?c:d.url().getOr("")))})});c.focus();return f.url().fold(a.constant([]),function(a){return 0<a.trim().length?y(c,f):[]})},setProperties:u}});l("hz",["80"],function(c){var d=function(a,b){var d=c.getEnd(b);a.setSelection(b,d,b,d)},b=function(a,b){a.setSelection(b,0,b,0)};return{selectEnd:d,moveToEnd:function(a){a.getSelection().each(function(b){d(a,b.endContainer());
a.focus()})},selectStart:b,moveToStart:function(a){a.getSelection().each(function(c){b(a,c.endContainer());a.focus()})}}});l("9w","9i hy hz a1 2q 83 2a".split(" "),function(c,d,b,a,e,f,g){var h=function(b,c){return b.getSelection().bind(function(b){return a.sharedLinkOrClosest(b.startContainer(),b.endContainer()).map(function(a){c(a);return a})})};return{insert:d.hyperlink,update:function(a,b){return h(a,function(h){b.text().each(function(p){""===p&&""!==f.get(h)?(a.setRelativeSelection(c.before(h),
c.before(h)),e.remove(h)):d.setProperties(h,b)&&(p=g.children(h).length,a.setRelativeSelection(c.on(h,p),c.on(h,p)))});a.focus()})},unlink:function(a){h(a,function(c){a.setSelection(c,0,c,g.children(c).length);var d=g.lastChild(c);e.unwrap(c);d.each(function(c){b.selectEnd(a,c)});a.focus()})}}});l("ab","7v 7 s i0 fc 33 fd i1 1y 21 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=function(a){return a.getSelection().bind(function(b){return a.win().bind(function(a){return c.rectangleAt(a,b.startContainer(),
b.startOffset(),b.endContainer(),b.endOffset()).map(function(a){return{bounds:d.constant(a),element:d.constant(b.startContainer())}})})})},l=function(c,e,f){p(e).fold(function(){a.insertAtCursor(c,e,f)},function(a){var g=a.bounds();a=a.element();(m.isText(a)?n.parent(a):b.some(a)).each(function(a){a=c.directionAt(a);var b=e.translateScreen(g.left,g.top);f({left:b.left,top:b.top,height:d.constant(g.height),width:d.constant(g.width),direction:d.constant(a)})})})},r=function(a,b,c,d,f,g,h){var k=f.direction();
a=e.makeshift(a,b,f.left(),f.top(),f.width(),f.height(),k,g,h);b.show(c,a);c.setComponents([d.element()])};return{show:function(a,b,c,d,e){l(a,b,function(a){r(b,c,d,e,a,g(0,0))})},showExpandable:function(a,b,c,d,e){l(a,b,function(a){k.add(d.panel(),f.resolve("expandable-popup"));var m=g(22,14),n={maxHeightFunction:h.expandable()};r(b,c,d,e,a,m,n)})}}});l("i2","85 f8 gk 8s 4z h7 e4 7 gm 75 33 46 47 1y 3c".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s){var t=function(a,b,d){a=f(a);b=m.translate(b);
a.content(g(b));r.add(a.element(),n.resolve(d));c.button(a.element(),b);return a},u=function(a){var b=e.div();r.add(b,n.resolve("main-controls"));s.append(b,a);return b},v=function(c,d,e){var f=t("remove","link.dialog.remove","link-remove"),g=t("cancel","button.cancel","link-cancel"),h=t(c,d,e);c=p.create({remove:l([],f.events.click),cancel:l([],g.events.click),execute:l([],h.events.click)});d=[a.button(f.element(),b.button({execute:k.click})),a.button(g.element(),b.button({execute:k.click})),a.button(h.element(),
b.button({execute:k.click}))];return{remove:f,cancel:g,execute:h,keylayouts:d,events:c.registry,destroy:function(){f.destroy();g.destroy();h.destroy()}}};return{insert:function(){var a=v("insert","link.dialog.insert","link-insert"),b=u([a.cancel.element(),a.execute.element()]);a.remove.disable();d.disable(a.remove.element());return{dialogTitle:h.constant(m.key("link.dialog.aria.insert")),elements:h.constant([a.remove.element(),b]),events:h.constant(a.events),keylayouts:h.constant(a.keylayouts),execute:a.execute,
destroy:a.destroy}},update:function(){var a=v("update","link.dialog.update","link-update"),b=u([a.cancel.element(),a.execute.element()]);return{dialogTitle:h.constant(m.key("link.dialog.aria.update")),elements:h.constant([a.remove.element(),b]),events:h.constant(a.events),keylayouts:h.constant(a.keylayouts),execute:a.execute,destroy:a.destroy}}}});l("a0",["b","7","33","ci"],function(c,d,b,a){var e=b.resolve("link-validation-highlight"),f=b.resolve("link-validation-invalid");b=b.resolve("link-validation-unknown");
var g=d.constant([e,f,b]);return{configure:function(b){c.each(g(),function(c){b.add(b.output(),c,a.removeClass(c));b.add(b.internal(),c,a.removeClass(c))})},allClasses:g,invalidLink:d.constant(f),unknownLink:d.constant(b),validationHighlight:d.constant(e)}});l("i3","7 s 75 a0 6u 55 46 2u 1a 1y 31".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return{enabled:function(e){var l=d.none(),r=h.immutable("value","text","attrs"),s=g.create({properties:f(["link"]),follow:f(["link"]),ignore:f(["link"]),remove:f(["link"])}),
t={"linkmenu-properties":s.trigger.properties,"linkmenu-follow":s.trigger.follow,"linkmenu-ignore":s.trigger.ignore,"linkmenu-remove":s.trigger.remove};return{situation:function(d){d=l.map(function(c){var d=[r("linkmenu-properties",b.translate("link.context.edit"),{}),r("linkmenu-follow",b.translate("link.context.follow"),{}),r("linkmenu-remove",b.translate("link.context.remove"),{})];c=m.has(c,a.validationHighlight())?[r("linkmenu-ignore",b.translate("link.context.ignore"),{})]:[];return d.concat(c)}).getOr([]);
return{primary:c.constant(d),secondary:c.constant([]),submenus:c.constant([])}},handle:function(a){l.each(function(b){var c=k.get(a,"data-ephox-gopher-item-value"),c=t[c];void 0!==c&&c(b)})},assign:function(a){l=a.bind(function(a){return n.closest(a,"a[href]",e.isRoot)})},events:s.registry}},disabled:function(){var a=e.noSituation(),b=g.create({properties:f(["link"])});return{situation:a,handle:c.noop,assign:c.noop,events:b.registry}}}});l("i4",["1s"],function(c){return{generate:function(d){return d+
"-"+c.floor(99999*c.random()).toString()}}});l("9y","b 7 i4 82 33 2u ci 1a l 2o 2q 4e".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p){var l=e.resolve("link-eph-cursor"),r=function(a){c.each(a,n.remove)},s=function(b,c){u("textbox-bookmark-top",b,m.prepend,c,a.top())},t=function(b,c){u("textbox-bookmark-bottom",b,m.append,c,a.bottom())},u=function(d,e,f,g,m){var l=b.generate(d);c.each(e,function(a){h.set(a,"href","#"+l)});d=p.children(g,"["+a.bookmarkDataAttr()+'="'+m+'"]');c.each(d,n.remove);0<e.length&&
(e=k.fromTag("span"),h.setAll(e,{id:l,style:"visibility: hidden;"}),h.set(e,a.bookmarkDataAttr(),m),f(g,e))};return{configure:function(b){b.add(b.internal(),l,g.remove);b.add(b.output(),l,g.remove);b.addSelector(b.input(),"["+a.bookmarkDataAttr()+"]",r);b.addSelector(b.output(),"["+a.bookmarkAnchorDataAttr()+'="'+a.top()+'"]',s);b.addSelector(b.output(),"["+a.bookmarkAnchorDataAttr()+'="'+a.bottom()+'"]',t)},properties:f.immutableBag("url text title target action invalid".split(" "),[]),insertCursor:d.constant(l)}});
l("i5","b ah s 86 82 a1 33 1a 1y 3u l 64 3l 29 31 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t){return function(u,v){var w=g.resolve("cursor-pointer"),x=v.os.isOSX(),y=b.none(),z=function(a){return u.isInline()?l.absolute(a).top():0},A=function(a){var b=h.get(a,"href");if("top"===h.get(a,e.bookmarkAnchorDataAttr()))u.win().each(function(a){u.body().each(function(b){a.scrollTo(0,z(b))})});else if("bottom"===h.get(a,e.bookmarkAnchorDataAttr()))u.win().each(function(a){u.body().each(function(b){b=
z(b)+p.get(b)-a.innerHeight;a.scrollTo(0,b)})});else if(/^#/.test(b)){var c=b.substr(1);u.body().each(function(a){f.anchorTarget(a,c).each(function(a){u.win().each(function(b){r.setToElement(b,a)})})})}else t.open(b)},D=function(a,b){var e=x?d.META():d.CTRL();c.contains(e,a)&&b()},B=n.fromDom(t),C=b.none();u.events.ready.bind(function(c){c=c.api().body();var d=a.handle(c,function(a){var b=a.target();(x?a.raw().metaKey:a.raw().ctrlKey)&&s.closest(b,"a[href]").bind(function(b){a.prevent();A(b)})});
C=b.some(d);y=b.some(k.toggler(c,w))});var F=function(){y.each(function(a){a.on()})},E=function(){y.each(function(a){a.off()})},G=function(a){D(a.original().raw().which,E)};u.events.keyup.bind(G);var H=m.bind(B,"keyup",function(a){D(a.raw().which,E)}),I=function(a){D(a.original().raw().which,F)};u.events.keydown.bind(I);var K=m.bind(B,"keydown",function(a){D(a.raw().which,F)});return{follow:A,destroy:function(){C.each(function(a){a.unbind()});u.events.keyup.unbind(G);u.events.keydown.unbind(I);H.unbind();
K.unbind()}}}});l("pu","85 f8 gk 8s 4z 7 gm 75 33 1a 1y 4b 2n 3u l 64 2o 3c 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w){var x=k.resolve("inline-popup-expanded");return function(y,z,A,D){var B=s.fromTag("div");c.dialog(B,h.get(D));p.add(B,[k.resolve("expandable-inline-popup")]);D=e.div();n.add(D,k.resolve("inline-popup-content"));var C=e.div();p.add(C,[k.resolve("inline-popup-content-expand"),x]);var F=e.div();n.add(F,k.resolve("inline-popup-controls"));var E=e.div();n.add(E,k.resolve("inline-popup-expand-button-wrapper"));
var G=s.fromTag("span");p.add(G,[k.resolve("inline-popup-expand-button"),k.resolve("icon")]);var H=h.translate("aria.label.more");m.set(G,"title",H);c.button(G,H);c.group(C);c.linkElements(G,C);u.append(E,G);H=e.div();n.add(H,k.resolve("inline-popup-body"));v.append(H,[D,C,E]);v.append(B,[H,F]);v.append(D,y);v.append(C,z);v.append(F,A);n.add(B,x);var I="0px",K=function(){n.remove(B,x);n.add(C,k.resolve("expand-close"));c.hidden(C,!0);l.setAll(C,{opacity:"0",height:"0px",visibility:"hidden"});d.collapsed(G)},
J=r.bind(C,"transitionend",function(a){p.remove(C,[k.resolve("expand-close"),k.resolve("expand-open")])}),M=r.bind(G,"click",function(a){n.has(B,x)?K():(n.add(B,x),n.add(C,k.resolve("expand-open")),c.hidden(C,!1),l.setAll(C,{opacity:"1",height:I,visibility:"visible"}),d.expanded(G))});y=[a.button(G,b.button({execute:g.click}))];return{element:f.constant(B),keylayouts:f.constant(y),destroy:function(){w.remove(B);M.unbind();J.unbind()},show:function(){I=t.getOuter(C)+"px";K();l.reflow(B);n.add(B,k.resolve("enable-transition"))}}}});
l("10z",[],function(){return{setValue:function(c,d,b){c=c.dom();c.value=d;c.text=b}}});l("py",["b","s"],function(c,d){var b=function(a,b){a.dom().add(b.dom())};return{getValue:function(a){var b=a.dom();a=b.selectedIndex;b=b.options[a];return void 0===b||-1===a?d.none():d.from(b.value)},add:b,addAll:function(a,d){c.each(d,function(c){b(a,c)})},setSelected:function(a,b){a.dom().selectedIndex=b}}});l("xd","b lc 75 l 10z py".split(" "),function(c,d,b,a,e,f){var g=[{value:"",i18nKey:"link.properties.target.none"},
{value:"_blank",i18nKey:"link.properties.target.blank"},{value:"_top",i18nKey:"link.properties.target.top"},{value:"_self",i18nKey:"link.properties.target.self"},{value:"_parent",i18nKey:"link.properties.target.parent"}];return{target:function(h){var k=d.common("select","target-container","link.properties.target.label"),m=c.map(g,function(c){var d=a.fromTag("option");e.setValue(d,c.value,b.translate(c.i18nKey));return d});f.addAll(k.field(),m);var n=h.target().getOr("");h=c.findIndex(g,function(a){return a.value===
n});f.setSelected(k.field(),0<h?h:0);return{element:k.element,input:k.field}}}});l("pv","ag gk 8s 4z 7 s gm lc 75 xd 33 1a 1y 4b 2o 2q 32".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u){var v=function(){var b=a.div();l.add(b,n.resolve("invalid-link-info"));var d=h.comboBox("href-url-value","link.properties.url.label",f.some(b));p.setAll(d.input(),{placeholder:k.translate("link.properties.url.placeholder"),autocomplete:"off",autocorrect:"off"});var e=l.toggler(d.element(),n.resolve("link-is-invalid"));
return{input:d.input,element:d.element,dropArrow:d.dropArrow,showInvalid:function(){e.on();var f=a.span();r.add(f,[n.resolve("icon"),n.resolve("invalid-link-icon")]);s.append(b,f);var g=k.translate("link.properties.url.invalid");p.set(f,"title",g);f=c.describe(d.input(),g);p.set(f,"aria-live","assertive");s.append(b,f)},hideInvalid:function(){e.off();t.empty(b);p.remove(d.input(),"aria-describedby")}}};return function(a){var c=v();a.url().each(function(a){u.set(c.input(),a)});var f=h.input("text-to-display",
"link.properties.text.label");l.add(f.element(),n.resolve("text-to-display"));p.setAll(f.input(),{placeholder:k.translate("link.properties.text.placeholder"),autocomplete:"off",autocorrect:"off"});a.text().each(function(a){u.set(f.input(),a)});var r=h.input("title-text","link.properties.title.label");l.add(r.element(),n.resolve("title-container"));p.setAll(r.input(),{placeholder:k.translate("link.properties.title.placeholder"),autocomplete:"off",autocorrect:"off"});a.title().each(function(a){u.set(r.input(),
a)});var s=m.target(a);return{url:e.constant(c),text:e.constant(f),title:e.constant(r),target:e.constant(s),keylayouts:function(){return[b.input(c.input(),d.input({})),b.input(f.input(),d.input({})),b.input(r.input(),d.input({})),b.button(s.input(),d.button({execute:g.click,process:e.noop}))]}}}});l("pw",["a","b","o2","1s"],function(c,d,b,a){return function(a){var f=c.isNumber(a)?a:1E4,g=b.access("local.linkCache");a=g.read();var h=function(a){return 0>f-a.length?a.slice(0,f):a}(c.isArray(a)?a:[]),
k=function(){return h.slice(0)};return{add:function(a){if("#"!==a.charAt(0)){h.length>=f&&h.pop();var b=d.indexOf(h,a);-1<b&&h.splice(b,1);h.unshift(a)}},state:k,destroy:function(){g.write(k())}}}});l("xe",["b","1o"],function(c,d){return{stringArray:function(b){var a={};c.each(b,function(b){a[b]={}});return d.keys(a)}}});l("xf",["s"],function(c){return{url:function(d){return c.some(d.url())},title:function(c){return c.title()},innerText:function(d){d=d.innerText();return 0<d.length?c.some(d):c.none()}}});
l("110",["4g"],function(c){return{resolve:c.create("ephox-tarot").resolve}});l("111","4z 7 s 1y l 2o 3c 110 1s".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a,b,c,d,g){var h=e.fromText(a.substr(0,b));b=e.fromText(a.substr(b,c));a=e.fromText(a.substr(d));g=e.fromTag(g);f.append(g,b);return[h,g,a]},n=function(e,f,h,k){var m=c.tag(f);g.append(m,h);k.each(function(b){a.add(m,b)});return{item:d.constant(e),marked:d.constant(b.some(m))}},p=function(a,c,d,e){var f=a.text,g=a.marker.start(),p=a.marker.length(),
l=0;0<e-(g+p)||0===g||(p>e?l=g-10:(e=k.floor((e-p)/2),l=g-e));e=f.substr(l);g-=l;c=m(e,g,p,g+p,c);f=e.length===f.length?b.none():b.some(h.resolve("anchor-before"));return n(a.item(),d,c,f)},l=function(b,d){var e=c.span();a.add(e,d);g.append(e,b);return e},r=function(a,b,c){var d=[];b=l(b,h.resolve("content-innertext"));0<a.length&&(a=l([e.fromText(a)],h.resolve("anchor-before")),d.push(a));d.push(b);0<c.length&&(c=l([e.fromText(c)],h.resolve("anchor-after")),d.push(c));return d};return{contentMarker:function(a,
c,d,e){var f=a.item().before(),g=a.item().after(),h=a.text;if(0===f.length&&0===g.length&&h.length>e)return p(a,c,d,e);e=a.marker.start();var k=a.marker.length();c=m(h,e,k,e+k,c);f=r(f,c,g);return n(a.item(),d,f,b.none())},contentUnderlined:r,attrMarker:p}});l("xg","4z s 1a 1y l 2o 3c 110 111".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a,b,d){a=c.tag(b);f.append(a,e.fromText(d));return a};return{anchors:function(e,f){var k=f.item(),l=k.url(),s=c.div();a.add(s,h.resolve("item-line"));var t=
k.title().getOr(l);b.set(s,"title",t);k=f.marked().fold(function(){return m(e,"div",t)},function(a){return a});a.add(k,h.resolve("item-main-label"));l=d.from(l).map(function(b){return b!==t?(b=m(e,"div",b),a.add(b,h.resolve("item-secondary-label")),[b]):[]}).getOr([]);l=[k].concat(l);g.append(s,l);return s},standard:function(d,m){var l=m.item(),r=c.div();a.add(r,h.resolve("item-line"));var s=[l.before(),l.innerText(),l.after()].join("");b.set(r,"title",s);s=m.marked().fold(function(){var a=k.contentUnderlined(l.before(),
[e.fromText(l.innerText())],l.after()),b=c.div();g.append(b,a);return b},function(a){return a});a.add(s,h.resolve("item-main-label"));l.indent()&&a.add(s,h.resolve("indent"));f.append(r,s);return r},error:function(a,b){var d=c.span(),g=e.fromText(b);f.append(d,g);return d}}});l("112",["nn","fd","no","nq"],function(c,d,b,a){return function(e,f){return{position:function(g){g=g.isRtl()?b.allRtl():b.all();var h=d(0,0),k=c.element(e);a.fixed(k,f,h,g,{})}}}});l("113","b 7 s k 2u xf 111".split(" "),function(c,
d,b,a,e,f,g){var h=e.immutable("matchFunction","start","length"),k=function(a,b,c){for(var d=0,e=[],f=function(a){e.push(a);d++},g=0,h=a.length;g<h&&d<b;g++)c(a[g]).each(f);return e};return{unmarked:function(a,e){var f=e.getOr(1E3),f=a.length>f?a.slice(0,f):a;return c.map(f,function(a){return{item:d.constant(a),marked:b.none}})},match:function(c,e,f,g){var l=f.toLowerCase();f=g.getOr(1E3);return k(c,f,function(c){return a.findMap(e,function(a){return a(c).bind(function(e){var f=e.toLowerCase().indexOf(l);
if(-1<f){var g=l.length;return b.some({item:d.constant(c),marked:b.none,text:e,marker:h(a,f,g)})}return b.none()})})})},mark:function(a,b,d,e){return c.map(a,function(a){return(a.marker.matchFunction()===f.innerText?g.contentMarker:g.attrMarker)(a,b,d,e)})}}});l("114","7 1a l 2o 2q 110".split(" "),function(c,d,b,a,e,f){var g="data"+f.resolve("section-id");return{create:function(f,k){var m=b.fromTag("ol");d.set(m,g,k.id());var n=function(){e.empty(m)};return{element:c.constant(m),clear:n,add:function(c){var d=
b.fromTag("li");a.append(d,c);a.append(m,d);return d},spec:c.constant(k),destroy:function(){n()}}},dataIdAttribute:c.constant(g)}});l("xh","a b 85 ag 2z c wl 4z 7 s 55 46 53 2u 1a 2m 1y 3u l 2o 2q 6o 31 m 2a 112 113 110 114 q".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w,x,y,z,A,D,B,C,F,E,G,H){var I=f.detect().browser.isSafari(),K=function(a,b){I&&c.isFunction(a.dom().scrollIntoViewIfNeeded)?a.dom().scrollIntoViewIfNeeded(!1):a.dom().scrollIntoView(b)};f=r.immutableBag(["container","sections",
"translate"],["doc"]);r=r.immutableBag("id highlight contentLimit items render extractors".split(" "),["itemLimit"]);var J="data"+E.resolve("item-id");return{init:function(c,f){var r=f.doc().getOr(w.fromDom(H)),I=f.translate(),R={},P=g(),S=h.div();u.add(S,E.resolve("predictive-menu"));b.hidden(S,!0);var L=C(c,S),U=function(){d.each(P.state(),function(a){V(a,[])})},V=function(a,b){y.remove(a.element());a.clear();var c={};0<b.length&&(d.each(b,function(b){var d=a.spec().render()(r,b),d=a.add(d),f=e.generate("");
s.set(d,J,f);c[f]={gui:k.constant(d),item:k.constant(b.item())}}),x.append(S,a.element()));R[a.spec().id()]=c},X=function(){return B.parent(S).isSome()},W=function(b){u.add(b,E.resolve("selected"));ea().bind(ga).each(function(b){a.speak(t.body(),b.item().url())})},Y=function(a){W(a);var b=S.dom().getBoundingClientRect(),c=a.dom().getBoundingClientRect();c.top<b.top?K(a,!0):c.bottom>b.bottom&&K(a,!1)},da=function(a){u.remove(a,E.resolve("selected"))},Z=function(){A.descendant(S,"li").each(Y)},aa=function(){D.one("ol:last-child li:last-child",
S).each(Y)},ea=function(){return A.descendant(S,"li."+E.resolve("selected"))},ha=function(){return ea().bind(ga).map(function(b){b=b.item();a.speak(t.body(),I("link.dialog.autocomplete.accept",b.url()));return b})},fa=function(a){0===B.children(a).length?B.nextSibling(a).fold(Z,fa):B.firstChild(a).fold(aa,Y)},ia=function(a){0===B.children(a).length?B.prevSibling(a).fold(aa,ia):B.lastChild(a).fold(Z,Y)},ga=function(a){a=A.closest(a,"["+J+"]");var b=a.bind(function(a){return A.closest(a,"["+G.dataIdAttribute()+
"]")}),c=a.map(function(a){return s.get(a,J)});return b.map(function(a){return s.get(a,G.dataIdAttribute())}).bind(function(a){return m.from(R[a])}).bind(function(a){return c.bind(function(b){return m.from(a[b])})})},ca=v.capture(S,"mouseover",function(a){a=a.target();z.closest(a,"li."+E.resolve("selected"))||ga(a).fold(k.noop,function(a){ea().each(function(a){da(a)});W(a.gui())})}),la=v.capture(S,"click",function(a){ha().each($.trigger.click)}),$=p.create({click:n(["item"])}),ka=l.ensure(["url",
"indent"]);d.each(f.sections(),function(a){d.each(a.items(),ka);a=G.create(r,a);P.push(a)});U();return{element:k.constant(S),events:$.registry,reset:U,resetFull:function(){d.each(P.state(),function(a){a.clear();var b=a.spec().items(),c=a.spec().itemLimit(),b=F.unmarked(b,c);V(a,b)})},filter:function(a){0<a.length?(R={},d.each(P.state(),function(b){var c=b.spec(),d=F.match(c.items(),c.extractors(),a,c.itemLimit()),c=F.mark(d,c.highlight(),"div",c.contentLimit());V(b,c)})):U()},show:function(b){x.append(f.container(),
S);L.position(b);a.speak(t.body(),I("link.dialog.autocomplete.open"))},isShowing:X,hide:function(){X()&&a.speak(t.body(),I("link.dialog.autocomplete.close"));y.remove(S);ea().each(da)},getSelectedData:ha,moveup:function(){ea().fold(aa,function(a){da(a);B.prevSibling(a).fold(function(){B.parent(a).bind(B.prevSibling).fold(aa,ia)},Y)})},movedown:function(){ea().fold(Z,function(a){da(a);B.nextSibling(a).fold(function(){B.parent(a).bind(B.nextSibling).fold(Z,fa)},Y)})},destroy:function(){ca.unbind();
la.unbind();d.each(P,function(a){a.destroy()});y.remove(S)}}},config:f,section:r}});l("px","b c xe ah 7 r s k i4 75 82 a1 33 55 46 4m 2u 1a 4b 1b 2n 3u 2y 21 83 32 2r xf xg xh v".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w,x,y,z,A,D,B,C,F,E,G,H,I){var K=d.detect().browser.isSafari(),J=u.immutable("url","indent","action","before","innerText","after"),M=u.immutable("url","indent","title","action"),O=u.immutable("url","action"),N=u.immutable("url","indent","action");return function(d,u,
P,S){var L=s.create({change:r([])}),U=function(){var a=u.body().map(p.all).getOr([]),a=c.bind(a,function(a){var b=v.get(a,"href");return I.startsWith(b,"#")||v.has(a,n.bookmarkAnchorDataAttr())?[]:[b]}),a=S.state().concat(a),a=b.stringArray(a);return c.map(a,function(a){var b=g.none();return M(a,e.constant(!1),b,e.noop)})},V=function(a,b,c){a=a.replace(/[^0-9a-zA-Z$-_.+*(),]/g,"");var d=0<a.length?a:k.generate("textbox-heading");return g.some(N("#"+d,c,function(){v.set(b,"id",d)}))},X=function(a){var b=
"h1"!==D.name(a),c=B.get(a);return v.has(a,"id")||v.has(a,"name")?(a=v.has(a,"id")?v.get(a,"id"):v.get(a,"name"),g.some(N("#"+a,b,e.noop))):0===c.trim().length?g.none():V(c,a,b)},W=function(a){v.remove(a,n.bookmarkAnchorDataAttr())},Y=function(a){var b=n.reservedUrls()[a.toLowerCase()];return function(a){v.set(a,n.bookmarkAnchorDataAttr(),b)}},da=function(){var a=u.body().map(p.findLinkTargets).getOr([]),b=1E3<a.length,a=c.map(a,function(a){return X(a).map(function(c){var d=(b?p.linkTargetFastText:
p.linkTargetText)(50,a);return J(c.url(),c.indent(),c.action(),d.before(),d.innerText(),d.after())})}),a=h.cat(a),d=function(a){return"\u2014 "+a+" \u2014"},e=Y(n.topAnchorUrl()),e=J(n.topAnchorUrl(),!1,e,"",d(n.topAnchorUrl()),""),f=Y(n.bottomAnchorUrl()),d=J(n.bottomAnchorUrl(),!1,f,"",d(n.bottomAnchorUrl()),"");return[e].concat(a).concat([d])};return{predict:function(b,e,h){var k=f.cached(function(){var a=U(),c=da(),a=H.config({container:P,translate:m.translate,sections:[H.section({id:"recent",
highlight:"strong",contentLimit:50,items:a,itemLimit:10,render:G.anchors,extractors:[E.title,E.url]}),H.section({id:"anchors",highlight:"strong",contentLimit:50,items:c,render:G.standard,extractors:[E.innerText,E.url]})]}),d=H.init(b,a);w.add(d.element(),[l.resolve("layer-menus"),l.resolve("tarot-inline")]);d.events.click.bind(function(a){d.hide();r(b,a.item())});a=F.get(b);y.setAll(d.element(),{"min-width":a+"px","box-sizing":"border-box"});return d}),p=t(g.none()),r=function(a,b){var c=b.url();
C.set(a,c);K&&a.dom().click();p.set(g.some(b));L.trigger.change()},s=h.container(b);s.swallowKeys([a.UP(),a.DOWN()]);s.events.up.bind(function(a){a.stopper()();a=k();u(a);a.moveup()});s.events.down.bind(function(a){a.stopper()();a=k();u(a);a.movedown()});s.events.escape.bind(function(a){var b=k();b.isShowing()&&(b.hide(),a.stopper()())});s.events.enter.bind(function(a){k().getSelectedData().each(function(c){a.stopper()();var d=k();d.hide();d.reset();r(b,c)})});s.on();var u=function(a){if(!a.isShowing()){var c=
C.get(b);""===c?a.resetFull():a.filter(c);a.isShowing()||a.show(d.uiDirection())}},v=[z.bind(b,"input",function(a){L.trigger.change();a=k();p.set(g.none());var c=C.get(b);0<c.length?(a.filter(c),a.isShowing()||a.show(d.uiDirection())):(a.reset(),a.hide())}),z.bind(b,"focus",function(a){k()}),z.bind(b,"blur",function(a){var c=k().hide;A.active().fold(c,function(a){x.eq(a,b)||c()})}),z.bind(P,"click",function(a){k().hide()}),z.bind(e,"click",function(a){a.stop();a=k();a.isShowing()?a.hide():u(a)})];
return{destroy:function(){k().destroy();s.destroy();c.each(v,function(a){a.unbind()})},getSelectedValue:function(){return p.get().fold(function(){var a=C.get(b),c=n.isReservedUrl(a)?Y(a):W;return O(a,c)},function(a){return O(a.url(),a.action())})}}},events:L.registry}}});l("i6","ae b lf gk 8s 7 s pu pv 82 9y pw px 33 as 55 46 47 1a 1y 2n 32 py".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w,x,y,z,A){return function(D,B,C,F,E,G,H){var I=p(1337),K=k(G),J=H();H=[K.url().element()];var M=[K.text().element(),
K.title().element(),K.target().element()],O=h(H,M,J.elements(),J.dialogTitle());x.add(O.element(),r.resolve("inline-link-dialog"));var N=c.popup(F.uiContainer,F.bounds,D,[],s.editorContainer()).initMenu(O.element());x.add(N.element(),r.resolve("bubble-box"));H=l(D,C,O.element(),I);var Q=H.predict(K.url().input(),K.url().dropArrow(),B);G.invalid()&&(K.url().showInvalid(),H.events.change.bind(function(){K.url().hideInvalid()}));var R={before:function(){y.set(N.panel(),"visibility","hidden");N.open()},
after:function(){y.remove(N.panel(),"visibility");y.remove(N.panel(),"display")}},P=u.create({remove:v([],J.events().remove),cancel:t([]),execute:v([],J.events().execute)}),S=function(a){var b=a.command();a=a.data();w.has(a,m.bookmarkAnchorDataAttr())||"insertLink"!==b&&"updateLink"!==b||(b=w.get(a,"href"),I.add(b))};E.events.internal.bind(S);B=function(){P.trigger.cancel()};J.events().cancel.bind(B);N.events.close.bind(B);B=d.flatten([K.keylayouts(),O.keylayouts(),J.keylayouts()]);var L=e.inlineDialog(O.element(),
B,a.inlineDialog({ok:J.execute.click,cancel:f.noop}));L.events.exit.bind(function(){N.close();P.trigger.cancel()});return{showPopup:function(a){R.before();b.preserve(function(){a.showExpandable(D,C,F,N,O);R.after();O.show();L.enter()},O.element())},hide:function(){N.closed()||L.exit()},getValues:function(){var a=Q.getSelectedValue(),b=z.get(K.text().input()),c=z.get(K.title().input());return n.properties({url:""===a.url()?g.none():g.some(a.url()),text:g.some(b),title:g.some(c),target:A.getValue(K.target().input()),
action:g.some(a.action()),invalid:!1})},destroy:function(){I.destroy();E.events.internal.unbind(S);Q.destroy();L.destroy();J.destroy();N.destroy();O.destroy()},events:P.registry}}});l("9x","c 7 s 73 ab i2 82 i3 9y i5 i6 a0 55 46 1a 1y 83 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v){return function(w,x){var y=w.filter(),z=w.content(),A=w.smartview(),D=h.enabled(z),B=w.internalevents(),C=c.detect();k.configure(y);var F=m(z,C),y=function(){z.getSelection().each(function(a){z.setSelection(a.startContainer(),
a.startOffset(),a.endContainer(),a.endOffset())})},E=C.browser.isIE()?y:d.noop,G=r.create({insert:l(["properties"]),update:l(["properties"]),unlink:l([])}),H=a.destroyable(),I=function(a,b){var c=n(w.region(),w.keyboard(),z,A,B,a,b);c.events.remove.bind(function(a){G.trigger.unlink();K()});c.events.cancel.bind(function(a){K();z.focus();E()});H.set(c);z.events.mousedown.bind(K);return c},K=function(){H.clear();z.events.mousedown.unbind(K)},J=function(a){var b=I(a,f.update);b.events.execute.bind(function(a){G.trigger.update(b.getValues());
K()});b.showPopup(e)};D.events.properties.bind(function(a){a=a.link();var c=s.has(a,g.bookmarkAnchorDataAttr())?g.getReservedUrl(s.get(a,g.bookmarkAnchorDataAttr())):s.get(a,"href");a=k.properties({url:b.from(c),text:b.from(u.get(a)),title:b.from(s.get(a,"title")),target:b.from(s.get(a,"target")),action:b.none(),invalid:t.has(a,p.validationHighlight())});J(a)});D.events.follow.bind(function(a){z.focus();v(function(){F.follow(a.link())},0)});D.events.ignore.bind(function(a){x.ignore(a.link())});D.events.remove.bind(function(){G.trigger.unlink()});
return{showContext:J,showInsert:function(a){var b=I(a,f.insert);b.events.execute.bind(function(a){G.trigger.insert(b.getValues());K()});b.showPopup(e)},situation:D.situation,handle:D.handle,assign:D.assign,events:G.registry,destroy:function(){K();F.destroy()}}}});l("i7","b 85 4z 7 s if h5 75 9y 33 55 46 4m 1a 1y l 2y 2o 3c 2q 32 au".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w,x,y,z){return function(A){var D=l(e.none());A=b.div();s.add(A,m.resolve("link-widget"));var B=b.span();s.add(B,
m.resolve("link-widget-field"));var C=t.fromTag("input");s.add(C,m.resolve("link-widget-input"));d.label(C,h.translate("link.properties.url.placeholder"));v.append(B,C);r.set(C,"type","url");r.set(C,"placeholder",h.translate("link.dialog.tooltip"));var F=g.text(B,C),E=f([m.resolve("link-widget-insert")],"insert.link"),G=f([m.resolve("link-widget-update")],"link.dialog.update"),H=f([m.resolve("link-widget-remove")],"link.dialog.remove");v.append(A,B);var I=p.create({insert:n(["properties"]),update:n(["properties"]),
unlink:n([]),toEditor:n([])}),K=function(a,b){return k.properties({url:e.some(a),text:e.from(b),title:e.none(),target:e.none(),action:e.none(),invalid:!1})},J=function(){var a=y.get(C),b=D.get().fold(function(){return K(a,a)},function(b){return b.text().fold(function(){return K(a,a)},function(b){return K(a,b)})});I.trigger.insert(b);D.set(e.none());I.trigger.toEditor()},M=function(){var a=y.get(C);I.trigger.update(K(a));D.set(e.none());I.trigger.toEditor()};E.events.click.bind(J);G.events.click.bind(M);
H.events.click.bind(function(){I.trigger.unlink();I.trigger.toEditor()});return{element:a.constant(A),addEscape:function(a){v.append(B,a.element())},type:a.constant(F),execute:function(){z.isVisible(E.element())?J():z.isVisible(G.element())&&M()},open:function(){u.focus(C)},close:a.noop,destroy:a.noop,represent:function(a){c.each([E.element(),G.element(),H.element()],x.remove);a.url().fold(function(){y.set(C,"http://");v.after(C,E.element())},function(a){w.after(C,[G.element(),H.element()]);y.set(C,
a)});D.set(e.some(a))},events:I.registry}}});l("9z",["94","i3","i7","55","46"],function(c,d,b,a,e){return function(f){var g=b(f),h=c(f,g);f=d.disabled();var k=e.create({insert:a(["properties"]),update:a(["properties"]),unlink:a([])});g.events.insert.bind(function(a){k.trigger.insert(a.properties())});g.events.update.bind(function(a){k.trigger.update(a.properties())});g.events.unlink.bind(function(a){k.trigger.unlink()});return{showContext:function(a){g.represent(a);h.open()},showInsert:function(a){g.represent(a);
h.open()},situation:f.situation,handle:f.handle,assign:f.assign,events:k.registry,destroy:function(){h.close();h.destroy()}}}});l("5p","c 7 s 9w 75 9x 9y 9z a0 a1 6v 55 46 1a 1y 83".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t){return function(u,v){var w=u.content(),x=u.undo(),y=u.shortcuts(),z=c.detect().deviceType.isTouch()?h(u):f(u,v),A=l.create({analytics:p(["message"])});z.events.insert.bind(function(b){x.transaction(function(){var c=a.insert(w,b.properties());u.internalevents().input(c)});
w.domChanged();w.cursorIntoView();A.trigger.analytics("link_inserted")});z.events.update.bind(function(b){x.transaction(function(){var c=b.properties();a.update(w,c)});w.domChanged();w.cursorIntoView()});z.events.unlink.bind(function(b){x.save();a.unlink(w);w.domChanged();w.cursorIntoView()});var D=function(){w.getSelection().each(function(a){m.sharedLinkOrClosest(a.startContainer(),a.endContainer(),w.isRoot).fold(function(){w.selectWord();z.showInsert(g.properties({url:b.none(),text:w.getSelectedText(),
title:b.none(),target:b.none(),action:b.none(),invalid:!1}))},function(a){z.showContext(g.properties({url:b.from(r.get(a,"href")),text:b.from(t.get(a)),title:b.from(r.get(a,"title")),target:b.from(r.get(a,"target")),action:b.none(),invalid:s.has(a,k.validationHighlight())}))})})},B=n.ui({"link.general":{toggle:!1,value:"link",textkey:e.key("insert.link"),action:D,updateGeneral:d.noop,icon:!0,shortcut:!0,hasPopup:!1,hasDialog:!0}});y.events.link.bind(D);return{ui:B,situation:z.situation,handle:z.handle,
assign:z.assign,events:A.registry,destroy:function(){z.destroy()}}}});l("a3",["4n"],function(c){var d=c.generate([{invalid:["invalidUrl"]},{unknown:["unknownUrl"]},{valid:["validUrl"]}]);return{cata:function(b,a,c,d){return b.fold(a,c,d)},derive:function(b,a){return"VALID"===a?d.valid(b):"INVALID"===a?d.invalid(b):d.unknown(b)}}});l("i9",["q3","n6","n3","7"],function(c,d,b,a){var e=[d.strict("url"),d.defaulted("fresh",!1)],f=b.objOf(e);c=b.objOf([d.field("urls","urls",c.strict(),b.arrOfObj(e))]);
return{one:a.constant(f),many:a.constant(c)}});l("a2","i8 1o a3 7z ep eq er es i9 ev".split(" "),function(c,d,b,a,e,f,g,h,k,m){return function(n,p,l){var r=e(l),s=f.get("ephox.link.service.one",k.one(),n+"/1/check?url=${url}&fresh=${fresh}",p),t=f.post("ephox.link.service.many",k.many(),n+"/1/check",p),u=function(a){return{url:a.url,result:b.derive(a.url,a.result)}};return{checkOne:function(b,c){var d=h.now(),d=g.single(function(a,c){return s.execute({url:m(b),fresh:c})},r,b,d,void 0!==c?c:!1);return a.mapSync(d,
u)},checkMany:function(b,e){var f=h.now(),f=g.multiple(function(a,b){return t.execute({urls:a})},r,b,function(a){return c.indexOnKey(a.results,"url")},function(a){return a.url},f,void 0!==e?e:!1);return a.mapSync(f,function(a){return d.map(a,u)})},dumpCache:r.dump}}});l("q4",[],function(){return{recompose:function(c){var d="";""!==c.protocol&&(d+=c.protocol,d+=":");""!==c.authority&&(d=d+"//"+c.authority);d+=c.path;""!==c.query&&(d+="?",d+=c.query);""!==c.anchor&&(d+="#",d+=c.anchor);return d}}});
l("xi",["v"],function(c){return{remove:function(d){for(var b="";""!==d;)if(c.startsWith(d,"../"))d=c.removeLeading(d,"../");else if(c.startsWith(d,"./"))d=c.removeLeading(d,"./");else if(c.startsWith(d,"/./"))d="/"+c.removeLeading(d,"/./");else if("/."===d)d="/";else if(c.startsWith(d,"/../"))d="/"+c.removeLeading(d,"/../"),b=c.removeTrailing(b,b.substring(b.lastIndexOf("/")));else if("/.."===d)d="/",b=c.removeTrailing(b,b.substring(b.lastIndexOf("/")));else if("."===d||".."===d)d="";else{var a=d.match(/(^\/?.*?)(\/|$)/)[1];
d=c.removeLeading(d,a);b+=a}return b}}});l("xj",["v"],function(c){return{merge:function(d,b,a){if(""!==a&&""===d)return"/"+b;a=d.substring(d.lastIndexOf("/")+1);return c.removeTrailing(d,a)+b}}});l("q5",["v","hr","xi","xj"],function(c,d,b,a){return{transform:function(e,f){var g={strictMode:!0},h=d.parse(e,g),g=d.parse(f,g),k={};""!==g.protocol?(k.protocol=g.protocol,k.authority=g.authority,k.path=b.remove(g.path),k.query=g.query):(""!==g.authority?(k.authority=g.authority,k.path=b.remove(g.path),
k.query=g.query):(""===g.path?(k.path=h.path,k.query=""!==g.query?g.query:h.query):(c.startsWith(g.path,"/")?k.path=b.remove(g.path):(k.path=a.merge(h.path,g.path,e.authority),k.path=b.remove(k.path)),k.query=g.query),k.authority=h.authority),k.protocol=h.protocol);k.anchor=g.anchor;return k}}});l("ia",["q4","q5"],function(c,d){return{resolve:function(b,a){var e=d.transform(b,a);return c.recompose(e)}}});l("a6","b s p 82 2u 1a 2a v hr ia 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var p=e.immutable("href",
"resolved");return function(e){var l=e.slice(0),s=function(e){var q=f.get(e,"href");if(h.startsWith(q,"#")||f.has(e,a.bookmarkAnchorDataAttr()))e=b.error(e);else{var s;s=g.owner(e).dom().baseURI;s=d.from(s).getOr(n.location);s=m.resolve(s,e.dom().href);if(c.contains(l,s))e=b.error(e);else{var w=k.parse(s).protocol;e="https"===w||"http"===w?b.value(p(q,s)):b.error(e)}}return e};return{extract:s,ignore:function(a){s(a).each(function(a){l.push(a.resolved())})},state:function(){return l.slice(0)}}}});
l("a7",["b"],function(c){return{generate:function(d){var b={};c.each(d,function(a){var d=a.resolved();a=a.href();b.hasOwnProperty(d)?c.contains(b[d],a)||b[d].push(a):b[d]=[a]});return b}}});l("5q","b 1o a2 a3 7z 7 a4 s k a5 81 a0 a6 a7 a1 a8 1y 4b o".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,p,l,r,s,t,u,v,w){return function(x,y,z){var A=x.content(),D=x.filter(),B=x.communication(),C=x.undo(),F=x.viewablearea(),E=F.viewport(),G=l(y.ignore),H=p.validationHighlight(),I=p.invalidLink(),K=p.unknownLink();
p.configure(D);var J=b(z.url,B.mediatorHeaders(),y.cache),M=function(a){a=c.map(a,function(a){return t.cata(E.assess(a),h.none,f.compose(h.some,G.extract),h.none)});a=k.cat(a);a=m.partition(a);c.each(a.errors,P);var b=r.generate(a.values);a=d.keys(b);a=c.map(a,function(a){return{url:a}});a=J.checkMany(a);N(a,function(a){d.each(a,function(a){var d=b[a.url];void 0===d?w.warn("Link validator response from server was unknown: ",a.url,a.result):c.each(d,function(b){L(a.result,b)})})})};x=function(){var a=
F.sections(),a=s.many(a),a=c.filter(a,function(a){return!u.has(a,n.embedChecking())});M(a)};var O=g(x,500).throttle;F.events.onChange.bind(O);A.events.domChanged.bind(O);var N=function(a,b){e.handle(a,function(a){w.error("Link Validation server failure: ",a)},function(a){b(a)})},Q=function(a){return A.body().map(function(b){return s.hrefUrl(b,a)})},R=function(a,b){Q(a).each(function(a){c.each(a,function(a){u.has(a,p.validationHighlight())||v.add(a,[H,b])})})},P=function(a){u.has(a,p.validationHighlight())&&
v.remove(a,p.allClasses())},S=function(a){Q(a).each(function(a){c.each(a,P)})},L=function(b,c){a.cata(b,function(a){R(c,I)},function(a){R(c,K)},function(a){S(c)})};C.events.undo.bind(x);C.events.redo.bind(x);return{destroy:f.noop,refresh:O,ignore:function(a){C.save();G.ignore(a);O();A.focus();A.domChanged();A.cursorIntoView()},state:function(){return{ignore:G.state(),cache:J.dumpCache()}}}}});l("115",["s","ij"],function(c,d){return{top:{rules:[{current:d.backtrack,next:d.sidestep,fallback:c.none()},
{current:d.sidestep,next:d.sidestep,fallback:c.some(d.backtrack)},{current:d.advance,next:d.sidestep,fallback:c.some(d.sidestep)}],inclusion:function(b,a,c){return!b.property().parent(c).exists(function(c){return b.eq(c,a.item())})}},all:{rules:void 0,inclusion:function(b,a,c){return b.property().isText(a.item())}}}});l("xk",["b","7","ij","115"],function(c,d,b,a){var e=b.walkers(),f=function(a,c,d,g){return b.walk(a,c,d,e.left(),g.rules).map(function(b){return a.property().isEmptyTag(b.item())||a.property().isBoundary(b.item())?
[]:(g.inclusion(a,b,c)?[b.item()]:[]).concat(f(a,b.item(),b.mode(),g))}).getOr([])},g=function(a,d,e){a=f(d,e,b.sidestep,a);return c.reverse(a).concat([e])};return{top:d.curry(g,a.top),all:d.curry(g,a.all)}});l("q6",["e7","xk"],function(c,d){var b=c();return{top:function(a){return d.top(b,a)},all:function(a){return d.all(b,a)}}});l("xl",["b","7","s","ex","hm"],function(c,d,b,a,e){var f=function(f,g){var m=e.generate(g,function(c,d){return f.property().isText(c)?b.some(a.range(c,d,d+f.property().getText(c).length)):
b.none()}),n=c.foldr(m,function(a,b){return f.property().getText(b.element())+a},"");return{list:d.constant(m),text:d.constant(n)}},g=function(a,b,c,f){var g=e.find(b.list(),function(b){return a.eq(b.element(),c)}).map(function(a){return a.start()+f});return{list:b.list,text:b.text,cursor:d.constant(g)}};return{from:function(a,b,c,d){b=f(a,b);return g(a,b,c,d)}}});l("q7",["e7","xl"],function(c,d){var b=c();return{from:function(a,c,f){return d.from(b,a,c,f)}}});l("ib",["7","s","q6","q7","21"],function(c,
d,b,a,e){return{get:function(f,g){var h=b.all(f),k=a.from(h,f,g),h=k.cursor().orThunk(function(){return e.isText(f)?d.none():d.some(k.text().length)});return{list:k.list,text:k.text,cursor:c.constant(h)}}}});l("q8",["4p","7","s","l","66"],function(c,d,b,a,e){return function(f,g,h){return{patterns:function(){return[new e("(\\W)(\\w+)(\\W*)$","gi"),new e("(^)(\\w+)(\\W*)$","gi")]},useCursor:d.constant(!0),generate:function(e,f){var g=a.fromText(f.text());return c.species({elements:d.constant([g]),cursor:b.none,
dictation:d.constant(b.some(function(){return h(f.text())})),notify:b.none})},derive:function(a){var b=a.index+a[1].length,c=b+a[2].length;return g(a[2]).map(function(a){return{startIndex:d.constant(b),finishIndex:d.constant(c),text:d.constant(a)}})},label:f}}});l("q9","4p 7 s 6l l 66".split(" "),function(c,d,b,a,e,f){return function(g,h){var k=a.sanitise(g);return{patterns:function(){return[new f("("+k+")","gi")]},useCursor:d.constant(!0),generate:function(a,f){var g=e.fromTag("span",a.dom());g.dom().innerHTML=
h;return c.species({elements:d.constant([g]),cursor:b.none,dictation:b.none,notify:b.none})},derive:function(a){var c=a.index;a=c+a[0].length;return b.some({startIndex:d.constant(c),finishIndex:d.constant(a)})}}}});l("qa","4p 7 s ex 6l 2n l 2o 3c 66".split(" "),function(c,d,b,a,e,f,g,h,k,m){return function(n,p,l){var r=e.sanitise(p);return{patterns:function(){return[new m("^("+r+"\\s)(.+)","gi")]},useCursor:d.constant(!1),generate:function(e,m){var p=g.fromTag(n,e.dom());f.set(p,"list-style-type",
l);var r=g.fromTag("li",e.dom()),w=g.fromTag("li",e.dom());h.append(w,g.fromTag("br",e.dom()));k.append(p,[r,w]);k.append(r,m.clones());return c.species({elements:d.constant([p]),cursor:d.constant(b.some(a.point(w,0))),dictation:b.none,notify:b.none})},derive:function(a){var c=a[1];return b.some({startIndex:d.constant(a.index),finishIndex:d.constant(a.index+c.length)})}}}});l("qb","4p 7 s 6l l 3c 66".split(" "),function(c,d,b,a,e,f,g){var h=function(a,h){return{patterns:function(){return[new g("^("+
a+")(.+)","gi")]},useCursor:d.constant(!1),generate:function(a,g){var k=e.fromTag(h,a.dom());f.append(k,g.clones());return c.species({elements:d.constant([k]),cursor:b.none,dictation:b.none,notify:b.none})},derive:function(a){var c=a[1];return b.some({startIndex:d.constant(a.index),finishIndex:d.constant(a.index+c.length)})}}};return{normal:function(b,c){var d=a.sanitise(b);return h(d,c)},spaced:function(b,c){var d=a.sanitise(b)+"\\s";return h(d,c)}}});l("qc","4p 7 s 6l l 2o 66".split(" "),function(c,
d,b,a,e,f,g){return function(h,k,m,n){var l=a.sanitise(k),q=a.sanitise(m);return{patterns:function(){return[new g(l+"([^\\s].*?[^\\s])"+q,"gi"),new g(l+"([^\\s])"+q,"gi")]},useCursor:d.constant(!0),generate:function(a,g){var h=e.fromTag(n,a.dom()),k=e.fromText(g.text());f.append(h,k);return c.species({elements:d.constant([h]),cursor:b.none,dictation:b.none,notify:b.none})},derive:function(a){return b.some({startIndex:d.constant(a.index),finishIndex:d.constant(a.index+a[0].length),text:d.constant(a[1])})}}}});
l("qd","4p 7 s 6l l 66".split(" "),function(c,d,b,a,e,f){return function(g,h){var k=a.sanitise(g);return{patterns:function(){return[new f("("+k+")","gi")]},useCursor:d.constant(!0),generate:function(a,f){return c.species({elements:d.constant([e.fromTag(h,a.dom())]),cursor:b.none,dictation:b.none,notify:b.none})},derive:function(a){return b.some({startIndex:d.constant(a.index),finishIndex:d.constant(a.index+a[0].length)})}}}});l("qe","4p 7 s l v 66".split(" "),function(c,d,b,a,e,f){var g=function(e,
f){return c.species({elements:d.constant([a.fromText(f.text())]),cursor:b.none,dictation:b.none,notify:b.none})},h=function(){return{patterns:function(){return[/([^.?!][.?!]\s+)([a-z][^\s]*)/g,/^()([a-z][^\s]*)/g]},useCursor:d.constant(!0),generate:g,derive:function(a){var c=a.index,f=c+a[0].length;a=a[1]+e.capitalize(a[2]);return b.some({startIndex:d.constant(c),finishIndex:d.constant(f),text:d.constant(a)})}}}(),k=function(){return{patterns:function(){return[new f("([A-Z][A-Z]+)([a-z]+)","g")]},
useCursor:d.constant(!1),generate:g,derive:function(a){var c=a[2],c=e.capitalize(a[1].toLowerCase())+c.toLowerCase(),f=a.index;a=f+a[0].length;return b.some({startIndex:d.constant(f),finishIndex:d.constant(a),text:d.constant(c)})}}}();return{capitalise:d.constant(h),normalise:d.constant(k)}});l("qf","4p 7 s c4 pr 1a l 2o".split(" "),function(c,d,b,a,e,f,g,h){return{patterns:function(){return[a.autolink()]},useCursor:d.constant(!0),generate:function(a,e){var n=g.fromTag("a");f.set(n,"href",e.href());
h.append(n,g.fromText(e.text()));return c.species({elements:d.constant([n]),cursor:b.none,dictation:b.none,notify:d.curry(b.some,[n])})},derive:function(a){var c=e.preprocess(a[1]),f=c.text(),c=c.href();return-1<f.indexOf("@")?b.none():b.some({startIndex:d.constant(a.index),finishIndex:d.constant(a.index+f.length),text:d.constant(f),href:d.constant(c)})}}});l("ic","b q8 q9 qa qb qc qd 7 r 75 qe qf 6o 2a 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l,q,r,s){var t=h.constant(function(a,b){return b});
return function(s,v,w){var x=w.whitelist.fold(t,function(a){return function(b,d){return c.contains(a,b)?d:[]}}),y=function(a){return{derive:a.derive,generate:a.generate,patterns:a.patterns,useCursor:a.useCursor,allowed:h.constant(!0)}},z=function(a,b){return{derive:a.derive,generate:a.generate,patterns:a.patterns,useCursor:a.useCursor,allowed:function(a){return!1===q.closest(a,b)}}};w=x("headings",[y(e.spaced("######","h6")),y(e.spaced("#####","h5")),y(e.spaced("####","h4")),y(e.spaced("###","h3")),
y(e.spaced("##","h2")),y(e.spaced("#","h1"))]);var A=x("lists",[y(a("ul","*","disc")),y(a("ol","1.","decimal")),y(a("ol","a.","lower-alpha")),y(a("ol","i.","lower-roman")),y(a("ol","1)","decimal")),y(a("ol","a)","lower-alpha")),y(a("ol","i)","lower-roman"))]),D=x("semantics",[y(f("bold","**","**","strong")),y(f("bold","__","__","strong")),y(f("italic","*","*","em")),y(f("italic","_","_","em"))]),B=x("entities",[y(b("(c)","&copy;")),y(b("-","&mdash;"))]),C=x("capitalisation",[y(n.normalise()),y(n.capitalise())]),
F=function(a){return m.translate("aria.autocorrect.announce",a)};s=s.hasAutocorrect()?x("autocorrect",[y(d("autocorrect",s.lookup,F))]):[];var F=x("hr",[y(g("---","hr"))]),E=k.cached(function(a){a.runOrOnLoaded(function(b){var c=k.cached(function(){r.owner(b).dom().execCommand("AutoUrlDetect",!1,!1)});a.events.focus.bind(function(){c()})});return x("link",[z(l,"a")])});return{headings:h.constant(w),semantics:h.constant(D),entities:h.constant(B),cases:h.constant(C),lists:h.constant(A),dynCustoms:function(){var a=
v.get();return c.map(a,y)},link:E,hr:h.constant(F),corrections:h.constant(s)}}});l("xm",["2u"],function(c){return c.immutable("startContainer","startOffset","endContainer","endOffset")});l("xn","b 1b 21 fl at 1s".split(" "),function(c,d,b,a,e,f){return{cloneAfter:function(g,h,k){var m=h;return c.map(g,function(c){var g=a.deep(c);b.isText(c)&&d.eq(k.endContainer(),c)&&e.get(c).length>k.endOffset()&&e.set(g,e.get(g).substring(0,k.endOffset()));if(b.isText(g)&&0<m){var h=e.get(g);c=f.min(h.length,m);
h=h.substring(c);e.set(g,h);m-=c}return g})}}});l("xo",["s","k"],function(c,d){return{matcher:function(b,a,e){var f=function(a){return e.fold(function(){return a&&1<a.length},function(b){return a&&0<a.length&&a.index+a[0].length===b})};return d.findMap(b,function(b){a:{if(!b.global)throw"Macro matching only works with global regexes: "+b;for(var d=b.exec(a);d;){if(f(d)){b=c.some(d);break a}d=b.exec(a)}b=c.none()}return b})}}});l("qg","4p xm xn xo 6 7 s q6".split(" "),function(c,d,b,a,e,f,g,h){var k=
function(a,d,g,h){d=b.cloneAfter(d,h.finishIndex(),g);var k=e.merge(h,{clones:f.constant(d)});return{build:function(b){b=a.generate(b,k);return c.applicator({elements:b.elements,cursor:b.cursor,range:f.constant(g),dictation:b.dictation,notify:b.notify})}}};return{detect:function(b,c,e,f){var l=c.patterns(),s=b.cursor().filter(c.useCursor);return a.matcher(l,b.text(),s).bind(c.derive).bind(function(a){var b=h.top(e);if(0<b.length){var m=d(b[0],0,e,f);return g.some(k(c,b,m,a))}return g.none()})}}});
l("qh","4p xm xo 7 s hm".split(" "),function(c,d,b,a,e,f){var g=function(b,c,d){c=f.get(b,c);var e=f.get(b,d);return c.bind(function(b){return e.map(function(c){return{start:a.constant(b),finish:a.constant(c)}})})},h=function(a,b){return b(a.start().element())&&b(a.finish().element())?e.some(a):e.none()};return{detect:function(e,f,n,l){n=f.patterns();l=e.cursor().filter(f.useCursor);return b.matcher(n,e.text(),l).bind(f.derive).bind(function(b){return g(e.list(),b.startIndex(),b.finishIndex()).bind(function(e){return h(e,
f.allowed).map(function(e){var g=b.startIndex()-e.start().start(),h=b.finishIndex()-e.finish().start(),k=d(e.start().element(),g,e.finish().element(),h);return{build:function(d){d=f.generate(d,b);return c.applicator({elements:d.elements,cursor:d.cursor,range:a.constant(k),dictation:d.dictation,notify:d.notify})}}})})})}}});l("id","en b qg qh ag 7 7x fq 2m".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a,b,f){return b.doc().bind(function(m){m=a.build(m);var n=m.elements();d.map(n,c.doNotMerge);
var l=h.handle(m.range());g.insertAt(b,l,n);d.map(n,c.clear);m.dictation().each(function(a){e.shout(k.body(),a())});m.notify().each(function(){f.input(n)});return m.cursor()})},n=function(a,b,c,d,e){return a.detect(b,c,d,e).map(function(a){return{execute:f.curry(m,a)}})};return{block:f.curry(n,b),inline:f.curry(n,a)}});l("a9","b ib 7 s k fp ic id".split(" "),function(c,d,b,a,e,f,g,h){return function(k,m,n,l,q,r,s,t){var u=a.none(),v=a.none(),w=g(q,r,t),x=c.flatten([w.link(m),w.hr(),w.semantics(),
w.entities()]),y=function(){return c.flatten([x,k.autocorrect().get()?w.corrections():[],k.capitalisation().get()?w.cases():[],w.dynCustoms()])},z=w.headings().concat(w.lists()),A=function(a,b,g,h){var k=f.descend(b,g),m=d.get(k.element(),k.offset());g=c.filter(h,function(a){return a.allowed(b)});return e.findMap(g,function(b){return a(m,b,k.element(),k.offset())})},D=function(a,b){m.undoOperation(function(){a(function(){return b.execute(m,s)}).each(function(a){m.setSelection(a.element(),a.offset(),
a.element(),a.offset())});m.domChanged()})};return{spaceDown:function(){m.getSelection().map(function(a){a.collapsed()&&(u=A(h.inline,a.startContainer(),a.startOffset(),y()))})},spaceUp:function(){var c=b.curry(D,l.run);u.each(c);u=a.none()},enterDown:function(){m.getSelection().map(function(a){a.collapsed()&&(v=A(h.block,a.startContainer(),a.startOffset(),z.concat()));v=v.orThunk(function(){return A(h.inline,a.startContainer(),a.startOffset(),y())})})},enterUp:function(){var c=b.curry(D,b.apply);
v.each(c);v=a.none()}}}});l("5r","7 75 6s a9 aa 6v 76 55 46".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m,n,l,q){var r=m.profile(),s=m.content(),t=m.undo(),u=m.context(),v=m.operations(),w=m.internalevents(),x=k.create({analytics:h(["message"])}),y=b(l.customs),z=a(r,s,t,v,n,y,w,q);s.events.keydown.bind(function(a){e.isSpace(a)&&z.spaceDown()});s.events.keyup.bind(function(a){e.isSpace(a)&&z.spaceUp()});u.events.preLinebreak.bind(function(a){z.enterDown()});u.events.postLinebreak.bind(function(a){z.enterUp()});
var A=function(a){return function(){var b=a.get();a.setAndCache(!b)}},D=function(a){return function(b){(!0===a.get()?b.select:b.deselect)()}};n=function(a,b,c){return{toggle:!0,value:a,textkey:d.key(b),action:A(c),updateGeneral:D(c),icon:!1,tooltip:g.get}};return{ui:f.ui({"capitalisation.general":n("capitalisation","cog.capitalisation",m.profile().capitalisation()),"autocorrect.general":n("autocorrect","cog.autocorrect",m.profile().autocorrect())}),destroy:c.noop,events:x.registry,customMacros:c.constant(y),
state:function(){return{customs:y.state()}}}}});l("ie","85 f8 ag c gk 8s 4z h7 e4 7 gm lc 75 gn 33 55 46 1a 1y 3u l 2y 2o 3c 2q 32".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l,q,r,s,t,u,v,w,x,y,z,A,D,B,C){var F=a.detect().deviceType.isTouch(),E=function(a){a.disable();d.disable(a.element())};return function(){var a=u.create({insert:t(["embed"]),input:t(["raw"])}),H=y.fromTag("span"),I=l.textarea("media-embed","media.embed"),K=q.translate("media.placeholder"),J=b.describe(I.textarea(),K);A.append(I.element(),
J);J=g.span();c.hidden(J,!0);w.add(J,s.resolve("media-icon"));v.set(J,"alt",q.translate("media.insert"));var M=h(),O=q.translate("media.insert");M.content(k(O));w.add(M.element(),[s.resolve("media-insert")]);r.makeDefault(M.element());c.button(M.element(),O);v.set(I.textarea(),"placeholder",K);E(M);a.registry.input.bind(function(){var a=C.get(I.textarea());M.disabled()?""!==a&&(M.enable(),d.enable(M.element())):""===a&&E(M)});var N=x.bind(I.textarea(),"input",a.trigger.input);D.append(H,[J,I.element(),
M.element()]);var Q=function(){var b=C.get(I.textarea());a.trigger.insert(b);F&&z.blur(I.textarea())},K=[f.input(I.textarea(),e.input({})),f.button(M.element(),e.button({execute:n.click}))];M.events.click.bind(function(){Q()});return{element:m.constant(H),execute:Q,empty:function(){C.set(I.textarea(),"")},keylayouts:m.constant(K),events:a.registry,destroy:function(){N.unbind();M.destroy();B.remove(H)}}}});l("ac","ae 85 gk 8s 7 75 ie 33 as 46 47 4b".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l){return function(q){var r=
q.region(),s=q.content(),t=q.smartview(),u=g(),v=a.inlineDialog(u.element(),u.keylayouts(),b.inlineDialog({ok:u.execute,cancel:e.noop}));d.dialog(u.element(),f.translate("insert.media"));var w=c.popup(t.uiContainer,t.bounds,r,[],k.editorContainer()).initMenu(u.element());l.add(u.element(),[h.resolve("media-embed-dialog"),h.resolve("inline-dialog")]);v.events.exit.bind(function(){x()});var x=function(){w.closed()||(w.close(),u.empty(),s.focus(),v.exit())};q=m.create({insert:n(["embed"],u.events.insert)});
return{element:u.element,showPopup:function(a){w.open();a.show(r,s,t,w,u);v.enter()},isClosed:w.closed,events:q.registry,destroy:function(){x();v.destroy();u.destroy();w.destroy()}}}});l("ad","4z 7 if h5 75 33 55 46 1a 1y l 2y 2o ig 32".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l,q,r,s){return function(t){t=c.div();m.add(t,f.resolve("media-widget"));var u=c.span();m.add(u,f.resolve("media-widget-field"));var v=n.fromTag(r.isLarge()?"textarea":"input");m.add(v,f.resolve("media-widget-input"));var w=
e.translate("media.placeholder");k.set(v,"placeholder",w);k.set(v,"title",w);q.append(u,v);w=b([f.resolve("media-widget-insert")],"insert.media");q.append(u,w.element());q.append(t,u);var x=a.text(u,v),y=h.create({insert:g(["embed"]),toEditor:g([])}),z=function(){var a=s.get(v);y.trigger.insert(a);y.trigger.toEditor()};w.events.click.bind(function(){z()});return{element:d.constant(t),addEscape:function(a){q.append(u,a.element())},open:function(){s.set(v,"");l.focus(v)},close:d.noop,execute:function(){z()},
destroy:d.noop,type:d.constant(x),events:y.registry}}});l("5s","c 7 73 ab 94 75 ac ad 6v".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m){var n=m.content(),l=function(){var c=b.destroyable(),d=function(){c.clear();n.events.mousedown.unbind(d)};return{open:function(){var b=g(m);b.events.insert.bind(function(a){a=a.embed();m.insertFilteredHtmlAtCursor(a);n.cursorIntoView();d()});b.showPopup(a);n.events.mousedown.bind(d);c.set(b)},destroy:function(){d()}}},q=function(){var a=h(m);a.events.insert.bind(function(a){a=
a.embed();m.insertFilteredHtmlAtCursor(a);n.cursorIntoView()});return e(m,a)},r=(c.detect().deviceType.isTouch()?q:l)();return{ui:k.ui({"media.general":{toggle:!1,value:"media",textkey:f.key("insert.media"),action:r.open,updateGeneral:d.noop,icon:!0,shortcut:!1,hasPopup:!1,hasDialog:!0}}),destroy:function(){r.destroy()}}}});l("ai","7 33 1y l 2o 2q 6b 3t".split(" "),function(c,d,b,a,e,f,g,h){return function(k,m){var n=a.fromTag("div");b.add(n,d.resolve("mentions-business-card"));var l=k.initMenu(n),
q=null,r=function(a,b,c){f.empty(n);e.append(n,c);l.open();a(b,l)};return{showFull:function(a){return function(b,c){g(q);q=h(function(){r(a,b,c)},500)}}(m.showUnder),showMini:c.curry(r,m.showAtSide),hide:function(){g(q);l.close()},destroy:function(){g(q);l.destroy()}}}});l("aj","a 1p s p 2u l o".split(" "),function(c,d,b,a,e,f,g){var h=e.immutable("rawData","extra"),k=function(b,d,e){if(c.isArray(d)&&c.isArray(e))return a.value(h(d,e));g.error(b+" callback parameters were not both arrays",d,e);return a.error(b+
" callback parameters were not both arrays")},m=function(b,c){if(d.isPrototypeOf(c))return a.value(f.fromDom(c));g.error(b+" was not a DOM element",c);return a.error(b+" was not a DOM element")};return function(a){var c=b.none();return{fetch:function(b,c){a.fetch(b,function(a,b){var d=k("fetch()",a,b);c(d)})},fetchExtra:function(b,c,d){a.menuExtra(b,c,function(a,b){var c=k("menuExtra()",a,b);d(c)})},menuHover:function(d,e){c=b.some(d.userid);a.menuHover(d,function(a){a=m("menuHover() callback",a);
c.is(d.userid)&&e(a)})},hover:function(b,c){a.hover(b.dom(),function(a){a=m("hover() callback",a);c(a)})},menuComplete:function(b){b=a.menuComplete(b);return m("menuComplete result",b)},hoverSelector:function(){return a.hoverSelector},isTrigger:function(a){return 64===a}}}});l("ak",["b","ci"],function(c,d){return{configure:function(b){var a=[b.internal(),b.history(),b.output()];c.each(a,function(a){b.addSelector(a,"span.ephox-polish-incomplete-mention",d.unwrap)})}}});l("qi","b gi 6 7 s 33 4n 4m 1a l 2f 3c 2q 31 au q".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,l,q,r,s,t){var u=f.resolve("no-results"),v=f.resolve("loading-results"),w=g.generate([{none:["item"]},{extra:["value","item"]},{fetched:["userId","name","rawname","info","item"]}]);return function(g){var y=d.mainmenu(m.fromDom(t),f.resolve("mentions-list"),[]),z=h({}),A=function(a){return a.userid},D=function(a){return a.name},B=function(a,b){r.child(a,".ephox-gopher-item-text").each(function(a){n.set(a,b)})},C=function(a){return c.map(a,function(a){var b=d.item(m.fromDom(t),
a.userid,a.name);B(b,a.name);return b})},F=function(a){return c.foldr(a,function(a,c){var d={};d[c.userid]=c;return b.merge(a,d)},{})},E=function(a,b){var e=C(a),f=c.map(b,function(a){return d.item(m.fromDom(t),a.key,a.value)});return e.concat(f)},G=function(a){var b=k.get(a,"data-ephox-gopher-item-value"),d=z.get();return void 0!==d[b]?w.fetched(d[b].userid,d[b].name,d[b].rawname,d[b],a):c.contains([v,u],b)?w.none(a):w.extra(b,a)};return{element:a.constant(y),selected:function(){return r.descendant(y,
".ephox-gopher-item-selected")},setData:function(a,c){var d=F(a);z.set(b.merge(z.get(),d));d=0===a.length?[{userid:u,name:g.get("mentions.lookahead.noresults")}]:a;d=E(d,c);q.empty(y);l.append(y,d)},getInfo:G,getUserId:function(b){return G(b).fold(e.none,e.none,a.compose(e.some,A))},setLoading:function(){var a=[{userid:v,name:g.get("mentions.lookahead.searching")}],a=E(a,[]);q.empty(y);l.append(y,a)},getName:function(b){return G(b).fold(e.none,e.none,a.compose(e.some,D))},refind:function(a){a=k.get(a,
"data-ephox-gopher-item-value");return void 0!==a&&null!==a?r.descendant(y,'[data-ephox-gopher-item-value="'+a+'"]'):e.none()},isOpen:function(){return s.isVisible(y)}}}});l("ih","ag 7 s qi 55 46 4n 4m 2m 83 v 6b o q 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l,q,r,s){var t=g.generate([{nothing:[]},{refetch:["term"]},{open:["term"]}]);return function(g,l,p){var r=function(a){c.speak(k.body(),a)},q=a(p);g.setView(q.element());var s=h(""),A=function(a){B(a.rawData(),a.extra());g.reposition(b.none())},
D=function(a){var b=q.selected();a();return b.bind(q.refind)},B=function(a,b){r(p.get("mentions.lookahead.open"));g.updateItems(D,function(){q.setData(a,b)})},C=function(a){return q.isOpen()&&2<=a.length?t.refetch(a):2<=a.length?t.open(a):t.nothing()},F=function(a){a.fold(G,A)},E=f.create({accept:e(["information"]),menuHover:e(["element","info"]),none:e([])}),G=function(){g.cancel()};return{setData:B,isOpen:function(){return q.isOpen()},lookup:function(a,b){var c=n.startsWith(a,"@")?a.substring(1):
a;s.set(c);var e=d.noop;C(c).fold(e,function(a){l.fetch(a,F)},function(a){q.setLoading();g.open(b);l.fetch(a,F)})},close:function(){g.close()},onClick:function(a){q.getInfo(a).fold(function(){E.trigger.none()},function(a,b){l.fetchExtra(a,s.get(),F)},function(a,b,d,e,f){c.speak(k.body(),p.get("mentions.lookahead.selected",d));E.trigger.accept(e)})},onHover:function(a){r(m.get(a));q.getInfo(a).fold(d.noop,d.noop,function(a,b,c,d,e){E.trigger.menuHover(e,d)})},events:E.registry}}});l("ii","7 s 33 55 46 4m 1y l 2o 2q au".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n){return function(l,q,r,s){var t=h.fromTag("div");g.add(t,b.resolve("mentions-lookahead-container"));var u=r.initMenu(t),v=f(d.none()),w=e.create({close:a([])}),x=function(){return n.isVisible(t)};r=function(){v.set(d.none());u.close()};u.events.close.bind(function(){q.close();w.trigger.close()});l.events.mousedown.bind(r);return{element:c.constant(t),destroy:function(){v.set(d.none());u.destroy()},setView:function(a){m.empty(t);k.append(t,a)},updateItems:function(a,
b){a(b).fold(function(){q.setActiveMenu(t)},function(a){q.select(a)})},reposition:function(a){a.isSome()&&v.set(a);x()&&v.get().each(function(a){s.showUnder(a,u)})},open:function(a){l.body().each(function(b){u.open();s.showUnder(a,u);v.set(d.some(a));q.open([q.sandbox()],b)})},isOpen:x,cancel:function(){v.set(d.none());w.trigger.close()},close:r,events:w.registry}}});l("al",["s","ih","ii","46","47"],function(c,d,b,a,e){return function(f,g,h,k,m,n){var l=b(f,g,h,k),q=d(l,m,n);f=a.create({menuHover:e(["element",
"info"],q.events.menuHover),accept:e(["information"],q.events.accept),close:e([],l.events.close)});q.events.none.bind(l.close);return{onHover:q.onHover,onClick:q.onClick,close:function(){q.isOpen()&&q.close();l.isOpen()&&l.cancel()},isOpen:l.isOpen,lookup:function(a,b){l.reposition(c.some(b));q.lookup(a,b)},destroy:function(){l.destroy()},events:f.registry}}});l("an","80 7 s ex ij 6l ik 66".split(" "),function(c,d,b,a,e,f,g,h){var k=function(){return new h(f.wordbreak(),"i")},m=function(a,c,d){return g.repeatLeft(a,
d,function(a,b,c,d,e){return g.previousChar(d,e).fold(function(){return b.kontinue()},function(a){return b.finish(a.ch())})}).fold(b.none,b.none,b.some)},n=function(b,c,d,e){return 0<=e&&"@"===d.charAt(e)?b.finish(a.point(c,e)):b.abort()},l=function(b,c,d,e){return b.finish(a.point(c,e))},q=function(d){return b.some(a.point(d,c.getEnd(d)))};return{isValidMention:function(a,b){return m(a,e.sidestep,b).fold(d.constant(!0),function(a){return null===a.match(/[0-9a-zA-Z]/)})},scan:function(a,c){return g.expandLeft(a,
c,{regex:k,attempt:n}).fold(b.none,b.none,b.some).bind(function(d){return g.expandRight(a,c,{regex:k,attempt:l}).fold(b.none,q,b.some).map(function(a){return{start:d.element,soffset:d.offset,finish:a.element,foffset:a.offset}})})}}});l("am","b s an 33 4n 21 6j 31 at".split(" "),function(c,d,b,a,e,f,g,h,k){var m=e.generate([{none:[]},{bare:["text","start","soffset","finish","foffset"]},{incomplete:["text","element"]},{complete:["text","element"]}]),n=a.resolve("incomplete-mention"),l=function(a,c){return b.scan(a,
c).map(function(a){return m.bare("",a.start(),a.soffset(),a.finish(),a.foffset())})},q=function(a){if(f.isText(a))return k.get(a);a=g.descendants(a,f.isText);return c.map(a,k.get).join("")},r=function(a,b){return a.collapsed()?h.closest(a.startContainer(),b.hoverSelector()).fold(function(){return h.closest(a.startContainer(),"."+n).fold(function(){return l(a.startContainer(),a.startOffset())},function(a){return d.some(m.incomplete(q(a),a))})},function(a){return d.some(m.complete(q(a),a))}).getOrThunk(m.none):
m.none()};return{detect:function(a,b){return a.getSelection().map(function(a){return r(a,b)}).getOrThunk(m.none)},detectOn:r,withinIncomplete:function(a){return h.closest(a,"."+n)}}});l("ao","am 33 1y 1b l 2o 2q".split(" "),function(c,d,b,a,e,f,g){var h=function(a){b.remove(a,d.resolve("incomplete-mention"));g.unwrap(a)};return{cancel:h,create:function(){var a=e.fromTag("span");b.add(a,d.resolve("incomplete-mention"));var c=e.fromText("@");f.append(a,c);return a},validatePrevious:function(b,d){c.withinIncomplete(b).filter(function(b){return c.withinIncomplete(d).forall(function(c){return!a.eq(b,
c)})}).each(h)}}});l("ap","b s 33 55 46 4m 2m 3u l 6o 31 6b 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l,q){var r="."+b.resolve("mentions-business-card");return function(b,t){var u=f([]),v=null,w=null,x=e.create({contentHover:a(["target"]),stopHover:a([]),menuHover:a(["info"])});b.runOrOnLoaded(function(a){u.set([h.bind(a,"mouseover",function(a){D(a)}),h.bind(g.body(),"mouseover",function(a){n.closest(a.target(),r).each(z)}),h.bind(a,"mouseout",function(a){B(a)}),h.bind(g.body(),"mouseout",function(a){C(a)})])});
var y=function(a){l(v);l(w);v=q(function(){x.trigger.contentHover(a)},300)},z=function(){l(w)},A=function(){l(v);w=q(function(){x.trigger.stopHover()},300)},D=function(a){n.closest(a.target(),t).each(function(a){y(a);x.trigger.contentHover(a)})},B=function(a){if(!m.closest(a.target(),t))return!1;d.from(a.raw().relatedTarget||a.raw().toElement).map(k.fromDom).filter(function(a){return m.closest(a,t)}).isNone()&&A()},C=function(a){if(!m.closest(a.target(),r))return!1;d.from(a.raw().relatedTarget||a.raw().toElement).map(k.fromDom).filter(function(a){return m.closest(a,
r)}).isNone()&&A()};return{destroy:function(){c.each(u.get(),function(a){a.unbind()})},events:x.registry}}});l("aq",["a","c4","75","9"],function(c,d,b,a){var e=function(a,b){return 1<arguments.length||/\{(\d+)\}/.test(a)?d.tokens.call(void 0,a,b):a};return function(d){return{get:function(g){var h=d[g];return c.isString(h)?e(h,a.prototype.slice.call(arguments,1)):b.translate.apply(void 0,arguments)}}}});l("il",["7","fc","fd"],function(c,d,b){return function(a){return{show:function(e,f,g,h,k){f=b(0,
0);e=e.directionAt(a);e=d.mainmenu(g,c.constant(a),f,e);g.show(h,e);h.setComponents([a,k.element()])},showWith:function(b,f,g,h,k){b=b.directionAt(a);b=d.submenu(g,c.constant(a),b);g.show(h,b);h.setComponents([a,k.element()])}}}});l("ar",["7","il","w"],function(c,d,b){return function(a,b,f,g){return{showAtSide:function(g,k){d(g).showWith(a,b,f,k,{element:c.constant(k.element())})},showUnder:function(g,k){d(g).show(a,b,f,k,{element:c.constant(k.element())})}}}});l("5t","58 ae af b ag 9i ah 7 7x ai aj ak al am an ao ap aq ar as 2m 2n l 2y 2o 21 6j 2q at au w".split(" "),
function(c,d,b,a,e,f,g,h,k,m,n,l,q,r,s,t,u,v,w,x,y,z,A,D,B,C,F,E,G,H,I){return function(K,J){var M=v(J.aria),O=K.content(),N=K.smartview(),Q=K.region(),R=K.operations(),P=n(J),S=d.menuSystem(N.uiContainer,h.constant("mentions"),b.menu({focusActive:!1}));z.set(S.sandbox(),"z-index",I(void 0!==J.zIndex?J.zIndex:1E6));var L=d.popup(S.sandbox,N.bounds,Q,[],x.editorContainer()),N=w(Q,O,N,S.sandbox()),U=q(O,S,L,N,P,M),V=m(L,N);l.configure(K.filter());var X=u(O,P.hoverSelector());U.events.menuHover.bind(function(a){P.menuHover(a.info(),
function(b){b.fold(h.noop,function(b){H.isVisible(a.element())&&V.showMini(a.element(),b)})})});X.events.contentHover.bind(function(a){P.hover(a.target(),function(b){b.fold(h.noop,function(b){U.close();V.showFull(a.target(),b)})})});X.events.stopHover.bind(function(a){V.hide()});S.events.itemHover.bind(function(a){a=a.item();U.onHover(a);O.backupSelection();D.focus(a);O.focus()});S.events.itemAction.bind(function(a){U.onClick(a.item())});O.events.nodeChanged.bind(function(a){O.getSelection().each(function(b){b.collapsed()&&
(r.detectOn(b,P).fold(U.close,U.close,h.noop,U.close),a.prev().each(function(a){t.validatePrevious(a,b.startContainer())}))})});O.events.keyup.bind(function(b){O.getSelection().each(function(c){c.collapsed()&&(a.contains(W,b.original().raw().which)||r.withinIncomplete(c.startContainer()).each(function(b){var c=F.descendants(b,C.isText),c=a.map(c,G.get).join("");U.lookup(c,b);V.hide()}))})});O.events.keypress.bind(function(a){var b=a.original();P.isTrigger(b.raw().which)&&O.getSelection().each(function(a){s.isValidMention(a.startContainer(),
a.startOffset())&&(a=function(){var a=t.create();k.insertAtCursor(O,[a]).each(function(a){O.setSelection(a.element(),a.offset(),a.element(),a.offset())});b.kill();e.speak(y.body(),M.get("mentions.initiated"))},r.detect(O,P).fold(a,a,h.noop,h.noop))})});var W=a.flatten([g.ENTER(),g.DOWN(),g.UP()]);K.context().events.preLinebreak.bind(function(a){Y(function(b,c){U.isOpen()?a.handler().handle():aa()},h.noop)});O.events.keydown.bind(function(b){var c=b.original().raw().which;a.contains(g.ESCAPE(),c)?
Y(function(){aa();b.original().kill()},h.noop):a.contains(W,c)&&U.isOpen()&&(S.simulateKey(b.original()),b.original().kill())});var Y=function(a,b){r.detect(O,P).fold(b,b,a,b)},da=function(a){Y(function(b,d){P.menuComplete(a).each(function(a){B.after(d,a);E.remove(d);var b=A.fromText(c.zeroWidth());B.after(a,b);O.setRelativeSelection(f.after(b),f.after(b));Z()})},Z)},Z=function(){V.hide();U.close()},aa=function(){Y(function(a,b){e.speak(y.body(),M.get("mentions.lookahead.cancelled"));R.atomic(function(){t.cancel(b)});
Z()},Z)};U.events.close.bind(aa);U.events.accept.bind(function(a){da(a.information())});return{destroy:function(){U.destroy();V.destroy();X.destroy();S.destroy()}}}});l("av",["b","s","75","2u"],function(c,d,b,a){var e=a.immutable("textkey","value","icon");return function(a){var g=function(a){var c;c={zh:"zh_cn",pt:"pt_br"};c=void 0===c[a]?a:c[a];c=b.has("parlance."+c)?b.key("parlance."+c):b.raw(c);return e(c,a,d.none())},h=c.map(a.languages,g);return{build:function(b){return b.filter(function(b){return!c.contains(a.languages,
b)}).fold(function(){return h},function(a){return h.concat([g(a)])})}}}});l("5u","7 s 7e 7f av 75 6v 7d 7h aw 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){return function(l,q,r){var s=l.content(),t=l.undo(),u=e(r),v=function(){return s.on(function(a){return m.language(a).fold(h.off,h.on)}).getOrThunk(h.unchanged)};return{ui:g.ui({"parlance.dropdown":c.constant({name:"parlance",textkey:f.key("parlance.set"),menuTextkey:f.key("parlance.menu"),updateDropdown:function(a){var b=v(),e=b.fold(d.none,d.none,
d.some),e=u.build(e);a.populate([{label:d.none,items:c.constant(e)}]);b.fold(a.deactivate,c.noop,a.activate);b.fold(a.untick,c.noop,a.tick)},action:function(d){var e=function(a){return k.language(s.isRoot,a,d)};q.lock(function(){a.cata(l.selections().get(),c.noop,b.multiple(s,t,e),b.single(s,t,e));s.getSelection().each(function(a){q.check(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())})});n(function(){s.uiChanged()},0)},values:u.build(d.none()),render:d.none(),toggle:!1,describe:function(){return f.key("parlance.set")}})},
c.identity),destroy:c.noop}}});l("qj",["85","7","75","l"],function(c,d,b,a){return function(){var e=a.fromTag("textarea");c.label(e,b.translate("plaincode.dialog.editor"));c.textarea(e);return{element:d.constant(e)}}});l("im","8s kp ah s gl gm qj 75 gn 33 55 46 1y 32".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l,q,r){return function(s){var t=l.create({execute:n(["html"]),close:n([])}),u=e(s);q.add(u.element(),m.resolve("plaincode-modal"));u.setTitle(h.translate("plaincode.dialog.title"));var v=function(){w();
t.trigger.close()},w=function(){u.hide()},x=g();u.setContent(x.element());s=k.okCancel("plaincode");s.events.ok.bind(function(){t.trigger.execute(r.get(x.element()));v()});s.events.cancel.bind(function(){v()});u.events.close.bind(function(){y.exit();v()});u.setControls(s.element());var y=f.setup(u,s,[c.single(x.element(),[d.rule(d.is(b.ENTER()[0]),function(b){b.raw().stopPropagation();return a.none()})],a.none())]);return{element:u.element,open:function(){u.show();y.enter()},setHtml:function(a){r.set(x.element(),
a)},destroy:function(){u.destroy();y.destroy()},hide:w,events:t.registry}}});l("ax",["im","55","46"],function(c,d,b){return function(a){var e=c(a),f=function(){g.trigger.close();e.events.close.unbind(f);e.events.execute.unbind(h);e.destroy()},g=b.create({execute:d(["html"]),close:d([])}),h=function(a){g.trigger.execute(a.html())};e.events.close.bind(f);e.events.execute.bind(h);return{show:function(){e.open()},setHtml:e.setHtml,events:g.registry}}});l("5v",["7","ax"],function(c,d){return function(b,
a){var e=b.content(),f=b.shortcuts(),g=b.smartview(),h=a.setContent,k=a.getContent;f.events.plaincode.bind(function(){m()});var m=function(){var a=d(g.uiContainer());a.events.close.bind(function(){e.toEditing()});a.events.execute.bind(function(a){h(a.html())});e.toReading();a.setHtml(k());a.show()};return{destroy:c.noop}}});l("ay","b c 7 7q ci 1a 2q 2a".split(" "),function(c,d,b,a,e,f,g,h){var k=function(){return{configure:function(a){var b=[a.internal(),a.history(),a.output(),a.paste()];c.each(b,
function(b){a.addSelector(b,"[unselectable]",e.removeAttr("unselectable"))})},clean:function(a){f.remove(a,"unselectable")},disableNativeResize:function(a){f.set(a,"unselectable","on")}}},m=function(){return{configure:b.noop,clean:function(b){h.nextSibling(b).filter(a.isEmptyText).each(g.remove)},disableNativeResize:b.noop}};d=d.detect().browser;return d.isIE()?k():d.isFirefox()?m():{configure:b.noop,clean:b.noop,disableNativeResize:b.noop}});l("io","7 s 55 46 2n 64 2r v 1s".split(" "),function(c,
d,b,a,e,f,g,h,k){return function(){var m=a.create({grow:b(["x","y"])}),n=1,l=1,q=d.none(),r=function(a){return e.getRaw(a,"width").bind(function(a){return h.endsWith(a,"px")?d.some(parseInt(a,10)):d.none()}).getOrThunk(function(){return g.get(a)})};return{setTarget:function(a){q=d.some(a);l=g.get(a)/(f.get(a)+0)},setMultiplier:function(a){n=a},clearTarget:function(){q=d.none()},mutate:function(a,b){q.each(function(c){var d=r(c)+n*a,e=1===d?1:k.floor(d/l);5<=d&&5<=e&&(g.set(c,d),f.set(c,e));m.trigger.grow(a,
b)})},events:m.registry,destroy:c.noop}}});l("ip","7 33 55 46 1a 1y 4b 2n 3u l 64 2o 3c 3l 2q 2r".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l,q,r,s,t){var u="data-"+d.resolve("resize-direction"),v=function(a,b){var c=m.fromTag("span");g.add(c,[d.resolve(a),d.resolve("resize-eph-resizer")]);e.set(c,u,b);return c};return{create:function(){var g=v("element-se-resize","1"),x=v("element-ne-resize","1"),y=v("element-sw-resize","-1"),z=v("element-nw-resize","-1"),A=m.fromTag("div");f.add(A,d.resolve("resize-wrapper"));
q.append(A,[g,x,y,z]);var D=function(){s.remove(A)},B=a.create({click:b(["multiplier"])}),C=k.bind(A,"mousedown",function(a){f.has(a.target(),d.resolve("resize-eph-resizer"))&&(a.prevent(),a=e.get(a.target(),u),a=void 0!==a?parseInt(a,10):1,B.trigger.click(a))});return{refresh:function(a,b){l.append(a,A);var d;d=r.absolute(b);var e=n.get(b),f=t.get(b);d={top:d.top,height:c.constant(e),left:d.left,width:c.constant(f)};e=t.get(y)/2;h.setAll(y,{top:d.top()+d.height()-e+"px",left:d.left()-e+"px"});h.setAll(g,
{top:d.top()+d.height()-e+"px",left:d.width()+d.left()-e+"px"});h.setAll(x,{top:d.top()-e+"px",left:d.width()+d.left()-e+"px"});h.setAll(z,{top:d.top()-e+"px",left:d.left()-e+"px"})},clear:D,events:B.registry,destroy:function(){C.unbind();D()}}}}});l("az","in s ay io ip 33 55 46 1y 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m){return function(n){var l=d.none(),q=a();q.events.grow.bind(function(){t()});var r=c.transform(q,{layerClass:f.resolve("layer-below-dialog")});r.events.stop.bind(function(){l.each(function(a){u.trigger.stop(a)})});
k.add(r.element(),f.resolve("resize-eph-block"));var s=e.create();s.events.click.bind(function(a){q.setMultiplier(a.multiplier());n.body().each(function(a){r.go(m.documentElement(a))})});var t=function(){s.clear();l.each(b.clean)},u=h.create({stop:g(["target"])});return{showHandles:function(a){var b=m.documentElement(a);q.setTarget(a);l=d.some(a);r.on();s.refresh(b,a)},hideHandles:t,events:u.registry,destroy:function(){s.destroy();q.destroy();r.destroy();l=d.none()}}}});l("5w","9i s 86 aa 7c ay az 21".split(" "),
function(c,d,b,a,e,f,g,h){return function(k){var m=k.content(),n=k.undo();k=k.filter();f.configure(k);var l=g(m),q=function(a){m.getSelection().bind(e.detect).each(function(b){n.save();e.remove(m,b.image());m.domChanged();n.save();a.original().kill()})},r=function(a){m.getSelection().bind(e.detect).each(function(b){m.setRelativeSelection(c.before(b.image()),c.before(b.image()));a.original().kill()})},s=function(a){m.getSelection().bind(e.detect).each(function(b){m.setRelativeSelection(c.after(b.image()),
c.after(b.image()));a.original().kill()})};k=function(){m.getSelection().bind(e.detect).fold(function(){l.hideHandles()},function(a){a=a.image();l.showHandles(a);e.reselect(m,a)})};m.events.loaded.bind(k);m.events.domChanged.bind(k);m.events.paint.bind(k);m.events.nodeChanged.bind(k);m.events.selectionchange.bind(k);var t=d.none();m.events.ready.bind(function(a){a=a.api().body();t=d.some(b.handle(a,function(a){"img"===h.name(a.target())&&e.select(m,a.target())}))});m.events.mousedown.bind(function(a){a=
a.original().target();"img"===h.name(a)&&f.disableNativeResize(a)});m.events.keydown.bind(function(b){a.isDel(b)||a.isBackspace(b)?q(b):a.isLeftOrUp(b)?r(b):a.isRightOrDown(b)&&s(b)});l.events.stop.bind(function(a){a=a.target();l.showHandles(a);e.reselect(m,a)});return{destroy:function(){l.destroy();t.each(function(a){a.unbind()})}}}});l("it","b 1o 2u qm qn g8 1a 2n l 2o 2q m".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l){var q=b.immutable("minRow","minCol","maxRow","maxCol"),r=function(a,b){var c=
a.grid().columns(),e=a.grid().rows(),f=c,g=0,h=0;d.each(a.access(),function(a){if(b(a)){var c=a.row(),d=c+a.rowspan()-1,k=a.column();a=k+a.colspan()-1;c<e?e=c:d>g&&(g=d);k<f?f=k:a>h&&(h=a)}});return q(e,f,g,h)},s=function(a,b,c,d){for(var f=b.grid().columns(),g=b.grid().rows(),h=0;h<g;h++)for(var n=!1,l=0;l<f;l++)if(!(h<c.minRow()||h>c.maxRow()||l<c.minCol()||l>c.maxCol()))if(e.getAt(b,h,l).filter(d).isNone()){var p=n,q=a[h].element(),r=k.fromTag("td");m.append(r,k.fromTag("br"));(p?m.append:m.prepend)(q,
r)}else n=!0},t=function(a,b){var d=c.filter(f.firstLayer(a,"tr"),function(a){return 0===a.dom().childElementCount});c.each(d,n.remove);b.minCol()!==b.maxCol()&&b.minRow()!==b.maxRow()||c.each(f.firstLayer(a,"th,td"),function(a){g.remove(a,"rowspan");g.remove(a,"colspan")});g.remove(a,"width");g.remove(a,"height");h.remove(a,"width");h.remove(a,"height")};return{extract:function(b,d){var g="."+d,h=function(a){return l.is(a.element(),g)},k=a.fromTable(b),m=e.generate(k),q=r(m,h),D="th:not("+g+"),td:not("+
g+")",B=f.filterFirstLayer(b,"th,td",function(a){return l.is(a,D)});c.each(B,n.remove);s(k,m,q,h);t(b,q);return b}}});l("b0","b iq 7 7f f0 f9 ir is it bf l 2o 2q fl".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l,q,r){var s=function(a){c.each(a,function(a){q.empty(a);l.append(a,n.fromTag("br"))})},t=function(a){return m.table(a[0]).map(r.deep).map(function(a){return[k.extract(a,d.selectedClass())]})},u=function(a,d){var k=b.curry(d.filterDom,d.output()),m=h.register({doc:a.doc,win:a.win,body:a.body,
getSelection:a.getSelection,setSelection:a.setSelection});return function(d,h,n){c.each(h,k);var l=b.curry(e.toText,h);h=b.curry(e.toHtml,h);var l=g.buildClipboardContents(l,h),p=f.fromSafe(a);p.begin();m.setClipboard(d,l,function(){p.end();n.apply(void 0,arguments)})}},v=function(c,d,e){var f=function(c,f){a.cata(d.get(),b.noop,function(a){t(a).each(function(d){e(c,d,b.curry(f,a))})},b.noop)};c.events.cut.bind(function(a){f(a.original(),s)});c.events.copy.bind(function(a){f(a.original(),b.noop)})};
return function(a,c){var d=a.content(),e=a.filter(),f=a.selections();d.events.ready.bind(function(a){a=a.api();var b=u(a,e);v(a,f,b)});return{destroy:b.noop}}});l("qo",["4g"],function(c){return{resolve:c.create("ephox-cement").resolve}});l("iu",["qo","7"],function(c,d){var b=c.resolve("smartpaste-eph-bin");return{binStyle:d.constant(b)}});l("qp",["7","s","2o","2q"],function(c,d,b,a){return function(e,f){var g=function(b,e,f){b(f,e);return d.some({element:c.constant(e),cleanup:function(){a.remove(e)},
splits:c.constant([])})},h=function(a){return{none:d.none,start:c.curry(g,b.before,a),end:c.curry(g,b.after,a),middle:function(c,d,e){return g(b.after,a,d)}}},k=function(a){var d=function(a){return function(c,d){b.appendAt(c,d,a)}};return{prepend:c.curry(g,b.prepend,a),before:c.curry(g,b.before,a),after:c.curry(g,b.after,a),insertAt:function(b,c){return g(d(c),a,b)},append:c.curry(g,b.append,a)}};return{before:{text:h(e),element:{hasPrevious:k(e).insertAt,first:k(e).prepend,empty:k(e).before,otherwise:k(e).append}},
after:{text:h(f),element:{hasNext:k(f).insertAt,rightEdge:k(f).append,empty:k(f).after,otherwise:k(f).append}},general:{insertBefore:k(e).before,insertAfter:k(f).after}}}});l("iv","b 9i j1 cj 7x qp f9 qq 2m l 2q 6o".split(" "),function(c,d,b,a,e,f,g,h,k,m,n,l){return function(q){var r=g.fromUnsafe(q),s=m.fromTag("span"),t=m.fromTag("span");c.each([s,t],q.markAsEphemeral);var u=f(s,t);return{backup:function(){q.getSelection().each(function(a){a.collapsed()?(e.insertAtCursor(q,[s]),n.unwrap(t),r.begin()):
h.both(u,a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())})},insert:function(f,g,h){q.setRelativeSelection(d.after(s),k.inBody(t)?d.before(t):d.after(s));e.insertAtCursorWith(q,f,g,h).each(function(a){l.ancestor(a.element(),"table")?q.setSelection(a.element(),0,a.element(),0):q.setRelativeSelection(d.after(a.element()),d.after(a.element()))});r.end();q.getSelection().each(function(c){c=b.toLeaf(c.startContainer(),c.startOffset());a.cursorIntoView(q,c.element())});c.each([s,t],n.unwrap)},
cancel:function(){c.each([s,t],n.unwrap)}}}});l("qt","b g3 7 s 7f 1a dp".split(" "),function(c,d,b,a,e,f,g){var h=function(a,c){return e.cata(c.get(),b.constant([]),b.identity,b.constant([a]))};return{mergable:function(c,f){return e.cata(f.get(),a.none,function(e,f){return 0===e.length?a.none():d.retrieveBox(c).bind(function(c){return 1<e.length?a.some({bounds:b.constant(c),cells:b.constant(e)}):a.none()})},a.none)},unmergable:function(b,d){var e=function(a){return f.has(a,"rowspan")&&1<g(f.get(a,
"rowspan"),10)||f.has(a,"colspan")&&1<g(f.get(a,"colspan"),10)},l=h(b,d);return 0<l.length&&c.forall(l,e)?a.some(l):a.none()},selection:h}});l("ji",["7","s","qt","2u"],function(c,d,b,a){var e=function(a){return{element:c.constant(a),mergable:d.none,unmergable:d.none,selection:c.constant([])}};a=a.immutable("element","clipboard","generators");return{noMenu:e,forMenu:function(a,d,e){return{element:c.constant(e),mergable:c.constant(b.mergable(d,a)),unmergable:c.constant(b.unmergable(e,a)),selection:c.constant(b.selection(e,
a))}},notCell:function(a){return e(a)},paste:a}});l("iw","qr b 7 s jf qs ji bf jk 21 83".split(" "),function(c,d,b,a,e,f,g,h,k,m,n){var l=function(a){return"table"===m.name(a)||0===n.get(a).trim().length},q=function(b){var c=d.filter(b,function(a){return"table"===m.name(a)});return 1!==c.length?a.none():d.forall(b,l)?a.from(c[0]):a.none()};return{rules:function(a,d,m){var n=b.noop,l=function(c,l){return h.table(c).bind(function(h){var p=a.doc().getOrDie(),p=f.paste(p),p=g.paste(c,l,p),q=b.constant(m);
return e.execute(d,k.pasteCells,n,q)(a,h,p).map(function(a){return a.startContainer()})})},p=function(a){return q(a).map(function(a){return{single:b.constant(a)}})};return{collapsed:b.constant(c(function(a,b,c){return h.cell(b)},p,function(a,b){return l(a.element(),b.single())},"custom arcade table insert collapsed")),ranged:b.constant(c(function(a,c,d){return h.cell(c.element()).map(function(a){return{left:b.constant(a),right:b.constant(a)}})},p,function(a,b){return l(a.left(),b.single())},"custom arcade table insert ranged"))}},
extractTable:q}});l("13q",["b","2u","o"],function(c,d,b){var a="officeStyles htmlStyles isWord proxyBin isInternal backgroundAssets".split(" "),e=d.immutableBag([],a);return{nu:e,merge:function(b,d){var h={};c.each(a,function(a){d[a]().or(b[a]()).each(function(b){h[a]=b})});return e(h)}}});l("117",["s","4n"],function(c,d){var b=d.generate([{error:["message"]},{paste:["elements","assets","correlated"]},{cancel:[]},{incomplete:["elements","assets","correlated","message"]}]),a=function(a,b,c,d,k){return a.fold(b,
c,d,k)};return{error:b.error,paste:b.paste,cancel:b.cancel,incomplete:b.incomplete,cata:a,carry:function(d,f){return a(d,c.none,c.none,c.none,function(d,e,k,m){return a(f,c.none,function(a,d,e){return c.some(b.incomplete(a,d,e,m))},c.none,c.none)}).getOr(f)}}});l("13p",["13q","117","3q","2u"],function(c,d,b,a){var e=a.immutableBag(["response","bundle"],[]),f=function(a){return g(function(b){var c=e(a);b(c)})},g=function(a){return b(g,function(b){a(b)})};return{call:function(a,b){a(e(b))},sync:g,pure:f,
pass:function(a){return f({response:a.response(),bundle:a.bundle()})},done:e,error:function(a){return f({response:d.error(a),bundle:c.nu({})})},initial:function(){return f({response:d.paste([],[],[]),bundle:c.nu({})})},cancel:function(){return f({response:d.cancel(),bundle:c.nu({})})}}});l("116","13p 13q 117 b 7 k 2u".split(" "),function(c,d,b,a,e,f,g){var h=g.immutable("steps","input","label","capture"),k=function(a,b){return f.findMap(a,function(a){return a.getAvailable(b).map(function(b){return h(a.steps(),
b,a.label(),a.capture())})})},m=function(a,f){var g=e.curry(c.pass,a),h=function(){return f().map(function(e){var f=d.merge(a.bundle(),e.bundle());e=b.carry(a.response(),e.response());return c.done({response:e,bundle:f})})};return b.cata(a.response(),g,h,g,h)};return{choose:function(a,b,c){return k(a,c).getOrThunk(function(){var a=b.getAvailable(c);return h(b.steps(),a,b.label(),b.capture())})},run:function(b,d){return a.foldl(b,function(a,b){return a.bind(function(a){return m(a,function(){return b(d,
a)})})},c.initial()).map(function(a){return a.response()})}}});l("118",["c","7","3t"],function(c,d,b){var a=c.detect();c=function(a,b,c){b.control.block();a.dom().execCommand("paste");c();b.control.unblock()};var e=function(a,c,d){b(d,1)},f=(a=a.browser.isIE()&&10>=a.browser.version.major)?c:e;return{willBlock:d.constant(a),run:function(a,b,c){return f(a,b,c)}}});l("xp","116 117 b 7 bk 55 46 118".split(" "),function(c,d,b,a,e,f,g,h){return function(k,m){var n=g.create({cancel:f([]),error:f(["message"]),
insert:f(["elements","assets","correlated"])}),l=e.tap(function(a){h.willBlock()&&(l.control.block(),a.preventDefault());var e=c.choose(k,m,a);e.capture()&&a.preventDefault();a=b.map(e.steps(),function(a){return a(l.control)});c.run(a,e.input()).get(function(a){d.cata(a,function(a){n.trigger.error(a)},function(a,b,c){n.trigger.insert(a,b,c)},function(){n.trigger.cancel()},function(a,b,c,d){n.trigger.insert(a,b,c);n.trigger.error(d)})})});return{paste:l.instance,isBlocked:l.control.isBlocked,destroy:a.noop,
events:n.registry}}});l("119",["7"],function(c){return{blocking:function(c){return function(b){return function(a,e,f){b.block();return c(a,e,f).map(function(a){b.unblock();return a})}}},normal:function(d){return c.constant(d)}}});l("13r",["2h","gv","3s","gw","s"],function(c,d,b,a,e){return{convert:function(f){var g=c.resolve("window.clipboardData.files"),h=void 0!==f.convertURL?f.convertURL:void 0!==f.msConvertURL?f.msConvertURL:void 0;return void 0!==g&&void 0!==h&&0<g.length?(g=b.mapM(g,function(b){var c=
a.createObjectURL(b);h.apply(f,[b,"specified",c]);return d.singleWithUrl(b,c)}),e.some(g)):e.none()}}});l("11a",["13r","3s","7","s"],function(c,d,b,a){return{background:function(){var b=a.none();return{convert:function(a){b=c.convert(a)},listen:function(a){return b.fold(function(){return d.nu(function(a){a([])})},function(a){return a}).get(a)},clear:function(){b=a.none()}}},ignore:function(){return{convert:a.none,listen:function(a){a([])},clear:b.noop}}}});l("11b",["s","k","66"],function(c,d,b){var a=
function(a,f){var g=new b(f,"i");return d.findMap(a,function(a){return null!==a.match(g)?c.some({type:a,flavor:f}):c.none()})};return{isValidData:function(a){return void 0!==a&&void 0!==a.types&&null!==a.types},getPreferredFlavor:function(b,c){return d.findMap(b,function(b){return a(c,b)})},getFlavor:a}});l("rz",["6","4n"],function(c,d){var b=d.generate([{none:[]},{error:["message "]},{blob:["blob"]}]);return c.merge(b,{cata:function(a,b,c,d){return a.fold(b,c,d)}})});l("11v",["2i"],function(c){return function(d,
b){return new (c.getOrDie("Blob"))(d,b)}});l("11w",["2i"],function(c){return function(d){return new (c.getOrDie("Uint8Array"))(d)}});l("yb","rz 11v 11w bj s p v 9 1s".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(c,e){for(var f=a.atob(c),g=f.length,m=k.ceil(g/1024),l=new h(m),u=0;u<m;++u){for(var v=1024*u,w=k.min(v+1024,g),x=new h(w-v),y=0;v<w;++y,++v)x[y]=f[v].charCodeAt(0);l[u]=b(x)}return d(l,{type:e})};return{convert:function(a){if(g.startsWith(a,"data:image/")&&11<a.indexOf(";base64,")){var b=
a.indexOf(";"),d=a.substr(5,b-5);a=a.substr(b+8);try{return c.blob(m(a,d))}catch(e){return c.error(e)}}else return c.none()}}});l("ry",["yb"],function(c){return{toBlob:function(d){return c.convert(d)}}});l("13s","117 b gh 7 2u 1a l 21 4e o".split(" "),function(c,d,b,a,e,f,g,h,k,m){var l=e.immutable("asset","image");return{createImages:function(a){var e=[],h=[],k=[];d.each(a,function(a){return b.cata(a,function(b,c,d,m){b=g.fromTag("img");f.set(b,"src",d);e.push(b);h.push(a);k.push(l(a,b))},function(a,
b,c){m.error("Internal error: Paste operation produced an image URL instead of a Data URI: ",b)})});return c.paste(e,h,k)},findImages:function(c,e){var g=[],m=d.bind(c,function(a){return"img"===h.name(a)?[a]:k.descendants(a,"img")});d.each(e,function(c){b.cata(c,function(a,b,e,h){d.each(m,function(a){f.get(a,"src")===e&&g.push(l(c,a))})},a.noop)});return g},updateSources:function(c,e){var g=[];d.each(c,function(c,d){b.cata(c,function(a,b,h,k){a=e[d];f.set(a,"src",h);g.push(l(c,a))},a.noop)});return g}}});
l("11c","ry rz 13p 13s 117 b gv s 2u 1a l 21 2q 3c 4e".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q,r,s){var t=k.immutable("blob","image"),u=function(a,b){var e=c.toBlob(b);return d.cata(e,h.none,h.none,function(b){return h.some(t(b,a))})},v=function(a){var b=l.fromTag("div");r.append(b,a);return s.descendants(b,"img[src]")},w=function(a){return 0===a.indexOf("data:")&&-1<a.indexOf("base64")||0===a.indexOf("blob:")},x=function(a){a=m.get(a,"src");return w(a)},y=function(a){return f.bind(v(a),function(a){var b=
m.get(a,"src");return w(b)?u(a,b).toArray():[]})},z=function(a){a=f.filter(a,function(a){return"img"!==p.name(a)||!x(a)});return e.incomplete(a,[],[],"errors.local.images.disallowed")};return function(c){return function(d,h){return b.sync(function(d){var k=function(){b.call(d,{response:h.response(),bundle:h.bundle()})},m=function(c){var k=y(c),m=f.map(k,function(a){return a.blob()});g.multiple(m).get(function(g){var m=f.map(k,function(a){return a.image()}),m=a.updateSources(g,m);b.call(d,{response:e.paste(c,
g,m),bundle:h.bundle()})})},l=function(a,e,g,l){!1===c.allowLocalImages?(e=f.filter(v(a),x),f.each(e,q.remove),b.call(d,{response:0<e.length?z(a):h.response(),bundle:h.bundle()})):0===e.length?m(a):k()};e.cata(h.response(),k,l,k,l)})}}});l("13t",["13p","117","3s","o"],function(c,d,b,a){var e=function(a){return a.officeStyles().getOr(!0)},f=function(a){return a.htmlStyles().getOr(!1)},g=function(a){return a.isWord().getOr(!1)};return{proxyBin:function(b){return{handle:function(e,f){return b.proxyBin().fold(function(){a.error(e);
return c.pure({response:d.cancel(),bundle:{}})},f)}}},backgroundAssets:function(a){return b.nu(function(b){a.backgroundAssets().fold(function(){b([])},function(a){a.listen(b)})})},merging:function(a){var b=g(a);return b&&e(a)||!b&&f(a)},mergeOffice:e,mergeNormal:f,isWord:g,isInternal:function(a){return a.isInternal().getOr(!1)}}});l("13u","qo 6 7 s 1y l 48 2o 3c".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m,l){var p=l.translations,q=function(b,c,e){e(a.some(d.merge(c,{officeStyles:b,htmlStyles:b})))},
r=function(b,d){var l=f.fromTag("div");e.add(l,c.resolve("styles-dialog-content"));var n=f.fromTag("p"),r=g.fromHtml(p("cement.dialog.paste.instructions"));k.append(n,r);h.append(l,n);var n={text:p("cement.dialog.paste.clean"),tabindex:0,className:c.resolve("clean-styles"),click:function(){x.destroy();q(!1,b,d)}},r={text:p("cement.dialog.paste.merge"),tabindex:1,className:c.resolve("merge-styles"),click:function(){x.destroy();q(!0,b,d)}},x=m(!0);x.setTitle(p("cement.dialog.paste.title"));x.setContent(l);
x.setButtons([n,r]);x.show();x.events.close.bind(function(){d(a.none());x.destroy()})};return{get:function(a,b){var c=l[a?"officeStyles":"htmlStyles"];"clean"===c?q(!1,l,b):"merge"===c?q(!0,l,b):r(l,b)},destroy:b.noop}}});l("11d",["13p","13q","13t","13u","117"],function(c,d,b,a,e){var f=function(f,h){var k=a(f,h);return function(a,f){var g=f.bundle(),h=f.response();return c.sync(function(a){k.get(b.isWord(g),function(b){b=b.fold(function(){return{response:e.cancel(),bundle:f.bundle()}},function(a){return{response:h,
bundle:d.nu({officeStyles:a.officeStyles,htmlStyles:a.htmlStyles})}});c.call(a,b)})})}};return{fixed:function(a,b){return function(e,f){return c.pure({response:f.response(),bundle:d.nu({officeStyles:a,htmlStyles:b})})}},fromConfig:f,fromConfigIfExternal:function(a,e){return function(k,m){return b.isInternal(m.bundle())?c.pure({response:m.response(),bundle:d.nu({officeStyles:!0,htmlStyles:!0})}):f(a,e)(k,m)}}}});l("169",["c","7","l","q"],function(c,d,b,a){var e=function(a){for(var c=[];null!==a.nextNode();)c.push(b.fromDom(a.currentNode));
return c},f=function(a){try{return e(a)}catch(b){return[]}};c=c.detect().browser;var g=c.isIE()||c.isSpartan()?f:e,h=d.constant(d.constant(!0));return{find:function(b,c){var d=c.fold(h,function(a){return function(b){return a(b.nodeValue)}});d.acceptNode=d;d=a.createTreeWalker(b.dom(),NodeFilter.SHOW_COMMENT,d,!1);return g(d)}}});l("15w",["s","169","v","q"],function(c,d,b,a){return{find:function(a){return d.find(a,c.some(function(a){return b.startsWith(a,"[if gte vml 1]")}))}}});l("143","s 1a 1y 2n l 21 4i fl 4e v".split(" "),
function(c,d,b,a,e,f,g,h,k,m){var l=function(a,b){var c=f.value(a),d=e.fromTag("div"),h=c.indexOf("]>");d.dom().innerHTML=c.substr(h+2);return g.descendant(d,function(a){return f.name(a)===b})},p=function(a){return f.isComment(a)?l(a,"v:shape"):c.none()},q=function(a){return k.descendants(a,".rtf-data-image")};return{local:function(a){if("img"===f.name(a)){var e=d.get(a,"src");if(void 0!==e&&null!==e&&m.startsWith(e,"file://"))return a=h.shallow(a),e=e.split(/[\/\\]/),d.set(a,"data-image-id",e[e.length-
1]),d.remove(a,"src"),d.set(a,"data-image-type","local"),b.add(a,"rtf-data-image"),c.some(a)}return c.none()},vshape:function(c){return p(c).map(function(c){var f=d.get(c,"o:spid"),f=void 0===f?d.get(c,"id"):f,g=e.fromTag("img");b.add(g,"rtf-data-image");d.set(g,"data-image-id",f.substr(7));d.set(g,"data-image-type","code");a.setAll(g,{width:a.get(c,"width"),height:a.get(c,"height")});return g})},find:q,exists:function(a){return 0<q(a).length},scour:p}});l("155","15w b 143 s k 2u 1a 48 4e o".split(" "),
function(c,d,b,a,e,f,g,h,k,m){var l=f.immutable("img","vshape"),p=function(b,c){var e=g.get(b,"v:shapes"),f=a.from(d.find(c,function(a){return g.get(a,"id")===e}));f.isNone()&&m.log("WARNING: unable to find data for image",b.dom());return f.map(function(a){var c=g.clone(b);c._rawElement=b.dom();var d=g.clone(a);d._rawElement=a.dom();return l(c,d)})};return{extract:function(a){var f=h.fromHtml(a);a=d.bind(f,function(a){return k.descendants(a,"img")});var f=d.bind(f,c.find),g=e.cat(d.map(f,b.scour));
a=d.map(a,function(a){return p(a,g)});return e.cat(a)}}});l("15x","a b 7 s 1a 1y".split(" "),function(c,d,b,a,e,f){var g=function(a,b){var d=b.style;e.has(a,"width")&&e.has(a,"height")&&c.isString(d)&&(d=d.match(/rotation:([^;]*)/),null===d||"90"!==d[1]&&"-90"!==d[1]||e.setAll(a,{width:e.get(a,"height"),height:e.get(a,"width")}))},h=function(a,b,c){return c.img()[a]===b},k=function(c,f,g){var k=e.get(f,g),k=b.curry(h,g,k);c=d.find(c,k);return a.from(c).map(function(a){e.remove(f,g);return a})};return{rotateImage:g,
insertRtfCorrelation:function(a,b,c){d.each(b,function(b){k(a,b,c).each(function(a){a=a.vshape();var c=a["o:spid"],c=void 0===c?a.id:c;g(b,a);f.add(b,"rtf-data-image");e.set(b,"data-image-id",c.substr(7));e.set(b,"data-image-type","code")})})}}});l("156","15x b 7 nc 2q 4e 2a 84".split(" "),function(c,d,b,a,e,f,g,h){var k=b.noop,m=function(b){b=g.children(b);d.each(b,function(b){a.getOption(b).each(function(a){"StartFragment"!==a&&"EndFragment"!==a||e.remove(b)})})};return{process:function(a,b,d,e,
g){var l=f.descendants(b,"img");m(b);c.insertRtfCorrelation(d,l,e);(g.mergeInline()?h.inlineStyles:k)(a,b)}}});l("157","7 14b 2n 3u l 2o 2q 3t".split(" "),function(c,d,b,a,e,f,g,h){return function(k){return{play:function(m,l,p){var q=e.fromTag("div"),r=e.fromTag("iframe");b.setAll(q,{display:"none"});var s=a.bind(r,"load",function(){s.unbind();d.write(r,m);var a=r.dom().contentWindow.document;if(void 0===a)throw"sandbox iframe load event did not fire correctly";var b=e.fromDom(a),a=a.body;if(void 0===
a)throw"sandbox iframe does not have a body";a=e.fromDom(a);b=l(b,a);g.remove(q);h(c.curry(p,b),0)});f.append(q,r);f.append(k,q)}}}});l("13v","13p 13q 155 156 117 7 157 l 48 2f q".split(" "),function(c,d,b,a,e,f,g,h,k,m,l){var p=function(a){var b=1;return a.replace(/(<img[^>]*)src=".*?"/g,function(a,c,d){return c+'data-textbox-image="'+b++ +'"'})},q=function(b,c){var d=g(h.fromDom(l.body));return function(e,g){d.play(e,function(d,e){a.process(d,e,b,"data-textbox-image",{mergeInline:f.constant(c)});
return m.get(e)},g)}},r=function(a,f,g){return c.sync(function(h){var m=b.extract(a);q(m,f)(g,function(a){a=k.fromHtml(a);c.call(h,{response:e.paste(a,[],[]),bundle:d.nu({})})})})},s=function(a){var b=a.indexOf("</html>");return-1<b?a.substr(0,b+7):a};return{handle:function(a,b,f){a=s(a.data());var g=p(a);return f.cleanDocument(g,b).fold(function(){return c.pure({response:e.error("errors.paste.word.notready"),bundle:{}})},function(a){return void 0===a||null===a||0===a.length?c.pure({response:e.paste([],
[],[]),bundle:d.nu({})}):r(g,b,a)})}}});l("13w",["13p","13q","13s","b","gv"],function(c,d,b,a,e){return{handle:function(f){f=a.filter(f,function(a){return"file"===a.kind&&/image/.test(a.type)});var g=a.map(f,function(a){return a.getAsFile()});return c.sync(function(a){e.multiple(g).get(function(e){e=b.createImages(e);c.call(a,{response:e,bundle:d.nu({})})})})}}});l("16a",[],function(){return{validStyles:function(){return/^(mso-.*|tab-stops|tab-interval|language|text-underline|text-effect|text-line-through|font-color|horiz-align|list-image-[0-9]+|separator-image|table-border-color-(dark|light)|vert-align|vnd\..*)$/},
specialInline:function(){return/^(font|em|strong|samp|acronym|cite|code|dfn|kbd|tt|b|i|u|s|sub|sup|ins|del|var|span)$/}}});l("16h",[],function(){var c=function(c){return{fold:c,matches:function(b){return c(function(a){return 0===b.toLowerCase().indexOf(a.toLowerCase())},function(a){return a.test(b.toLowerCase())},function(a){return 0<=b.toLowerCase().indexOf(a.toLowerCase())},function(a){return b.toLowerCase()===a.toLowerCase()},function(){return!0},function(a){return!a.matches(b)})}}};return{starts:function(d){return c(function(b,
a,c,f,g,h){return b(d)})},pattern:function(d){return c(function(b,a,c,f,g,h){return a(d)})},contains:function(d){return c(function(b,a,c,f,g,h){return c(d)})},exact:function(d){return c(function(b,a,c,f,g,h){return f(d)})},all:function(){return c(function(c,b,a,e,f,g){return f()})},not:function(d){return c(function(b,a,c,f,g,h){return h(d)})},cata:function(c,b,a,e,f,g,h){return c.fold(b,a,e,f,g,h)}}});l("16b",["7","21","16h"],function(c,d,b){return{keyval:function(a,d,f,g){var h=g.name,k=void 0!==
g.condition?g.condition:c.constant(!0);g=void 0!==g.value?g.value:b.all();return h.matches(f)&&g.matches(d)&&k(a)},name:function(a,b){var f=d.name(a),g=b.name,h=void 0!==b.condition?b.condition:c.constant(!0);return g.matches(f)&&h(a)}}});l("16o",["b","1o","7","1a"],function(c,d,b,a){var e=function(b,e,h){c.each(e,function(c){a.remove(b,c)});d.each(h,function(c,d){a.set(b,d,c)})};return{filter:function(a,b){var d={};c.each(a.dom().attributes,function(a){b(a.value,a.name)||(d[a.name]=a.value)});return d},
clobber:function(a,b,h){h=c.map(a.dom().attributes,function(a){return a.name});d.size(b)!==h.length&&e(a,h,b)},scan:b.constant({})}});l("16p",["b","1o","1a","2n","v"],function(c,d,b,a,e){var f=function(a){var b={};a=void 0!==a&&null!==a?a.split(";"):[];c.each(a,function(a){a=a.split(":");2===a.length&&(b[e.trim(a[0])]=e.trim(a[1]))});return b},g=function(a){var b=d.keys(a);return c.map(b,function(b){return b+": "+a[b]}).join("; ")};return{filter:function(a,b){var d=a.dom().style,e={};c.each(void 0===
d?[]:d,function(c){var d;d=a.dom().style.getPropertyValue(c);b(d,c)||(e[c]=d)});return e},clobber:function(c,e,f){b.set(c,"style","");var l=d.size(e),p=d.size(f);0===l&&0===p?b.remove(c,"style"):0===l?b.set(c,"style",g(f)):(d.each(e,function(b,d){a.set(c,d,b)}),e=b.get(c,"style"),f=0<p?g(f)+"; ":"",b.set(c,"style",f+e))},scan:function(a,b,d){a=a.dom().getAttribute("style");var e=f(a),g={};c.each(b,function(a){var b=e[a];void 0===b||d(b,a)||(g[a]=b)});return g}}});l("16c",["16o","16p","7","l"],function(c,
d,b,a){var e=["mso-list"],f=function(a,b){var c=d.scan(a,e,b),f=d.filter(a,b);d.clobber(a,f,c)},g=function(a,b){var d=c.filter(a,b);c.clobber(a,d,{})};return{style:f,attribute:g,styleDom:function(b,c){f(a.fromDom(b),c)},attributeDom:function(b,c){g(a.fromDom(b),c)},validateStyles:function(a){var c=d.filter(a,b.constant(!1));d.clobber(a,c,{})}}});l("15z","b 6 16b 16c 7 1a 1y 4b 2q 4e".split(" "),function(c,d,b,a,e,f,g,h,k,m){var l=function(a,d,e){a(e,function(a,f){return c.exists(d,function(c){return b.keyval(e,
a,f,c)})})};return{remover:function(p,q){var r=d.merge({styles:[],attributes:[],classes:[],tags:[]},q),s=m.descendants(p,"*");c.each(s,function(b){l(a.style,r.styles,b);l(a.attribute,r.attributes,b);c.each(r.classes,function(a){var d=f.has(b,"class")?h.get(b):[];c.each(d,function(c){a.name.matches(c)&&g.remove(b,c)})})});s=m.descendants(p,"*");c.each(s,function(a){c.exists(r.tags,e.curry(b.name,a))&&k.remove(a)})},unwrapper:function(a,f){var g=d.merge({tags:[]},f),h=m.descendants(a,"*");c.each(h,
function(a){c.exists(g.tags,e.curry(b.name,a))&&k.unwrap(a)})},transformer:function(a,f){var g=d.merge({tags:[]},f),h=m.descendants(a,"*");c.each(h,function(a){var d=c.find(g.tags,e.curry(b.name,a));void 0!==d&&null!==d&&d.mutate(a)})},validator:function(b){b=m.descendants(b,"*");c.each(b,function(b){a.validateStyles(b)})}}});l("16k",["1o","2n","l"],function(c,d,b){var a=function(a,c,e){var k,m,l,p=b.fromDom(a);switch(a.nodeType){case 1:c?k="endElement":(k="startElement",d.setAll(p,e||{}));m="HTML"!==
a.scopeName&&a.scopeName&&a.tagName&&0>=a.tagName.indexOf(":")?(a.scopeName+":"+a.tagName).toUpperCase():a.tagName;break;case 3:k="text";l=a.nodeValue;break;case 8:k="comment";l=a.nodeValue;break;default:console.log("WARNING: Unsupported node type encountered: "+a.nodeType)}return{getNode:function(){return a},tag:function(){return m},type:function(){return k},text:function(){return l}}},e=function(b,c){return a(c.createElement(b),!0)};return{START_ELEMENT_TYPE:"startElement",END_ELEMENT_TYPE:"endElement",
TEXT_TYPE:"text",COMMENT_TYPE:"comment",FINISHED:e("HTML",window.document),token:a,createStartElement:function(b,d,e,k){var m=k.createElement(b);c.each(d,function(a,b){m.setAttribute(b,a)});return a(m,!1,e)},createEndElement:e,createComment:function(b,c){return a(c.createComment(b),!1)},createText:function(b,c){return a(c.createTextNode(b))}}});l("16d",["16k"],function(c){return{create:function(d){var b=d.createDocumentFragment(),a=b;return{dom:a,receive:function(e){var f=function(a){a=a.getNode().cloneNode(!1);
b.appendChild(a);b=a},g=function(a,c){var e=d.createTextNode(a.text());b.appendChild(e)};switch(e.type()){case c.START_ELEMENT_TYPE:f(e);break;case c.TEXT_TYPE:g(e);break;case c.END_ELEMENT_TYPE:b=b.parentNode;null===b&&(b=a);break;case c.COMMENT_TYPE:break;default:throw{message:"Unsupported token type: "+e.type()};}},label:"SERIALISER"}}}});l("16e",["16k"],function(c){return{tokenise:function(d,b){var a;b=b||window.document;a=b.createElement("div");b.body.appendChild(a);a.style.position="absolute";
a.style.left="-10000px";a.innerHTML=d;nextNode=a.firstChild||c.FINISHED;var e=[];endNode=!1;return{hasNext:function(){return void 0!==nextNode},next:function(){var d=nextNode,g=endNode;!endNode&&nextNode.firstChild?(e.push(nextNode),nextNode=nextNode.firstChild):endNode||1!==nextNode.nodeType?nextNode.nextSibling?(nextNode=nextNode.nextSibling,endNode=!1):(nextNode=e.pop(),endNode=!0):endNode=!0;d===c.FINISHED||nextNode||(b.body.removeChild(a),nextNode=c.FINISHED);d=d===c.FINISHED?d:d?c.token(d,g):
void 0;return d}}}}});l("160",["16d","16e"],function(c,d){var b=function(a,b,c){var d=c;for(c=b.length-1;0<=c;c--)d=b[c](d,{},a);return d};return{build:b,run:function(a,e,f){var g=c.create(a);e=d.tokenise(e,a);for(a=b(a,f,g);e.hasNext();)f=e.next(),a.receive(f);return g.dom}}});l("15c","b 15z 160 l 2f 2q 2a".split(" "),function(c,d,b,a,e,f,g){return{removal:function(a){return function(b){d.remover(b,a)}},unwrapper:function(a){return function(b){d.unwrapper(b,a)}},transformer:function(a){return function(b){d.transformer(b,
a)}},validate:function(){return function(a){d.validator(a)}},pipeline:function(a){return function(c){var d=e.get(c),l=g.owner(c),d=b.run(l.dom(),d,a);f.empty(c);c.dom().appendChild(d)}},isWordContent:function(a,b){return 0<=a.indexOf("<o:p>")||b.browser.isSpartan()&&0<=a.indexOf('v:shapes="')||b.browser.isSpartan()&&0<=a.indexOf("mso-")||0<=a.indexOf("mso-list")||0<=a.indexOf("p.MsoNormal, li.MsoNormal, div.MsoNormal")||0<=a.indexOf("MsoListParagraphCxSpFirst")||0<=a.indexOf("<w:WordDocument>")},
go:function(b,d,f){var g=a.fromTag("div",b.dom());g.dom().innerHTML=d;c.each(f,function(a){a(g)});return e.get(g)}}});l("162",["b","16k"],function(c,d){return function(b,a,e){return function(e,g,h){var k=function(a){e.receive(a)},m=function(a,b){return d.token(b,a.type()===d.END_ELEMENT_TYPE,{})},l={emit:k,emitTokens:function(a){c.each(a,k)},receive:function(a){b(l,a,m)},document:window.document};a(l);return l}}});l("16y","16p 16k 7 1a 2n l".split(" "),function(c,d,b,a,e,f){return{getAttribute:function(b,
c){var d=f.fromDom(b.getNode());return a.get(d,c)},getStyle:function(a,b){var c=f.fromDom(a.getNode());return e.get(c,b)},isWhitespace:function(a){return a.type()===d.TEXT_TYPE&&/^[\s\u00A0]*$/.test(a.text())},getMsoList:function(a){a=f.fromDom(a.getNode());return c.scan(a,["mso-list"],b.constant(!1))["mso-list"]}}});l("173",["b","s"],function(c,d){var b=function(a,b,c){return a===b||a&&b&&a.tag===b.tag&&a.type===b.type&&(c||a.variant===b.variant)};return{guessFrom:function(a,e){var f=c.find(a,function(a){return"UL"===
a.tag||e&&b(a,e,!0)});return void 0!==f?d.some(f):0<a.length?d.some(a[0]):d.none()},eqListType:b}});l("16t",[],function(){var c=function(b,a){if(void 0===b||void 0===a)throw console.trace(),"brick";b.nextFilter.set(a)},d=function(b,a,c){a.nextFilter.get()(b,a,c)};return{next:c,go:d,jump:function(b){return function(a,e,f){c(e,b);d(a,e,f)}},isNext:function(b,a){return b.nextFilter.get()===a},setNext:function(b){return function(a,d,f){c(d,b)}}}});l("16x","b 16y 173 16t 7 2u 1a l".split(" "),function(c,
d,b,a,e,f,g,h){var k=f.immutable("level","token","type"),m=function(a,e,f,g){a=f.getCurrentListType();f=f.getCurrentLevel()==g.level()?a:null;return b.guessFrom(g.emblems(),f).filter(function(a){if(a="OL"===a.tag)a=!c.contains(["P"],e.tag())||/^MsoHeading/.test(d.getAttribute(e,"class"));return!a})};return{predicate:function(a,b){return g.has(h.fromDom(b.getNode()),"data-list-level")},action:function(b){return function(c,d,f){c=h.fromDom(f.getNode());var l=parseInt(g.get(c,"data-list-level"),10),
t=g.get(c,"data-list-emblems"),t=JSON.parse(t);g.remove(c,"data-list-level");g.remove(c,"data-list-emblems");c={level:e.constant(l),emblems:e.constant(t)};c.level();d.originalToken.set(f);m(d.listType.get(),f,d.emitter,c).each(d.listType.set);f=k(c.level(),d.originalToken.get(),d.listType.get());d.emitter.openItem(f.level(),f.token(),f.type());a.next(d,b.inside())}}}});l("16z",["7"],function(c){return function(d,b,a){return{pred:d,action:b,label:c.constant(a)}}});l("170",["b","7","s"],function(c,
d,b){var a=function(a,b){return function(a,c,d){return b(a,c,d)}};return function(e,f,g){var h=a(e+" :: FALLBACK --- ",g);g=function(g,m,l){b.from(c.find(f,function(a){return a.pred(m,l)})).fold(d.constant(h),function(b){var c=b.label();return void 0===c?b.action:a(e+" :: "+c,b.action)})(g,m,l)};g.toString=function(){return"Handlers for "+e};return g}});l("16q","16x 16k 16y 16z 170 16t".split(" "),function(c,d,b,a,e,f){return{inside:function(b){return e("Inside.List.Item",[a(function(a,b){return b.type()===
d.END_ELEMENT_TYPE&&a.originalToken.get()&&b.tag()===a.originalToken.get().tag()},function(a,c,d){f.next(c,b.outside())},"Closing open tag")],function(a,b,c){a.emit(c)})},outside:function(g){return e("Outside.List.Item",[a(c.predicate,c.action(g),"Data List ****"),a(function(a,c){return c.type()===d.TEXT_TYPE&&b.isWhitespace(c)},function(a,b,c){a.emit(c)},"Whitespace")],function(a,b,c){b.emitter.closeAllLists();a.emit(c);f.next(b,g.outside())})}}});l("174",["2u"],function(c){var d=c.immutable("state",
"result"),b=c.immutable("state","value");return{state:c.immutable("level","type","types","items"),value:b,result:d}});l("176",["174","s"],function(c,d){return{start:function(b,a){var e=b.items().slice(0),f=void 0!==a&&"P"!==a?d.some(a):d.none();f.fold(function(){e.push("P")},function(a){e.push(a)});var g=c.state(b.level(),b.type(),b.types(),e);return c.value(g,f)},finish:function(b){var a=b.items().slice(0);if(0<a.length&&"P"!==a[a.length-1]){var e=a[a.length-1];a[a.length-1]="P";b=c.state(b.level(),
b.type(),b.types(),a);return c.value(b,d.some(e))}return c.value(b,d.none())}}});l("177",["174"],function(c){var d=function(b,a,d){for(var f=[];a(b);){var g=d(b);b=g.state();f=f.concat(g.result())}return c.result(b,f)};return{moveRight:function(b,a,c){return d(b,function(b){return b.level()<a},c)},moveLeft:function(b,a,c){return d(b,function(b){return b.level()>a},c)},moveUntil:d}});l("179",["16y"],function(c){return{from:function(d){var b={"list-style-type":"none"};d?(d=c.getStyle(d,"margin-left"),
d=void 0!==d&&"0px"!==d?{"margin-left":d}:{}):d=b;return d}}});l("178","16c 16k 173 174 176 179 7".split(" "),function(c,d,b,a,e,f,g){var h=function(b,c,e){var f=c.start&&1<c.start?{start:c.start}:{},h=b.level()+1,k=b.types().concat([c]);e=[g.curry(d.createStartElement,c.tag,f,e)];b=a.state(h,c,k,b.items());return a.result(b,e)},k=function(b){var c=b.types().slice(0),e=[g.curry(d.createEndElement,c.pop().tag)],f=b.level()-1;b=a.state(f,c[c.length-1],c,b.items());return a.result(b,e)},m=function(b,
c){var d=k(b),e=h(d.state(),c,c.type?{"list-style-type":c.type}:{});return a.result(e.state(),d.result().concat(e.result()))};return{open:h,openItem:function(h,k,l){var r=f.from(k);h=h.type()&&!b.eqListType(h.type(),l)?m(h,l):a.result(h,[]);r=[g.curry(d.createStartElement,"LI",{},r)];l=e.start(h.state(),k&&k.tag());var s=l.value().map(function(a){c.styleDom(k.getNode(),g.constant(!0));return[g.constant(k)]}).getOr([]);return a.result(l.state(),h.result().concat(r).concat(s))},close:k,closeItem:function(b){var c=
g.curry(d.createEndElement,"LI");b=e.finish(b);var f=b.value().fold(function(){return[c]},function(a){return[g.curry(d.createEndElement,a),c]});return a.result(b.state(),f)}}});l("175","b 16k 174 176 177 178 7 s".split(" "),function(c,d,b,a,e,f,g,h){var k=function(a){if(0===a.length)throw"Compose must have at least one element in the list";var d=a[a.length-1];a=c.bind(a,function(a){return a.result()});return b.result(d.state(),a)},m=function(a){a=f.closeItem(a);var b=f.close(a.state());return k([a,
b])},l=function(a,b,c,d){return e.moveRight(a,c,function(a){var e=a.level()===c-1&&b.type?{"list-style-type":b.type}:{};a=f.open(a,b,e);e=f.openItem(a.state(),a.state().level()==c?d:void 0,b);return k([a,e])})},p=function(a,b){return e.moveLeft(a,b,m)},q=function(c,e,f,k){var m=1<f?a.finish(c):b.value(c,h.none());c=m.value().map(function(a){return[g.curry(d.createEndElement,a)]}).getOr([]);m.state().level();e=l(m.state(),e,f,k);return b.result(e.state(),c.concat(e.result()))};return{openItem:function(a,
c,d,e){a=a.level()>c?p(a,c):b.result(a,[]);a.state().level()===c?(c=a.state(),c=0<c.level()?f.closeItem(c):b.result(c,[]),d=f.openItem(c.state(),d,e),d=k([c,d])):d=q(a.state(),e,c,d);return k([a,d])},closeAllLists:p}});l("171",["b","174","175"],function(c,d,b){var a=["disc","circle","square"];return function(e,f){var g=d.state(0,void 0,[],[]),h=function(a){c.each(a.result(),function(a){a=a(f);e.emit(a)})};return{closeAllLists:function(){var a=b.closeAllLists(g,0);g=a.state();h(a)},openItem:function(c,
d,e){e&&("UL"===e.tag&&a[c-1]===e.type&&(e={tag:"UL"}),c=b.openItem(g,c,d,e),g=c.state(),h(c))},getCurrentListType:function(){return g.type()},getCurrentLevel:function(){return g.level()}}}});l("16r",["171","7","4m"],function(c,d,b){var a={getCurrentListType:function(){return e().getCurrentListType()},getCurrentLevel:function(){return e().getCurrentLevel()},closeAllLists:function(){return e().closeAllLists.apply(void 0,arguments)},openItem:function(){return e().openItem.apply(void 0,arguments)}},
e=function(){return{getCurrentListType:d.constant({}),getCurrentLevel:d.constant(1),closeAllLists:d.identity,openItem:d.identity}};return function(f){var g=b(f),h=b(null),k=b(null);return{reset:function(a){g.set(f);h.set(null);k.set(null);_emitter=c(a,a.document);e=d.constant(_emitter)},nextFilter:g,originalToken:h,listType:k,emitter:a}}});l("16s",["16k"],function(c){return function(){var d=!1,b="";return{check:function(a){return d&&a.type()===c.TEXT_TYPE?(b+=a.text(),!0):a.type()===c.START_ELEMENT_TYPE&&
"STYLE"===a.tag()?d=!0:a.type()===c.END_ELEMENT_TYPE&&"STYLE"===a.tag()?(d=!1,!0):!1}}}});l("16f","162 16q 16r 16s 16t q".split(" "),function(c,d,b,a,e,f){f={inside:function(){return h},outside:function(){return k}};var g=a(),h=d.inside(f),k=d.outside(f),m=b(k);return c(function(a,b,c){g.check(b)||e.go(a,m,b)},m.reset,"list.filters")});l("172",["b","6","1u","dp"],function(c,d,b,a){var e=[{regex:/^\(?[dc][\.\)]$/,type:{tag:"OL",type:"lower-alpha"}},{regex:/^\(?[DC][\.\)]$/,type:{tag:"OL",type:"upper-alpha"}},
{regex:/^\(?M*(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})[\.\)]$/,type:{tag:"OL",type:"upper-roman"}},{regex:/^\(?m*(cm|cd|d?c{0,3})(xc|xl|l?x{0,3})(ix|iv|v?i{0,3})[\.\)]$/,type:{tag:"OL",type:"lower-roman"}},{regex:/^\(?[0-9]+[\.\)]$/,type:{tag:"OL"}},{regex:/^([0-9]+\.)*[0-9]+\.?$/,type:{tag:"OL",variant:"outline"}},{regex:/^\(?[a-z]+[\.\)]$/,type:{tag:"OL",type:"lower-alpha"}},{regex:/^\(?[A-Z]+[\.\)]$/,type:{tag:"OL",type:"upper-alpha"}}],f={"\u2022":{tag:"UL",type:"disc"},"\u00b7":{tag:"UL",
type:"disc"},"\u00a7":{tag:"UL",type:"square"}},g={o:{tag:"UL",type:"circle"},"-":{tag:"UL",type:"disc"},"\u25cf":{tag:"UL",type:"disc"},"\ufffd":{tag:"UL",type:"circle"}},h=function(a,b){return void 0!==a.variant?a.variant:"("===b.charAt(0)?"()":")"===b.charAt(b.length-1)?")":"."},k=function(c){var d=c.split(".");0===d.length?d=c:(c=d[d.length-1],d=0===c.length&&1<d.length?d[d.length-2]:c);d=a(d,10);return b(d)?{}:{start:d}};return{extract:function(a,b){var l=g[a]?[g[a]]:[],q=b&&f[a]?[f[a]]:b?[{tag:"UL",
variant:a}]:[],r=c.bind(e,function(b){return b.regex.test(a)?[d.merge(b.type,k(a),{variant:h(b.type,a)})]:[]}),l=l.concat(q).concat(r);return c.map(l,function(b){return void 0!==b.variant?b:d.merge(b,{variant:a})})}}});l("16u","b 172 16p 7 s 2n 2f 21 4i 83 2a 1s 1u dp".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q,r){var s=function(c){return b.scan(c,["mso-list"],a.constant(!1))["mso-list"]},t=function(a){return h.isElement(a)&&f.getRaw(a,"font-family").exists(function(a){return c.contains(["wingdings",
"symbol"],a.toLowerCase())})};return{getMsoList:s,extractLevel:function(a){a=s(a);return(a=/ level([0-9]+)/.exec(a))&&a[1]?e.some(r(a[1],10)):e.none()},extractEmblem:function(a,b){var c=m.get(a).trim(),c=d.extract(c,b);return 0<c.length?e.some(c):e.none()},extractSymSpan:function(a){return k.child(a,t)},extractMsoIgnore:function(c){return k.descendant(c,function(c){return!!(h.isElement(c)?b.scan(c,["mso-list"],a.constant(!1)):[])["mso-list"]})},extractCommentSpan:function(a){return k.child(a,h.isComment).bind(l.nextSibling).filter(function(a){return"span"===
h.name(a)})},isSymbol:t,deduceLevel:function(a){return f.getRaw(a,"margin-left").bind(function(a){a=r(a,10);return q(a)?e.none():e.some(p.max(1,p.ceil(a/18)))})}}});ca("16v",JSON);l("16g","b 16u s 1a 169 21 2q 2a 16v dp".split(" "),function(c,d,b,a,e,f,g,h,k,m){var l=function(d,f,h,m){a.set(d,"data-list-level",f);f=k.stringify(h);a.set(d,"data-list-emblems",f);f=e.find(d,b.none());c.each(f,g.remove);c.each(m,g.remove);a.remove(d,"style");a.remove(d,"class")},p=function(a){return d.extractLevel(a).bind(function(b){return d.extractSymSpan(a).bind(function(c){return d.extractEmblem(c,
!0).map(function(d){return{mutate:function(){l(a,b,d,[c])}}})})})},q=function(a){return d.extractLevel(a).bind(function(b){return d.extractCommentSpan(a).bind(function(c){return d.extractEmblem(c,d.isSymbol(c)).map(function(d){return{mutate:function(){l(a,b,d,[c])}}})})})},r=function(a){return d.extractLevel(a).bind(function(b){return d.extractCommentSpan(a).bind(function(c){return d.extractEmblem(c,d.isSymbol(c)).map(function(d){return{mutate:function(){l(a,b,d,[c])}}})})})},s=function(a){return"p"!==
f.name(a)?b.none():d.extractLevel(a).bind(function(b){return d.extractMsoIgnore(a).bind(function(c){return d.extractEmblem(c,!1).map(function(d){return{mutate:function(){l(a,b,d,[h.parent(c).getOr(c)])}}})})})},t=function(a){return"p"!==f.name(a)?b.none():d.extractMsoIgnore(a).bind(function(b){var c=h.parent(b).getOr(b),e=d.isSymbol(c);return d.extractEmblem(b,e).bind(function(b){return d.deduceLevel(a).map(function(d){return{mutate:function(){l(a,d,b,[c])}}})})})};return{find:function(a){return p(a).orThunk(function(){return q(a)}).orThunk(function(){return r(a)}).orThunk(function(){return s(a)}).orThunk(function(){return t(a)})}}});
l("161",["15c","16f","16g","16h"],function(c,d,b,a){c=c.transformer({tags:[{name:a.pattern(/^(p|h\d+)$/),mutate:function(a){b.find(a).each(function(a){a.mutate()})}}]});return{filter:d,preprocess:c}});l("16i",["b","1a","2f","21","37"],function(c,d,b,a,e){var f=function(b){var c=b.dom().attributes,c=void 0!==c&&null!==c&&0<c.length;return"span"===a.name(b)?c:!0},g=function(a){return void 0===a.dom().attributes||null===a.dom().attributes?!0:0===a.dom().attributes.length||1===a.dom().attributes.length&&
"style"===a.dom().attributes[0].name};return{isNotImage:function(b){return"img"!==a.name(b)},hasContent:function(b){return g(b)?f(b)&&e.descendant(b,function(b){var d=!g(b),e=!c.contains("font em strong samp acronym cite code dfn kbd tt b i u s sub sup ins del var span".split(" "),a.name(b));return a.isText(b)||d||e}):!0},isList:function(b){return"ol"===a.name(b)||"ul"===a.name(b)},isLocal:function(a){a=d.get(a,"src");return/^file:/.test(a)},hasNoAttributes:g,isEmpty:function(a){return 0===b.get(a).length}}});
l("16j","b 1o s 1a 2n l 2f 2o 3c 21 2q at 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q){var r=function(a,b){var d=f.fromTag(a);h.before(b,d);var e=b.dom().attributes;c.each(e,function(a){d.dom().setAttribute(a.name,a.value)});e=q.children(b);k.append(d,e);l.remove(b);return d},s=function(a){return q.prevSibling(a).bind(function(a){return m.isText(a)&&0===p.get(a).trim().length?s(a):"li"===m.name(a)?b.some(a):b.none()})};return{changeTag:r,addBrTag:function(a){0===g.get(a).length&&h.append(a,
f.fromTag("br"))},properlyNest:function(a){q.parent(a).each(function(b){b=m.name(b);c.contains(["ol","ul"],b)&&s(a).fold(function(){var b=f.fromTag("li");e.set(b,"list-style-type","none");h.wrap(a,b)},function(b){h.append(b,a)})})},fontToSpan:function(b){var c=r("span",b),f={"font-size":{1:"8pt",2:"10pt",3:"12pt",4:"14pt",5:"18pt",6:"24pt",7:"36pt"}};d.each({face:"font-family",size:"font-size",color:"color"},function(b,d){if(a.has(c,d)){var g=a.get(c,d);e.set(c,b,void 0!==f[b]&&void 0!==f[b][g]?f[b][g]:
g);a.remove(c,d)}})}}});l("15y","16a 15c 161 16i 16j 7 1y 2n 2a 21 16h".split(" "),function(c,d,b,a,e,f,g,h,k,m,l){var p=d.unwrapper({tags:[{name:l.pattern(/^([OVWXP]|U[0-9]+|ST[0-9]+):/i)}]});b=[d.pipeline([b.filter])];var q=d.removal({attributes:[{name:l.pattern(/^v:/)},{name:l.exact("href"),value:l.contains("#_toc")},{name:l.exact("href"),value:l.contains("#_mso")},{name:l.pattern(/^xmlns(:|$)/)},{name:l.exact("type"),condition:a.isList}]}),r=d.removal({attributes:[{name:l.exact("id")},{name:l.exact("name")}]}),
s=d.removal({tags:[{name:l.exact("script")},{name:l.exact("meta")},{name:l.exact("link")},{name:l.exact("style"),condition:a.isEmpty}],attributes:[{name:l.starts("on")},{name:l.exact('"')},{name:l.exact("lang")},{name:l.exact("language")}],styles:[{name:l.all(),value:l.pattern(/OLE_LINK/i)}]}),t=d.removal({styles:[{name:l.not(l.pattern(/width|height|list-style-type/)),condition:function(a){return!g.has(a,"ephox-limbo-transform")}},{name:l.pattern(/width|height/),condition:a.isNotImage}]}),u=d.removal({classes:[{name:l.not(l.exact("rtf-data-image"))}]}),
v=d.removal({styles:[{name:l.pattern(c.validStyles())}]}),w=d.removal({classes:[{name:l.pattern(/mso/i)}]}),x=d.unwrapper({tags:[{name:l.exact("img"),condition:a.isLocal},{name:l.exact("a"),condition:a.hasNoAttributes}]}),y=d.unwrapper({tags:[{name:l.exact("a"),condition:a.hasNoAttributes}]}),z=d.removal({attributes:[{name:l.exact("style"),value:l.exact(""),debug:!0}]}),A=d.removal({attributes:[{name:l.exact("class"),value:l.exact(""),debug:!0}]});c=d.unwrapper({tags:[{name:l.pattern(c.specialInline()),
condition:f.not(a.hasContent)}]});a=d.unwrapper({tags:[{name:l.exact("p"),condition:function(a){return function(b){return k.parent(b).exists(function(b){return m.name(b)===a&&1===k.children(b).length})}}("li")}]});var D=d.transformer({tags:[{name:l.exact("p"),mutate:e.addBrTag}]}),B=d.transformer({tags:[{name:l.pattern(/ol|ul/),mutate:e.properlyNest}]}),C=d.transformer({tags:[{name:l.exact("b"),mutate:f.curry(e.changeTag,"strong")},{name:l.exact("i"),mutate:f.curry(e.changeTag,"em")},{name:l.exact("u"),
mutate:function(a){a=e.changeTag("span",a);g.add(a,"ephox-limbo-transform");h.set(a,"text-decoration","underline")}},{name:l.exact("s"),mutate:f.curry(e.changeTag,"strike")},{name:l.exact("font"),mutate:e.fontToSpan,debug:!0}]}),F=d.removal({classes:[{name:l.exact("ephox-limbo-transform")}]});d=d.removal({attributes:[{name:l.exact("href"),value:l.starts("file:///"),debug:!0}]});return{unwrapWordTags:p,removeWordAttributes:q,parseLists:b,removeExcess:s,cleanStyles:t,cleanClasses:u,mergeStyles:v,mergeClasses:w,
removeLocalImages:x,removeVacantLinks:y,removeEmptyStyle:z,removeEmptyClass:A,pruneInlineTags:c,unwrapSingleParagraphsInlists:a,addPlaceholders:D,nestedListFixes:B,inlineTagFixes:C,cleanupFlags:F,removeLocalLinks:d,removeAnchors:r,none:f.noop}});l("15a","b 143 15y 15c 161 162 7 l".split(" "),function(c,d,b,a,e,f,g,h){var k=function(a){return a.browser.isIE()&&11<=a.browser.version.major},m=function(a){return f(function(b,c,d){var e=a(h.fromDom(c.getNode())).fold(function(){return c},function(a){return d(c,
a.dom())});b.emit(e)},g.noop,"image filters")},l=function(a,c){return k(c)&&a?[b.unwrapSingleParagraphsInlists]:[]},p=function(a,c,d){a=[b.mergeStyles,b.mergeClasses];d=[b.cleanStyles,b.cleanClasses];return c?a:d},q=function(a,b,c){return k(c)||!a?[]:[e.preprocess]},r=function(a,c,d){if(!a)return[b.none];a=[b.unwrapWordTags];d=k(d)?[]:b.parseLists;return a.concat(d).concat([b.removeWordAttributes])};return{derive:function(e,f,g){var h,w;w=g.browser.isFirefox()||g.browser.isSpartan()?d.local:d.vshape;
h=k(g)?b.none:a.pipeline([m(w)]);h=[e?h:b.none];w=[w===d.local?b.none:b.removeLocalImages];return c.flatten([q(e,f,g),h,[b.inlineTagFixes],r(e,f,g),[b.nestedListFixes],[b.removeExcess],e?[b.removeAnchors]:[b.none],w,p(e,f,g),[b.removeLocalLinks,b.removeVacantLinks],[b.removeEmptyStyle],[b.removeEmptyClass],[b.pruneInlineTags],[b.addPlaceholders],l(e,g),[b.cleanupFlags]])}}});l("15b","b s 10s 6l c4 2u 1a 2n l 2o 3c 21 6o 83 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q,r,s){var t=e.link().source,
u=function(c){var d=f.immutable("word","pattern"),e=a.unsafetoken(t),d=d("__INTERNAL__",e);return b.run(c,[d])},v=function(a){return!q.closest(a,"a")},w=function(a){return d.from(a[0]).filter(v).map(function(b){var c=k.fromTag("a");m.before(b,c);l.append(c,a);g.set(c,"href",r.get(c));return c})};return{links:function(a){a=u(a);c.each(a,function(a){var b=a.exact(),c;(c=0>b.indexOf("@"))||(b=b.indexOf("://"),c=3<=b&&9>=b);c&&w(a.elements())})},position:function(a){c.each(a,function(a){p.isElement(a)&&
h.getRaw(a,"position").isSome()&&h.remove(a,"position")})},list:function(a){var b=c.filter(a,function(a){return"li"===p.name(a)});if(0<b.length){var d=s.prevSiblings(b[0]),e=k.fromTag("ul");m.before(a[0],e);0<d.length&&(a=k.fromTag("li"),m.append(e,a),l.append(a,d));l.append(e,b)}}}});l("13z","b 15a 15b 15c 2f 2a".split(" "),function(c,d,b,a,e,f){var g=function(a){var d=f.children(a);c.each([b.links,b.position,b.list],function(a){a(d)})};return{go:function(b,c,f,l,p){g(f);f=e.get(f);c=d.derive(p,
l,c);return a.go(b,f,c)},preprocess:g}});l("158","13p 13q 13s 117 c 13z p 48 o".split(" "),function(c,d,b,a,e,f,g,h,k){var m=e.detect(),l=function(a,b,c,d){try{var e=f.go(a,m,b,c,d),l=void 0!==e&&null!==e&&0<e.length?h.fromHtml(e):[];return g.value(l)}catch(n){return k.error(n),g.error("errors.paste.process.failure")}};return{transfer:function(e,f,g,h,k){return l(e,f,h,g).fold(function(a){return c.error(a)},function(e){return c.sync(function(f){k.get(function(g){var h=b.findImages(e,g);c.call(f,{response:a.paste(e,
g,h),bundle:d.nu({})})})})})}}});l("13x","158 b 3s s 2q 2a".split(" "),function(c,d,b,a,e,f){return{internal:function(g,h,k){h=(void 0!==h?h.findClipboardTags(f.children(k)):a.none()).getOr([]);d.each(h,e.remove);h=b.nu(function(a){a([])});return c.transfer(g,k,!1,!0,h)},external:function(a,b,d,e,f){return c.transfer(a,b,e,d,f)}}});l("159",["b","l","2f","83"],function(c,d,b,a){return{encode:function(c){var f=d.fromTag("div");a.set(f,c);return b.get(f)},convert:function(a){a=a.trim().split(/\n{2,}|(?:\r\n){2,}/);
a=c.map(a,function(a){return a.split(/\n|\r\n/).join("<br />")});return 1===a.length?a[0]:c.map(a,function(a){return"<p>"+a+"</p>"}).join("")}}});l("13y","13p 159 13q 11b 117 s k 48 36".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(a){return 0<a.length},l=function(b){return a.isValidData(b)?g.findMap(b.types,function(a){return"text/plain"===a?f.some(b.getData(a)):f.none()}):f.none()},p=function(){var a=k.clipboardData;return void 0!==a?f.some(a.getData("text")):f.none()},q=function(a){a=d.encode(a);
a=d.convert(a);a=h.fromHtml(a);return e.paste(a,[],[])};return{handle:function(d){return c.sync(function(f){var g=(a.isValidData(d)?l:p)(d).filter(m).fold(e.cancel,q);c.call(f,{response:g,bundle:b.nu({})})})}}});l("11e","13p 13q 13t 13v 13w 13x 13y 117 c 13z 7 l 3c 2a o".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q,r,s){var t=k.detect();return{plain:function(a,b,c){return g.handle(a)},autolink:function(a,b){var d=function(a,d,e){var f=p.fromTag("div");q.append(f,a);m.preprocess(f);a=r.children(f);
return c.pure({response:h.paste(a,d,e),bundle:b.bundle()})},e=l.curry(c.pass,b);return h.cata(b.response(),e,d,e,d)},noImages:function(){return function(a,b){return c.error("errors.local.images.disallowed")}},images:function(){return function(a,b){if(t.browser.isSafari()){var d=t.deviceType.isWebView()?"webview.imagepaste":"safari.imagepaste";return c.error(d)}return e.handle(a)}},internal:function(a,c){return function(d,e){var g=e.bundle();return b.proxyBin(g).handle("There was no proxy bin setup. Ensure you have run proxyStep first.",
function(b){var d=r.owner(a);return f.internal(d,c,b)})}},external:function(a,c){return function(d,e){var g=e.bundle();return b.proxyBin(g).handle("There was no proxy bin setup. Ensure you have run proxyStep first.",function(d){var e=b.merging(g),h=b.isWord(g),k=b.isInternal(g),m=b.backgroundAssets(g),l=r.owner(a);return k?f.internal(l,c,d):f.external(l,d,e,h,m)})}},gwt:function(c){return function(d,e){var f=b.mergeOffice(e.bundle());return a.handle(d,f,c)}},setBundle:function(a){return function(b,
e){var f=d.merge(e.bundle(),d.nu(a));return c.pure({response:e.response(),bundle:f})}},none:function(a,b){return c.cancel()}}});l("140",["15c","1a","2f","37"],function(c,d,b,a){var e=function(b,c){return a.descendant(b,function(a){return d.has(a,"style")?-1<d.get(a,"style").indexOf("mso-"):!1})},f=function(a,d){var e=b.get(a);return c.isWordContent(e,d)};return{isWord:function(a,b){var c=a.browser;return(c.isIE()&&11<=c.version.major?e:f)(b,a)}}});l("11f","13p 13q iu c 140 1y 2a".split(" "),function(c,
d,b,a,e,f,g){var h=a.detect();return function(a,m,l,p,q){return function(r,s){var t=q(),u=s.response();return c.sync(function(q){var s=a(l);s.events.after.bind(function(a){a=a.container();m(a);f.add(a,b.binStyle());var k=e.isWord(h,a),l=g.children(a),l=p.findClipboardTags(l,k).isSome();c.call(q,{response:u,bundle:d.nu({isWord:k,isInternal:l,proxyBin:a,backgroundAssets:t})})});t.convert(r.data());s.run()})}}});l("16l","11v 11w 9 1s w dp".split(" "),function(c,d,b,a,e,f){return{convert:function(e,h){if(0===
e.length)throw"Zero length content passed to Hex conversion";for(var k=new b(e.length/2),m=0;m<e.length;m+=2){var l=e.substr(m,2),p=a.floor(m/2);k[p]=f(l,16)}k=d(k);return c([k],{type:h})}}});l("164",["4n"],function(c){c=c.generate([{unsupported:["id","message"]},{supported:["id","contentType","blob"]}]);return{unsupported:c.unsupported,supported:c.supported,cata:function(c,b,a){return c.fold(b,a)}}});l("16m",["7","s"],function(c,d){var b=function(a,b,e,f,g){return-1===a||-1===b?d.none():d.some({start:c.constant(a),
end:c.constant(b),bower:e,regex:c.constant(f),idRef:c.constant(g)})},a=function(a,b,c){return function(){return a.substring(b,c)}},e=function(a,b){if(-1===b)return b;var c=0,d=a.length,e,f;do if(e=a.indexOf("{",b),f=a.indexOf("}",b),f>e&&-1!==e?(b=e+1,++c):(e>f||0>e)&&-1!==f&&(b=f+1,--c),b>d||-1===f)return-1;while(0<c);return b},f=function(c,d,e,f){c=a(c,e,f);return b(e,f,c,/[^a-fA-F0-9]([a-fA-F0-9]+)\}$/,"i")},g=function(c,d,e,f){c=a(c,e,f);return b(e,f,c,/([a-fA-F0-9]{64,})(?:\}.*)/,"s")};return{identify:function(a,
b){var m=a.indexOf("{\\pict{",b),l=e(a,m),p=a.indexOf("{\\shp{",b),q=e(a,p),r=c.curry(g,a,b,p,q),s=c.curry(f,a,b,m,l);return-1===m&&-1===p?d.none():-1===m?r():-1===p?s():p<m&&q>l?s():m<p&&l>q?r():m<p?s():p<m?r():d.none()},endBracket:e}});l("163",["16l","164","16m","s","p"],function(c,d,b,a,e){var f=function(a,c){return b.identify(a,c)},g=function(a){return 0<=a.indexOf("\\pngblip")?e.value("image/png"):0<=a.indexOf("\\jpegblip")?e.value("image/jpeg"):e.error("errors.imageimport.unsupported")},h=function(a,
b){var c=a.match(b);return c&&c[1]&&0===c[1].length%2?e.value(c[1]):e.error("errors.imageimport.invalid")},k=function(b){b=b.match(/\\shplid(\d+)/);return null!==b?a.some(b[1]):a.none()},m=function(a){var b=a.bower(),e=a.regex();return k(b).map(function(f){var k=a.idRef()+f;return g(b).fold(function(a){return d.unsupported(k,a)},function(a){return h(b,e).fold(function(a){return d.unsupported(k,a)},function(b){return d.supported(k,a,c.convert(b,a))})})})},l=function(a){for(var b=[],c=function(){return a.length},
d=function(a){var c=m(a);b=b.concat(c.toArray());return a.end()},e=0;e<a.length;)e=f(a,e).fold(c,d);return b};return{nextBower:f,extractId:k,extractContentType:g,extractHex:h,images:function(a){a=a.replace(/\r/g,"").replace(/\n/g,"");return l(a)}}});l("15d",["163","164","p"],function(c,d,b){return{images:function(a){return c.images(a)},toId:function(a){return d.cata(a,function(a,b){return a},function(a,b,c){return a})},toBlob:function(a){return d.cata(a,function(a,c){return b.error(c)},function(a,
c,d){return b.value(d)})}}});l("15e","15d 13s b gv s 1a 1y o".split(" "),function(c,d,b,a,e,f,g,h){var k={local:function(a,b,c){return e.from(b[c])},code:function(a,d,f){d=b.find(d,function(b){return c.toId(b)===a});return e.from(d)}},m=function(a){var d=[],e=function(a){return!b.exists(d,function(b){return c.toId(b)===a})};return b.bind(a,function(a){var b=c.toId(a);return e(b)?(d.push(a),[a]):[]})};return{convert:function(l,p,q,r){var s=m(p),t=[],u=!1;l=b.bind(l,function(a,b){var d=f.get(a,"data-image-type"),
m=f.get(a,"data-image-id");g.remove(a,"rtf-data-image");f.remove(a,"data-image-type");f.remove(a,"data-image-id");return(void 0!==k[d]?k[d]:e.none)(m,s,b).fold(function(){h.log("WARNING: unable to find data for image ",a.dom());return[]},function(b){return c.toBlob(b).fold(function(b){u=!0;f.set(a,"alt",r(b));return[]},function(b){t.push(a);return[b]})})});a.multiple(l).get(function(a){var b=d.updateSources(a,t);q(a,b,u)})}}});l("142","15d 15e 143 55 46 2a".split(" "),function(c,d,b,a,e,f){return function(g){var h=
g.translations,k=e.create({insert:a(["elements","assets","correlated"]),incomplete:a(["elements","assets","correlated","message"])});return{events:k.registry,processRtf:function(a,e,g,l,r){l=c.images(l);var s=b.find(a);d.convert(s,l,function(b,c,d){var h=f.children(a);b=b.concat(e);c=c.concat(g);d?k.trigger.incomplete(h,b,c,"errors.imageimport.failed"):k.trigger.insert(h,b,c);r()},h)}}}});l("141","142 b 143 55 46 2q 2a".split(" "),function(c,d,b,a,e,f,g){return function(h,k){var m=e.create({error:a(["message"]),
insert:a(["elements","assets","correlated"]),incomplete:a(["elements","assets","correlated","message"])}),l=c(k);l.events.incomplete.bind(function(a){m.trigger.incomplete(a.elements(),a.assets(),a.correlated(),a.message())});l.events.insert.bind(function(a){m.trigger.insert(a.elements(),a.assets(),a.correlated())});return{events:m.registry,gordon:function(a,c,e){var s=function(b){l.processRtf(a,c,e,b.rtf(),b.hide())},t=function(h){var k=b.find(a);d.each(k,f.remove);m.trigger.incomplete(g.children(a),
c,e,h)},u=function(){var h=b.find(a);d.each(h,f.remove);m.trigger.insert(g.children(a),c,e)},v=function(a){t(a.message())};if(!0===k.allowLocalImages&&!0===k.enableFlashImport){var w=h(k);w.events.response.bind(s);w.events.cancel.bind(u);w.events.failed.bind(v);w.events.error.bind(v);w.open()}else t("errors.local.images.disallowed")}}}});l("11g","13p 13q 141 142 117 b 143 7 s 4m l 3c 2q 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q,r){return function(s,t){var u=b(s,t),v=a(t),w=m(k.none()),x=function(a){w.get().each(function(b){c.call(b,
{response:a,bundle:d.nu({})})})};u.events.insert.bind(function(a){x(e.paste(a.elements(),a.assets(),a.correlated()))});u.events.incomplete.bind(function(a){x(e.incomplete(a.elements(),a.assets(),a.correlated(),a.message()))});u.events.error.bind(function(a){a=a.message();a=e.error(a);x(a)});v.events.insert.bind(function(a){x(e.paste(a.elements(),a.assets(),a.correlated()))});v.events.incomplete.bind(function(a){x(e.incomplete(a.elements(),a.assets(),a.correlated(),a.message()))});return function(a,
b){return c.sync(function(d){var m=function(){c.call(d,{response:b.response(),bundle:b.bundle()})},s=function(b,c,s){w.set(k.some(d));var z=l.fromTag("div");p.append(z,b);a.rtf().fold(function(){g.exists(z)?u.gordon(z,c,s):m()},function(a){if(!0===t.allowLocalImages)v.processRtf(z,c,s,a,h.noop);else{a=g.find(z);var b=r.children(z);0<a.length?(f.each(a,q.remove),x(e.incomplete(b,c,s,"errors.local.images.disallowed"))):x(e.paste(b,c,s))}})};e.cata(b.response(),m,s,m,s)})}}});l("xq","119 11a 11b 11c 11d 11e 11f 11g c 7 s 2u v 36".split(" "),
function(c,d,b,a,e,f,g,h,k,m,l,p,q,r){var s=p.immutable("data","rtf"),t=k.detect(),u=["^image/","file"],v=function(a){var c=a.clipboardData;return b.isValidData(c)?b.getFlavor(c.types,"html").bind(function(b){b=c.getData(b.type);return q.contains(b,"<html")&&(q.contains(b,'xmlns:o="urn:schemas-microsoft-com:office:office"')||q.contains(b,'xmlns:x="urn:schemas-microsoft-com:office:excel"'))?l.some(s(b,D(a))):l.none()}):l.none()},w=function(a){return s(a,l.none())},x=function(a){if(t.browser.isIE()||
t.browser.isFirefox())return l.none();if(b.isValidData(a.clipboardData)){var c=a.clipboardData;return b.getPreferredFlavor(u,c.types).map(function(a){return c.items})}return l.none()},y=function(a,c){var d=b.isValidData(c.clipboardData)?c.clipboardData.types:[];return b.getFlavor(d,a.clipboardType()).map(function(a){return s(c,l.none())})},z=function(a){return t.browser.isIE()?l.some(r.clipboardData):b.isValidData(a.clipboardData)?l.some(a.clipboardData):l.none()},A=function(a){if(t.browser.isSpartan())return l.none();
a=a.clipboardData;var c=b.isValidData(a)?a.types:[];return 1===c.length&&"text/plain"===c[0]?l.some(a):l.none()},D=function(a){var c=a.clipboardData;return b.isValidData(c)?b.getFlavor(c.types,"rtf").bind(function(a){a=c.getData(a.type);return 0<a.length?l.some(a):l.none()}):l.none()},B=function(a,b,c,d){return{label:m.constant(a),getAvailable:b,steps:m.constant(c),capture:m.constant(d)}};return{internal:function(a,b,h,k){var l=m.curry(y,k);return B("Within Textbox.io (tables) pasting",l,[c.normal(g(b,
a,h,k,d.ignore)),c.normal(e.fixed(!0,!0)),c.normal(f.internal(h,k))],!1)},pastiche:function(b,k,m,l,n,p,q){return B("Outside of Textbox.io pasting (could be internal but another browser)",w,[c.normal(g(l,m,n,q,d.background)),c.normal(e.fromConfigIfExternal(b,k)),c.normal(f.external(n,q)),c.blocking(h(p,k)),c.normal(a(k))],!1)},gwt:function(a,b,d,g){return B("GWT pasting",v,[c.normal(f.setBundle({isWord:!0})),c.normal(e.fromConfig(b,d)),c.normal(f.gwt(a)),c.blocking(h(g,d))],!0)},image:function(a){return B("Image pasting",
x,[c.normal(!1===a.allowLocalImages?f.noImages(m.noop):f.images())],!0)},text:function(){return B("Plain text pasting",z,[c.normal(f.plain),c.normal(f.autolink)],!0)},onlyText:function(){return B("Only plain text is available to paste",A,[c.normal(f.plain),c.normal(f.autolink)],!0)},none:function(){return B("There is no valid way to paste",l.some,[c.normal(f.none)],!1)}}});l("144","qo c 1a 1y l 2f 3c".split(" "),function(c,d,b,a,e,f,g){var h=function(a){return e.fromHtml("<p>"+a("cement.dialog.flash.press-escape")+
"</p>")};return{paste:function(b){var f=e.fromTag("div");a.add(f,c.resolve("flashbin-helpcopy"));var l;l=d.detect().os.isOSX()?["\u2318"]:["Ctrl"];var p=e.fromHtml("<p>"+b("cement.dialog.flash.trigger-paste")+"</p>");l=e.fromHtml('<div><span class="ephox-polish-help-kbd">'+l+'</span> + <span class="ephox-polish-help-kbd">V</span></div>');a.add(l,c.resolve("flashbin-helpcopy-kbd"));g.append(f,[p,l,h(b)]);return f},noflash:function(b){var d=e.fromTag("div");a.add(d,c.resolve("flashbin-helpcopy"));var f=
e.fromHtml("<p>"+b("cement.dialog.flash.missing")+"</p>");g.append(d,[f,h(b)]);return d},indicator:function(d){var h=e.fromTag("div");a.add(h,c.resolve("flashbin-loading"));var l=e.fromTag("div");a.add(l,c.resolve("flashbin-loading-spinner"));var p=e.fromTag("p");d=d("loading.wait");f.set(p,d);b.set(p,"aria-label",d);g.append(h,[l,p]);return h}}});ca("145",navigator);l("11h","144 qo c 7 1y 2n l 2o 3c 145".split(" "),function(c,d,b,a,e,f,g,h,k,m){var l=b.detect(),p=function(b,d,e,f){d=c.noflash(f);
h.append(b,d);return{reset:a.noop}},q=function(a,b,d,e){var g=c.paste(e),h=c.indicator(e);k.append(a,[h,g,b.element()]);a=function(){f.set(g,"display","block");f.set(h,"display","none");d()};b.events.spin.bind(function(){f.set(g,"display","none");f.set(h,"display","block");f.remove(h,"height");f.remove(h,"padding");d()});b.events.reset.bind(a);b.events.hide.bind(function(){f.setAll(h,{height:"0",padding:"0"})});return{reset:a}};return function(b,c,f){var h=g.fromTag("div"),k="flashbin-wrapper-"+(l.os.isOSX()?
"cmd":"ctrl");e.add(h,d.resolve(k));var w;try{w=void 0!==(l.browser.isIE()?new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):m.plugins["Shockwave Flash"])}catch(x){w=!1}b=(w?q:p)(h,b,c,f.translations);return{element:a.constant(h),reset:b.reset}}});l("146","s 55 46 4m 2s 2t".split(" "),function(c,d,b,a,e,f){return{responsive:function(){var g=a(c.none()),h=b.create({crashed:d([]),timeout:d([])});return{start:function(a,b,d,l){var q=b,r=f(function(){d()?e(r):0>=q?(h.trigger.timeout(),e(r)):l()&&(e(r),
h.trigger.crashed());q--},a);g.set(c.some(r))},stop:function(){g.get().each(function(a){e(a)})},events:h.registry}}}});l("147",["a","b","2s","2t"],function(c,d,b,a){return function(e,f,g){var h=function(a){return d.forall(f,function(b){return c.isFunction(a[b])})},k=!0,m=a(function(){var a=e.dom();c.isFunction(a.PercentLoaded)&&100===a.PercentLoaded()&&h(a)&&(l(),g())},500),l=function(){k&&(b(m),k=!1)};return{stop:l}}});ca("148",unescape);l("11i","146 147 qo b 1o 2z c 4w 7 s 55 46 2m 1y 2n l 2y 2o 2s 6b o 2t 3t 148 36".split(" "),
function(c,d,b,a,e,f,g,h,k,m,l,p,q,r,s,t,u,v,w,x,y,z,A,D,B){var C=h.install("ephox.flash"),F=g.detect(),E=m.none();return function(g){var h=p.create({response:l(["rtf"]),spin:l([]),cancel:l([]),error:l(["message"]),reset:l([]),hide:l([]),failed:l(["message"])}),m=!1,w=t.fromTag("div");r.add(w,b.resolve("flashbin-target"));var z=c.responsive();z.events.crashed.bind(function(){h.trigger.failed("flash.crashed")});z.events.timeout.bind(function(){h.trigger.failed("flash.crashed")});var M=function(){L.stop();
if(!m){m=!0;try{var a=P.dom();e.each(R,function(b,c){var d=a[c];if(void 0===d)throw'Flash object does not have the method "'+c+'"';d.call(a,b)});h.trigger.reset();x(V);r.remove(w,b.resolve("flash-activate"));S();U()}catch(c){y.log("Flash dialog - Error during load: ",c)}}},O=C.permanent(M),N=function(){return!q.inBody(P)},Q=function(){return!P.dom().SetVariable},R={setSpinCallback:C.permanent(function(){z.start(1E3,10,N,Q);h.trigger.spin()}),setPasteCallback:C.permanent(function(a){z.stop();A(function(){""===
a?h.trigger.error("flash.crashed"):h.trigger.response(D(a))},0)}),setEscapeCallback:C.permanent(h.trigger.cancel),setErrorCallback:C.permanent(function(a){z.stop();h.trigger.error(a)}),setStartPasteCallback:C.permanent(k.noop)},P=function(){var a=g.replace(/^https?:\/\//,"//"),b='    <param name="allowscriptaccess" value="always">    <param name="wmode" value="opaque">    <param name="FlashVars" value="onLoad='+O+'">';if(F.browser.isIE()&&10===F.browser.version.major){var c=f.generate("flash-bin");
return t.fromHtml('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="'+c+'"><param name="movie" value="'+a+'">'+b+"</object>")}return t.fromHtml('<object type="application/x-shockwave-flash" data="'+a+'">'+b+"</object>")}(),S=function(){s.setAll(P,{width:"2px",height:"2px"})};S();var L=d(P,e.keys(R),M);v.append(w,P);var U=function(){F.browser.isFirefox()&&B.getSelection().removeAllRanges();u.focus(P)},V=null,X=function(){r.add(w,b.resolve("flash-activate"));s.remove(P,"height");s.remove(P,
"width");h.trigger.hide()},W=function(){s.set(w,"display","none");E.each(function(b){a.each(b,function(a){a.unbind()})})};return{focus:U,element:function(){return w},activate:function(){V=A(X,3E3);h.trigger.spin();s.set(w,"display","block");U()},deactivate:W,destroy:function(){W();a.each(e.values(R),function(a){C.unregister(a)});C.unregister(O);L.stop()},events:h.registry}}});l("xr","11h 11i 55 46 3u l 36".split(" "),function(c,d,b,a,e,f,g){return function(h,k){var m=k.translations,l=a.create({response:b(["rtf",
"hide"]),cancel:b([]),error:b(["message"]),failed:b(["message"])});return{open:function(){var a=d(k.swf);a.deactivate();var b=f.fromDom(g),r=e.bind(b,"mouseup",a.focus),s=function(){v()},b=function(){v();l.trigger.cancel()};a.events.cancel.bind(b);a.events.response.bind(function(a){l.trigger.response(a.rtf(),s)});a.events.error.bind(function(a){v();l.trigger.error(a.message())});a.events.failed.bind(function(a){v();l.trigger.failed(a.message())});var t=h();t.setTitle(m("cement.dialog.flash.title"));
var u=c(a,t.reflow,k);u.reset();t.setContent(u.element());t.events.close.bind(b);t.show();a.activate();var v=function(){r.unbind();a.destroy();t.destroy()}},events:l.registry}}});l("149",["7","1b"],function(c,d){return function(b,a,e,f){var g=d.eq(b,e)&&a===f;return{startContainer:c.constant(b),startOffset:c.constant(a),endContainer:c.constant(e),endOffset:c.constant(f),collapsed:c.constant(g)}}});l("11j",["149","l","2o","2q","2a"],function(c,d,b,a,e){return function(f){var g=d.fromTag("br");return{cleanup:function(){a.remove(g)},
toOn:function(a,b){a.dom().focus()},toOff:function(a,d){var m;m=e.owner(d).dom().defaultView;m.focus();b.append(d,g);f.set(m,c(g,0,g,0))}}}});l("11k",["7"],function(c){return function(){return{toOn:function(c,b){c.dom().focus()},toOff:function(c,b){b.dom().focus()},cleanup:c.identity}}});l("15f","b l 2o 3c 2q 2a".split(" "),function(c,d,b,a,e,f){var g=function(g,k){var m=f.children(g);c.each(m,function(c){if(k(c)){var g=f.children(c),h=d.fromTag("div",f.owner(c).dom());a.append(h,g);b.before(c,h);
e.remove(c)}})};return{consolidate:function(b,c){f.nextSibling(b).filter(c).each(function(c){var d=f.children(c);a.append(b,d);e.remove(c)});g(b,c)}}});l("15g",["4g"],function(c){return{resolve:c.create("ephox-sloth").resolve}});l("14a","2z 2u 15f 15g 1a 1y 4b 2n bl l 2f 2o 2q 31 2a".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q,r,s){var t=a.resolve("bin"),u=t+c.generate(""),v=k.onDirection("-100000px","100000px");return function(a){var c=m.fromTag("div");e.setAll(c,{contenteditable:"true","aria-hidden":"true"});
h.setAll(c,{position:"fixed",top:"0px",width:"100px",height:"100px",overflow:"hidden",opacity:"0"});g.add(c,[t,u]);var k=function(a){return f.has(a,u)};return{attach:function(a){q.empty(c);h.set(c,"left",v(a));p.append(a,c)},focus:function(){r.ancestor(c,"body").each(function(b){a.toOff(b,c)})},contents:function(){b.consolidate(c,k);var a=d.immutable("elements","html","container"),e=s.children(c),f=l.get(c);return a(e,f,c)},container:function(){return c},detach:function(){q.remove(c)}}}});l("11l",
"7 bk 55 46 118 14a 2a".split(" "),function(c,d,b,a,e,f,g){return function(h,k){var m=f(h),l=function(){h.cleanup();var a=m.contents();m.detach();q.trigger.after(a.elements(),a.html(),m.container())},p=d.tap(function(){q.trigger.before();m.attach(k);m.focus();e.run(g.owner(k),p,l)}),q=a.create({before:b([]),after:b(["elements","html","container"])}),r=c.noop;return{instance:c.constant(function(){p.instance()}),destroy:r,events:q.registry}}});l("xs","c 7v 55 46 11j 11k 11l 21".split(" "),function(c,
d,b,a,e,f,g,h){var k=c.detect(),m={set:function(a,b){d.setExact(a,b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset())}},l=function(a){return(k.browser.isIE()&&"body"!==h.name(a)?f:e)(m)};return function(c){var d=a.create({after:b(["container"])}),e=l(c),f=g(e,c);f.events.after.bind(function(a){e.toOn(c,a.container());d.trigger.after(a.container())});return{run:function(){f.instance()()},events:d.registry}}});l("11m","c 4w 7 r s 14b 2m 2n 3u l 2o 2p 2q".split(" "),function(c,d,b,a,e,
f,g,h,k,m,l,p,q){var r=d.install("ephox.keurig.init"),s=e.none();c=c.detect();var t=c.browser;return{load:t.isIE()||t.isSpartan()||c.deviceType.isiOS()||c.deviceType.isAndroid()?b.noop:a.cached(function(a){var b=m.fromTag("div");if(void 0===a)throw"baseUrl was undefined";var c=m.fromTag("iframe");h.setAll(b,{display:"none"});var d=k.bind(c,"load",function(){var g=r.ephemeral(function(a){s=e.some(a);t.isSafari()||q.remove(b)});f.write(c,'<script type="text/javascript" src="'+(a+"/wordimport.js")+'">\x3c/script><script type="text/javascript">function gwtInited () {parent.window.'+
g+"(com.ephox.keurig.WordCleaner.cleanDocument);};\x3c/script>");d.unbind()});p.execute(function(){l.append(g.body(),b);l.append(b,c)})}),cleanDocument:function(a,b){return s.map(function(c){return c(a,b)})},ready:function(){return s.isSome()}}});l("xt",["11m"],function(c){return function(d){c.ready()||c.load(d);return{cleanDocument:c.cleanDocument}}});l("r7","xp xq xr xs b 2z xt 7 s".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m,l,p,q){var r=g(q.baseUrl),s=h.curry(b,l),t=void 0!==q.intraFlag?
q.intraFlag:{clipboardType:f.generate("clipboard-type"),findClipboardTags:k.none},r=e.flatten([void 0!==q.intraFlag?[d.internal(p,a,m,t)]:[],[d.onlyText()],[d.gwt(r,l,q,s)],[d.image(q)]]);m=d.pastiche(l,q,p,a,m,s,t);return c(r,m)}});l("r8",["xp","xq"],function(c,d){return function(){return c([d.text()],d.none())}});l("r9","b 85 gk 8s h7 e4 7 gl gm 33 55 46 4m 1a 1y l 3c 2q 3t".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q,r,s,t,u,v,w){return function(x,y){return function(z){var A=p.create({close:l([])}),
D=h(x);D.events.close.bind(function(){A.trigger.close()});s.add(D.element(),m.resolve("external-dialog"));z&&s.add(D.element(),m.resolve("dialog-vertical-controls"));var B=t.fromTag("div"),C=q([]),F=function(a){var b=e();if(void 0===a.text)throw"dialog button did not specify text";b.content(f(a.text));d.button(b.element(),a.text);void 0!==a.tabindex&&r.set(b.element(),"tabindex",a.tabindex);void 0!==a.className&&s.add(b.element(),a.className);void 0!==a.click&&b.events.click.bind(a.click);s.add(b.element(),
m.resolve("dialog-button"));return b};return{element:D.element,events:A.registry,setTitle:D.setTitle,setContent:D.setContent,setButtons:function(a){v.empty(B);a=c.map(a,F);u.append(B,c.map(a,function(a){return a.element()}));C.set(a);D.setControls(B)},reflow:g.noop,show:function(){y.hideInlineSelection();D.show();var d=c.map(C.get(),function(c){return a.button(c.element(),b.button({execute:k.click}))}),e=a.multipleAll(D.element(),d);e.events.exit.bind(function(){A.trigger.close()});w(function(){e.enter()},
0)},destroy:function(){c.each(C.get(),function(a){a.destroy()});C.set([]);D.destroy()}}}}});l("ra",["9"],function(c){return function(d,b,a){var e={"errors.imageimport.unsupported":"errors.images.import.unsupported","errors.imageimport.invalid":"errors.images.import.invalid"};return{baseUrl:a.baseUrl,enableFlashImport:a.enableFlashImport,swf:a.swf,officeStyles:a.officeStyles,htmlStyles:a.htmlStyles,translations:function(a){var b=c.prototype.slice.call(arguments,1);return d.translate.apply(void 0,[void 0!==
e[a]?e[a]:a].concat(b))},allowLocalImages:a.allowLocalImages,intraFlag:b}}});l("ix","r7 r8 r9 75 ra ir".split(" "),function(c,d,b,a,e,f){var g=function(d,g,m,l){var p=b(d.uiContainer(),l),q=function(a){g.filterDom(g.paste(),a)},r=e(a,f.intraFlag(),m);return function(a){return c(a,p,q,r)}};return function(a,b,c,e){return!0===c.forceText?d:g(a,b,c,e)}});l("b1","iu b 3m c s iv iw b6 c1 8z ir ix 90 55 46 ci 1a l 3c 21 6o 4e 2a v".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q,r,s,t,u,v,w,x,y,z,A,D){return function(B,
C,F,E){var G=a.detect(),H=B.filter(),I=B.content(),K=B.undo(),J=B.smartview(),M=B.region(),O=B.internalevents(),N=p(J,H,E,I),Q=e.none(),R=s.create({analytics:r(["message"])}),P=function(a){var b=d.contains(["flash.clipboard.no.rtf","safari.imagepaste"],a.message())?"info":"error";S(a.message(),b)},S=function(a,b){q.getOrLog(a,[]).each(function(a){a=k(a,b);B.ui().displayBanner(a)});L()},L=function(){b.unblock();I.focus()};H.add(H.history(),c.binStyle(),t.remove);!1===E.allowLocalImages&&H.addSelector(H.paste(),
"img[src]",function(a){a=d.filter(a,function(a){a=u.get(a,"src");return D.startsWith(a,"data")||D.startsWith(a,"blob")});0!==a.length&&(S("errors.local.images.disallowed"),t.remove(a))});if(G.os.isiOS()&&G.browser.isSafari()){var U=G.deviceType.isWebView()?"webview.imagepaste":"safari.imagepaste";H.addSelector(H.paste(),'img[src^="webkit-fake-url"]',function(a){0!==a.length&&(S(U,"info"),t.remove(a))})}I.events.ready.bind(function(a){var c=h.get(I,J,a.api().doc()),k=g.rules(I,M,c),p=f(I),q=a.api(),
r=N(q.body());Q=e.some(r);q.events.paste.bind(function(a){q.getSelection().filter(function(a){return d.forall(l.ignoreSelectors(),function(b){return!1===y.ancestor(a.startContainer(),b,I.isRoot)})}).each(function(c){r.isBlocked()||(p.backup(),b.block());r.paste(a.original().raw())})});r.events.cancel.bind(function(){L();p.cancel()});var s=m.processResults(S);r.events.error.bind(P);r.events.insert.bind(function(a){F.correlated(a.correlated()).map(s).get(function(b){L();K.save();var c=v.fromTag("div");
w.append(c,a.elements());H.filterDom(H.input(),c);c=A.children(c);d.each(c,function(a){x.isElement(a)&&u.set(a,"data-ephox-polish-cement-inserted",!0)});p.insert(c,[k.collapsed()],[k.ranged()]);I.body().each(function(a){a=z.descendants(a,"[data-ephox-polish-cement-inserted]");d.each(a,function(a){u.remove(a,"data-ephox-polish-cement-inserted")});O.input(a)});I.domChanged();R.trigger.analytics("paste_action");C.pasteUpload();C.uploadAssets(b)})})});return{destroy:function(){Q.each(function(a){a.destroy()})},
events:R.registry}}});l("5x",["b0","b1"],function(c,d){return function(b,a,e,f){var g=c(b,f.copy),h=d(b,a,e,f.paste);return{destroy:function(){g.destroy();h.destroy()}}}});l("rb",["b","1o","w"],function(c,d,b){var a=function(a){for(var c=[],d=a.start.charCodeAt(0);d<=a.finish.charCodeAt(0);d++)c.push(b.fromCharCode(d));return c},e=function(a){return{start:a,finish:a}};return function(){var b={latin:[{start:"A",finish:"Z"},{start:"a",finish:"z"},{start:"\u00c0",finish:"\u00ff"}],punctuation:[{start:"!",
finish:"/"},{start:":",finish:"@"},{start:"[",finish:"`"},{start:"{",finish:"~"},{start:"\u00a1",finish:"\u00bf"},{start:"\u2010",finish:"\u2027"},{start:"\u2030",finish:"\u205e"}],currency:[e("$"),{start:"\u00a2",finish:"\u00a5"},{start:"\u20a0",finish:"\u20bd"},e("\u5186"),e("\u5143"),e("\u5713"),e("\u5706")],"extended-latin-a":[{start:"\u0100",finish:"\u017f"}],"extended-latin-b":[{start:"\u0180",finish:"\u024f"}],arrows:[{start:"\u2190",finish:"\u21ff"},e("\u2794"),{start:"\u2798",finish:"\u27af"},
{start:"\u27b1",finish:"\u27be"}],mathematical:[{start:"\u2795",finish:"\u2797"},{start:"\u2200",finish:"\u22ff"}],miscellaneous:[{start:"\u2701",finish:"\u275e"},{start:"\u2761",finish:"\u2793"},e("\u27b0"),e("\u27bf")]},g={};d.each(b,function(b,d,e){g[d]=c.bind(b,a)});return g}});l("rc","4z 7 gn 33 46 47 1y l 3c".split(" "),function(c,d,b,a,e,f,g,h,k){return{controls:function(h){var l=h+"-";h=c.div();g.add(h,a.resolve(l+"dialog-controls"));var p=b.button(l,"cancel","button.cancel"),q=b.button(l,
"insert","specialchar.insert");b.makeNormal(p.element());b.makeDefault(q.element());k.append(h,[p.element(),q.element()]);l=e.create({insert:f([],q.events.click),cancel:f([],p.events.click)});return{element:d.constant(h),ok:d.constant(q),cancel:d.constant(p),destroy:function(){q.destroy();p.destroy()},events:l.registry}}}});l("rd","b 1o xc gs gt 75 33 1a 1y 4b l 2o 3c 1s 36".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q,r,s){var t=function(a){var c=l.fromTag("span");k.add(c,g.resolve("special-char"));
var d=l.fromHtml(a);h.setAll(c,{"data-ephox-polish-special-char":a,"data-ephox-polish-char-code":a.charCodeAt(0).toString(16),tabindex:"-1"});b.gridcell(c);p.append(c,d);return c},u=function(a,d){var e=l.fromTag("div");m.add(e,[g.resolve("special-char-row"),g.resolve("special-char-row-"+d)]);b.row(e);c.each(a,function(a){p.append(e,t(a))});return e},v=function(a,d,e){var h=l.fromTag("div");k.add(h,g.resolve(d));b.base(h,f.translate("specialchar.grid"));a=c.chunk(a,e);a=c.map(a,function(a){return u(a,
d)});q.append(h,a);return h};return{generateItems:function(b){var c=600>=r.min(s.innerWidth,s.innerHeight)?12:16;return d.mapToArray(b,function(b,d){var g=v(b,d,c);return e(f.translate("specialchar."+d),a(g))})}}});l("iy","b 3m gk 8s gu 7 rb gl gm lc p8 75 rc rd 33 55 46 1a 1y 3u 2y 2o 6o 31 2a 32".split(" "),function(c,d,b,a,e,f,g,h,k,m,l,p,q,r,s,t,u,v,w,x,y,z,A,D,B,C){var F=function(c){var d={item:f.constant(".ephox-pastry-statebutton.ephox-pastry-tablayout-item")},e=b.flow({trigger:k.button,executeOnArrow:!0});
return a.flow(c.menu(),d,e)},E=function(a){return A.closest(a,".ephox-pastry-tablayout-active")},G=function(c){var d={row:f.constant(".ephox-pastry-tablayout-active ."+s.resolve("special-char-row")),cell:f.constant(".ephox-pastry-tablayout-active ."+s.resolve("special-char"))},e=b.tabular({trigger:k.click,isValid:E});return a.tabular(c.body(),d,e)};return function(f){var A=u.create({insert:t(["string"]),close:t([])}),E=h(f);f=g();f=r.generateItems(f);var J=m.input("specialchar","specialchar.selects"),
M=l(e.left(),f,s.resolve("specialchars"));w.add(M.body(),s.resolve("specialchar-body"));w.add(E.element(),s.resolve("specialchar-dialog"));c.each(B.children(M.element()),d.register);var O=x.bind(E.element(),"click",function(a){a=a.target();D.closest(a,"[data-ephox-polish-special-char]").each(function(a){y.focus(a);var b=v.get(a,"data-ephox-polish-special-char");a=J.input();b=C.get(a)+b;C.set(a,b)})}),N=q.controls("specialchar");E.setTitle(p.translate("specialchar.dialog"));E.setContent(M.element());
E.setControls(N.element());z.after(M.element(),J.element());f=function(){E.hide();C.set(J.input(),"");A.trigger.close()};var Q=F(M),R=G(M),P=k.setup(E,N,[Q,R,a.input(J.input(),b.input({}))]);M.events.setActive.bind(function(a){Q.clickFocus(a.item().element())});E.events.close.bind(function(){P.exit();A.trigger.close()});N.events.cancel.bind(f);E.events.close.bind(f);N.events.insert.bind(function(){A.trigger.insert(C.get(J.input()))});return{element:E.element(),events:A.registry,open:function(){E.show();
P.enter()},destroy:function(){O.unbind();E.destroy();M.destroy();N.destroy();P.destroy()},close:function(){E.hide();C.set(J.input(),"")}}}});l("b2",["iy","55","46","47"],function(c,d,b,a){return function(e,f){var g=c(f),h=b.create({insert:a(["string"],g.events.insert),close:d([])}),k=function(){h.trigger.close();g.close()};g.events.close.bind(k);return{show:function(){e.toReading();g.open()},close:k,destroy:function(){g.events.close.unbind(k);g.destroy()},events:h.registry}}});l("5y","9i 7 7x 73 75 b2 6v l".split(" "),
function(c,d,b,a,e,f,g,h){return function(k){var m=k.content(),l=k.smartview(),p=function(a){a=h.fromText(a.string());b.insertAtCursor(m,[a]).each(function(a){a=c.after(a.element());m.setRelativeSelection(a,a);m.focus();m.toEditing()})},q=a.destroyable(),r=function(){q.clear()};return{ui:g.ui({"specialchar.general":{toggle:!1,value:"specialchar",textkey:e.key("specialchar.open"),action:function(){var a=f(m,l.uiContainer());q.set(a);a.events.close.bind(function(){m.focus();r()});a.events.insert.bind(function(a){p(a);
r()});k.content().hideInlineSelection();a.show()},updateGeneral:d.noop,icon:!0,shortcut:!1,hasPopup:!1,hasDialog:!0}}),destroy:r}}});l("b3","7 s 6p 75 by 6u 6v 76 1a".split(" "),function(c,d,b,a,e,f,g,h,k){return function(m,l,p,q,r){var s=m.content(),t=m.profile().nativeSpelling(),u=function(a){k.set(a,"spellcheck","false")},v=function(a){k.set(a,"spellcheck","true")};s.runOrOnLoaded(function(){var a=t.get()?v:u;s.body().each(a)});m=g.ui({"spelling.general":{toggle:!0,value:"spellcheck",textkey:a.key("cog.spellcheck"),
action:function(){var a=!t.get();t.setAndCache(a);a=a?v:u;s.body().each(a)},updateGeneral:function(a){(t.get()?a.select:a.deselect)()},icon:!0,tooltip:h.get}});return e({events:b(["analytics"]),init:c.noop,hasDropdown:c.constant(!1),hasAutocorrect:c.constant(!1),check:c.noop,scanView:c.noop,lock:c.apply,situation:f.noSituation,handle:c.noop,assign:c.noop,destroy:function(){s.body().each(function(a){k.remove(a,"spellcheck")})},state:c.constant({}),ui:m,lookup:c.constant(d.none()),name:c.constant("spelling-disabled")})}});
l("iz",["ex","4n","dl"],function(c,d,b){var a=d.generate([{single:["element"]},{range:["start","soffset","finish","foffset"]}]);return{cata:function(a,b,c){return a.fold(b,c)},single:a.single,range:function(d,f,g,h){var k=b.after(g,h,d,f),m=k?c.point(d,f):c.point(g,h);d=k?c.point(g,h):c.point(d,f);return a.range(m.element(),m.offset(),d.element(),d.offset())}}});l("xu",["2u"],function(c){return c.immutable("suggestions","ignore")});l("xv",["58","66"],function(c,d){return{clean:function(b){var a=new d(c.zeroWidth(),
"g"),e=new d("[\u2018\u2019]","g");return b.replace(a,"").replace(e,"'")}}});l("re",["xu","xv","1o","s"],function(c,d,b,a){return function(e){var f={},g=function(a){return f.hasOwnProperty(a)&&void 0!==f[a]?f[a]:{}},h=function(a,b){var c=g(a);b(c);f[a]=c},k=function(a,b){var c=g(a);return b(c)},m=function(b,e,f){h(b,function(b){var g=d.clean(e);b.hasOwnProperty(g)&&void 0!==b[g]||(b[g]=c(a.some(f),!1))})},l=function(b,e){h(b,function(b){var f=d.clean(e),g=b.hasOwnProperty(f)?b[f]:void 0,g=void 0!==
g?g.suggestions():a.none(),g=c(g,!0);b[f]=g})};b.each(void 0!==e?e:{},function(a,c){b.each(a,function(a,b){!0===a.ignore&&l(c,b);void 0!==a.suggestions&&m(c,b,a.suggestions)})});return{add:m,get:function(b,c){return k(b,function(b){var e=d.clean(c);return b.hasOwnProperty(e)?a.from(b[e]):a.none()})},ignore:l,suggestions:function(b,c){return k(b,function(b){var e=d.clean(c);return(b.hasOwnProperty(e)?a.from(b[e]):a.none()).bind(function(a){return a.suggestions()})})},state:function(){return b.map(f,
function(a,c){return b.map(a,function(a,b){return{ignore:a.ignore(),suggestions:a.suggestions().getOr([])}})})},destroy:function(){f={}}}}});l("j0",["re"],function(c){return function(d){return c(d)}});l("j2",["ci","1y"],function(c,d){return{configure:function(b){b.add(b.internal(),"ephox-cram-annotation-wrap",c.unwrap);b.add(b.output(),"ephox-cram-annotation-wrap",c.unwrap);b.add(b.paste(),"ephox-cram-annotation-wrap",c.unwrap)},isWrap:function(b){return d.has(b,"ephox-cram-annotation-wrap")}}});
l("63","b 6 2k 7 s 75".split(" "),function(c,d,b,a,e,f){var g={en_au:"en_gb",en_bz:"en_gb",en_ca:"en_gb",en_gb:"en_gb",en_ie:"en_gb",en_in:"en_gb",en_jm:"en_gb",en_my:"en_gb",en_nz:"en_gb",en_ph:"en_gb",en_sg:"en_gb",en_tt:"en_gb",en_za:"en_gb",en_zw:"en_gb",en_us:"en_us",en:"en_us"},h="da de en en_au en_br en_gb en_uk en_us es fi fr it nb nl pt pt_pt sv".split(" "),k=function(b,c){return{value:a.constant(b),textkey:a.constant(c),icon:e.none}};return{determine:function(a){if("no.language"===a)a=e.some(a);
else{var f=d.merge(b.localeList(),g);a=b.determineFrom(a,f);a=""!==a&&c.contains(h,a)?e.some(a):e.none()}return a},get:function(){return[k("no.language",f.key("spelling.none")),k("en_us",f.key("parlance.en_us")),k("en_gb",f.key("parlance.en_gb")),k("da",f.key("parlance.da")),k("de",f.key("parlance.de")),k("es",f.key("parlance.es")),k("fi",f.key("parlance.fi")),k("fr",f.key("parlance.fr")),k("it",f.key("parlance.it")),k("nb",f.key("parlance.no")),k("nl",f.key("parlance.nl")),k("pt",f.key("parlance.pt_br")),
k("pt_pt",f.key("parlance.pt_pt")),k("sv",f.key("parlance.sv"))]},isOn:function(a){return"no.language"!==a},offKey:a.constant("no.language")}});l("j3","7 s 75 63 6v 7d 55 46 v".split(" "),function(c,d,b,a,e,f,g,h,k){var m=function(e,g){var h=a.get();return{"spelling.dropdown":{name:"spellcheck",textkey:b.key("spelling.menu"),menuTextkey:"",updateDropdown:function(a){a.populate([{label:d.none,items:c.constant(h)}]);var b=e.profile().spelling().get();f.on(b).fold(a.untick,c.noop,a.tick)},action:function(a){e.profile().spelling().setAndCache(a);
k.startsWith(a,"en")||e.profile().autocorrect().set(!1);g.trigger.change(a)},values:h,render:d.none(),describe:function(a){return b.key("spelling.menu")},hasPopup:!0,toggle:!1}}},l=function(c,d,e){var f=c.profile().spelling().get()!==a.offKey();return{"spelling.general":{toggle:!0,value:"spellcheck",textkey:b.key("cog.spellcheck"),action:function(){var b=(f=!f)?d:a.offKey();c.profile().spelling().setAndCache(b);e.trigger.change(b)},updateGeneral:function(a){f?a.select():a.deselect()},icon:!1}}};return function(a,
b,d){var f=h.create({change:g(["language"])});a=d?m(a,f):l(a,b,f);return{ui:e.ui(a),hasDropdown:c.constant(d),events:f.registry}}});l("xw",["s","2u"],function(c,d){var b=d.immutable("area","f");return function(){var a=[],d=!1,f=function(){d=!0;c.from(a.shift()).fold(function(){d=!1},function(a){a.f()(a.area(),f)})};return{enqueue:function(c,h){a.push(b(c,h));d||f()},destroy:function(){a=[]}}}});l("165",["7"],function(c){return{stop:c.constant("trampoline.stop"),run:function(c){for(;"trampoline.stop"!==
c;)c=c()}}});l("15j","s ij a8 165 15i 4n".split(" "),function(c,d,b,a,e,f){var g=f.generate([{inline:["item","mode","lang"]},{text:["item","mode"]},{empty:["item","mode"]},{boundary:["item","mode","lang"]},{concluded:["item","mode"]}]),h=function(a,b,d,e){var f=a.property().isElement(b)?c.from(a.attrs().get(b,"lang")):c.none();return a.property().isText(b)?g.text(b,d):e(b,d)?g.concluded(b,d):a.property().isBoundary(b)?g.boundary(b,d,f):a.property().isEmptyTag(b)?g.empty(b,d):g.inline(b,d,f)},k=function(a,
b,c,e){return d.walk(a,b,c,d.walkers().right(),void 0).fold(function(){return g.concluded(b,c)},function(b){return h(a,b.item(),b.mode(),e)})},m=function(c,e,f,g,h,k){return function(){return e.fold(function(a,b,e){(b===d.advance?g.openInline:g.closeInline)(e,a);return l(c,a,b,f,g,h,k)},function(b,d){var e=h(c,b);g.addDetail(e);return f(b,d)?a.stop():l(c,b,d,f,g,h,k)},function(a,b){g.addEmpty(a);return l(c,a,b,f,g,h,k)},function(e,m,q){var y=k.assess(e);return b.cata(y,function(b){return m!==d.backtrack?
l(c,e,d.sidestep,f,g,h,k):a.stop()},function(a){(m===d.advance?g.openBoundary:g.closeBoundary)(q,e);return l(c,e,m,f,g,h,k)},function(b){return a.stop()})},function(b,c){return a.stop()})}},l=function(a,b,c,d,e,f,g){b=k(a,b,c,d);return m(a,b,d,e,f,g)};return{walk:function(b,c,f,g,k,l){var n=function(a,c){return b.eq(a,f)&&(c!==d.advance||b.property().isText(a)||0===b.property().children(a).length)},w=e.nu(g),x=h(b,c,d.advance,n);a.run(function(){return m(b,x,n,w,k,l)});return w.done()}}});l("15k",
["b","7","100","2u"],function(c,d,b,a){var e=a.immutableBag(["elements","lang","words"],[]);return{fromWalking:function(a,g){var h=c.map(g,function(a){var d=a.details();a=a.lang();var f=c.map(d,function(a){return a.text()}).join(""),d=c.map(d,function(a){return a.item()}),f=b.words(f);return e({lang:a,words:f,elements:d})});return{zones:d.constant(h)}}}});l("14c","7 s m9 14u 15h 15i 15j 15k".split(" "),function(c,d,b,a,e,f,g,h){var k=function(a,b,c,e,h,k){return(a.eq(b,c)?d.some(b):a.property().parent(b)).map(function(d){d=
f.calculate(a,d).getOr(e);return g.walk(a,b,c,d,h,k)})},m=function(a,c,e,f,g,m){c=b.subset(a,c,e).bind(function(b){return 0===b.length?d.none():k(a,b[0],b[b.length-1],f,g,m)}).getOr([]);return h.fromWalking(a,c)},l=function(a,b){return function(c,d){return c.eq(d,a.item())?a:c.eq(d,b.item())?b:e.detail(c,d)}},p=function(){return{zones:c.constant([])}};return{fromRange:function(b,d,e,f,g){d=a.getEdges(b,d,e,c.constant(!1));e=l(d.left(),d.right());return m(b,d.left().item(),d.right().item(),f,e,g)},
transformEdges:l,fromBounded:function(a,b,c,d,f){return m(a,b,c,d,e.detail,f)},fromBoundedWith:m,fromInline:function(b,c,d,e){c=a.byBoundary(b,c);var f=l(c.left(),c.right());return c.isEmpty()?p():m(b,c.left().item(),c.right().item(),d,f,e)},empty:p}});l("11n",["7","lw","14c"],function(c,d,b){var a=function(a,c,d,k){return a.property().isBoundary(c)?b.fromBounded(a,c,c,d,k):a.property().isEmptyTag(c)?e():b.fromInline(a,c,d,k)},e=function(){return b.empty()};return{single:a,range:function(c,e,h,k,
m,l,p){e=d.toLeaf(c,e,h);k=d.toLeaf(c,k,m);return c.eq(e.element(),k.element())?a(c,e.element(),l,p):b.fromRange(c,e.element(),k.element(),l,p)},empty:e}});l("xx",["e7","11n"],function(c,d){var b=c();return{single:function(a,c,f){return d.single(b,a,c,f)},range:function(a,c,f,g,h,k){return d.range(b,a,c,f,g,h,k)},empty:function(){return d.empty()}}});l("rf","iz xw 7 xx 4m 2m".split(" "),function(c,d,b,a,e,f){return function(g,h){var k=e(g),m=d(),l=function(b,d,e,g){e=c.cata(e,function(b){return f.inBody(b)?
a.single(b,k.get(),h):a.empty()},function(b,c,d,e){return f.inBody(b)&&f.inBody(d)?a.range(b,c,d,e,k.get(),h):a.empty()});d(b,e,k.get(),g)};return{run:function(a,c,d){l(a,c,d,b.identity)},setLang:k.set,schedule:function(a,b,c,d){m.enqueue(c,function(c,e){void 0!==d&&d()?e():l(a,b,c,e)})},destroy:function(){m.destroy()}}}});l("xy",["b","1o","7"],function(c,d,b){return{update:function(a,b,f){var g=d.keys(f);c.each(g,function(c){a.add(b,c,f[c])});return g},getInCache:function(a,d,f){return c.filter(f,
function(c){return a.get(d,c.word()).fold(b.constant(!1),function(a){return a.suggestions().isSome()})})}}});l("16w",["7","a8"],function(c,d){return{anything:c.constant({assess:d.inView})}});l("16n","s lw 16w 14u 15h 15i 14c".split(" "),function(c,d,b,a,e,f,g){var h=b.anything(),k=function(a,b,d,e,f,k){a=g.fromBoundedWith(a,b,d,e,k,h).zones();1===a.length?(a=a[0],f=a.lang()===f?c.some(a):c.none()):f=c.none();return f},m=function(a,b,c,d,f){return k(a,b,c,d,f,e.detail)};return{fromRange:function(b,
c,d,e,h){var m=f.strictBounder(e,h);c=a.getEdges(b,c,d,m);d=g.transformEdges(c.left(),c.right());return k(b,c.left().item(),c.right().item(),e,h,d)},fromBounded:m,fromInline:function(b,c,e,h){var l=f.strictBounder(e,h),l=a.getEdges(b,c,c,l),t=g.transformEdges(l.left(),l.right());l.isEmpty()?(t=b.property().isText(c)?b.property().getText(c):b.property().children(c).length,l=d.toLeaf(b,c,0),c=d.toLeaf(b,c,t),b=m(b,l.element(),c.element(),e,h)):b=k(b,l.left().item(),l.right().item(),e,h,t);return b},
empty:function(){return c.none()}}});l("166",["lw","16n"],function(c,d){var b=function(a,b,c,g){return a.property().isBoundary(b)?d.fromBounded(a,b,b,c,g):a.property().isEmptyTag(b)?d.empty():d.fromInline(a,b,c,g)};return{single:b,range:function(a,e,f,g,h,k,m){e=c.toLeaf(a,e,f);g=c.toLeaf(a,g,h);return a.eq(e.element(),g.element())?b(a,e.element(),k,m):d.fromRange(a,e.element(),g.element(),k,m)}}});l("15l",["e7","166"],function(c,d){var b=c();return{single:function(a,c,f){return d.single(b,a,c,f)},
range:function(a,c,f,g,h,k){return d.range(b,a,c,f,g,h,k)}}});l("14d","b s 15l 21 6j at 2a".split(" "),function(c,d,b,a,e,f,g){var h=function(b){return c.bind(b,function(b){return e.descendants(b,a.isText)})};return{textnodes:h,text:function(b){b=h(b);return c.map(b,function(b){return a.isText(b)?f.get(b):""}).join("")},parsed:function(a,c,e){return d.from(a[0]).bind(function(a){return b.single(a,c,e).bind(function(a){a=a.words();return 1===a.length?d.some(a[0]).map(function(a){return a.word()}):
d.none()})})},children:function(a){return c.bind(a,g.children)}}});l("11o","b 14d s 3c 2q at".split(" "),function(c,d,b,a,e,f){return{clobber:function(g,h){var k=d.children(g),m=d.textnodes(g);return b.from(g[0]).bind(function(d){a.before(d,k);d=b.from(m[0]);d.each(function(a){f.set(a,h)});c.each(m.slice(1),function(a){f.set(a,"")});c.each(g,e.remove);return d})}}});l("11p","10r 13l 13m 7 s hl 1a 1y l".split(" "),function(c,d,b,a,e,f,g,h,k){var m=d.resolve("annotation"),l=d.resolve("lingo"),p=b.resolve("annotation-wrap");
return{nu:function(){var a=k.fromTag("span");h.add(a,p);g.set(a,"aria-invalid","spelling");return f.nu(a)},set:function(a,b,c){g.set(a,m,c);g.set(a,l,b)},label:a.constant(p),detail:function(b){return c.id(b).bind(function(c){return e.from(g.get(b,m)).bind(function(d){return e.from(g.get(b,l)).map(function(b){return{id:a.constant(c),word:a.constant(d),lang:a.constant(b)}})})})}}});l("11q",["b","10r","13m","1y"],function(c,d,b,a){var e=b.resolve("wrap-disabled");return{enable:function(b){b=d.all(b);
c.each(b,function(b){a.remove(b,e)})},disable:function(b){b=d.all(b);c.each(b,function(b){a.add(b,e)})}}});l("14e",["2u"],function(c){return c.immutable("id","elements","word","lang")});l("14f",[],function(){var c=function(c){return{fold:c}};return{success:function(d){return c(function(b,a){a(d)})},fail:function(d){return c(function(b,a){b(d)})}}});l("11r","b 1o 14e 14f 10r 14d 2m".split(" "),function(c,d,b,a,e,f,g){var h=function(a,d){var f={};c.each(a,function(a){e.marker(a,d.label()).filter(g.inBody).each(function(a){d.detail(a).each(function(c){var d=
c.id(),g=c.word();c=c.lang();var h=e.all(a);0<h.length&&(f[d]=b(d,h,g,c))})})});return f},k=function(a,b,c,d){var e=f.text(a);a=f.parsed(a,c,d);return e===b&&a.is(b)},m=function(b,e,f){b=d.values(b);return c.map(b,function(b){return b.lang()===f&&k(b.elements(),b.word(),e,b.lang())?a.success(b):a.fail(b)})};return{validate:k,verify:function(a,b,d,e,f){b=h(a.elements(),b);a=m(b,f,a.lang());c.each(a,function(a){var b=function(a){return function(b){c.each(b.elements(),a)}};a.fold(b(e),b(d))})}}});l("y3",
"b 11o 11p ww 10r 11q wx 11r 7 hl 2q".split(" "),function(c,d,b,a,e,f,g,h,k,m,l){var p=function(a){return e.marker(a,b.label())};return{highlight:function(d,k,p,t){h.verify(k,b,f.enable,l.unwrap,d.lang());p=g.matchWords(k.elements(),p,t);p=g.annotates(p,b.label());return c.bind(p,function(f){return f.current().fold(function(){var g=f.match(),h=g.word();if(d.ignore(g))return[];g=m.wrapper(g.elements(),b.nu)||[];c.each(g,function(a){e.set(a,f.id());b.set(a,k.lang(),h)});return[a.created(g)]},function(b){return[a.preserved(b)]})})},
marker:p,substitute:function(a,b){var c=p(a).fold(k.constant([]),e.all);return d.clobber(c,b)},detail:function(a){return b.detail(a)}}});l("xz",["b","y3","7"],function(c,d,b){return{highlight:function(a,e,f,g){var h={operation:a,internal:a,ignore:b.constant(!1),lang:b.constant(g)},k=c.map(f,function(a){return a.word()}),m=c.filter(k,function(a,b){return c.indexOf(k,a)===b});h.operation(function(){d.highlight(h,e,m,b.constant(!1))})}}});l("y0","xy xv b 3s 7 p n".split(" "),function(c,d,b,a,e,f,g){var h=
function(c,h){return a.nu(function(a){var l={words:b.map(c.words(),function(a){return d.clean(a.word())})};h.correction(l,c.lang(),function(b){b=f.value({spelling:e.constant(b),zone:e.constant(c)});a(b)},function(b){b=f.error(new g(b));a(b)})})};return{scan:function(f,g,l){var p=function(a){var g=a.zone(),h=c.update(f,g.lang(),a.spelling());a=b.filter(g.words(),function(a){a=d.clean(a.word());return b.contains(h,a)});return{zone:e.constant(g),words:e.constant(a)}};l=b.map(l,function(a){return h(a,
g)});return a.par(l).map(function(a){a=b.bind(a,function(a){return a.fold(e.constant([]),b.pure)});return b.map(a,p)})}}});l("rg",["xy","xz","y0","b","7"],function(c,d,b,a,e){return function(f,g){var h=function(b){return a.map(b,function(a){var b=c.getInCache(f,a.lang(),a.words());return{zone:e.constant(a),words:e.constant(b),lang:a.lang}})},k=function(b,c,e){a.each(c,function(a){d.highlight(b,a.zone(),a.words(),e)})};return{local:function(a,b,c,d){b=b.zones();b=h(b);k(a,b,c);d()},remote:function(a,
c,d,e){c=c.zones();b.scan(f,g,c).get(function(b){k(a,b,d);e()})},destroy:e.noop}}});l("rh",["s","o"],function(c,d){return{active:function(b){var a={};b.autocorrect().get(function(b){b.fold(function(a){d.log("Error loading autocorrect list")},function(b){a=b.corrections})});return{lookup:function(b){return a.hasOwnProperty(b)?c.from(a[b]):c.none()}}},inactive:function(){return{lookup:c.none}}}});l("11s",["n6","n3","7"],function(c,d,b){c=d.objOf([c.strict("language"),c.strict("words")]);return{many:b.constant(c)}});
l("11t","i8 b 1o 2z 7z ep er 7".split(" "),function(c,d,b,a,e,f,g,h){var k=function(a,b){return c.readOptFrom(a,b).getOrThunk(function(){return f()})},m=a.generate("good-spelling");return{execute:function(a,f,l,r,s,t){var u=k(f,l);t=g.multiple(function(b,c){return a.execute({language:l,words:b})},u,r,function(a){return a.spell},h.identity,s,void 0!==t?t:!1);f[l]=u;return e.mapSync(t,function(a){d.each(r,function(b){c.hasKey(a,b)||u.set(b,m,s)});var e={};b.each(a,function(a,b){u.get(s,b).is(m)||(e[b]=
a)});return e})},initCaches:function(a){var c={};b.each(void 0!==a?a:{},function(a,b){c[b]=f(a)});return c},correct:h.constant(m)}});l("y1",["1o","eq","es","11s","11t"],function(c,d,b,a,e){return function(f,g,h){var k=e.initCaches(h),m=d.post("ephox.spelling.service.many",a.many(),f,g);return{checkMany:function(a,c,d){d=b.now();return e.execute(m,k,a,c,d)},dumpCache:function(){return c.map(k,function(a){return a.dump()})}}}});l("y2",["7","v"],function(c,d){var b={image:c.constant("1"),spelling:c.constant("1")};
return{corsQuery:function(a){return d.ensureTrailing(a,"/")+"version"},spelling:function(a){var c=b.spelling();return d.ensureTrailing(a,"/")+c+"/"}}});l("ri","6 hs 2l y1 7 gx y2 55 46 o".split(" "),function(c,d,b,a,e,f,g,h,k,m){return function(l,p,q,r,s){var t=g.spelling(p),u=a(t+"correction",l.mediatorHeaders(),s),v=k.create({failed:h(["resource"])});s=b.nu(function(a){var b=c.merge(l.headers(),{dataType:"json"});d.get(t+"autocorrect?language="+q,b).get(a)});var w=f.bind(s,function(){return u.checkMany(q,
["startup"],!0)});w.get(function(a){a.fold(function(a){m.error("Unable to communicate with the spelling service:",a);v.trigger.failed(p)},e.noop)});return{correction:function(a,b,c,d){w.get(function(e){e.fold(d,function(){u.checkMany(r?b:q,a.words).get(function(a){a.fold(function(a){m.error("Error response from the spelling service:",a);d(a)},function(a){c(a)})})})})},autocorrect:e.constant(s),events:v.registry,state:function(){return u.dumpCache()}}}});l("j4","rf rg rh 63 ri 55 46 ho fh ci".split(" "),
function(c,d,b,a,e,f,g,h,k,m){return function(l){var p=l.content(),q=l.profile(),r=e(l.communication(),l.url(),l.language(),l.multilingual(),l.fromServiceState()),s=l.autocorrectOn()?b.active(r):b.inactive(),t=g.create({failed:f(["resource"])}),u=function(a){t.trigger.failed(a.resource())};r.events.failed.bind(u);var v=c(l.language(),l.viewable().viewport()),w=d(l.cache(),r),x=function(a){p.body().each(function(b){h.filterDom(b,[k("."+a,m.unwrap)])})},y=function(){return!a.isOn(q.spelling().get())},
z=function(){x("ephox-cram-annotation-wrap")};return{run:function(b,c){var d=q.spelling().get();a.isOn(d)&&(v.setLang(d),v.run(b,w.local,c),v.schedule(b,w.remote,c,y))},refresh:function(){var b=q.spelling().get();a.isOn(b)||z()},clear:z,lookup:s.lookup,destroy:function(){r.events.failed.unbind(u);v.destroy();w.destroy()},state:r.state,events:t.registry}}});l("y5",["7","33"],function(c,d){var b=function(a){a="data-"+d.resolve(a);return c.constant(a)};return{value:b("spelling-value"),type:b("spelling-type"),
overflow:b("spelling-overflow"),overflowMenu:b("spelling-overflow-menu"),spelling:b("spelling-suggestion")}});l("y4",["y5","75","2u"],function(c,d,b){var a=b.immutable("primary","secondary","submenus"),e=b.immutable("value","text","attrs"),f=b.immutable("textkey","value","items");return{generate:function(b,h){var k;if(b.length>h){k=b.slice(0,h);var m=e(c.overflow(),d.translate("spelling.context.more"),{}),l=b.slice(h),p={};p[c.overflow()]=c.overflowMenu();l=f(d.key("spelling.context.morelabel"),c.overflowMenu(),
l);k=a(k.concat([m]),[l],p)}else k=a(b,[],{});return k}}});l("y6","y3 s y5 55 46 1a".split(" "),function(c,d,b,a,e,f){return function(){var g=e.create({incorrect:a(["substitution"])}),h=d.none(),k={};k[b.spelling()]=function(a){h.each(function(d){d=c.substitute(d,f.get(a,b.value()));g.trigger.incorrect(d)})};return{assign:function(a){h=a},run:function(a){var c=f.get(a,b.type()),c=k[c];void 0!==c&&c(a)},events:g.registry}}});l("rj","b y3 7 hz y4 y5 y6 2u".split(" "),function(c,d,b,a,e,f,g,h){var k=
h.immutable("value","text","attrs");return function(h,l,p){var q=g();q.events.incorrect.bind(function(b){l.save();h.focus();h.domChanged();b.substitution().each(function(b){a.selectEnd(h,b)})});var r=b.curry(function(a,b,d,e){return a.marker(e).bind(a.detail).bind(function(a){return d(a).map(function(a){return c.map(a,function(a){var c={};c[f.type()]=b;c[f.value()]=a;return k(a,a,c)})})})},d,f.spelling(),function(a){return p.suggestions(a.lang(),a.word())});return{assign:q.assign,handle:function(a){q.run(a)},
situation:function(a){a=r(a).getOr([]);return e.generate(a,4)},destroy:b.noop}}});l("rk",["7","aa","55","46"],function(c,d,b,a){return function(e,f){var g=a.create({lookup:b(["element"])}),h=function(a){e.getSelection().each(a)},k=function(){h(function(a){g.trigger.lookup(a.startContainer())})};e.events.keyup.bind(function(a){d.isSpace(a)&&k()});e.events.nodeChanged.bind(function(a){a.prev().each(g.trigger.lookup)});return{events:g.registry,destroy:c.noop}}});l("j5","iz c 7 bk rj rk dl q".split(" "),
function(c,d,b,a,e,f,g,h){var k=d.detect().browser;return function(d,h,l,q,r,s,t,u,v){var w=e(h,r,u),x=f(h,l),y=function(a){h.getSelection().each(function(c){var d;(d=c.collapsed())||(d=!k.isIE())||(d=g.after(c.endContainer(),c.endOffset(),c.startContainer(),c.startOffset()));return(d?q.lightweightWith:b.apply)(a,c)})},z=a.tap(function(a){a=a.element();a=c.single(a);A(a)});x.events.lookup.bind(function(a){z.instance(a)});var A=function(a){v.run(y,a)};return{destroy:function(){w.destroy();x.destroy()},
scan:A,situation:w.situation,lock:function(a){var b=z.control.isBlocked();z.control.block();a();b||z.control.unblock()},assign:w.assign,handle:w.handle}}});l("b4","iz j0 b 7 s ex j1 c1 j2 j3 63 j4 j5 by 90 55 46 2u 1a 2a".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u,v,w,x){var y=v.immutableBag("communication profile content undo viewable cache url autocorrectOn language fromServiceState multilingual".split(" "),[]);return function(v,A,D,B,C){C=A.language.getOr(C);var F=v.communication(),
E=v.profile(),G=v.filter(),H=v.content(),I=v.operations(),K=v.undo(),J=v.smartview(),M=v.shortcuts(),O=v.context(),N=v.viewablearea();k.configure(G);v.profile().spelling().set(C);var Q=d(A.words),R=p(y({communication:F,profile:E,content:H,undo:K,viewable:N,cache:Q,url:D.url,autocorrectOn:D.autocorrect,language:B,fromServiceState:A.service,multilingual:D.multilingual})),P=e.none();A=u.create({analytics:t(["message"])});R.events.failed.bind(function(a){a=s.get("error.code.spelling.not.found",[a.resource()]);
a=h(a);v.ui().displayBanner(a)});H.events.ready.bind(function(a){H.body().each(function(a){w.set(a,"spellcheck",!1)});a=a.api().doc();a=q(a,H,O,I,K,M,J,Q,R);R.refresh();P=e.some(a)});B=l(v,B,D.menu);B.events.change.bind(function(a){(n.isOn(a.language())?L:R.clear)();H.uiChanged();H.domChanged()});var S=function(a){b.each(a,function(a){a=c.single(a);U(a)})},L=D.scanView?function(){var a=N.sections();S(a)}:R.clear;D.scanView&&N.events.onChange.bind(L);var U=function(a){P.each(function(b){b.scan(a)})};
return r({events:A.registry,destroy:function(){H.body().each(function(a){w.remove(a,"spellcheck")});P.each(function(a){a.destroy()});Q.destroy();R.destroy()},state:function(){return{words:Q.state(),service:R.state(),language:e.some(v.profile().spelling().get())}},init:a.noop,hasDropdown:B.hasDropdown,hasAutocorrect:a.constant(D.autocorrect),ui:B.ui,check:function(a,b,d,e){a=k.isWrap(a)?g.toLeaf(a,b):f.point(a,b);d=k.isWrap(d)?g.toLeaf(d,e):f.point(d,e);d=c.range(a.element(),a.offset(),d.element(),
d.offset());U(d)},scanView:L,situation:function(b){var c={primary:a.constant([]),secondary:a.constant([]),submenus:a.constant({})};return P.fold(a.constant(c),function(a){return a.situation(b)})},lock:function(a){return P.fold(function(){return a()},function(b){return b.lock(a)})},assign:function(a){P.each(function(b){b.assign(a.bind(x.firstChild).or(a))})},handle:function(a){P.each(function(b){b.handle(a)})},lookup:R.lookup,name:a.constant("spelling")})}});l("5z",["b3","b4"],function(c,d){return function(b,
a,e,f,g){return(!0===e.service?d:c)(b,a,e,f,g)}});l("j7","58 7 du 1y l 2o 2a".split(" "),function(c,d,b,a,e,f,g){var h=function(d){d=e.fromTag(d);var g=e.fromText(c.zeroWidth());f.append(d,g);a.add(d,b.styleSpan());return d},k=function(a,b,c,d){var e=h(d);g.firstChild(e).each(function(d){a(c,e);b.setSelection(d,0,d,0)})};return{nu:h,insertAfter:d.curry(k,f.after),insertBefore:d.curry(k,f.before)}});l("ba","b c 7 s ex j1 j8 7f g6 bf 1b 21 at".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q){var r=d.detect().browser,
s=function(a){return p.isText(a)&&0!==q.get(a).trim().length},t=function(a){return p.isElement(a)&&"br"===p.name(a)},u=function(a){return c.exists([s,t],function(b){return b(a)})},v=function(a){return p.isText(a.element())&&0===a.offset()||p.isElement(a.element())},w=function(c,d,f){var h=b.constant(c);return(!1===d&&v(c)?a.some(!0):a.none()).fold(h,function(a){return g.seekLeft(c.element(),u,f).fold(h,function(a){return e.point(a,p.isText(a)?q.get(a).length:0)})})};return{context:function(c){return c.getSelection().bind(function(c){if(c.collapsed()){var d=
c.startContainer();return l.cell(d).bind(function(a){return l.table(d).map(function(e){return{cell:b.constant(a),table:b.constant(e),start:b.constant(d),selection:b.constant(c)}})})}return a.none()})},selectedCells:function(a,c){return h.cata(a.get(),b.constant([]),b.identity,function(a){var b;if(r.isFirefox()){b=a.startContainer();var d=a.startOffset();b=f.toLeaf(b,d)}else b=e.point(a.startContainer(),a.startOffset());if(r.isFirefox())var d=a.endContainer(),g=a.endOffset(),d=f.toLeaf(d,g);else d=
e.point(a.endContainer(),a.endOffset());(a=a.collapsed())||(a=n.eq(b.element(),d.element()));a=w(d,a,c);return k.sharedOne(l.cell,[b.element(),a.element()]).toArray()})}}});l("rl",[],function(){var c=function(c){return{fold:c}};return{none:function(d){return c(function(b,a,c,f){return b(d)})},first:function(d){return c(function(b,a,c,f){return a(d)})},middle:function(d,b){return c(function(a,c,f,g){return f(d,b)})},last:function(d){return c(function(b,a,c,f){return f(d)})}}});l("j9","b 7 s rl bf 1b".split(" "),
function(c,d,b,a,e,f){var g=function(a){return e.table(a).bind(function(g){g=e.cells(g);var l=c.findIndex(g,function(b){return f.eq(a,b)});return 0>l?b.none():b.some({index:d.constant(l),all:d.constant(g)})})};return{next:function(b){return g(b).fold(function(){return a.none(b)},function(c){return c.index()+1<c.all().length?a.middle(b,c.all()[c.index()+1]):a.last(b)})},prev:function(b){return g(b).fold(function(){return a.none()},function(c){return 0<=c.index()-1?a.middle(b,c.all()[c.index()-1]):
a.first(b)})}}});l("b5","j6 7 j7 fz ba j9".split(" "),function(c,d,b,a,e,f){return{upOrLeft:function(g){e.context(g).each(function(e){f.prev(e.cell()).fold(d.noop,function(){a.isFirstInContent(g,e.table())&&c.isLeft(e.cell(),e.selection())&&b.insertBefore(g,e.table(),"p")},d.noop,d.noop)})},right:function(g){e.context(g).each(function(e){f.next(e.cell()).fold(d.noop,d.noop,d.noop,function(){a.isLastInContent(g,e.table())&&c.isRight(e.cell(),e.selection())&&b.insertAfter(g,e.table(),"p")})})}}});l("b7",
"b 85 7 hf 75 ba 76 7d 55 46 47 2n 2y".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q){var r={cssNamespace:"table-cell-border",i18nNamespace:"table.cell.border",property:"border-width",tag:"table",specials:[["thin","medium","thick"]]};return{widget:function(s){var t=s.content(),u=a(r);u.initLayout();d.dialog(u.element(),e.translate("aria.table.cell.border.size"));var v=l.create({done:k([]),abort:n([],u.events.abort)});u.events.close.bind(function(a){v.trigger.done();t.focus()});u.events.action.bind(function(a){var d=
q.active();t.focus();var e=f.selectedCells(s.selections(),t.isRoot);c.each(e,function(c){p.set(c,"border-width",a.value());p.getRaw(c,"border-style").fold(function(){p.set(c,"border-style","solid")},b.noop)});d.each(q.focus)});var w=function(){u.enter();u.open()};return{element:u.element,destroy:u.destroy,name:b.constant("cellborderwidth"),textkey:b.constant(e.key("table.cell.border.width")),tooltip:g.get,label:b.constant(!1),updateWidget:function(a){var c=f.selectedCells(s.selections(),t.isRoot);
0<c.length?(a.enable(),a=p.getRaw(c[0],"border-width").fold(h.off,h.on),u.updateInlineWidget({size:b.constant(a)},"1px")):a.disable();w()},events:v.registry,open:w,close:u.close}}}});l("b8","85 cz 4z 7 50 ja 75 ba 33 76 55 46 2u 4b 2o".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s){var t=q.immutableBag(["name","textkey","menuTextkey","action","shortname"],[]);return{widget:function(q,v){var w=t(v),x=q.content(),y=b.div();c.label(y,g.translate(w.textkey()));r.add(y,[k.resolve("palette-cell-colors"),
k.resolve(w.shortname()+"-cell-colors")]);var z=f.create();s.append(y,z.element());var A="."+k.resolve(w.shortname()+"-cell-colors")+" ."+k.resolve("palette-detail-action"),D=f.makeLayout(y,A,{}),A=D.layout(),B=p.create({done:n([]),abort:n([])});z.events.selected.bind(function(a){a=a.value();var b=h.selectedCells(q.selections(),x.isRoot);w.action()(b,a);B.trigger.done()});var C=function(){F.enter();D.refresh()},F=d(y,[A]);F.events.exit.bind(function(){B.trigger.abort()});return{element:a.constant(y),
destroy:function(){F.destroy();z.destroy()},name:a.constant(w.name()),textkey:a.constant(g.key(w.textkey())),tooltip:l.get,label:a.constant(!1),updateWidget:function(a){e.isHighContrast(q.smartview())?a.disable():(0===h.selectedCells(q.selections(),x.isRoot).length?a.disable():a.enable(),C())},events:B.registry,open:C,close:function(){B.trigger.done()}}}}});l("rm",["1a","2n","l","2o","3c"],function(c,d,b,a,e){return{render:function(f,g,h,k){var l=b.fromTag("table");d.setAll(l,{"border-collapse":"collapse",
width:"100%"});c.set(l,"border","1");var n=b.fromTag("tbody");a.append(l,n);for(var p=[],q=0;q<f;q++){for(var r=b.fromTag("tr"),s=0;s<g;s++){var t=q<h||s<k?b.fromTag("th"):b.fromTag("td");s<k&&c.set(t,"scope","row");q<h&&c.set(t,"scope","col");a.append(t,b.fromTag("br"));d.set(t,"width",100/g+"%");a.append(r,t)}p.push(r)}e.append(n,p);return l}}});l("jb",["s","7x","rm","bf"],function(c,d,b,a){return{insert:function(e,f,g,h,k){return e.getSelection().bind(function(l){var n=b.render(f,g,h,k);d.insertAtCursor(e,
[n]).each(function(b){a.firstCell(n).each(function(a){e.setSelection(a,0,a,0)})});return c.some(n)})}}});l("y7","85 f8 ag 4z lb 7 75 33 1a 1y 4b 2y 2o".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q){return function(r){var s=e(r);l.add(s.element(),h.resolve("choice-button"));var t=a.span();k.set(s.element(),"title",g.translate("table."+r));k.set(s.element(),"tabindex","-1");c.button(s.element(),g.translate("table."+r),!1);var u=b.describe(s.element(),g.translate("aria.table.headerdescription"));q.append(s.element(),
u);s.events.click.bind(function(){p.focus(s.element());d.pressed(s)});n.add(t,[h.resolve(r),"ephox-pastry-icon-content","ephox-polish-icon"]);s.content({element:f.constant(t)});return s}});l("14h",["7","rv"],function(c,d){var b=d.resolve("table-picker"),a=d.resolve("table-picker-row"),e=d.resolve("table-picker-cell"),f=d.resolve("table-picker-button");return{table:c.constant(b),row:c.constant(a),cell:c.constant(e),button:c.constant(f)}});l("14g","g7 14h 1a 4e 31 dp".split(" "),function(c,d,b,a,e,
f){var g="."+d.cell(),h="."+d.row();return{cells:function(b){return a.descendants(b,g)},rows:function(b){return a.descendants(b,h)},grid:function(a,d,e){d=f(b.get(a,d),10);a=f(b.get(a,e),10);return c.grid(d,a)},button:function(a){return e.child(a,"."+d.button()).getOr(a)}}});l("15m",["7","g7","1s"],function(c,d,b){var a=function(a,c,e,k,l){k=b.max(k,b.min(l,a.row()));a=b.max(c,b.min(e,a.column()));return d.address(k,a)},e=function(b,e){var h=a(b,1,e.maxCols,1,e.maxRows),k;k=d.address(h.row()+1,h.column()+
1);k=a(k,e.minCols,e.maxCols,e.minRows,e.maxRows);return{selection:c.constant(h),full:c.constant(k)}};return{resize:function(a,b){var c;c=d.address(a.row()+1,a.column()+1);return e(c,b)},grow:function(a,b,c,k){a=d.address(a.rows()+c,a.columns()+b);return e(a,k)}}});l("14i","g7 15m 2y 64 3l 2r 1s".split(" "),function(c,d,b,a,e,f,g){return function(g,k){var l=!1,n=function(a,c,d){var e=d.full();e.row()===c.rows()&&e.column()===c.columns()||a.setSize(e.row(),e.column());a=a.setSelection(d.selection().row(),
d.selection().column());b.focus(a)};return{on:function(){l=!0},off:function(){l=!1},mousemove:function(b,q,r,s){if(l){var t;t=f.get(b.element());var u=a.get(b.element());t=c.dimensions(t,u);u=e.absolute(b.element());u=c.coords(u.left(),u.top());r=c.coords(r,s);r=g.pickerCell(u,t,q,r);r=d.resize(r,k);n(b,q,r)}},manual:function(a,b,c,e){l&&(c=d.grow(b,c,e,k),n(a,b,c))}}}});l("11u","b xc 85 7 55 46 g7 14g 14h 14i rv td 1a 1y 4b 3u l 2y 2o 3c g9 2q dp".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,
s,t,u,v,w,x,y,z,A){return function(d,B,C){var F=f.create({select:e(["rows","cols","rowHeaders","columnHeaders"])}),E=u.fromTag("table");b.presentation(E);b.hidden(E,!0);r.add(E,k.table());var G=u.fromTag("tbody");w.append(E,G);var H=0,I=0,K=function(a,b){H=b;I=a;J()},J=function(){z.empty(G);var a=C.ids();p.repeat(I,function(b){var c=u.fromTag("tr");r.add(c,k.row());var d=p.repeat(H,function(c){var d=u.fromTag("td");r.add(d,n.resolve("cell-"+c+"-"+b));r.add(d,k.cell());var e=u.fromTag("button");q.set(e,
"type","button");q.set(e,"aria-labelledby",a[b][c]);r.add(e,k.button());w.append(d,e);return d});x.append(c,d);w.append(G,c)})},M=function(a,b){var d=h.cells(E);c.each(d,function(a){r.remove(a,n.resolve("picker-selected"))});d=h.rows(E).slice(0,a);c.each(d,function(a,d){var e=h.cells(a).slice(0,b);c.each(e,function(a,b){var c=h.grid(E,"data-picker-header-row","data-picker-header-col"),c=d<c.rows()||b<c.columns()?[n.resolve("picker-selected"),n.resolve("picker-header")]:[n.resolve("picker-selected")];
s.add(a,c)})});q.set(E,"data-picker-col",b-1);q.set(E,"data-picker-row",a-1);d=h.cells(d[d.length-1]).slice(0,b);return h.button(d[d.length-1])},O=function(){var a=A(q.get(E,"data-picker-col"),10)+1,b=A(q.get(E,"data-picker-row"),10)+1;return g.grid(b,a)},N={element:a.constant(E),setSelection:M,setSize:K},Q=l(d,B),R=t.bind(E,"mousemove",function(a){Q.mousemove(N,g.grid(I,H),a.raw().pageX,a.raw().pageY)}),P=function(a,b){Q.manual(N,O(),a,b)},S=y.realClick.bind(E,function(a){L();a.raw().preventDefault()}),
L=function(){var a=h.grid(E,"data-picker-row","data-picker-col"),b=h.grid(E,"data-picker-header-row","data-picker-header-col");F.trigger.select(a.rows()+1,a.columns()+1,b.rows(),b.columns())};return{element:function(){return E},destroy:function(){S.unbind();R.unbind();z.remove(E)},setSize:K,setHeaders:function(a,b){q.set(E,"data-picker-header-row",a);q.set(E,"data-picker-header-col",b)},setSelection:M,on:Q.on,off:Q.off,reset:function(){K(B.minRows,B.minCols);var a=M(1,1);v.focus(a)},refresh:function(){var a=
O();J();return M(a.rows(),a.columns())},events:F.registry,sendLeft:a.curry(P,d.isRtl()?1:-1,0),sendRight:a.curry(P,d.isRtl()?-1:1,0),sendUp:a.curry(P,0,-1),sendDown:a.curry(P,0,1),sendExecute:L}}});l("y8",["11u"],function(c){return function(d,b,a){return c(d,b,a)}});l("rn","xc 85 f8 ag gk 8s kp ah 4z 7 s y7 75 33 46 47 y8 1a 1y 4b l 2y 3c 31".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u,v,w,x,y,z,A,D){return function(k,C){var F=c.createHelp(C.maxRows,C.maxCols,{row:function(a){return q.translate("table.picker.rows",
a)},col:function(a){return q.translate("table.picker.cols",a)}}),E=u(k,C,F);d.label(E.element(),q.translate("table.picker.label"));var G=a.describe(E.element(),q.translate("table.picker.describepicker")),H=y.fromTag("div");v.set(H,"tabIndex","-1");d.group(H);x.add(H,[r.resolve("insert-table"),r.resolve("toolbar-menu")]);var I=y.fromTag("div");w.add(I,r.resolve("table-controls"));d.toolbarGroup(I,q.translate("table.picker.header"));var K=p("row-header"),J=p("column-header");A.append(I,[K.element(),
J.element()]);A.append(H,[I,E.element(),G,F.help()]);var M=function(){E.setHeaders(K.selected()?1:0,J.selected()?1:0);var a=z.active(),b=E.refresh();a.each(function(a){z.hasFocus(a)||z.focus(b)})},F=function(a,b){return function(){b();return n.some(!0)}},F=f.single(E.element(),[g.basic(h.LEFT()[0],F("left",E.sendLeft)),g.basic(h.RIGHT()[0],F("right",E.sendRight)),g.basic(h.UP()[0],F("up",E.sendUp)),g.basic(h.DOWN()[0],F("down",E.sendDown)),g.rule(g.inSet(h.SPACE().concat(h.ENTER())),F("execute",E.sendExecute))],
n.none());F.events.enter.bind(function(){z.focus(E.element())});var O=f.flow(I,{item:l.constant(".ephox-pastry-statebutton")},e.flow({trigger:function(a){return D.descendant(a,".ephox-pastry-button").map(function(a){a.dom().click();return a})}})),N=f.multiple(H,[F,O]);K.events.click.bind(function(){O.clickFocus(K.element());M()});J.events.click.bind(function(){O.clickFocus(J.element());M()});I=s.create({select:t(["rows","cols","rowHeaders","columnHeaders"],E.events.select),exit:t([],N.events.exit)});
return{element:function(){return H},destroy:function(){N.destroy();K.destroy();J.destroy();E.destroy()},setSize:E.setSize,setSelection:E.setSelection,on:function(){E.on();N.enter()},off:function(){E.off();N.isFocused()&&N.exit()},reset:function(){E.setHeaders(0,0);K.deselect();b.release(K.element());J.deselect();b.release(J.element());E.reset()},events:I.registry}}});l("jc",["6","rn","55","46"],function(c,d,b,a){return function(e,f){var g=a.create({enabled:b(["enabled"]),select:b(["rows","cols","rowHeaders",
"columnHeaders"]),insert:b(["table"]),done:b([]),abort:b([])}),h=c.merge({minCols:7,maxCols:10,minRows:4,maxRows:10},f),k=d(e,h);k.events.select.bind(function(a){l();g.trigger.done();g.trigger.select(a.rows(),a.cols(),a.rowHeaders(),a.columnHeaders())});k.events.exit.bind(function(){l();g.trigger.abort()});var l=function(){k.off()};return{element:k.element,open:function(){k.reset();k.on()},close:l,destroy:function(){k.destroy()},events:g.registry}}});l("ro",["g7","1s"],function(c,d){var b=function(a,
b,f,g){var h=a.width()/b.columns();a=a.height()/b.rows();f=d.floor(f/h);g=d.floor(g/a);return c.address(g,f)};return{findCellRtl:function(a,c,d,g){var h=a.x()+c.width()-g.x();a=g.y()-a.y();return b(c,d,h,a)},findCellLtr:function(a,c,d,g){var h=g.x()-a.x();a=g.y()-a.y();return b(c,d,h,a)}}});l("jd",["7","ro"],function(c,d){var b={pickerCell:d.findCellLtr,isRtl:c.constant(!1)},a={pickerCell:d.findCellRtl,isRtl:c.constant(!0)};return{ltr:b,rtl:a}});l("b9","7 jb jc 75 76 46 47 jd bf".split(" "),function(c,
d,b,a,e,f,g,h,k){return{widget:function(k,l){var p=k.content(),q=b(k.region().uiDirection().isRtl()?h.rtl:h.ltr,l),r=k.undo(),s=f.create({done:g([],q.events.done),abort:g([],q.events.abort)});q.events.select.bind(function(a){r.save();d.insert(p,a.rows(),a.cols(),a.rowHeaders(),a.columnHeaders()).each(function(a){r.save();p.domChanged()});p.toEditing()});return{element:q.element,name:c.constant("table"),textkey:c.constant(a.key("insert.table")),menuTextkey:c.constant(a.key("table.menu")),tooltip:e.get,
label:c.constant(!1),updateWidget:function(a){p.getSelection().each(function(b){a.enable()});q.open()},destroy:q.destroy,events:s.registry,open:q.open,close:q.close}}}});l("y9",["31"],function(c){return{set:function(c,b){c.dom().checked=b},find:function(d){return c.descendant(d,"input:checked")}}});l("rp","2z 7 gm 75 1a y9 l 2o 3c 2q 32".split(" "),function(c,d,b,a,e,f,g,h,k,l,n){return function(){var p=g.fromTag("fieldset"),q=g.fromHtml("<legend>"+a.translate("table.border")+"</legend>");h.append(p,
q);var r=c.generate(""),q=function(a){var b=g.fromTag("input");e.setAll(b,{type:"radio",id:"tableborder"+a+r,value:a,name:r});return b},s=q("1"),t=q("0");k.append(p,[s,g.fromHtml('<label for="tableborder1'+r+'">'+a.translate("border.on")+"</label>"),t,g.fromHtml('<label for="tableborder0'+r+'">'+a.translate("border.off")+"</label>")]);var u=b.radio(p,'input[type="radio"]',"input:checked");return{element:function(){return p},get:function(){return f.find(p).map(function(a){return n.get(a)})},select:function(a){f.set(t,
!1);f.set(s,!1);a.each(function(a){"0"===a?f.set(t,!0):"1"===a&&f.set(s,!0)});u.refresh()},keylayout:d.constant(u),destroy:function(){l.remove(p)}}}});l("rq","b gk 8s 4z 7 s lc pi 33 1a 1y 3u 3c 2q 32".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s){return function(){var t=a.div();n.add(t,k.resolve("table-size-controls"));var u=g.input("table-width","table.width"),v=g.input("table-height","table.height");c.map([u,v],function(a){l.set(a.input(),"placeholder","Auto")});q.append(t,[u.element(),v.element()]);
var w=[b.input(u.input(),d.input({})),b.input(v.input(),d.input({}))],x=function(a){var b=a.target();h.validateField(b,"width",f.some("px")).fold(function(){h.highlight(b)},function(a){h.dehighlight(b)})},y=[p.bind(u.input(),"input",x),p.bind(v.input(),"input",x)];return{element:function(){return t},get:function(){return h.validate([h.rule(u.input(),"width",f.some("px")),h.rule(v.input(),"height",f.some("px"))])},set:function(a){a.width().bind(e.curry(s.set,u.input()));a.height().bind(e.curry(s.set,
v.input()))},keylayouts:e.constant(w),highlight:h.highlight,dehighlight:e.curry(h.clearHighlights,t),destroy:function(){r.remove(t);c.each(y,function(a){a.unbind()})}}}});l("jh","7 s rr 2u di 1a 2n do 2f 2q 31".split(" "),function(c,d,b,a,e,f,g,h,k,l,n){var p=a.immutableBag(["floatval","caption","summary","border","dimensions"],[]),q=function(a){a=f.get(a,"border");return"0"===a||"1"===a?d.some(a):d.none()},r=function(a){var b=g.getRaw(a,"width");a=g.getRaw(a,"height");return{width:c.constant(b),
height:c.constant(a)}};return{divine:function(a,b){var c=h.divine(b),d=f.get(b,"summary"),e=n.child(b,"caption").map(function(b){b=k.get(b);return a.filterHtml(a.output(),b)}).getOr(""),g=q(b),l=r(b);return p({floatval:c,caption:e,summary:d,border:g,dimensions:l})},properties:p,apply:function(a,c){c.floatval().each(function(b){e.runFloat(a,b)});c.border().each(function(b){f.set(a,"border",b)});""===c.summary()?f.remove(a,"summary"):b.setSummary(a,c.summary());""===c.caption()?n.child(a,"caption").each(l.remove):
b.setCaption(a,c.caption());b.setDimensions(a,c.dimensions())}}});l("jg","gk 8s 4z 7 s gl gm lc pj rp rq jh 75 gn 33 55 46 1y 3c 32".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u,v,w,x){return function(y,z){var A=u.create({ok:t(["properties"]),close:t([])}),D=f(z);D.setTitle(q.translate("table.dialog"));v.add(D.element(),s.resolve("dialog-narrow"));var B=b.div(),C=k("table.float"),F=h.input("tablesummary","table.summary"),E=h.input("tablecaption","table.caption"),G=n(),H=l();w.append(B,[E.element(),
F.element(),H.element(),G.element(),C.element()]);var I=r.okCancel("table");I.events.ok.bind(function(){O()});I.events.cancel.bind(function(){D.hide();A.trigger.close()});D.events.close.bind(function(){D.hide();A.trigger.close()});D.setContent(B);D.setControls(I.element());var K=g.setup(D,I,[d.input(E.input(),c.input({})),d.input(F.input(),c.input({})),H.keylayout()].concat(G.keylayouts()).concat([C.keylayout()])),J=function(){return G.get().map(function(b){b={width:a.constant(e.some(b.width())),
height:a.constant(e.some(b.height()))};return p.properties({floatval:C.get(),caption:M(E.input()),summary:M(F.input()),border:H.get(),dimensions:b})})},M=function(a){return x.get(a).trim()},O=function(){J().fold(function(a){G.highlight(a)},function(a){A.trigger.ok(a)})};return{element:D.element,events:A.registry,open:function(){D.show();K.enter()},represent:function(a){a=p.divine(y,a);C.select(a.floatval());void 0!==a.summary()&&x.set(F.input(),a.summary());void 0!==a.caption()&&x.set(E.input(),a.caption());
G.set(a.dimensions());H.select(a.border())},execute:O,destroy:function(){C.destroy();G.destroy();H.destroy();I.destroy();D.destroy();K.destroy()},hide:function(){K.exit();D.hide()}}}});l("bc","b g3 7 s d9 jf jg jh 75 9m ji 2u jj bf jk 1a 21 31".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u,v){return function(w,x,y,z,A,D,B,C){var F=a.none(),E=function(a,b){var c=q.getWidth(a);q.setWidth(a,c/2);q.setWidth(b,c/2)},G={"tablemenu-delete-table":f.erase,"delete-row":f.execute(x,s.eraseRows,b.noop,
C),"delete-column":f.execute(x,s.eraseColumns,b.noop,C),"make-header-column":f.execute(x,s.makeColumnHeader,b.noop,C),"make-header-row":f.execute(x,s.makeRowHeader,b.noop,C),"unmake-header-column":f.execute(x,s.unmakeColumnHeader,b.noop,C),"unmake-header-row":f.execute(x,s.unmakeRowHeader,b.noop,C),"insert-row-before":f.execute(x,s.insertRowBefore,b.noop,C),"insert-row-after":f.execute(x,s.insertRowAfter,b.noop,C),"insert-column-before":f.execute(x,s.insertColumnBefore,E,C),"insert-column-after":f.execute(x,
s.insertColumnAfter,E,C),"tablemenu-table-properties":function(b,c,d){b=g(w,B);var f=l.generate(A,b,["properties"]);f.events.ok.bind(function(a){y.activate();F.bind(function(b){r.table(b.element()).each(function(b){e.runTransaction(y,D,function(){h.apply(b,a.properties())})})});f.destroy()});f.events.close.bind(function(a){f.destroy();y.activate();y.focus()});y.deactivate();f.represent(c);f.open();return a.none()},"cell-merge":f.execute(x,s.mergeCells,b.noop,C),"cell-unmerge":f.execute(x,s.unmergeCells,
b.noop,C),"cell-split-cols":f.execute(x,s.splitCellIntoColumns,E,C),"cell-split-rows":f.execute(x,s.splitCellIntoRows,b.noop,C)},H=p.immutable("value","text","attrs");return{handle:function(a){y.doc().each(function(b){F.each(function(b){var c=b.element();r.table(c).each(function(c){var f=t.get(a,"data-ephox-gopher-item-value"),g=G[f];void 0!==g&&e.runTransaction(y,D,function(){g(y,c,b).each(function(a){y.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset());d.clear(c)})})})})})},
assign:function(a){F=a.bind(function(a){return r.cell(a).bind(function(a){return v.ancestor(a,"table").map(function(b){return n.forMenu(z,b,a)})}).orThunk(function(){return r.notCell(a).map(function(a){return n.notCell(a)})})})},situation:function(a){a=F.map(function(a){var b=a.element(),b=r.cell(b).isSome();return c.flatten([b?[H("tablemenu-row",k.translate("table.context.row.menu"),{})]:[],b?[H("tablemenu-column",k.translate("table.context.column.menu"),{})]:[],[H("tablemenu-table",k.translate("table.context.table.menu"),
{})],a.mergable().isSome()?[H("cell-merge",k.translate("table.context.cell.merge"),{})]:[],a.unmergable().isSome()?[H("cell-unmerge",k.translate("table.context.cell.unmerge"),{})]:[],b&&1===a.selection().length&&a.mergable().isNone()&&a.unmergable().isNone()?[H("cell-split-cols",k.translate("table.context.cell.split-cols"),{}),H("cell-split-rows",k.translate("table.context.cell.split-rows"),{})]:[]])}).getOr([]);var d=F.map(function(a){var d=a.element();a=function(a,c,e){var f=a+"-menu",g="th"===
u.name(d)?"unmake":"make",h="make"===g?"header":"normal";c=[H("insert-"+a+"-before",k.translate("table.context."+a+"."+c),{}),H("insert-"+a+"-after",k.translate("table.context."+a+"."+e),{}),H("delete-"+a,k.translate("table.context.common.delete"),{}),H(g+"-header-"+a,k.translate("table.context.common."+h),{})];return{textkey:b.constant(k.key("table.context."+a+".title")),value:b.constant(f),items:b.constant(c)}};var e={textkey:b.constant(k.key("table.context.table.title")),value:b.constant("table-menu"),
items:b.constant([H("tablemenu-table-properties",k.translate("table.context.table.properties"),{}),H("tablemenu-delete-table",k.translate("table.context.common.delete"),{})])};return c.flatten([[a("row","insertabove","insertbelow")],[a("column","insertleft","insertright")],[e]])}).getOr([]);return{primary:b.constant(a),secondary:b.constant(d),submenus:b.constant({"tablemenu-row":"row-menu","tablemenu-column":"column-menu","tablemenu-table":"table-menu"})}},destroy:b.noop}}});l("bd","jl 7 s jf ji j9 bf jk 4e 31".split(" "),
function(c,d,b,a,e,f,g,h,k,l){var n=function(f,n,r,s){return r.fold(b.none,b.none,function(a,d){return b.some(c(d,0,d,0))},function(b){return g.table(b).bind(function(g){a.execute(f,h.insertRowAfter,d.noop,s)(n,g,e.noMenu(b));g=k.descendants(g,"tr");if(0<g.length)return l.descendant(g[g.length-1],"td,th").map(function(a){return c(a,0,a,0)})})})};return{forward:function(a,b,c,d){return n(a,b,f.next(c),d)},backward:function(a,b,c,d){return n(a,b,f.prev(c),d)}}});l("ya",["55","46"],function(c,d){return function(){var b=
d.create({drag:c(["xDelta","yDelta"])});return{mutate:function(a,c){b.trigger.drag(a,c)},events:b.registry}}});l("rt",["s","55","46","ya"],function(c,d,b,a){return function(){var e=b.create({drag:d(["xDelta","yDelta","target"])}),f=c.none(),g=a();g.events.drag.bind(function(a){f.each(function(b){e.trigger.drag(a.xDelta(),a.yDelta(),b)})});return{assign:function(a){f=c.some(a)},get:function(){return f},mutate:g.mutate,events:e.registry}}});l("jn","in 7 s 55 46 rt ru rv r6 1a 1y 2n 3u 21 6o 31 dp".split(" "),
function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u){return function(v,w,x){var y=f(),z=c.transform(y,{}),A=b.none(),D=function(a,c){return b.from(l.get(a,c))};y.events.drag.bind(function(a){D(a.target(),"data-row").each(function(b){b=k.getInt(a.target(),"top");p.set(a.target(),"top",b+a.yDelta()+"px")});D(a.target(),"data-column").each(function(b){b=k.getInt(a.target(),"left");p.set(a.target(),"left",b+a.xDelta()+"px")})});var B=function(a,b){var c=k.getInt(a,b),d=u(l.get(a,"data-initial-"+b),10);return c-
d};z.events.stop.bind(function(){y.get().each(function(a){A.each(function(b){D(a,"data-row").each(function(c){var d=B(a,"top");l.remove(a,"data-initial-top");I.trigger.adjustHeight(b,d,u(c,10))});D(a,"data-column").each(function(c){var d=B(a,"left");l.remove(a,"data-initial-left");I.trigger.adjustWidth(b,d,u(c,10))});g.refresh(v,b,x,w)})})});var C=function(a,b){I.trigger.startAdjust();y.assign(a);l.set(a,"data-initial-"+b,u(p.get(a,b),10));n.add(a,h.resolve("resizer-bar-dragging"));p.set(a,"opacity",
"0.2");z.go(v.parent())},F=q.bind(v.parent(),"mousedown",function(a){g.isRowBar(a.target())&&C(a.target(),"top");g.isColBar(a.target())&&C(a.target(),"left")}),E=q.bind(v.view(),"mouseover",function(a){if("table"===r.name(a.target())||s.ancestor(a.target(),"table"))A="table"===r.name(a.target())?b.some(a.target()):t.ancestor(a.target(),"table"),A.each(function(a){g.refresh(v,a,x,w)})}),G=q.bind(v.view(),"mouseout",function(a){"table"===r.name(a.target())&&g.hide(v)}),H=q.bind(v.view(),"dragstart",
function(a){a.raw().preventDefault()}),I=e.create({adjustHeight:a(["table","delta","row"]),adjustWidth:a(["table","delta","column"]),startAdjust:a([])});return{destroy:function(){F.unbind();E.unbind();G.unbind();H.unbind();z.destroy();g.destroy(v)},refresh:function(a){g.refresh(v,a,x,w)},on:z.on,off:z.off,hideBars:d.curry(g.hide,v),showBars:d.curry(g.show,v),events:I.registry}}});l("bg",["55","46","jm","jn","jo"],function(c,d,b,a,e){return function(f,g){var h=e.height,k=a(f,g,h),l=d.create({beforeResize:c([]),
afterResize:c([]),startDrag:c([])});k.events.adjustHeight.bind(function(a){l.trigger.beforeResize();var c=h.delta(a.delta(),a.table());b.adjustHeight(a.table(),c,a.row(),h);l.trigger.afterResize()});k.events.startAdjust.bind(function(a){l.trigger.startDrag()});k.events.adjustWidth.bind(function(a){l.trigger.beforeResize();var c=g.delta(a.delta(),a.table());b.adjustWidth(a.table(),c,a.column(),g);l.trigger.afterResize()});return{on:k.on,off:k.off,hideBars:k.hideBars,showBars:k.showBars,destroy:k.destroy,
events:l.registry}}});l("60","b 7 s b5 b6 b7 b8 b9 75 ba bb 7a bc bd 6v be bf bg 2n".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u,v,w){return function(x,y){var z=x.content(),A=x.keyboard(),D=x.undo(),B=x.smartview(),C=function(){return N.getOr(t.only(z.element()))},F=q(x.filter(),x.region(),z,x.selections(),A,D,B.uiContainer(),C),E=function(a,b,d){D.save();c.each(b,function(b){a(b,d)});D.save();z.focus()},G=d.curry(E,function(a,b){w.set(a,"background-color",b)}),E=d.curry(E,function(a,b){w.set(a,
"border-color",b);w.getRaw(a,"border-style").fold(function(){w.set(a,"border-style","solid")},d.noop)}),G=s.ui({"table.widget":d.curry(h.widget,x,y),"cell.palette":d.constant({items:[{type:"widget",build:d.curry(g.widget,x,{action:G,shortname:"background",name:"cellbackgroundcolor",textkey:"table.cell.color.background",menuTextkey:"table.cell.color.background"})},{type:"widget",build:d.curry(g.widget,x,{action:E,shortname:"border",name:"cellbordercolor",textkey:"table.cell.color.border",menuTextkey:"table.cell.color.border"})},
{type:"widget",build:d.curry(f.widget,x)}],updatePalette:function(a){var c=l.selectedCells(x.selections(),z.isRoot),e=d.curry(a.show,b.some(k.translate("table.context.palette.show")));a=d.curry(a.hide,b.some(k.translate("table.context.palette.hide")));(0<c.length?e:a)()&&x.ui().refresh()}})},d.identity),H=function(a){var b=a.stopper();p.context(z).bind(function(c){p.cata(c,function(c){u.cell(c.startContainer()).each(function(c){(a.shift()?r.backward:r.forward)(x.region(),z,c,C).fold(b,function(a){b();
z.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())})})},d.noop)})},I=function(b){a.upOrLeft(z)},K=function(b){a.right(z)},J=A.editor();J.on();J.events.tab.bind(H);J.events.left.bind(I);J.events.up.bind(I);J.events.right.bind(K);var M=z.cursor(),O=b.none(),N=b.none();z.events.ready.bind(function(a){a=e.get(z,B,a.api().doc());N=b.some(a);var c=n(x.region()),d=v(a,c);d.events.beforeResize.bind(D.save);d.events.afterResize.bind(function(){z.focus();D.save();z.domChanged();
M.restore()});d.on();d.events.startDrag.bind(M.save);O=b.some(d);a=x.selections();a.events.beforeScan.bind(function(){d.hideBars()});a.events.afterScan.bind(function(){d.showBars()})});return{ui:G,destroy:function(){F.destroy();O.each(function(a){a.destroy()});J.off();J.events.tab.unbind(H);J.events.left.unbind(I);J.events.up.unbind(I);J.events.right.unbind(K);J.destroy()},handle:F.handle,assign:F.assign,situation:F.situation,name:d.constant("table")}}});l("61",["7","55","46"],function(c,d,b){return function(){var a=
b.create({pasteUpload:d([]),uploadAssets:d(["assets"]),registerBlob:d(["id","blob","bloburl","data"])});return{destroy:c.noop,events:a.registry,pasteUpload:a.trigger.pasteUpload,uploadAssets:a.trigger.uploadAssets,registerBlob:a.trigger.registerBlob}}});l("rw",["b","7","2u"],function(c,d,b){var a=b.immutable("withSpaces","withoutSpaces"),e=function(a){return c.filter(a.split(/[\.,-\/#!$%\^&\*;:{}=\-_`~()\s\u00A0]/gim),function(a){return 0<a.length}).length};return{count:function(b){return{words:d.constant(e(b)),
characters:d.constant(a(b.length,b.replace(/[\s\u00A0]/gim,"").length))}}}});l("jp","8s 7 na gl 75 33 rw 55 46 4b l 2y 83 v".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r){return function(s,t){var u=s().uiContainer(),v=k.create({close:h([])}),w=a(u);w.setTitle(e.translate("wordcount.dialog"));l.add(w.element(),[f.resolve("dialog-wordcount"),f.resolve("dialog-narrow")]);var u=t().body().getOrDie(),x=b.toText(u,d.constant(!1)),y=q.get(u),u=t().getSelectedText().getOr(""),x=g.count(x),y=y.length,u=
g.count(u),z=n.fromHtml(r.supplant('<table class="ephox-polish-tabular ephox-polish-wordcount-table" tabindex="-1">    <thead>        <tr>            <th scope="col"> ${headerCounts}&nbsp;</th>            <th scope="col"> ${headerDocument}&nbsp;</th>            <th scope="col"> ${headerSelection}&nbsp;</th>        </tr>    </thead>    <tbody>        <tr>            <td>${wordCountLabel}&nbsp;</td>            <td class="ephox-polish-wordcount-document-words">${documentCountWords}&nbsp;</td>            <td class="ephox-polish-wordcount-selection-words">${selectionCountWords}&nbsp;</td>        </tr>        <tr>            <td>${wordCountCharsNoSpacesLabel}&nbsp;</td>            <td class="ephox-polish-wordcount-document-charsnospaces">${documentCharactersNoSpaces}&nbsp;</td>            <td class="ephox-polish-wordcount-selection-charsnospaces">${selectionCharactersNoSpaces}&nbsp;</td>        </tr>        <tr>            <td>${wordcountCharsLabel}&nbsp;</td>            <td class="ephox-polish-wordcount-document-chars">${documentCountCharsWithSpaces}&nbsp;</td>            <td class="ephox-polish-wordcount-selection-chars">${selectionCountCharsWithSpaces}&nbsp;</td>        </tr>    </tbody></table>',
{headerCounts:e.translate("wordcount.counts"),headerDocument:e.translate("wordcount.document"),headerSelection:e.translate("wordcount.selection"),wordCountLabel:e.translate("wordcount.words"),wordCountCharsNoSpacesLabel:e.translate("wordcount.charactersnospaces"),wordcountCharsLabel:e.translate("wordcount.characters"),documentCountWords:x.words(),selectionCountWords:u.words(),documentCharactersNoSpaces:x.characters().withoutSpaces(),selectionCharactersNoSpaces:u.characters().withoutSpaces(),documentCountCharsWithSpaces:y,
selectionCountCharsWithSpaces:u.characters().withSpaces()}));w.setContent(z);var A=c.multiple(w.element(),[]),u=function(){D();v.trigger.close()},D=function(){w.hide()};w.events.close.bind(u);A.events.exit.bind(u);return{element:w.element,events:v.registry,open:function(){w.show();A.enter();p.focus(z)},destroy:function(){A.destroy();w.destroy()},hide:D}}});l("bh",["jp","55","46"],function(c,d,b){return function(a,e){var f=c(a,e),g=b.create({close:d([])});f.events.close.bind(function(){g.trigger.close();
f.destroy()});return{show:function(){f.open()},events:g.registry}}});l("62",["7","75","6v","bh"],function(c,d,b,a){return function(e){var f=e.content,g=e.smartview;return{ui:b.ui({"wordcount.general":{toggle:!1,value:"wordcount",textkey:d.key("wordcount.open"),action:function(){var b=a(g,f);b.events.close.bind(function(){e.ui().tabstrip.focused()||f().focus()});e.content().hideInlineSelection();b.show()},updateGeneral:c.noop,icon:!0,shortcut:!1,hasPopup:!1,hasDialog:!0}}),destroy:c.noop}}});l("65",
["1q","a","b"],function(c,d,b){var a=["img","br","hr","input"],e=["_moz_dirty"],f=["script","style"],g={"<":"&lt;",">":"&gt;","&":"&amp;","\u00a0":"&nbsp;"},h=/[<>&\u00A0]/g,k=function(a){return a.replace(h,function(a){return g[a]||a})},l=function(a,c){for(var d="<"+a,f="",g=0;g<c.length;g++){var h=c[g];h.specified&&!b.contains(e,h.name)&&(f+=" "+h.name+'="'+h.value.replace(/"/g,"&quot;")+'"')}return d+f},n=function(a){var c="";b.each(a,function(a){c+=q(a)});return c},p=function(a){var c="";b.each(a,
function(a){c+=a.textContent});return c},q=function(d){var e=d.nodeType;if(e===c.ELEMENT){var e=d.nodeName.toLowerCase(),g=d.childNodes;d=d.attributes;0===g.length&&b.contains(a,e)?e=l(e,d)+" />":(g=b.contains(f,e)?p(g):n(g),e=l(e,d)+">"+g+"</"+e+">");return e}if(e===c.TEXT)return k(d.textContent);if(e==c.COMMENT)return"\x3c!--"+k(d.textContent)+"--\x3e";throw"unsupported node type "+d.nodeType;};return{writeNode:function(a){if(!d.isObject(a))throw"sugarNode parameter must be an object";return q(a.dom()).replace(/^<body.*?>/,
"").replace(/<\/body>$/,"")},writeChildren:function(a){if(!d.isObject(a))throw"sugarNode parameter must be an object";return n(a.dom().childNodes)}}});l("3z","58 b 1o 6 7 s 51 52 3j 42 59 5a 5b 5c 5d 5e 5f 5g 5h 5i 5j 5k 5l 5m 5n 5o 5p 5q 5r 5s 5t 5u 5v 5w 5x 5y 5z 54 60 61 62 1f 63 55 46 47 2u 1a l 64 2a 2r 65 66 3t".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u,v,w,x,y,z,A,D,B,C,F,E,G,H,I,K,J,M,O,N,Q,R,P,S,L,U,V,X,W,Y,ca,Z,aa,ea,ha,fa,ia,ga,ja){var la=ca.immutableBag("accessibility formatting alignindent directionality table font parlance media imageEdit blocktag specialchar wordcount link linkvalidator horizontalrule help fileupload findreplace plaincodeview macros spelling".split(" "),
[]);return function($,ca,da){var ba=function(a,b,c,d){return b.bundled?a.apply(void 0,d.concat([b])):c()},T=v($,ca,da);ca=ba(q,$.formatting,R.basic,[T]);var ma=ba(p,$.alignindent,R.basic,[T]),oa=ba(s,$.directionality,R.basic,[T]),sa=ba(P,$.table,R.table,[T]),ya=ba(r,$.blocktag,R.basic,[T]),za=ba(y,$.font,R.basic,[T]),Ca=ba(L,$.wordcount,R.basic,[T]),La=ba(H,$.media,R.basic,[T]),Ma=ba(N,$.specialchar,R.basic,[T]),qa=ba(E,$.linkvalidator,R.linkvalidator,[T,da.linkvalidator]),Aa=ba(F,$.link,R.basic,
[T,qa]),Ja=ba(D,$.horizontalrule,R.basic,[T]),Ka=ba(z,$.help,R.dialog,[T]),na=function(a,b,c,d){var e=$.ui.locale.code,g=void 0!==e?e:U.get();return(!0===b.bundled?V.determine(g):f.none()).fold(function(){return c()},function(c){var f=T.profile().spelling().get(),f=void 0!==e||!0!==b.menu&&f!==V.offKey()||!1===f?c:f;return a.apply(void 0,d.concat([b,c,f]))})}(Q,$.spelling,R.spelling,[T,da.spelling]),Na=ba(K,$.parlance,R.basic,[T,na]),Oa=ba(M,$.resize,R.basic,[T]),ta=ba(G,$.macros,R.macros,[T,na,da.macros]),
Da=ba(A,$.highlighter,R.highlighter,[T,ta]),Ga=ba(t,$.draganddrop,R.draganddrop,[T]),ua=S(),va=ba(C,$.imageEdit,R.imageEdit,[T,ua]),Ha=ba(B,$.image,R.image,[T]),Pa=ba(w,$.fileupload,R.dialog,[T,ua,va.insertResample(),Ga]),Qa=ba(O,$.smartclipboard,R.basic,[T,ua,va.insertResample()]),Ra=ba(I,$.mentions,R.basic,[T]),Sa=ba(x,$.findreplace,R.basic,[T]),Ta=ba(n,$.accessibility,R.basic,[T]),Ua=ba(u,$.embed,R.basic,[T]);da=function(){var a=T.content();return a.body().fold(a.getContent,function(b){b=aa.fromDom(b.dom().cloneNode(!0));
var d=T.filter();d.filterDom(d.output(),b);b=ia.writeNode(b);b=a.extract(b);d=new ga(c.zeroWidth(),"g");return b.replace(d,"")})};var Ba=function(a){var b=T.filter(),c=T.content();a=b.filterHtml(b.input(),a);c.resetContent(a);Da.run();qa.refresh();na.scanView();return a},ba=ba(J,{getContent:da,setContent:Ba,bundled:$.plaincodeview.bundled},R.basic,[T]);T.contextmenu().register("table",sa);T.contextmenu().register("imageEdit",va);T.contextmenu().register("image",Ha);T.contextmenu().register("spelling",
na);T.contextmenu().register("link",Aa);var Ia=la({formatting:ca,alignindent:ma,directionality:oa,table:sa,font:za,imageEdit:va,parlance:Na,blocktag:ya,wordcount:Ca,specialchar:Ma,media:La,link:Aa,linkvalidator:qa,horizontalrule:Ja,help:Ka,fileupload:Pa,findreplace:Sa,accessibility:Ta,plaincodeview:ba,macros:ta,spelling:na});T.content().events.ready.bind(function(){T.ui().init(T.keyboard(),T.undo(),Ia);na.init(T.content());Da.run();qa.refresh()});T.content().events.loaded.bind(function(){ja(function(){wa.trigger.loaded();
Ea()},0)});var wa=W.create({loaded:X([]),ready:Y([],T.content().events.ready),focus:X([]),dirty:Y([],T.laundry().events.dirty),internal:X(["command","data"]),paint:X(["dimensions"])}),Ea=T.content().isInline()?e.noop:function(){T.content().body().each(function(a){a=ha.documentElement(a);var b=T.content().element();wa.trigger.paint(g({width:fa.get(b),docWidth:fa.get(a),height:ea.get(b),docHeight:ea.get(a)}))})};T.content().events.paint.bind(Ea);T.content().events.nodeChanged.bind(Ea);T.content().events.focus.bind(function(){wa.trigger.focus()});
T.internalevents().events.internal.bind(function(a){var b=a.command();"insertLink"===b&&(a=Z.get(a.data(),"href"),wa.trigger.internal(b,a))});ba=T.content().isInline()?function(){var a=T.ui(),b=T.content(),c=a.state(),c=void 0!==c.toolbar&&void 0!==c.toolbar.drag?c.toolbar.drag.isSome():!1;b.activate();b.focus();T.viewablearea().setOn();c||a.position();a.refresh()}:e.noop;ca=T.content().isInline()?function(){T.content().deactivate();T.content().blur();T.viewablearea().setOff()}:e.noop;return l.internal({activateInline:ba,
deactivateInline:ca,element:T.ui().element,viewport:T.ui().viewport,connect:T.ui().connect,focus:T.content().focus,blur:T.content().blur,getContent:da,toTransfer:e.compose(h.changed,da),setContent:function(a){var b=T.undo();b.disable(function(){var c=Ba(a);b.reset(c)});T.laundry().setDirty(!1)},insertHtmlAtCursor:T.insertFilteredHtmlAtCursor,isDirty:T.laundry().isDirty,setDirty:T.laundry().setDirty,fromTransfer:function(a){var b=T.undo();h.cata(a,function(a){b.disable(function(){Ba(a)});b.replaceTop()},
function(a){Ba(a);b.save()})},uploader:e.constant(ua),state:function(){var b=T.state();return a.merge(b,{spelling:na.state(),macros:ta.state(),filters:T.filter().customFilters().state(),linkvalidator:qa.state()})},destroy:function(){T.content().deactivate();var a=d.map(b.values(Ia),e.apply);d.each(a.concat([Ua,Ha,va,na,Oa,ta,Da,ua,Qa,Ra,T,Ga]),function(a){a.destroy()})},events:wa.registry,communication:T.communication,fullscreen:T.fullscreen,content:T.content,ui:T.ui,undo:T.undo,smartview:T.smartview,
keyboard:T.keyboard,filter:T.filter,operations:T.operations,macros:e.constant(ta),getMode:k.pencil,isPrettyPrinting:function(){return!0===$.content.prettyprint}})}});ma.define("bi",[],function(){return'/*\n * Keep this file as small as possible.\n * It is injected into the JavaScript, so it needs to be tiny.\n */\n\n/*\n * Animate from 0 to 359, not 0 to 360, as they are the same and FireFox does nothing\n *\n * Until we have token replacement, manual shorthand for "ephox-polish-spin"\n */\n\n@keyframes e-p-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(359deg);\n  }\n}\n\n/* Until we have token replacement, manual shorthand for "ephox-polish-spinner-img" */\n\n.e-p-s-img {\n  animation: e-p-spin 2s infinite linear;\n  width: 30px;\n  height: 30px;\n  margin: 2px 2em 0 auto;\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAIVBMVEUAAABAQEBDQ0NERERERERCQkJDQ0NERERDQ0NEREREREQTPu3mAAAACnRSTlMAENDPwGBwsKB/qy4kVgAAAFpJREFUCNdjAAImAwYI4FoApooFuBYwWgAZXoZMCsJLgAyhpQwMUYpABmMiA4OYAAMCaC2GklqLwIxFMAmoYkmQYmGQdkOQgYpMBkIgA4tAVmggLAU7QwFIAADjyQ3FWhtneAAAAABJRU5ErkJggg==") 0/cover;\n}'});
l("69","s 2m l 2o 2q 83 bi".split(" "),function(c,d,b,a,e,f,g){var h=0,k=c.none();return{add:function(){if(0===h){var e=b.fromTag("style");f.set(e,g);a.append(d.body(),e);k=c.some(e)}h++},remove:function(){0!==h&&0===--h&&(k.each(e.remove),k=c.none())}}});l("40","6 7 s 67 52 42 68 54 69 45 6a 4m 2n l 64 2f 2o 2q 6b 3t".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u,v,w,x){return function(y,z){var A=h.state(z),D=p(null),B=r.fromTag("div"),C=function(){t.set(B,'<div class="e-p-s-img"></div>');
F()},F=void 0===y.content.inline?d.noop:function(){if(!1===y.ui.toolbar.visible)q.set(B,"display","none");else{var a={isInline:d.constant(!0),element:d.constant(y.content.inline)},a=n.offsetFrom(a,B,s.get(B),y.ui);q.setAll(B,{position:"absolute",left:a.left+"px",top:a.top-4+"px"})}},E=null,G=d.die("API unavailable while the editor is loading"),H={body:d.constant(b.none()),doc:G,execCommand:G,getSelectedText:G,focus:G,deactivate:d.noop,blur:d.noop},I=void 0===y.content.inline?D.get:function(){return t.get(y.content.inline)};
return f.internal({activateInline:F,blur:G,communication:d.constant(g(y)),connect:function(a){E=x(C,1E3);u.append(a,B);k.add();return!1},content:d.constant(H),deactivateInline:d.noop,destroy:function(){w(E);k.remove();v.remove(B)},element:d.constant(B),events:l.events(),failure:function(){w(E);k.remove();t.set(B,"<p>Unable to load editor. See browser console for details.</p>")},filter:A.filter,focus:G,fromTransfer:function(a){e.cata(a,D.set,D.set)},fullscreen:h.fullscreen,getContent:I,getMode:G,insertHtmlAtCursor:G,
isDirty:A.laundry.isDirty,isPrettyPrinting:function(){return!0===y.content.prettyprint},keyboard:l.keyboard,macros:A.macros,operations:l.operations,setContent:function(a){void 0===y.content.inline?D.set(a):t.set(y.content.inline,a);A.laundry.setDirty(!1)},setDirty:A.laundry.setDirty,smartview:l.smartview,state:function(){var b=I(),b=a.isEmpty(b)?{}:{content:{clean:b,marked:b},undo:{initial:{clean:b,marked:b}}};return c.deepMerge(A.getState(),b)},toTransfer:d.compose(e.changed,D.get),ui:l.ui,undo:d.constant(h.undo()),
uploader:d.constant(h.uploader()),viewport:d.constant(B)})}});l("6c",["3w","3z","3j"],function(c,d,b){var a=b.pencil(),e=b.code(),f=function(a){var b=a.old().toTransfer();a.nu().fromTransfer(b)},g={transition:f,factory:c,style:b.pencil},h={transition:f,factory:d,style:b.code};return{goingToDesign:function(a){return a===e},alternate:function(b){return b===e?a:e},detect:function(a){return a===e?g:h}}});l("6d","4l 7 s p 6c 3g 55 46 o".split(" "),function(c,d,b,a,e,f,g,h,k){var l=function(a,b){return{destroy:d.noop,
init:d.noop,setMode:d.die("Code view is not enabled, cannot switch modes"),events:h.create({change:g([]),ready:g([])}).registry}},n=function(l,m){var n=m.css+"/codemirror.css",s=h.create({change:g([]),ready:g(["type"])}),t=b.none(),u=function(){var a=f.load.codeview(m.js).map(function(a){return a.map(d.constant(!0))});t=b.some(a)},v=function(b){b(a.value(!0))};return{init:function(a){t.fold(function(){c.addStylesheet(n,v).get(function(b){b.fold(function(a){k.error(a);k.error("Code View disabled due to error loading stylesheet")},
function(){u();s.trigger.ready(a)})})},function(b){s.trigger.ready(a)})},setMode:function(a){return t.fold(function(){throw"Cannot set mode before Code View has loaded";},function(b){b.get(function(b){b.fold(function(b){s.trigger.ready(a);k.error(b);k.error("Code View non-functional due to error downloading script file")},function(){var b=e.detect(a),c=l.swap(b.factory,{},{});s.trigger.change();b.transition(c);c.destroy()})})})},events:s.registry,destroy:d.noop}};return function(a,b){return(!0===
b.bundled?n:l)(a,b)}});l("6e","85 bj 4z bk 73 3j 75 33 55 46 1a 2m 1y 4b 2n bl 3u 2o 6m 2q 2a 2r".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u,v,w,x,y,z){return function(d,p){var y=l.create({change:k(["type"])}),z=w.removeClasses([h.resolve(f.none()),h.resolve(f.wait()),h.resolve(f.pencil()),h.resolve(f.code())]),F=b.div();c.hidden(F,"true");r.add(F,[h.resolve("html-switch-wrapper"),h.resolve("layer-editor")]);var E=b.div();r.add(E,[h.resolve("html-switch"),h.resolve("icon")]);v.append(F,
E);var G=function(a){z(E);q.add(E,h.resolve(a));n.set(E,"data-icon",a);n.remove(E,"title")},H=function(a,b){var c=n.get(E,"data-icon");a!==c&&(N=c,G(a),n.set(E,"title",b))},I=function(a){p.showButton&&a!==f.none()?H(a,g.translate("toolbar.switch-"+a)):G(f.none());J.control.unblock()},K=e.unbindable(),J=a.tap(function(){y.trigger.change(n.get(E,"data-icon"))});p.showButton&&K.set(u.bind(F,"click",J.instance));var M=function(a){v.append(a,F)},O=t.onDirection("right","left"),N=f.none();I(N);return{render:M,
destroy:function(){x.remove(F);K.clear()},switchto:I,spin:function(){H(f.wait(),g.translate("loading.wait"));J.control.block()},stopSpin:function(){"spin"!==N&&I(N)},init:function(a){var b=d.get();M(b.viewport());b.events.paint.bind(function(a){a=a.dimensions();a=a.width()-a.docWidth();var c=O(b.element());s.set(F,c,a+"px")});I(f.none())},events:y.registry}}});l("jq","ae b rx 4z 7 50 75 1f c9 33 ca cb cc cd as l0 1a 2m 1y 4b 3u l 2o 2q q".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u,v,w,
x,y,z,A,D,B){return function(C,B,E,G,H,I){var K=z.fromTag("div");G.updateUi(K);x.add(K,[s.editorContainer(),"ephox-textbox-font",l.resolve("layer-editor"),l.resolve("fullscreen-maximized")]);u.set(K,"lang",h.get());k.addClasses(K);var J=t(),M=c.toolbar(J,g.translate);B.events.toolbar.bind(M.enter);M.events.exit.bind(C.focus);var O=n(),N=v.body(),Q=a.div();w.add(Q,l.resolve("socket"));var R=d.map(["dragover","drop"],function(a){return y.bind(Q,a,function(a){a.kill()})});J.integrate(K,M,O,Q);q.build(K,
H.sideBar,H.bottomBar);var P=b({layerClass:l.resolve("layer-below-editor"),background:"rgba(255, 255, 255, 0.92)"}),S=l.resolve("body-fullscreen"),L=H.autoresize?p(H):r();L.events.change.bind(function(a){M.refresh();E.refresh()});return{element:function(){return K},socket:function(a){A.append(Q,a.element())},viewport:e.constant(Q),connect:function(a){P.show();w.add(N,S);A.append(a,K);f.detect(K);L.hookup(C.element());return!0},destroy:function(){d.each(R,function(a){a.unbind()});M.destroy();w.remove(N,
S);D.remove(K);P.destroy();L.destroy();O.destroy()},banners:O.element,displayBanner:O.display,hideBanner:O.hide,position:function(){J.init(M,O,Q,H,I)},refresh:function(){J.update();M.refresh()},toolbar:M}}});l("bm",["7","6x","jq","70"],function(c,d,b,a){return{build:function(a,f,g,h,k,l,n,p){var q=b(a,f,g,l,n,p),r=h.full(q);r.init();return{element:q.element,socket:q.socket,viewport:q.viewport,init:function(b,c,f){c=r.config(a.isInline(),c,k,f);d.setup(q,l,a,b,g,c);r.loaded()},connect:q.connect,destroy:function(){q.destroy();
r.destroy()},displayBanner:q.displayBanner,hideBanner:q.hideBanner,position:c.noop,refresh:q.refresh,tabstrip:q.toolbar,state:c.constant(p)}},bounds:function(){return a.view}}});l("6f","s 6c 3z bm 57 55 46 2m 1b 2a q".split(" "),function(c,d,b,a,e,f,g,h,k,l,n){return function(n){var q=c.none(),r=c.none(),s=g.create({maximize:f([]),restore:f([])}),t=function(c){q=l.parent(n.get().element());q.getOrDie("maximize called on editor that is not in the DOM.");n.swap(b,{ui:{layout:a,isFullScreen:!0},fullscreen:{layout:void 0!==
c.layout()?c.layout():e}}).destroy();var d=n.get();d.fullscreen().select();d.connect(h.body());d.events.ready.bind(function(){d.focus();s.trigger.maximize()})},u=function(a){n.swap(b,{ui:{layout:void 0!==a.layout()?a.layout():e,isFullScreen:!1}}).destroy();var c=n.get();c.fullscreen().deselect();a=q.getOrDie("restore called on editor that was not previously in the DOM.");n.get().connect(a);c.events.ready.bind(function(){c.focus();s.trigger.restore()})};return{init:function(a){if(d.goingToDesign(a)){a=
n.get();var b=n.get().element();r.each(function(a){if(k.eq(a,b))throw"Fullscreen init called twice on the same instance";});r=c.some(b);a.fullscreen().events.maximize.bind(t);a.fullscreen().events.restore.bind(u)}},destroy:function(){},events:s.registry}}});l("bn",["a","b"],function(c,d){return function(){var b=[];return{setCallback:function(a){c.isFunction(a)&&b.push(a)},done:function(a){d.each(b,function(b){b.apply(null,[a])});b=[]}}}});l("jr","ry rz 2z gw 7 s dn 1a".split(" "),function(c,d,b,a,
e,f,g,h){var k=function(a){return a.result};return{blobTob64:function(a,b){var c=h.get(b,g.blobId());h.remove(b,g.blobId());a.get(c).each(function(a){h.remove(b,g.blobId());h.set(b,"src",k(a.data()))})},b64ToBlob:function(e,k){var l=h.get(k,"src"),q=function(a){console.warn("Unable to read Base64 image data: ",a,l);return f.none()};e.lookupByData(l).fold(function(){var g=c.toBlob(l);return d.cata(g,f.none,q,function(c){var d=a.createObjectURL(c),g=b.generate("image");return f.some(e.add(g,c,d,{result:l}))})},
f.some).each(function(a){h.set(k,g.blobId(),a.id());h.set(k,"src",a.objurl())})}}});l("bo",["b","jr","dn","ci"],function(c,d,b,a){return{configure:function(e,f){e.addSelector(e.output(),"img["+b.blobId()+"]",function(a){c.each(a,function(a){d.blobTob64(f,a)})});e.addSelector(e.input(),"img:not(["+b.blobId()+"])[src]",function(a){c.each(a,function(a){d.b64ToBlob(f,a)})});e.add(e.output(),b.uploadInProgress(),a.removeClass);e.add(e.history(),b.uploadInProgress(),a.removeClass);e.add(e.internal(),b.uploadInProgress(),
a.removeClass)},blobId:b.blobId}});l("bt","b gh 7 s p dn 4n 2u 1a 1y 6m 31 o".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q){var r=h.immutable("image","blobInfo"),s=g.generate([{failure:["error"]},{success:["result","images","blob"]}]),t=function(a,b,d,e){c.each(b,function(a){k.set(a,"src",e.location);k.remove(a,f.blobId())});return w(a,d)},u=function(a,b,c,d,e,g){var h=a.lookupByData(e.result).getOrThunk(function(){return a.add(b,c,d,e)});k.set(g,f.blobId(),h.id());return r(g,h)},v=function(a,b){var c=
k.get(b,f.blobId());return a.get(c).fold(function(){return e.error(c)},function(a){return e.value(r(b,a))})},w=function(a,b){return a.get(b).fold(function(){return e.error("Internal error with blob cache")},function(c){a.remove(b);return e.value(c)})};return{prepareForUpload:function(b,c,d){var e=b.isActive(c);b.register(d,c);l.add(d,f.uploadInProgress());return e?a.none():a.some(c)},handleUpload:function(a,d,e,g,h,k,l){var m=function(){q.error("Internal error with blob cache",h);l(s.failure({status:b.constant(666)}))};
a.upload(k,h,function(a){var b=d.findById(g,h);c.each(b,n.removeClass(f.uploadInProgress()));a.fold(function(a){l(s.failure(a))},function(a){t(e,b,h,a).fold(m,function(c){l(s.success(a,b,c))})});d.report(h,b,a.isValue())})},registerAssets:function(a,f,g){return c.bind(g,function(c){return d.cata(c,function(b,c,d,g){return p.descendant(f,'img[src="'+d+'"]').fold(function(){return[e.error("Image that was just inserted could not be found: "+d)]},function(f){return[e.value(u(a,b,c,d,g,f))]})},b.constant([]))})},
registerBlob:u,findBlobs:function(a,b,d){d=a.findAll(d);return a.inProgress()?[]:c.map(d,function(a){return v(b,a)})}}});l("bp","gh gv 3s 9o gx h0 9t 8z bt".split(" "),function(c,d,b,a,e,f,g,h,k){var l=function(l){var m=function(b){var m=b.image(),p=b.blobInfo(),t=f.changedBounds(m);return h.resampleAction(t,p.blob(),function(f){if(f===p.blob())return e.pure(b);var h=a.updater(a.keepResample,m),t=g.applyEdit(m);f=d.single(f).bind(t).map(h);return e.map(f,function(a){return c.cata(a,function(a,b,c,
d){return k.registerBlob(l,a,b,c,d,m)},function(a,c,d){return b})})})};return function(a){return b.mapM(a,m)}};return{instance:function(a,c){return!0===a.immediate?b.pure:l(c)}}});l("s0",["s","75"],function(c,d){var b={400:"errors.http.400",401:"errors.http.401",403:"errors.http.403",404:"errors.http.404",407:"errors.http.407",409:"errors.http.409",413:"errors.http.413",415:"errors.http.415",500:"errors.http.500",501:"errors.http.501"};return{get:function(a,e){return c.from(b[a]).map(function(a){return d.translate(a,
e)})}}});l("js",["a","7","r","90","s0"],function(c,d,b,a,e){var f=function(b){return c.isString(b)&&""!==b.trim()?{description:d.constant(b),link:d.constant(null)}:a.get("error.imageupload.generic")},g=function(b,c){var f=c.status();return e.get(f,b).fold(function(){var c;c=0===f?"error.imageupload.cors":400<=f&&500>f?"error.code.images.not.found":"error.imageupload";return a.get(c,[b])},function(a){return{description:d.constant(a),link:d.constant(null)}})},h=function(a,c){return{instance:function(){return b.cached(function(b){b=
c(b);a.show(b)})}}};return{simple:function(a){return h(a,f)},url:function(a,b){return h(a,d.curry(g,b))}}});l("s1",["6","n4","vl","7"],function(c,d,b,a){return{json:function(){return{get:function(b,c,g,h){d.get(b,c,g||a.identity,h)},post:function(b,c,g,h){d.ajax(b,"POST",c,g||a.identity,h)},ajaxData:function(e,f,g,h,k,l){f=c.merge(l||{},{data:void 0!==f?b.stringify(f):""});d.ajax(e,g,h,k||a.identity,f)}}}}});l("yc",["2i"],function(c){return function(){return new (c.getOrDie("FormData"))}});l("s2",
["a","b","yc","2u","v"],function(c,d,b,a,e){var f=["jpg","png","gif","jpeg"];return{failureObject:a.immutable("message","status","contents"),getFilename:function(a,b){var k;c.isString(a.name)&&!e.endsWith(a.name,".tmp")?k=a.name:c.isString(a.type)&&e.startsWith(a.type,"image/")?(k=a.type.substr(6),k=d.contains(f,k)?b+"."+k:b):k=b;return k},buildExtra:function(a,c,d){var e=b();e.append(a,c,d);return{data:e,contentType:!1,processData:!1}}}});l("s3","a 6 pl vl p s2 v ia".split(" "),function(c,d,b,a,
e,f,g,h){return function(k){var l=function(){var a=k.url,b=a.lastIndexOf("/"),a=0<b?a.substr(0,b):a,a=void 0===k.basePath?a:k.basePath;return g.endsWith(a,"/")?a:a+"/"}();return{upload:function(g,p,q){g=g.blob();var r=function(a,b,c){q(e.error(f.failureObject(a,b,c)))},s=f.getFilename(g,p);p=d.merge(!0!==k.credentials?{}:{xhrFields:{withCredentials:!0}},f.buildExtra("image",g,s));b.post(k.url,{},function(b){var d;try{var f=a.parse(b);if(c.isString(f.location))d=f.location;else{r("JSON response did not contain a string location",
500,b);return}}catch(g){d=b}b=d.split(/\s+/);b=h.resolve(l,1===b.length&&""!==b[0]?b[0]:s);q(e.value({location:b}))},r,p)}}}});l("s4","a p s2 2u o 3t".split(" "),function(c,d,b,a,e,f){var g=a.immutable("id","filename","blob","base64");return function(a){return{upload:function(k,l,n){var p=function(a){n(d.error(a))},q=function(a){c.isString(a)?n(d.value({location:a})):(e.error("Image upload result was not a string"),p(""))},r=b.getFilename(k.blob(),l),s=g(l,r,k.blob(),k.data().result);f(function(){a(s,
q,p)},0)}}}});l("ju",["s2","s3","s4"],function(c,d,b){return{direct:function(a){return d(a)},custom:function(a){return b(a)},failureObject:function(a,b,d){return c.failureObject(a,b,d)},getFilename:function(a,b){return c.getFilename(a,b)},buildExtra:function(a,b,d){return c.buildExtra(a,b,d)}}});l("jt",["6","p","s1","ju"],function(c,d,b,a){return function(e,f){return{upload:function(g,h,k){g=g.blob();h=a.getFilename(g,h);h=c.merge(e.headers(),a.buildExtra("image",g,h));b.json().post(f,function(a){k(d.value(a))},
function(b,c,e){k(d.error(a.failureObject(b,c,e)))},h)}}}});l("bq","a 7 js jt ju 2u".split(" "),function(c,d,b,a,e,f){var g=f.immutable("uploader","errors");return{choose:function(f,k,l){return!0!==f.bundled?g({upload:d.die},{instance:d.constant(d.die("Image Upload is disabled"))}):c.isString(f.service)?g(a(l,f.service),b.url(k,f.service)):c.isFunction(f.handler)?g(e.custom(f.handler),b.simple(k)):g(e.direct(f.direct),b.url(k,f.direct.url))}}});l("br",["1o","gw","s","2u"],function(c,d,b,a){var e=
a.immutable("id","blob","objurl","data");return function(){var a={},g=function(a){d.revokeObjectURL(a.objurl())};return{add:function(b,c,d,g){c=e(b,c,d,g);return a[b]=c},get:function(c){return b.from(a[c])},remove:function(b){var c=a[b];delete a[b];void 0!==c&&g(c)},lookupByData:function(d){return b.from(c.find(a,function(a){return a.data().result===d}))},destroy:function(){c.each(a,g);a={}}}}});l("bs","b jv dn 55 46 1a 4e".split(" "),function(c,d,b,a,e,f,g){var h="data-"+d.resolve("image-upload"),
k=function(a,b){return g.descendants(a,"img["+h+'="'+b+'"]')},l=function(a){return g.descendants(a,"img:not(["+h+"])["+b.blobId()+"]")};return function(){var b=[],d=[],g=e.create({complete:a(["response"])}),r=function(a){b=c.filter(b,function(b,c){return b!==a});!1===s()&&(g.trigger.complete(d),d=[])},s=function(){return 0<b.length};return{findById:k,findAll:l,register:function(a,c){f.set(a,h,c);b.push(c)},report:function(a,b,e){c.each(b,function(a){f.remove(a,h);d.push({success:e,element:a.dom()})});
r(a)},inProgress:s,isActive:function(a){return c.contains(b,a)},events:g.registry}}});l("6g","a b s 8t bn a5 6c bo bp bq 55 46 br bs bt o".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t){return function(u,v){var w=q(),x=e(),y=r(),z=a(u.ui),A=l.choose(v,z,u.communication()),D=A.uploader(),B=A.errors(),C=k.instance(v,w),F=p.create({begin:n([]),finish:n([])}),E=function(a){F.trigger.finish();x.done(a)};y.events.complete.bind(function(a){E(a.response())});var G=function(a,b,c,d){s.handleUpload(D,
y,w,a,b,c,function(a){a.fold(function(a){d(a)},I)})},H=function(a){u.content().body().each(function(b){var c=B.instance(),e=s.registerAssets(w,b,a.assets());d.each(e,function(a){a.fold(function(a){t.error(a)},function(a){!0===v.immediate&&K(b,a,c)})})})},I=function(a,b,c){u.undo().rewrite(c.objurl(),a.location)},K=function(a,b,c){!1!==v.bundled&&s.prepareForUpload(y,b.blobInfo().id(),b.image()).each(function(d){G(a,d,b.blobInfo(),c)})},J=function(a){d.each(a,function(a){y.report(a,b.none(),!1)})},
M=function(a,b){var c=f.partition(b),e=c.values;J(c.errors);var g=B.instance();C(e).get(function(b){b=f.partition(b);0<b.errors.length&&(z.showKey("imageedit.generic"),t.error("Image resample on upload errors: ",b.errors),J(b.errors));d.each(b.values,function(b){K(a,b,g)})})},O=function(a){c.isFunction(a)&&x.setCallback(a);!0!==v.bundled?E([]):u.content().body().fold(function(){E([])},function(a){F.trigger.begin();var b=s.findBlobs(y,w,a);0!==b.length||y.inProgress()?M(a,b):E([])})};return{init:function(a){g.goingToDesign(a)&&
(a=u.filter(),h.configure(a,w),u.uploader().events.uploadAssets.bind(H),u.uploader().events.pasteUpload.bind(function(){!0===v.immediate&&O()}),u.uploader().events.registerBlob.bind(function(a){var b=a.id(),c=a.blob(),d=a.bloburl();a=a.data();w.add(b,c,d,a)}));z.reset()},events:F.registry,reconstitute:O,destroy:function(){w.destroy()}}}});l("41","b 6c 3j 6d 6e 6f 6g".split(" "),function(c,d,b,a,e,f,g){return function(h,k,l,n){var p=f(h),q=g(k,l.imageupload),r=a(h,l.codeview),s=e(h,l.codeview),t=[p,
q,s],u=t.concat([r]);p.events.restore.bind(function(){n.restore();w(u,b.code())});p.events.maximize.bind(function(){n.save();w(t,b.code())});q.events.begin.bind(s.spin);q.events.finish.bind(s.stopSpin);r.events.change.bind(function(a){h.get().events.loaded.bind(function(){k.focus()});k.reconnect()});s.events.change.bind(function(a){v(a.type())});r.events.ready.bind(function(a){s.switchto(a.type())});var v=function(a){q.reconstitute(function(){h.get().getMode()!==a&&(s.spin(),r.setMode(a))})},w=function(a,
b){c.each(a,function(a){a.init(b)})};k.events.connected.bind(function(){w(u,d.alternate(k.getMode()))});return{setMode:v,uploadImages:q.reconstitute,destroy:function(){s.destroy();h.destroy();c.each(u,function(a){a.destroy()})}}}});l("43",["c","6"],function(c,d){return{settings:function(b){var a={ui:{toolbar:{display:!1}},spelling:{bundled:!1},highlighter:{bundled:!1},table:{bundled:!1},resize:{bundled:!1},codeview:{bundled:!1},imageEdit:{bundled:!1},imageupload:{immediate:!0},linkvalidator:{bundled:!1}},
a=c.detect().deviceType.isTouch()?a:{};return d.deepMerge(a,void 0===b.content||void 0===b.content.inline?{}:{fullscreen:{bundled:!1},codeview:{bundled:!1},plaincodeview:{bundled:!1}})}}});l("6h","b 7 s 1f 1a bl 21 2a v".split(" "),function(c,d,b,a,e,f,g,h,k){var l={isRtl:d.constant(!1)},n={isRtl:d.constant(!0)},p=function(a){return c.exists(["ar","fa","he"],function(b){return k.startsWith(a,b)})};return function(a){var c=p(a);return{directionAt:function(a){return"rtl"===(g.isText(a)?h.parent(a):
b.some(a)).map(f.getDirection).getOr("ltr")?n:l},uiDirection:function(){return c?n:l},updateUi:function(a){e.set(a,"dir",c?"rtl":"ltr")},destroy:d.noop}}});l("44","6 7 r 1f 6h 55 46".split(" "),function(c,d,b,a,e,f,g){return function(h,k){var l=g.create({create:f(["instance"]),loaded:f([]),focus:f([]),dirty:f([]),internal:f(["command","data"])}),n=b.cached(function(){l.trigger.loaded()}),p=function(a){a.events.focus.bind(function(){l.trigger.focus()});a.events.dirty.bind(function(){l.trigger.dirty()});
a.events.internal.bind(function(a){l.trigger.internal(a.command(),a.data())});a.events.loaded.bind(n)};p(h);var q=h,r=d.compose(e,a.get);return{get:function(){return q},swap:function(a,b){var e=q,f=c.deepMerge(k,b),g=e.state(),f=a(f,r(),g);p(f);l.trigger.create(f);q=f;return{old:d.constant(e),nu:d.constant(f),destroy:function(){e.destroy()}}},destroy:function(){q.destroy()},events:l.registry}}});l("2e","b 3m 6 t 3w 3x 3y 3z 40 41 42 43 44 45 46 47 l o q 36".split(" "),function(c,d,b,a,e,f,g,h,k,l,
n,p,q,r,s,t,u,v,w,x){var y=function(a){return b.deepMerge(f.settings(a.resources),a,p.settings(a))};return function(p,A){var D=y(p);a.setLanguage(D.ui.locale.code);var B=b.deepMerge(f.state(),A),C=d.capture(u.fromDom(w),x),F=k(D,B),E=q(F,D),G=g(E),B=l(E,G,D,C),C=s.create({loaded:t([],E.events.loaded),focus:t([],E.events.focus),dirty:t([],E.events.dirty),connected:t([],G.events.connected),internal:t(["command","data"],E.events.internal)});a.waitForLoad().get(function(b){b=a.getFailures(b);0===b.length?
(E.swap("code"===D.codeview.mode?e:h).destroy(),G.reconnect()):(c.each(b,function(a){v.error(a)}),v.error("Required resources are not available. Cancelling editor load."),F.failure())});return n.external({activateInline:G.activateInline,communication:r.communication,connect:G.connect,content:G.content,deactivateInline:G.deactivateInline,element:G.element,events:C.registry,filter:G.filter,focus:G.focus,getContent:G.getContent,getMode:G.getMode,insertHtmlAtCursor:G.insertHtmlAtCursor,isDirty:G.isDirty,
isPrettyPrinting:G.isPrettyPrinting,keyboard:G.keyboard,macros:G.macros,operations:G.operations,setContent:G.setContent,setDirty:G.setDirty,smartview:G.smartview,state:G.state,ui:G.ui,undo:G.undo,setMode:B.setMode,uploadImages:B.uploadImages,destroy:B.destroy})}});l("1l","2c 24 2d 7 2e 1a 2f".split(" "),function(c,d,b,a,e,f,g){var h=function(a,b,h){var l=c.withOptions(a,h);l.content&&l.content.tabindex&&(0,f.remove)(a,"tabindex",l.content.tabindex);h=e(l);var q=g.get(a),r=f.get(a,"style");b(a);g.set(a,
"");h.connect(a);d.set(h,q);return{polish:h,restore:function(b){g.set(a,b);null!==r&&void 0!==r&&0<r.length?f.set(a,"style",r):f.remove(a,"style");l.content&&l.content.tabindex&&(0,f.set)(a,"tabindex",l.content.tabindex);return a}}};return{replace:function(a,c){return h(a,b.explicit,c)},takeover:function(b,c){return h(b,a.noop,c)}}});l("1c",["1l","6"],function(c,d){return{replace:function(b,a){var e=d.deepMerge(a,{platform:{fillscreen:!0}}),e=c.takeover(b,e);return{polish:e.polish,restore:e.restore}}}});
l("1d","a b 1o 2g i 6 s v n".split(" "),function(c,d,b,a,e,f,g,h,k){var l=function(a,b){var e={};if(void 0===a)return e;d.each(b,function(b){var d=b.name(),d=a[d];void 0!==d&&(b.validate(d),e[b.output()]=c.isArray(b.contents)?l(d,b.contents):d)});return e},n=function(a){return d.map(void 0===a?[]:a,function(a){var b=l,c=e.string("prefix"),d=e.string("suffix"),g;g=[e.string("color"),e.string("background-color")];g=f.merge(e.object("style"),{contents:g});return b(a,[c,d,g])})},p=function(a,b,c){if(void 0===
a[b])return c;e.bool(b).validate(a[b]);return a[b]},q=function(a){if(void 0===a||void 0===a.fonts)return[];a=a.fonts;if(!c.isArray(a))throw new k("The fonts configuration was not an array");var b=function(a,b){console.error(a+" :",b);throw new k(a);};return d.map(a,function(a){if(c.isString(a))return{value:a,text:a};c.isObject(a)||b("The fonts array value was not a string or object",a);void 0!==a.value&&c.isString(a.value)||b("The fonts value configuration was not a string or is undefined",a);void 0===
a.text||c.isString(a.text)||b("The fonts text configuration was not a string",a);void 0!==a.text&&c.isString(a.text)&&0===a.text.length&&b("The fonts text configuration was an empty string",a);return{value:a.value,text:a.text&&0<a.text.length?a.text:a.value}})},r=function(a){a=l(void 0===a?{}:a,[e.arrayOfStrings("languages")]);return void 0===a.languages?{}:{languages:d.map(a.languages,function(a){return a.toLowerCase()})}},s=function(a){return void 0===a.styles?{}:{styles:d.filter(a.styles,function(a){a=
a.rule;return!(void 0===a||"."===a||0<=a.indexOf("..")||0<=a.indexOf("#"))})}},t=function(a){var b=l(a,[e.arrayOfStrings("plugins")]),b=void 0===b.plugins?[]:b.plugins,d=l(a.ui,[e.string("locale","code")]),g=p(a,"autosubmit",!0),t=l(a.content,[e.arrayOfObjects("highlighters")]),u=l(a.paste,[e.string("style"),e.bool("enableFlashImport")]),D=l(a.css,[e.arrayOfStrings("stylesheets"),e.string("documentStyles")]),B=l(a.css,[e.arrayOfObjects("styles")]),C=l(a.ui,[e.bool("shortcuts","features")]),F=r(a.ui),
E;E=a.codeview;E=l(void 0===E?{}:E,[e.bool("enabled"),e.bool("showButton")]);E={bundled:void 0===E.enabled||!0===E.enabled,showButton:void 0===E.showButton||!0===E.showButton};var G;var H=a.spelling;if(void 0===H||void 0===H.url)G={service:!1};else{var I=p(H,"autocorrect",!0);if(c.isString(H.url))G={url:H.url,service:!0,autocorrect:I};else throw new k("Spelling URL was not a string");}var K;H=a.links;if(void 0===H||void 0===H.validation||void 0===H.validation.url)K={};else if(c.isString(H.validation.url))K=
{url:H.validation.url,bundled:!0};else throw new k("Link Validation URL was not a string");var J;H=a.links;if(void 0===H||void 0===H.embed||void 0===H.embed.url)J={};else if(c.isString(H.embed.url))J={url:H.embed.url,bundled:!0};else throw new k("Link Embed URL was not a string");H=a.images;H=f.merge({allowLocal:!0},void 0===H?{}:H);e.bool("allowLocal").validate(H.allowLocal);H=H.allowLocal;I=a.images;I=l((void 0===I?{}:I).editing,[e.bool("enabled"),e.string("proxy"),e.number("preferredWidth"),e.number("preferredHeight")]);
void 0!==I.enabled&&(I.bundled=I.enabled);var M;if(H){var O=a.images;M=!1===I.bundled?!0:!1;O=(void 0===O?{}:O).upload;if(void 0!==O)if(void 0!==O.handler){if(!c.isFunction(O.handler))throw new k("Image Upload Handler was not a function");M={handler:O.handler,immediate:M,bundled:!0}}else{if(!c.isString(O.url))throw new k("Image Upload URL was not a string");M={direct:l(O,[e.string("url"),e.string("basePath"),e.bool("credentials")]),immediate:M,bundled:!0}}else M={}}else M={};var O=a.ui,O=l((void 0===
O?{}:O).toolbar,[e.arrayOfToolbarGroups("items"),e.arrayOfStrings("contextual")]),N;var Q=a.ui;if(void 0===Q)N={};else{if(void 0===Q.toolbar)N={};else if(N=Q.toolbar,void 0!==N.offset){N=N.offset;if(!c.isObject(N)||void 0===N.top||void 0===N.left)throw new k("toolbar offset must be an object with left and top");if(!c.isNumber(N.top)&&!c.isNumber(N.left))throw new k("toolbar offset values must be numbers");N={draggable:!0,offset:{left:N.left,top:N.top}}}else N={};Q=l(Q.toolbar,[e.bool("visible"),e.bool("draggable")]);
N=f.deepMerge(N,Q)}var R;Q=a.basePath;if(void 0===Q)R=void 0;else{if(!c.isString(Q))throw new k("The basePath configuration value was not a string");R=h.removeTrailing(Q,"/")}Q=q(a.ui);a=l(a.ui,[e.string("aria-label","editorName")]);a=f.merge(a,{locale:d,toolbar:N});d=R;Q={faces:Q};t={external:n(t.highlighters)};N=u.style;return{resources:d,plugins:b,spelling:G,linkvalidator:K,embed:J,font:Q,ui:a,shortcuts:C,autosubmit:g,highlighter:t,smartclipboard:{paste:"plain"===N?{forceText:!0}:{officeStyles:"retain"===
N?"merge":void 0!==N?N:"prompt",htmlStyles:"retain"===N?"merge":void 0!==N?N:"merge",allowLocalImages:H,enableFlashImport:!1===u.enableFlashImport?!1:!0}},parlance:F,content:D,imageEdit:I,imageupload:M,blocktag:s(B),fileupload:{allowLocalImages:H},platform:{toolbar:O,allowLocalImages:H},plaincodeview:{bundled:E.bundled},codeview:E}},u=function(c){var d=void 0===c.privateapi?{}:c.privateapi;c=l(d.ui,[e.func("bounds"),e.bool("showHelpHint"),e.domElement("bottomBar"),e.domElement("sideBar")]);var h=
l(d.integration,[e.string("type"),e.string("version")]),n=void 0===d.content?{}:d.content,p=l(n.macros,[e.arrayOfStrings("whitelist")]),n=l(n,[e.string("base")]);void 0!==p.whitelist&&(p.whitelist=g.some(p.whitelist));var q=a.paramList(),r=l(d.mentions,q),s=b.keys(r).length,d=l(d.output,[e.bool("prettyprint")]);if(0<s){if(s!==q.length)throw new k("Missing @mentions configuration. Expected "+q.length+" objects, was "+s);r.bundled=!0}return{ui:c,help:{integration:h},macros:p,content:f.merge(n,d),mentions:r}};
return function(a){a=void 0!==a?a:{};return f.deepMerge(t(a),u(a))}});l("u",["b"],function(c){return{getPath:function(d){var b=document.getElementsByTagName("script");return(b=c.find(b,function(a){return a.src.indexOf(d)===a.src.length-d.length}))?b.src.substring(0,b.src.indexOf(d)):void 0}}});l("5","67rstuv".split(""),function(c,d,b,a,e,f,g){var h=b.cached(function(){return a.from(f.getPath("textboxio.js")).map(function(a){return g.removeTrailing(a,"/")})}),k=function(a){return a+"/resources"};return{setupResources:function(b){return a.from(b.resources).orThunk(h).map(k).fold(d.die("basePath auto detection failed, please provide one in the editor configuration"),
function(a){a=e.load(a);return c.deepMerge(b,{resources:a})})},speculate:function(b){a.from(b).orThunk(h).map(k).each(e.load)}}});l("2v","49 c 7 s 1y 1b 3u l 2y 37 q 3t".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p){var q=function(a,b,c){var d=function(){var a=h.fromDom(n.activeElement);b(a)&&c()};return g.bind(a,"blur",function(){p(d,200)})},r=function(a,b,c){return g.bind(a,"focusout",function(a){u(a,b)&&c()})},s=function(a,b,c){return g.bind(a,"blur",function(a){u(a,b)&&c()})},t=function(){var a=
d.detect();return a.browser.isFirefox()?q:a.browser.isIE()?r:s}(),u=function(b,c){var d=a.from(b.raw().relatedTarget).getOr(n.activeElement);return c(h.fromDom(d))};return{register:function(a,b,d,h){var n=g.bind(a,"focus",function(a){k.hasFocus(a.target())&&d()}),p=t(a,function(d){return!l.closest(d,function(d){return f.eq(a,d)||f.eq(b(),d)||e.has(d,c.magicBox())})},h);return{destroy:function(){n.unbind();p.unbind()}}}}});l("2w",["4a","1a","1y","4b","2n"],function(c,d,b,a,e){return function(f,g,h){b.add(g,
c.base());return{toolbarShow:function(){b.add(g,c.active());e.set(f(),"display","block")},toolbarHide:function(){b.remove(g,c.active());e.set(f(),"display","none")},isVisible:function(){return b.has(g,c.active())},restore:function(){a.remove(g,[c.base(),c.active()]);d.setAll(g,h)}}}});l("1m","24 2v 2w 6 2e 2x 1a 2m 1b 2y 2f".split(" "),function(c,d,b,a,e,f,g,h,k,l,n){return{replace:function(p,q){var r=a.deepMerge(q,{content:{inline:p}}),s=g.clone(p),t=e(r),u=b(t.element,p,s),v=f(u.toolbarHide,u.toolbarShow,
!1),w=function(){var a=u.isVisible();v.on();!1===a&&t.activateInline()},x=function(){t.deactivateInline();v.off()},y=d.register(p,t.element,w,x),r=function(){l.active().each(function(a){k.eq(a,p)||x()})};r();t.events.connected.bind(r);t.events.loaded.bind(function(){t.content().getSelection().bind(w)});var z=t.focus,r={polish:a.merge(t,{focus:function(){w();z()}}),restore:function(a){y.destroy();u.restore();n.set(p,a);return p}};t.connect(h.body());c.set(t,n.get(p));return r}}});l("4c",["1a","l"],
function(c,d){return{attach:function(b,a,e,f){if(4!==arguments.length)throw"requires 4 parameters";var g=function(a){return function(){var e=d.fromTag("input");c.setAll(e,{type:"hidden",name:a});b.append(e.dom());return function(a){e.val(a)}}},h=e.getOrThunk(g(a)),k=f.getOrThunk(g(a+"_styles"));return function(a){h(a.content);k(a.styles)}}}});l("4d",[],function(){return function(c){var d=!1;return{submit:function(){d=!0;c.submit[0]?c.submit[0].click():c.submit.click?c.submit.click():c.submit();d=
!1},inprogress:function(){return d}}}});l("30",["4c","4d"],function(c,d){var b=function(a,b){var c=a.onsubmit,g=d(a);a.onsubmit=function(d){if(g.inprogress())return!0;b(function(){c&&!1===c.apply(a)||setTimeout(g.submit,0)});return!1};return{unbind:function(){a.onsubmit=c}}};return{attachToFormSubmit:b,attachToParentFormSubmit:function(a,d,f,g,h){if(5!==arguments.length)throw"requires 5 parameters";var k=a.parents("form:first");if(0!==k.size()){var l=k.get(0),n=c.attach(k,d,g,h);b(l,function(a){n(f());
a()})}}}});l("1n","2z 2c 24 2d 30 s 2e 1a 2n l 2o 2q 31 2a 32".split(" "),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s){var t=function(a,c,e,h){k.set(c,"display","none");var l=g(d.withOptions(c,h)),m=s.get(c);l.connect(a);b.set(l,m);var n=!0===h.autosubmit?u(c,l):f.none();return{polish:l,restore:function(b){n.each(function(a){a.unbind()});s.set(c,b);e.fold(function(){k.remove(c,"display")},function(a){k.set(c,"display",a)});p.remove(a);return c}}},u=function(a,c){return q.closest(a,"form").map(function(d){return e.attachToFormSubmit(d.dom(),
function(d){c.uploadImages(function(){s.set(a,b.get(c));d()})})})};return{replace:function(b,d){var e=k.getRaw(b,"display");return r.parent(b).fold(function(){return null},function(){var f=h.get(b,"id"),f=f?"ephox_"+f:c.generate("ephox"),g=l.fromTag("div");h.set(g,"id",f);k.copy(b,g);a.copyFrom(b,g);n.before(b,g);return t(g,b,e,d)})}}});l("e","1c 1d 5 1l 1m 1n 6 7 r".split(" "),function(c,d,b,a,e,f,g,h,k){var l={textarea:f,div:a,body:c},n={div:e,blockquote:e,article:e,aside:e,figure:e,figcaption:e,
footer:e,header:e,nav:e,section:e};return function(a){var c=function(c,e){var f=k.cached(function(){var c=g.deepMerge(d(e),a);return b.setupResources(c)});return{constructors:h.constant(c),options:f}};return{classic:function(a){return c(l,a)},inline:function(a){a=g.deepMerge({ui:{toolbar:{draggable:!0}}},a);return c(n,a)}}}});l("h",["i","7"],function(c,d){var b=function(a){return{name:a.name,required:d.constant(!1),validate:a.validate}};return{bool:d.compose(b,c.bool),func:d.compose(b,c.func),number:d.compose(b,
c.number),object:d.compose(b,c.object),string:d.compose(b,c.string)}});l("3","abcdef8ghij7klmno".split(""),function(c,d,b,a,e,f,g,h,k,l,n,p,q,r,s,t,u){return function(v){var w=a(),x=e(v),y=function(a,b){var d;d=c.isString(a)?s.one(a).getOrThunk(p.die("Selector did not match any elements: "+a)):r.fromDom(a);return w.getOrCreate(d,b)},z=function(a,b){c.isString(a)?u.error("Selector did not match a "+b+": ",a):u.error("Element was not a "+b+": ",a);throw new t("Unable to create textbox.io editor");},
A=b.detect(),D=function(a){c.isString(a)||n(a,[l.domElement("element")]);return c.isString(a)?s.all(a):d.map(a,r.fromDom)},B=function(a,b){var c=D(a),c=d.map(c,function(a){return w.getOrCreate(a,b)});return q.cat(c)};return f.makeReadOnly({replace:function(a,b){n(arguments,[l.stringOrDom("element"),k.object("options")]);return y(a,x.classic(b)).getOrThunk(p.curry(z,a,"div or textarea"))},replaceAll:function(a,b){n(arguments,[l.stringOrArray("elements"),k.object("options")]);return B(a,x.classic(b))},
inline:function(a,b){if(A.deviceType.isTouch())throw new t("Mobile does not not support inline editing");n(arguments,[l.stringOrDom("element"),k.object("options")]);return y(a,x.inline(b)).getOrThunk(p.curry(z,a,"supported tag for inline editing"))},inlineAll:function(a,b){if(A.deviceType.isTouch())throw new t("Mobile does not not support inline editing");n(arguments,[l.stringOrArray("elements"),k.object("options")]);return B(a,x.inline(b))},get:function(a){n(arguments,[l.string("selector")]);return w.get(a)},
getActiveEditor:function(){return w.getActiveEditor().getOr(null)},definePlugin:function(a,b){n(arguments,[l.string("namespace"),l.object("code")]);h.get(a).each(function(){throw new t("namespace "+a+" is already defined");});if(void 0===b.initialize||!c.isFunction(b.initialize))throw new t("plugin does not have an initialize function");return h.register(a,b)},version:g,isSupported:p.constant(!0)})}});l("4",["c","p","o","q"],function(c,d,b,a){var e=function(a){return d.error("ERROR: Textbox.io requires "+
a+" or above")},f=c.detect().os,g=c.detect().browser,h="CSS1Compat"===a.compatMode||"html"===a.doctype;return{supported:function(){if(g.isIE()&&11>g.version.major)return e("Internet Explorer 11");if(f.isOSX()&&g.isSafari()&&9>g.version.major)return e("Safari 9");if(f.isiOS()&&9>f.version.major)return e("iOS 9");if(!h&&g.isIE())return d.error("ERROR: Document is not in standards mode. Textbox.io requires standards mode on Internet Explorer.");h||void 0===b.warn||b.warn("WARNING: Document is not in standards mode. Textbox.io may experience user interface issues.");
return d.value()}}});l("0","1234567".split(""),function(c,d,b,a,e,f,g){var h=function(a){c.textboxio=a},k=g.compose(h,d);return function(){var d=c.install;c.install=function(g,l){c.install=d;a.supported().fold(k,function(){var a=null===l||void 0===l?{onprem:!0}:l,a=null===g||void 0===g?a:f.deepMerge(a,{resources:g});h(b(a));e.speculate(a.resources)})}}});ja("0")()})();
install();
